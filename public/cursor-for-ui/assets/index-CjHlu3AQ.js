(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function t(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(s){if(s.ep)return;s.ep=!0;const a=t(s);fetch(s.href,a)}})();var wd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ug(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var jp={exports:{}},cu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var q_;function zC(){if(q_)return cu;q_=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,s,a){var l=null;if(a!==void 0&&(l=""+a),s.key!==void 0&&(l=""+s.key),"key"in s){a={};for(var c in s)c!=="key"&&(a[c]=s[c])}else a=s;return s=a.ref,{$$typeof:n,type:i,key:l,ref:s!==void 0?s:null,props:a}}return cu.Fragment=e,cu.jsx=t,cu.jsxs=t,cu}var Y_;function FC(){return Y_||(Y_=1,jp.exports=zC()),jp.exports}var M=FC(),Wp={exports:{}},We={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $_;function BC(){if($_)return We;$_=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),T=Symbol.iterator;function w(P){return P===null||typeof P!="object"?null:(P=T&&P[T]||P["@@iterator"],typeof P=="function"?P:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,x={};function N(P,G,oe){this.props=P,this.context=G,this.refs=x,this.updater=oe||C}N.prototype.isReactComponent={},N.prototype.setState=function(P,G){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,G,"setState")},N.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function z(){}z.prototype=N.prototype;function B(P,G,oe){this.props=P,this.context=G,this.refs=x,this.updater=oe||C}var Y=B.prototype=new z;Y.constructor=B,b(Y,N.prototype),Y.isPureReactComponent=!0;var J=Array.isArray;function $(){}var L={H:null,A:null,T:null,S:null},V=Object.prototype.hasOwnProperty;function k(P,G,oe){var Q=oe.ref;return{$$typeof:n,type:P,key:G,ref:Q!==void 0?Q:null,props:oe}}function H(P,G){return k(P.type,G,P.props)}function K(P){return typeof P=="object"&&P!==null&&P.$$typeof===n}function U(P){var G={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(oe){return G[oe]})}var O=/\/+/g;function D(P,G){return typeof P=="object"&&P!==null&&P.key!=null?U(""+P.key):G.toString(36)}function he(P){switch(P.status){case"fulfilled":return P.value;case"rejected":throw P.reason;default:switch(typeof P.status=="string"?P.then($,$):(P.status="pending",P.then(function(G){P.status==="pending"&&(P.status="fulfilled",P.value=G)},function(G){P.status==="pending"&&(P.status="rejected",P.reason=G)})),P.status){case"fulfilled":return P.value;case"rejected":throw P.reason}}throw P}function ie(P,G,oe,Q,Z){var ge=typeof P;(ge==="undefined"||ge==="boolean")&&(P=null);var Ae=!1;if(P===null)Ae=!0;else switch(ge){case"bigint":case"string":case"number":Ae=!0;break;case"object":switch(P.$$typeof){case n:case e:Ae=!0;break;case y:return Ae=P._init,ie(Ae(P._payload),G,oe,Q,Z)}}if(Ae)return Z=Z(P),Ae=Q===""?"."+D(P,0):Q,J(Z)?(oe="",Ae!=null&&(oe=Ae.replace(O,"$&/")+"/"),ie(Z,G,oe,"",function(je){return je})):Z!=null&&(K(Z)&&(Z=H(Z,oe+(Z.key==null||P&&P.key===Z.key?"":(""+Z.key).replace(O,"$&/")+"/")+Ae)),G.push(Z)),1;Ae=0;var Ne=Q===""?".":Q+":";if(J(P))for(var De=0;De<P.length;De++)Q=P[De],ge=Ne+D(Q,De),Ae+=ie(Q,G,oe,ge,Z);else if(De=w(P),typeof De=="function")for(P=De.call(P),De=0;!(Q=P.next()).done;)Q=Q.value,ge=Ne+D(Q,De++),Ae+=ie(Q,G,oe,ge,Z);else if(ge==="object"){if(typeof P.then=="function")return ie(he(P),G,oe,Q,Z);throw G=String(P),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.")}return Ae}function re(P,G,oe){if(P==null)return P;var Q=[],Z=0;return ie(P,Q,"","",function(ge){return G.call(oe,ge,Z++)}),Q}function be(P){if(P._status===-1){var G=P._result;G=G(),G.then(function(oe){(P._status===0||P._status===-1)&&(P._status=1,P._result=oe)},function(oe){(P._status===0||P._status===-1)&&(P._status=2,P._result=oe)}),P._status===-1&&(P._status=0,P._result=G)}if(P._status===1)return P._result.default;throw P._result}var ne=typeof reportError=="function"?reportError:function(P){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var G=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof P=="object"&&P!==null&&typeof P.message=="string"?String(P.message):String(P),error:P});if(!window.dispatchEvent(G))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",P);return}console.error(P)},Te={map:re,forEach:function(P,G,oe){re(P,function(){G.apply(this,arguments)},oe)},count:function(P){var G=0;return re(P,function(){G++}),G},toArray:function(P){return re(P,function(G){return G})||[]},only:function(P){if(!K(P))throw Error("React.Children.only expected to receive a single React element child.");return P}};return We.Activity=E,We.Children=Te,We.Component=N,We.Fragment=t,We.Profiler=s,We.PureComponent=B,We.StrictMode=i,We.Suspense=f,We.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=L,We.__COMPILER_RUNTIME={__proto__:null,c:function(P){return L.H.useMemoCache(P)}},We.cache=function(P){return function(){return P.apply(null,arguments)}},We.cacheSignal=function(){return null},We.cloneElement=function(P,G,oe){if(P==null)throw Error("The argument must be a React element, but you passed "+P+".");var Q=b({},P.props),Z=P.key;if(G!=null)for(ge in G.key!==void 0&&(Z=""+G.key),G)!V.call(G,ge)||ge==="key"||ge==="__self"||ge==="__source"||ge==="ref"&&G.ref===void 0||(Q[ge]=G[ge]);var ge=arguments.length-2;if(ge===1)Q.children=oe;else if(1<ge){for(var Ae=Array(ge),Ne=0;Ne<ge;Ne++)Ae[Ne]=arguments[Ne+2];Q.children=Ae}return k(P.type,Z,Q)},We.createContext=function(P){return P={$$typeof:l,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null},P.Provider=P,P.Consumer={$$typeof:a,_context:P},P},We.createElement=function(P,G,oe){var Q,Z={},ge=null;if(G!=null)for(Q in G.key!==void 0&&(ge=""+G.key),G)V.call(G,Q)&&Q!=="key"&&Q!=="__self"&&Q!=="__source"&&(Z[Q]=G[Q]);var Ae=arguments.length-2;if(Ae===1)Z.children=oe;else if(1<Ae){for(var Ne=Array(Ae),De=0;De<Ae;De++)Ne[De]=arguments[De+2];Z.children=Ne}if(P&&P.defaultProps)for(Q in Ae=P.defaultProps,Ae)Z[Q]===void 0&&(Z[Q]=Ae[Q]);return k(P,ge,Z)},We.createRef=function(){return{current:null}},We.forwardRef=function(P){return{$$typeof:c,render:P}},We.isValidElement=K,We.lazy=function(P){return{$$typeof:y,_payload:{_status:-1,_result:P},_init:be}},We.memo=function(P,G){return{$$typeof:h,type:P,compare:G===void 0?null:G}},We.startTransition=function(P){var G=L.T,oe={};L.T=oe;try{var Q=P(),Z=L.S;Z!==null&&Z(oe,Q),typeof Q=="object"&&Q!==null&&typeof Q.then=="function"&&Q.then($,ne)}catch(ge){ne(ge)}finally{G!==null&&oe.types!==null&&(G.types=oe.types),L.T=G}},We.unstable_useCacheRefresh=function(){return L.H.useCacheRefresh()},We.use=function(P){return L.H.use(P)},We.useActionState=function(P,G,oe){return L.H.useActionState(P,G,oe)},We.useCallback=function(P,G){return L.H.useCallback(P,G)},We.useContext=function(P){return L.H.useContext(P)},We.useDebugValue=function(){},We.useDeferredValue=function(P,G){return L.H.useDeferredValue(P,G)},We.useEffect=function(P,G){return L.H.useEffect(P,G)},We.useEffectEvent=function(P){return L.H.useEffectEvent(P)},We.useId=function(){return L.H.useId()},We.useImperativeHandle=function(P,G,oe){return L.H.useImperativeHandle(P,G,oe)},We.useInsertionEffect=function(P,G){return L.H.useInsertionEffect(P,G)},We.useLayoutEffect=function(P,G){return L.H.useLayoutEffect(P,G)},We.useMemo=function(P,G){return L.H.useMemo(P,G)},We.useOptimistic=function(P,G){return L.H.useOptimistic(P,G)},We.useReducer=function(P,G,oe){return L.H.useReducer(P,G,oe)},We.useRef=function(P){return L.H.useRef(P)},We.useState=function(P){return L.H.useState(P)},We.useSyncExternalStore=function(P,G,oe){return L.H.useSyncExternalStore(P,G,oe)},We.useTransition=function(){return L.H.useTransition()},We.version="19.2.4",We}var K_;function cg(){return K_||(K_=1,Wp.exports=BC()),Wp.exports}var Ve=cg();const M1=ug(Ve);var Qp={exports:{}},du={},Xp={exports:{}},Zp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var J_;function GC(){return J_||(J_=1,(function(n){function e(ie,re){var be=ie.length;ie.push(re);e:for(;0<be;){var ne=be-1>>>1,Te=ie[ne];if(0<s(Te,re))ie[ne]=re,ie[be]=Te,be=ne;else break e}}function t(ie){return ie.length===0?null:ie[0]}function i(ie){if(ie.length===0)return null;var re=ie[0],be=ie.pop();if(be!==re){ie[0]=be;e:for(var ne=0,Te=ie.length,P=Te>>>1;ne<P;){var G=2*(ne+1)-1,oe=ie[G],Q=G+1,Z=ie[Q];if(0>s(oe,be))Q<Te&&0>s(Z,oe)?(ie[ne]=Z,ie[Q]=be,ne=Q):(ie[ne]=oe,ie[G]=be,ne=G);else if(Q<Te&&0>s(Z,be))ie[ne]=Z,ie[Q]=be,ne=Q;else break e}}return re}function s(ie,re){var be=ie.sortIndex-re.sortIndex;return be!==0?be:ie.id-re.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var l=Date,c=l.now();n.unstable_now=function(){return l.now()-c}}var f=[],h=[],y=1,E=null,T=3,w=!1,C=!1,b=!1,x=!1,N=typeof setTimeout=="function"?setTimeout:null,z=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;function Y(ie){for(var re=t(h);re!==null;){if(re.callback===null)i(h);else if(re.startTime<=ie)i(h),re.sortIndex=re.expirationTime,e(f,re);else break;re=t(h)}}function J(ie){if(b=!1,Y(ie),!C)if(t(f)!==null)C=!0,$||($=!0,U());else{var re=t(h);re!==null&&he(J,re.startTime-ie)}}var $=!1,L=-1,V=5,k=-1;function H(){return x?!0:!(n.unstable_now()-k<V)}function K(){if(x=!1,$){var ie=n.unstable_now();k=ie;var re=!0;try{e:{C=!1,b&&(b=!1,z(L),L=-1),w=!0;var be=T;try{t:{for(Y(ie),E=t(f);E!==null&&!(E.expirationTime>ie&&H());){var ne=E.callback;if(typeof ne=="function"){E.callback=null,T=E.priorityLevel;var Te=ne(E.expirationTime<=ie);if(ie=n.unstable_now(),typeof Te=="function"){E.callback=Te,Y(ie),re=!0;break t}E===t(f)&&i(f),Y(ie)}else i(f);E=t(f)}if(E!==null)re=!0;else{var P=t(h);P!==null&&he(J,P.startTime-ie),re=!1}}break e}finally{E=null,T=be,w=!1}re=void 0}}finally{re?U():$=!1}}}var U;if(typeof B=="function")U=function(){B(K)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,D=O.port2;O.port1.onmessage=K,U=function(){D.postMessage(null)}}else U=function(){N(K,0)};function he(ie,re){L=N(function(){ie(n.unstable_now())},re)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(ie){ie.callback=null},n.unstable_forceFrameRate=function(ie){0>ie||125<ie?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<ie?Math.floor(1e3/ie):5},n.unstable_getCurrentPriorityLevel=function(){return T},n.unstable_next=function(ie){switch(T){case 1:case 2:case 3:var re=3;break;default:re=T}var be=T;T=re;try{return ie()}finally{T=be}},n.unstable_requestPaint=function(){x=!0},n.unstable_runWithPriority=function(ie,re){switch(ie){case 1:case 2:case 3:case 4:case 5:break;default:ie=3}var be=T;T=ie;try{return re()}finally{T=be}},n.unstable_scheduleCallback=function(ie,re,be){var ne=n.unstable_now();switch(typeof be=="object"&&be!==null?(be=be.delay,be=typeof be=="number"&&0<be?ne+be:ne):be=ne,ie){case 1:var Te=-1;break;case 2:Te=250;break;case 5:Te=1073741823;break;case 4:Te=1e4;break;default:Te=5e3}return Te=be+Te,ie={id:y++,callback:re,priorityLevel:ie,startTime:be,expirationTime:Te,sortIndex:-1},be>ne?(ie.sortIndex=be,e(h,ie),t(f)===null&&ie===t(h)&&(b?(z(L),L=-1):b=!0,he(J,be-ne))):(ie.sortIndex=Te,e(f,ie),C||w||(C=!0,$||($=!0,U()))),ie},n.unstable_shouldYield=H,n.unstable_wrapCallback=function(ie){var re=T;return function(){var be=T;T=re;try{return ie.apply(this,arguments)}finally{T=be}}}})(Zp)),Zp}var j_;function HC(){return j_||(j_=1,Xp.exports=GC()),Xp.exports}var em={exports:{}},wn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W_;function qC(){if(W_)return wn;W_=1;var n=cg();function e(f){var h="https://react.dev/errors/"+f;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)h+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+f+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},s=Symbol.for("react.portal");function a(f,h,y){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:E==null?null:""+E,children:f,containerInfo:h,implementation:y}}var l=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(f,h){if(f==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return wn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,wn.createPortal=function(f,h){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return a(f,h,null,y)},wn.flushSync=function(f){var h=l.T,y=i.p;try{if(l.T=null,i.p=2,f)return f()}finally{l.T=h,i.p=y,i.d.f()}},wn.preconnect=function(f,h){typeof f=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,i.d.C(f,h))},wn.prefetchDNS=function(f){typeof f=="string"&&i.d.D(f)},wn.preinit=function(f,h){if(typeof f=="string"&&h&&typeof h.as=="string"){var y=h.as,E=c(y,h.crossOrigin),T=typeof h.integrity=="string"?h.integrity:void 0,w=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;y==="style"?i.d.S(f,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:E,integrity:T,fetchPriority:w}):y==="script"&&i.d.X(f,{crossOrigin:E,integrity:T,fetchPriority:w,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},wn.preinitModule=function(f,h){if(typeof f=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var y=c(h.as,h.crossOrigin);i.d.M(f,{crossOrigin:y,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&i.d.M(f)},wn.preload=function(f,h){if(typeof f=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var y=h.as,E=c(y,h.crossOrigin);i.d.L(f,y,{crossOrigin:E,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},wn.preloadModule=function(f,h){if(typeof f=="string")if(h){var y=c(h.as,h.crossOrigin);i.d.m(f,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:y,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else i.d.m(f)},wn.requestFormReset=function(f){i.d.r(f)},wn.unstable_batchedUpdates=function(f,h){return f(h)},wn.useFormState=function(f,h,y){return l.H.useFormState(f,h,y)},wn.useFormStatus=function(){return l.H.useHostTransitionStatus()},wn.version="19.2.4",wn}var Q_;function YC(){if(Q_)return em.exports;Q_=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),em.exports=qC(),em.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var X_;function $C(){if(X_)return du;X_=1;var n=HC(),e=cg(),t=YC();function i(r){var o="https://react.dev/errors/"+r;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)o+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+r+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function a(r){var o=r,u=r;if(r.alternate)for(;o.return;)o=o.return;else{r=o;do o=r,(o.flags&4098)!==0&&(u=o.return),r=o.return;while(r)}return o.tag===3?u:null}function l(r){if(r.tag===13){var o=r.memoizedState;if(o===null&&(r=r.alternate,r!==null&&(o=r.memoizedState)),o!==null)return o.dehydrated}return null}function c(r){if(r.tag===31){var o=r.memoizedState;if(o===null&&(r=r.alternate,r!==null&&(o=r.memoizedState)),o!==null)return o.dehydrated}return null}function f(r){if(a(r)!==r)throw Error(i(188))}function h(r){var o=r.alternate;if(!o){if(o=a(r),o===null)throw Error(i(188));return o!==r?null:r}for(var u=r,d=o;;){var v=u.return;if(v===null)break;var _=v.alternate;if(_===null){if(d=v.return,d!==null){u=d;continue}break}if(v.child===_.child){for(_=v.child;_;){if(_===u)return f(v),r;if(_===d)return f(v),o;_=_.sibling}throw Error(i(188))}if(u.return!==d.return)u=v,d=_;else{for(var A=!1,F=v.child;F;){if(F===u){A=!0,u=v,d=_;break}if(F===d){A=!0,d=v,u=_;break}F=F.sibling}if(!A){for(F=_.child;F;){if(F===u){A=!0,u=_,d=v;break}if(F===d){A=!0,d=_,u=v;break}F=F.sibling}if(!A)throw Error(i(189))}}if(u.alternate!==d)throw Error(i(190))}if(u.tag!==3)throw Error(i(188));return u.stateNode.current===u?r:o}function y(r){var o=r.tag;if(o===5||o===26||o===27||o===6)return r;for(r=r.child;r!==null;){if(o=y(r),o!==null)return o;r=r.sibling}return null}var E=Object.assign,T=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),C=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),z=Symbol.for("react.consumer"),B=Symbol.for("react.context"),Y=Symbol.for("react.forward_ref"),J=Symbol.for("react.suspense"),$=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),V=Symbol.for("react.lazy"),k=Symbol.for("react.activity"),H=Symbol.for("react.memo_cache_sentinel"),K=Symbol.iterator;function U(r){return r===null||typeof r!="object"?null:(r=K&&r[K]||r["@@iterator"],typeof r=="function"?r:null)}var O=Symbol.for("react.client.reference");function D(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===O?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case b:return"Fragment";case N:return"Profiler";case x:return"StrictMode";case J:return"Suspense";case $:return"SuspenseList";case k:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case C:return"Portal";case B:return r.displayName||"Context";case z:return(r._context.displayName||"Context")+".Consumer";case Y:var o=r.render;return r=r.displayName,r||(r=o.displayName||o.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case L:return o=r.displayName||null,o!==null?o:D(r.type)||"Memo";case V:o=r._payload,r=r._init;try{return D(r(o))}catch{}}return null}var he=Array.isArray,ie=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,be={pending:!1,data:null,method:null,action:null},ne=[],Te=-1;function P(r){return{current:r}}function G(r){0>Te||(r.current=ne[Te],ne[Te]=null,Te--)}function oe(r,o){Te++,ne[Te]=r.current,r.current=o}var Q=P(null),Z=P(null),ge=P(null),Ae=P(null);function Ne(r,o){switch(oe(ge,o),oe(Z,r),oe(Q,null),o.nodeType){case 9:case 11:r=(r=o.documentElement)&&(r=r.namespaceURI)?h_(r):0;break;default:if(r=o.tagName,o=o.namespaceURI)o=h_(o),r=p_(o,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}G(Q),oe(Q,r)}function De(){G(Q),G(Z),G(ge)}function je(r){r.memoizedState!==null&&oe(Ae,r);var o=Q.current,u=p_(o,r.type);o!==u&&(oe(Z,r),oe(Q,u))}function $e(r){Z.current===r&&(G(Q),G(Z)),Ae.current===r&&(G(Ae),ou._currentValue=be)}var Et,kt;function R(r){if(Et===void 0)try{throw Error()}catch(u){var o=u.stack.trim().match(/\n( *(at )?)/);Et=o&&o[1]||"",kt=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Et+r+kt}var _e=!1;function pe(r,o){if(!r||_e)return"";_e=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(o){var Se=function(){throw Error()};if(Object.defineProperty(Se.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Se,[])}catch(me){var de=me}Reflect.construct(r,[],Se)}else{try{Se.call()}catch(me){de=me}r.call(Se.prototype)}}else{try{throw Error()}catch(me){de=me}(Se=r())&&typeof Se.catch=="function"&&Se.catch(function(){})}}catch(me){if(me&&de&&typeof me.stack=="string")return[me.stack,de.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=d.DetermineComponentFrameRoot(),A=_[0],F=_[1];if(A&&F){var X=A.split(`
`),ue=F.split(`
`);for(v=d=0;d<X.length&&!X[d].includes("DetermineComponentFrameRoot");)d++;for(;v<ue.length&&!ue[v].includes("DetermineComponentFrameRoot");)v++;if(d===X.length||v===ue.length)for(d=X.length-1,v=ue.length-1;1<=d&&0<=v&&X[d]!==ue[v];)v--;for(;1<=d&&0<=v;d--,v--)if(X[d]!==ue[v]){if(d!==1||v!==1)do if(d--,v--,0>v||X[d]!==ue[v]){var ye=`
`+X[d].replace(" at new "," at ");return r.displayName&&ye.includes("<anonymous>")&&(ye=ye.replace("<anonymous>",r.displayName)),ye}while(1<=d&&0<=v);break}}}finally{_e=!1,Error.prepareStackTrace=u}return(u=r?r.displayName||r.name:"")?R(u):""}function W(r,o){switch(r.tag){case 26:case 27:case 5:return R(r.type);case 16:return R("Lazy");case 13:return r.child!==o&&o!==null?R("Suspense Fallback"):R("Suspense");case 19:return R("SuspenseList");case 0:case 15:return pe(r.type,!1);case 11:return pe(r.type.render,!1);case 1:return pe(r.type,!0);case 31:return R("Activity");default:return""}}function j(r){try{var o="",u=null;do o+=W(r,u),u=r,r=r.return;while(r);return o}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}var te=Object.prototype.hasOwnProperty,ve=n.unstable_scheduleCallback,Ce=n.unstable_cancelCallback,ce=n.unstable_shouldYield,Ie=n.unstable_requestPaint,ke=n.unstable_now,Re=n.unstable_getCurrentPriorityLevel,Fe=n.unstable_ImmediatePriority,ht=n.unstable_UserBlockingPriority,Ze=n.unstable_NormalPriority,En=n.unstable_LowPriority,Oi=n.unstable_IdlePriority,In=n.log,zi=n.unstable_setDisableYieldValue,ft=null,zt=null;function Tn(r){if(typeof In=="function"&&zi(r),zt&&typeof zt.setStrictMode=="function")try{zt.setStrictMode(ft,r)}catch{}}var yt=Math.clz32?Math.clz32:Ho,Js=Math.log,Qr=Math.LN2;function Ho(r){return r>>>=0,r===0?32:31-(Js(r)/Qr|0)|0}var ei=256,Fi=262144,Nt=4194304;function Rn(r){var o=r&42;if(o!==0)return o;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function Bi(r,o,u){var d=r.pendingLanes;if(d===0)return 0;var v=0,_=r.suspendedLanes,A=r.pingedLanes;r=r.warmLanes;var F=d&134217727;return F!==0?(d=F&~_,d!==0?v=Rn(d):(A&=F,A!==0?v=Rn(A):u||(u=F&~r,u!==0&&(v=Rn(u))))):(F=d&~_,F!==0?v=Rn(F):A!==0?v=Rn(A):u||(u=d&~r,u!==0&&(v=Rn(u)))),v===0?0:o!==0&&o!==v&&(o&_)===0&&(_=v&-v,u=o&-o,_>=u||_===32&&(u&4194048)!==0)?o:v}function vi(r,o){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&o)===0}function Zf(r,o){switch(r){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Zu(){var r=Nt;return Nt<<=1,(Nt&62914560)===0&&(Nt=4194304),r}function Gi(r){for(var o=[],u=0;31>u;u++)o.push(r);return o}function js(r,o){r.pendingLanes|=o,o!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function eh(r,o,u,d,v,_){var A=r.pendingLanes;r.pendingLanes=u,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=u,r.entangledLanes&=u,r.errorRecoveryDisabledLanes&=u,r.shellSuspendCounter=0;var F=r.entanglements,X=r.expirationTimes,ue=r.hiddenUpdates;for(u=A&~u;0<u;){var ye=31-yt(u),Se=1<<ye;F[ye]=0,X[ye]=-1;var de=ue[ye];if(de!==null)for(ue[ye]=null,ye=0;ye<de.length;ye++){var me=de[ye];me!==null&&(me.lane&=-536870913)}u&=~Se}d!==0&&Ws(r,d,0),_!==0&&v===0&&r.tag!==0&&(r.suspendedLanes|=_&~(A&~o))}function Ws(r,o,u){r.pendingLanes|=o,r.suspendedLanes&=~o;var d=31-yt(o);r.entangledLanes|=o,r.entanglements[d]=r.entanglements[d]|1073741824|u&261930}function dl(r,o){var u=r.entangledLanes|=o;for(r=r.entanglements;u;){var d=31-yt(u),v=1<<d;v&o|r[d]&o&&(r[d]|=o),u&=~v}}function fl(r,o){var u=o&-o;return u=(u&42)!==0?1:Qs(u),(u&(r.suspendedLanes|o))!==0?0:u}function Qs(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function mr(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function ec(){var r=re.p;return r!==0?r:(r=window.event,r===void 0?32:V_(r.type))}function _i(r,o){var u=re.p;try{return re.p=r,o()}finally{re.p=u}}var Ei=Math.random().toString(36).slice(2),Kt="__reactFiber$"+Ei,on="__reactProps$"+Ei,Hi="__reactContainer$"+Ei,qo="__reactEvents$"+Ei,th="__reactListeners$"+Ei,tc="__reactHandles$"+Ei,nc="__reactResources$"+Ei,qi="__reactMarker$"+Ei;function Yo(r){delete r[Kt],delete r[on],delete r[qo],delete r[th],delete r[tc]}function Yi(r){var o=r[Kt];if(o)return o;for(var u=r.parentNode;u;){if(o=u[Hi]||u[Kt]){if(u=o.alternate,o.child!==null||u!==null&&u.child!==null)for(r=T_(r);r!==null;){if(u=r[Kt])return u;r=T_(r)}return o}r=u,u=r.parentNode}return null}function ti(r){if(r=r[Kt]||r[Hi]){var o=r.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return r}return null}function Hn(r){var o=r.tag;if(o===5||o===26||o===27||o===6)return r.stateNode;throw Error(i(33))}function $i(r){var o=r[nc];return o||(o=r[nc]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function Jt(r){r[qi]=!0}var hl=new Set,pl={};function Ki(r,o){Ji(r,o),Ji(r+"Capture",o)}function Ji(r,o){for(pl[r]=o,r=0;r<o.length;r++)hl.add(o[r])}var ml=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),gl={},yl={};function ic(r){return te.call(yl,r)?!0:te.call(gl,r)?!1:ml.test(r)?yl[r]=!0:(gl[r]=!0,!1)}function $o(r,o,u){if(ic(o))if(u===null)r.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":r.removeAttribute(o);return;case"boolean":var d=o.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){r.removeAttribute(o);return}}r.setAttribute(o,""+u)}}function qn(r,o,u){if(u===null)r.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttribute(o,""+u)}}function jt(r,o,u,d){if(d===null)r.removeAttribute(u);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(u);return}r.setAttributeNS(o,u,""+d)}}function an(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Xr(r){var o=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function vl(r,o,u){var d=Object.getOwnPropertyDescriptor(r.constructor.prototype,o);if(!r.hasOwnProperty(o)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var v=d.get,_=d.set;return Object.defineProperty(r,o,{configurable:!0,get:function(){return v.call(this)},set:function(A){u=""+A,_.call(this,A)}}),Object.defineProperty(r,o,{enumerable:d.enumerable}),{getValue:function(){return u},setValue:function(A){u=""+A},stopTracking:function(){r._valueTracker=null,delete r[o]}}}}function wt(r){if(!r._valueTracker){var o=Xr(r)?"checked":"value";r._valueTracker=vl(r,o,""+r[o])}}function Xs(r){if(!r)return!1;var o=r._valueTracker;if(!o)return!0;var u=o.getValue(),d="";return r&&(d=Xr(r)?r.checked?"true":"false":r.value),r=d,r!==u?(o.setValue(r),!0):!1}function ji(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var Zs=/[\n"\\]/g;function Pn(r){return r.replace(Zs,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function Ko(r,o,u,d,v,_,A,F){r.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?r.type=A:r.removeAttribute("type"),o!=null?A==="number"?(o===0&&r.value===""||r.value!=o)&&(r.value=""+an(o)):r.value!==""+an(o)&&(r.value=""+an(o)):A!=="submit"&&A!=="reset"||r.removeAttribute("value"),o!=null?_l(r,A,an(o)):u!=null?_l(r,A,an(u)):d!=null&&r.removeAttribute("value"),v==null&&_!=null&&(r.defaultChecked=!!_),v!=null&&(r.checked=v&&typeof v!="function"&&typeof v!="symbol"),F!=null&&typeof F!="function"&&typeof F!="symbol"&&typeof F!="boolean"?r.name=""+an(F):r.removeAttribute("name")}function rc(r,o,u,d,v,_,A,F){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(r.type=_),o!=null||u!=null){if(!(_!=="submit"&&_!=="reset"||o!=null)){wt(r);return}u=u!=null?""+an(u):"",o=o!=null?""+an(o):u,F||o===r.value||(r.value=o),r.defaultValue=o}d=d??v,d=typeof d!="function"&&typeof d!="symbol"&&!!d,r.checked=F?r.checked:!!d,r.defaultChecked=!!d,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(r.name=A),wt(r)}function _l(r,o,u){o==="number"&&ji(r.ownerDocument)===r||r.defaultValue===""+u||(r.defaultValue=""+u)}function Zr(r,o,u,d){if(r=r.options,o){o={};for(var v=0;v<u.length;v++)o["$"+u[v]]=!0;for(u=0;u<r.length;u++)v=o.hasOwnProperty("$"+r[u].value),r[u].selected!==v&&(r[u].selected=v),v&&d&&(r[u].defaultSelected=!0)}else{for(u=""+an(u),o=null,v=0;v<r.length;v++){if(r[v].value===u){r[v].selected=!0,d&&(r[v].defaultSelected=!0);return}o!==null||r[v].disabled||(o=r[v])}o!==null&&(o.selected=!0)}}function sc(r,o,u){if(o!=null&&(o=""+an(o),o!==r.value&&(r.value=o),u==null)){r.defaultValue!==o&&(r.defaultValue=o);return}r.defaultValue=u!=null?""+an(u):""}function es(r,o,u,d){if(o==null){if(d!=null){if(u!=null)throw Error(i(92));if(he(d)){if(1<d.length)throw Error(i(93));d=d[0]}u=d}u==null&&(u=""),o=u}u=an(o),r.defaultValue=u,d=r.textContent,d===u&&d!==""&&d!==null&&(r.value=d),wt(r)}function Ln(r,o){if(o){var u=r.firstChild;if(u&&u===r.lastChild&&u.nodeType===3){u.nodeValue=o;return}}r.textContent=o}var oc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function El(r,o,u){var d=o.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?d?r.setProperty(o,""):o==="float"?r.cssFloat="":r[o]="":d?r.setProperty(o,u):typeof u!="number"||u===0||oc.has(o)?o==="float"?r.cssFloat=u:r[o]=(""+u).trim():r[o]=u+"px"}function Tl(r,o,u){if(o!=null&&typeof o!="object")throw Error(i(62));if(r=r.style,u!=null){for(var d in u)!u.hasOwnProperty(d)||o!=null&&o.hasOwnProperty(d)||(d.indexOf("--")===0?r.setProperty(d,""):d==="float"?r.cssFloat="":r[d]="");for(var v in o)d=o[v],o.hasOwnProperty(v)&&u[v]!==d&&El(r,v,d)}else for(var _ in o)o.hasOwnProperty(_)&&El(r,_,o[_])}function Jo(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ac=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ts=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function jo(r){return ts.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function Ti(){}var wl=null;function ni(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var ns=null,Wi=null;function eo(r){var o=ti(r);if(o&&(r=o.stateNode)){var u=r[on]||null;e:switch(r=o.stateNode,o.type){case"input":if(Ko(r,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),o=u.name,u.type==="radio"&&o!=null){for(u=r;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+Pn(""+o)+'"][type="radio"]'),o=0;o<u.length;o++){var d=u[o];if(d!==r&&d.form===r.form){var v=d[on]||null;if(!v)throw Error(i(90));Ko(d,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(o=0;o<u.length;o++)d=u[o],d.form===r.form&&Xs(d)}break e;case"textarea":sc(r,u.value,u.defaultValue);break e;case"select":o=u.value,o!=null&&Zr(r,!!u.multiple,o,!1)}}}var Wo=!1;function is(r,o,u){if(Wo)return r(o,u);Wo=!0;try{var d=r(o);return d}finally{if(Wo=!1,(ns!==null||Wi!==null)&&(ed(),ns&&(o=ns,r=Wi,Wi=ns=null,eo(o),r)))for(o=0;o<r.length;o++)eo(r[o])}}function wi(r,o){var u=r.stateNode;if(u===null)return null;var d=u[on]||null;if(d===null)return null;u=d[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(r=r.type,d=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!d;break e;default:r=!1}if(r)return null;if(u&&typeof u!="function")throw Error(i(231,o,typeof u));return u}var ii=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),to=!1;if(ii)try{var At={};Object.defineProperty(At,"passive",{get:function(){to=!0}}),window.addEventListener("test",At,At),window.removeEventListener("test",At,At)}catch{to=!1}var Qi=null,Sl=null,no=null;function bl(){if(no)return no;var r,o=Sl,u=o.length,d,v="value"in Qi?Qi.value:Qi.textContent,_=v.length;for(r=0;r<u&&o[r]===v[r];r++);var A=u-r;for(d=1;d<=A&&o[u-d]===v[_-d];d++);return no=v.slice(r,1<d?1-d:void 0)}function io(r){var o=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&o===13&&(r=13)):r=o,r===10&&(r=13),32<=r||r===13?r:0}function gr(){return!0}function Si(){return!1}function dn(r){function o(u,d,v,_,A){this._reactName=u,this._targetInst=v,this.type=d,this.nativeEvent=_,this.target=A,this.currentTarget=null;for(var F in r)r.hasOwnProperty(F)&&(u=r[F],this[F]=u?u(_):_[F]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?gr:Si,this.isPropagationStopped=Si,this}return E(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=gr)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=gr)},persist:function(){},isPersistent:gr}),o}var yr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xi=dn(yr),rs=E({},yr,{view:0,detail:0}),Al=dn(rs),ss,Qo,Zi,Xo=E({},rs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:os,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Zi&&(Zi&&r.type==="mousemove"?(ss=r.screenX-Zi.screenX,Qo=r.screenY-Zi.screenY):Qo=ss=0,Zi=r),ss)},movementY:function(r){return"movementY"in r?r.movementY:Qo}}),xl=dn(Xo),ro=E({},Xo,{dataTransfer:0}),lc=dn(ro),uc=E({},rs,{relatedTarget:0}),so=dn(uc),Cl=E({},yr,{animationName:0,elapsedTime:0,pseudoElement:0}),cc=dn(Cl),Zo=E({},yr,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),dc=dn(Zo),fc=E({},yr,{data:0}),er=dn(fc),hc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gc(r){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(r):(r=mc[r])?!!o[r]:!1}function os(){return gc}var Nn=E({},rs,{key:function(r){if(r.key){var o=hc[r.key]||r.key;if(o!=="Unidentified")return o}return r.type==="keypress"?(r=io(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?pc[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:os,charCode:function(r){return r.type==="keypress"?io(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?io(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),yc=dn(Nn),vc=E({},Xo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),vr=dn(vc),g=E({},rs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:os}),S=dn(g),I=E({},yr,{propertyName:0,elapsedTime:0,pseudoElement:0}),q=dn(I),ae=E({},Xo,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),fe=dn(ae),Me=E({},yr,{newState:0,oldState:0}),et=dn(Me),Gt=[9,13,27,32],vt=ii&&"CompositionEvent"in window,Ut=null;ii&&"documentMode"in document&&(Ut=document.documentMode);var ri=ii&&"TextEvent"in window&&!Ut,tr=ii&&(!vt||Ut&&8<Ut&&11>=Ut),bi=" ",Ai=!1;function oo(r,o){switch(r){case"keyup":return Gt.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ea(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var ta=!1;function ux(r,o){switch(r){case"compositionend":return ea(o);case"keypress":return o.which!==32?null:(Ai=!0,bi);case"textInput":return r=o.data,r===bi&&Ai?null:r;default:return null}}function cx(r,o){if(ta)return r==="compositionend"||!vt&&oo(r,o)?(r=bl(),no=Sl=Qi=null,ta=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return tr&&o.locale!=="ko"?null:o.data;default:return null}}var dx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function b0(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o==="input"?!!dx[r.type]:o==="textarea"}function A0(r,o,u,d){ns?Wi?Wi.push(d):Wi=[d]:ns=d,o=ad(o,"onChange"),0<o.length&&(u=new Xi("onChange","change",null,u,d),r.push({event:u,listeners:o}))}var Il=null,Rl=null;function fx(r){a_(r,0)}function _c(r){var o=Hn(r);if(Xs(o))return r}function x0(r,o){if(r==="change")return o}var C0=!1;if(ii){var nh;if(ii){var ih="oninput"in document;if(!ih){var I0=document.createElement("div");I0.setAttribute("oninput","return;"),ih=typeof I0.oninput=="function"}nh=ih}else nh=!1;C0=nh&&(!document.documentMode||9<document.documentMode)}function R0(){Il&&(Il.detachEvent("onpropertychange",N0),Rl=Il=null)}function N0(r){if(r.propertyName==="value"&&_c(Rl)){var o=[];A0(o,Rl,r,ni(r)),is(fx,o)}}function hx(r,o,u){r==="focusin"?(R0(),Il=o,Rl=u,Il.attachEvent("onpropertychange",N0)):r==="focusout"&&R0()}function px(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return _c(Rl)}function mx(r,o){if(r==="click")return _c(o)}function gx(r,o){if(r==="input"||r==="change")return _c(o)}function yx(r,o){return r===o&&(r!==0||1/r===1/o)||r!==r&&o!==o}var Yn=typeof Object.is=="function"?Object.is:yx;function Nl(r,o){if(Yn(r,o))return!0;if(typeof r!="object"||r===null||typeof o!="object"||o===null)return!1;var u=Object.keys(r),d=Object.keys(o);if(u.length!==d.length)return!1;for(d=0;d<u.length;d++){var v=u[d];if(!te.call(o,v)||!Yn(r[v],o[v]))return!1}return!0}function M0(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function k0(r,o){var u=M0(r);r=0;for(var d;u;){if(u.nodeType===3){if(d=r+u.textContent.length,r<=o&&d>=o)return{node:u,offset:o-r};r=d}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=M0(u)}}function D0(r,o){return r&&o?r===o?!0:r&&r.nodeType===3?!1:o&&o.nodeType===3?D0(r,o.parentNode):"contains"in r?r.contains(o):r.compareDocumentPosition?!!(r.compareDocumentPosition(o)&16):!1:!1}function P0(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var o=ji(r.document);o instanceof r.HTMLIFrameElement;){try{var u=typeof o.contentWindow.location.href=="string"}catch{u=!1}if(u)r=o.contentWindow;else break;o=ji(r.document)}return o}function rh(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o&&(o==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||o==="textarea"||r.contentEditable==="true")}var vx=ii&&"documentMode"in document&&11>=document.documentMode,na=null,sh=null,Ml=null,oh=!1;function L0(r,o,u){var d=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;oh||na==null||na!==ji(d)||(d=na,"selectionStart"in d&&rh(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Ml&&Nl(Ml,d)||(Ml=d,d=ad(sh,"onSelect"),0<d.length&&(o=new Xi("onSelect","select",null,o,u),r.push({event:o,listeners:d}),o.target=na)))}function ao(r,o){var u={};return u[r.toLowerCase()]=o.toLowerCase(),u["Webkit"+r]="webkit"+o,u["Moz"+r]="moz"+o,u}var ia={animationend:ao("Animation","AnimationEnd"),animationiteration:ao("Animation","AnimationIteration"),animationstart:ao("Animation","AnimationStart"),transitionrun:ao("Transition","TransitionRun"),transitionstart:ao("Transition","TransitionStart"),transitioncancel:ao("Transition","TransitionCancel"),transitionend:ao("Transition","TransitionEnd")},ah={},U0={};ii&&(U0=document.createElement("div").style,"AnimationEvent"in window||(delete ia.animationend.animation,delete ia.animationiteration.animation,delete ia.animationstart.animation),"TransitionEvent"in window||delete ia.transitionend.transition);function lo(r){if(ah[r])return ah[r];if(!ia[r])return r;var o=ia[r],u;for(u in o)if(o.hasOwnProperty(u)&&u in U0)return ah[r]=o[u];return r}var V0=lo("animationend"),O0=lo("animationiteration"),z0=lo("animationstart"),_x=lo("transitionrun"),Ex=lo("transitionstart"),Tx=lo("transitioncancel"),F0=lo("transitionend"),B0=new Map,lh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");lh.push("scrollEnd");function xi(r,o){B0.set(r,o),Ki(o,[r])}var Ec=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},si=[],ra=0,uh=0;function Tc(){for(var r=ra,o=uh=ra=0;o<r;){var u=si[o];si[o++]=null;var d=si[o];si[o++]=null;var v=si[o];si[o++]=null;var _=si[o];if(si[o++]=null,d!==null&&v!==null){var A=d.pending;A===null?v.next=v:(v.next=A.next,A.next=v),d.pending=v}_!==0&&G0(u,v,_)}}function wc(r,o,u,d){si[ra++]=r,si[ra++]=o,si[ra++]=u,si[ra++]=d,uh|=d,r.lanes|=d,r=r.alternate,r!==null&&(r.lanes|=d)}function ch(r,o,u,d){return wc(r,o,u,d),Sc(r)}function uo(r,o){return wc(r,null,null,o),Sc(r)}function G0(r,o,u){r.lanes|=u;var d=r.alternate;d!==null&&(d.lanes|=u);for(var v=!1,_=r.return;_!==null;)_.childLanes|=u,d=_.alternate,d!==null&&(d.childLanes|=u),_.tag===22&&(r=_.stateNode,r===null||r._visibility&1||(v=!0)),r=_,_=_.return;return r.tag===3?(_=r.stateNode,v&&o!==null&&(v=31-yt(u),r=_.hiddenUpdates,d=r[v],d===null?r[v]=[o]:d.push(o),o.lane=u|536870912),_):null}function Sc(r){if(50<Zl)throw Zl=0,_p=null,Error(i(185));for(var o=r.return;o!==null;)r=o,o=r.return;return r.tag===3?r.stateNode:null}var sa={};function wx(r,o,u,d){this.tag=r,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $n(r,o,u,d){return new wx(r,o,u,d)}function dh(r){return r=r.prototype,!(!r||!r.isReactComponent)}function _r(r,o){var u=r.alternate;return u===null?(u=$n(r.tag,o,r.key,r.mode),u.elementType=r.elementType,u.type=r.type,u.stateNode=r.stateNode,u.alternate=r,r.alternate=u):(u.pendingProps=o,u.type=r.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=r.flags&65011712,u.childLanes=r.childLanes,u.lanes=r.lanes,u.child=r.child,u.memoizedProps=r.memoizedProps,u.memoizedState=r.memoizedState,u.updateQueue=r.updateQueue,o=r.dependencies,u.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},u.sibling=r.sibling,u.index=r.index,u.ref=r.ref,u.refCleanup=r.refCleanup,u}function H0(r,o){r.flags&=65011714;var u=r.alternate;return u===null?(r.childLanes=0,r.lanes=o,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=u.childLanes,r.lanes=u.lanes,r.child=u.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=u.memoizedProps,r.memoizedState=u.memoizedState,r.updateQueue=u.updateQueue,r.type=u.type,o=u.dependencies,r.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),r}function bc(r,o,u,d,v,_){var A=0;if(d=r,typeof r=="function")dh(r)&&(A=1);else if(typeof r=="string")A=CC(r,u,Q.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case k:return r=$n(31,u,o,v),r.elementType=k,r.lanes=_,r;case b:return co(u.children,v,_,o);case x:A=8,v|=24;break;case N:return r=$n(12,u,o,v|2),r.elementType=N,r.lanes=_,r;case J:return r=$n(13,u,o,v),r.elementType=J,r.lanes=_,r;case $:return r=$n(19,u,o,v),r.elementType=$,r.lanes=_,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case B:A=10;break e;case z:A=9;break e;case Y:A=11;break e;case L:A=14;break e;case V:A=16,d=null;break e}A=29,u=Error(i(130,r===null?"null":typeof r,"")),d=null}return o=$n(A,u,o,v),o.elementType=r,o.type=d,o.lanes=_,o}function co(r,o,u,d){return r=$n(7,r,d,o),r.lanes=u,r}function fh(r,o,u){return r=$n(6,r,null,o),r.lanes=u,r}function q0(r){var o=$n(18,null,null,0);return o.stateNode=r,o}function hh(r,o,u){return o=$n(4,r.children!==null?r.children:[],r.key,o),o.lanes=u,o.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},o}var Y0=new WeakMap;function oi(r,o){if(typeof r=="object"&&r!==null){var u=Y0.get(r);return u!==void 0?u:(o={value:r,source:o,stack:j(o)},Y0.set(r,o),o)}return{value:r,source:o,stack:j(o)}}var oa=[],aa=0,Ac=null,kl=0,ai=[],li=0,as=null,nr=1,ir="";function Er(r,o){oa[aa++]=kl,oa[aa++]=Ac,Ac=r,kl=o}function $0(r,o,u){ai[li++]=nr,ai[li++]=ir,ai[li++]=as,as=r;var d=nr;r=ir;var v=32-yt(d)-1;d&=~(1<<v),u+=1;var _=32-yt(o)+v;if(30<_){var A=v-v%5;_=(d&(1<<A)-1).toString(32),d>>=A,v-=A,nr=1<<32-yt(o)+v|u<<v|d,ir=_+r}else nr=1<<_|u<<v|d,ir=r}function ph(r){r.return!==null&&(Er(r,1),$0(r,1,0))}function mh(r){for(;r===Ac;)Ac=oa[--aa],oa[aa]=null,kl=oa[--aa],oa[aa]=null;for(;r===as;)as=ai[--li],ai[li]=null,ir=ai[--li],ai[li]=null,nr=ai[--li],ai[li]=null}function K0(r,o){ai[li++]=nr,ai[li++]=ir,ai[li++]=as,nr=o.id,ir=o.overflow,as=r}var fn=null,Dt=null,ct=!1,ls=null,ui=!1,gh=Error(i(519));function us(r){var o=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Dl(oi(o,r)),gh}function J0(r){var o=r.stateNode,u=r.type,d=r.memoizedProps;switch(o[Kt]=r,o[on]=d,u){case"dialog":rt("cancel",o),rt("close",o);break;case"iframe":case"object":case"embed":rt("load",o);break;case"video":case"audio":for(u=0;u<tu.length;u++)rt(tu[u],o);break;case"source":rt("error",o);break;case"img":case"image":case"link":rt("error",o),rt("load",o);break;case"details":rt("toggle",o);break;case"input":rt("invalid",o),rc(o,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0);break;case"select":rt("invalid",o);break;case"textarea":rt("invalid",o),es(o,d.value,d.defaultValue,d.children)}u=d.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||o.textContent===""+u||d.suppressHydrationWarning===!0||d_(o.textContent,u)?(d.popover!=null&&(rt("beforetoggle",o),rt("toggle",o)),d.onScroll!=null&&rt("scroll",o),d.onScrollEnd!=null&&rt("scrollend",o),d.onClick!=null&&(o.onclick=Ti),o=!0):o=!1,o||us(r,!0)}function j0(r){for(fn=r.return;fn;)switch(fn.tag){case 5:case 31:case 13:ui=!1;return;case 27:case 3:ui=!0;return;default:fn=fn.return}}function la(r){if(r!==fn)return!1;if(!ct)return j0(r),ct=!0,!1;var o=r.tag,u;if((u=o!==3&&o!==27)&&((u=o===5)&&(u=r.type,u=!(u!=="form"&&u!=="button")||Pp(r.type,r.memoizedProps)),u=!u),u&&Dt&&us(r),j0(r),o===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));Dt=E_(r)}else if(o===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));Dt=E_(r)}else o===27?(o=Dt,Ss(r.type)?(r=zp,zp=null,Dt=r):Dt=o):Dt=fn?di(r.stateNode.nextSibling):null;return!0}function fo(){Dt=fn=null,ct=!1}function yh(){var r=ls;return r!==null&&(zn===null?zn=r:zn.push.apply(zn,r),ls=null),r}function Dl(r){ls===null?ls=[r]:ls.push(r)}var vh=P(null),ho=null,Tr=null;function cs(r,o,u){oe(vh,o._currentValue),o._currentValue=u}function wr(r){r._currentValue=vh.current,G(vh)}function _h(r,o,u){for(;r!==null;){var d=r.alternate;if((r.childLanes&o)!==o?(r.childLanes|=o,d!==null&&(d.childLanes|=o)):d!==null&&(d.childLanes&o)!==o&&(d.childLanes|=o),r===u)break;r=r.return}}function Eh(r,o,u,d){var v=r.child;for(v!==null&&(v.return=r);v!==null;){var _=v.dependencies;if(_!==null){var A=v.child;_=_.firstContext;e:for(;_!==null;){var F=_;_=v;for(var X=0;X<o.length;X++)if(F.context===o[X]){_.lanes|=u,F=_.alternate,F!==null&&(F.lanes|=u),_h(_.return,u,r),d||(A=null);break e}_=F.next}}else if(v.tag===18){if(A=v.return,A===null)throw Error(i(341));A.lanes|=u,_=A.alternate,_!==null&&(_.lanes|=u),_h(A,u,r),A=null}else A=v.child;if(A!==null)A.return=v;else for(A=v;A!==null;){if(A===r){A=null;break}if(v=A.sibling,v!==null){v.return=A.return,A=v;break}A=A.return}v=A}}function ua(r,o,u,d){r=null;for(var v=o,_=!1;v!==null;){if(!_){if((v.flags&524288)!==0)_=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var A=v.alternate;if(A===null)throw Error(i(387));if(A=A.memoizedProps,A!==null){var F=v.type;Yn(v.pendingProps.value,A.value)||(r!==null?r.push(F):r=[F])}}else if(v===Ae.current){if(A=v.alternate,A===null)throw Error(i(387));A.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(r!==null?r.push(ou):r=[ou])}v=v.return}r!==null&&Eh(o,r,u,d),o.flags|=262144}function xc(r){for(r=r.firstContext;r!==null;){if(!Yn(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function po(r){ho=r,Tr=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function hn(r){return W0(ho,r)}function Cc(r,o){return ho===null&&po(r),W0(r,o)}function W0(r,o){var u=o._currentValue;if(o={context:o,memoizedValue:u,next:null},Tr===null){if(r===null)throw Error(i(308));Tr=o,r.dependencies={lanes:0,firstContext:o},r.flags|=524288}else Tr=Tr.next=o;return u}var Sx=typeof AbortController<"u"?AbortController:function(){var r=[],o=this.signal={aborted:!1,addEventListener:function(u,d){r.push(d)}};this.abort=function(){o.aborted=!0,r.forEach(function(u){return u()})}},bx=n.unstable_scheduleCallback,Ax=n.unstable_NormalPriority,Wt={$$typeof:B,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Th(){return{controller:new Sx,data:new Map,refCount:0}}function Pl(r){r.refCount--,r.refCount===0&&bx(Ax,function(){r.controller.abort()})}var Ll=null,wh=0,ca=0,da=null;function xx(r,o){if(Ll===null){var u=Ll=[];wh=0,ca=Ap(),da={status:"pending",value:void 0,then:function(d){u.push(d)}}}return wh++,o.then(Q0,Q0),o}function Q0(){if(--wh===0&&Ll!==null){da!==null&&(da.status="fulfilled");var r=Ll;Ll=null,ca=0,da=null;for(var o=0;o<r.length;o++)(0,r[o])()}}function Cx(r,o){var u=[],d={status:"pending",value:null,reason:null,then:function(v){u.push(v)}};return r.then(function(){d.status="fulfilled",d.value=o;for(var v=0;v<u.length;v++)(0,u[v])(o)},function(v){for(d.status="rejected",d.reason=v,v=0;v<u.length;v++)(0,u[v])(void 0)}),d}var X0=ie.S;ie.S=function(r,o){Lv=ke(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&xx(r,o),X0!==null&&X0(r,o)};var mo=P(null);function Sh(){var r=mo.current;return r!==null?r:Rt.pooledCache}function Ic(r,o){o===null?oe(mo,mo.current):oe(mo,o.pool)}function Z0(){var r=Sh();return r===null?null:{parent:Wt._currentValue,pool:r}}var fa=Error(i(460)),bh=Error(i(474)),Rc=Error(i(542)),Nc={then:function(){}};function ey(r){return r=r.status,r==="fulfilled"||r==="rejected"}function ty(r,o,u){switch(u=r[u],u===void 0?r.push(o):u!==o&&(o.then(Ti,Ti),o=u),o.status){case"fulfilled":return o.value;case"rejected":throw r=o.reason,iy(r),r;default:if(typeof o.status=="string")o.then(Ti,Ti);else{if(r=Rt,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=o,r.status="pending",r.then(function(d){if(o.status==="pending"){var v=o;v.status="fulfilled",v.value=d}},function(d){if(o.status==="pending"){var v=o;v.status="rejected",v.reason=d}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw r=o.reason,iy(r),r}throw yo=o,fa}}function go(r){try{var o=r._init;return o(r._payload)}catch(u){throw u!==null&&typeof u=="object"&&typeof u.then=="function"?(yo=u,fa):u}}var yo=null;function ny(){if(yo===null)throw Error(i(459));var r=yo;return yo=null,r}function iy(r){if(r===fa||r===Rc)throw Error(i(483))}var ha=null,Ul=0;function Mc(r){var o=Ul;return Ul+=1,ha===null&&(ha=[]),ty(ha,r,o)}function Vl(r,o){o=o.props.ref,r.ref=o!==void 0?o:null}function kc(r,o){throw o.$$typeof===T?Error(i(525)):(r=Object.prototype.toString.call(o),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":r)))}function ry(r){function o(se,ee){if(r){var le=se.deletions;le===null?(se.deletions=[ee],se.flags|=16):le.push(ee)}}function u(se,ee){if(!r)return null;for(;ee!==null;)o(se,ee),ee=ee.sibling;return null}function d(se){for(var ee=new Map;se!==null;)se.key!==null?ee.set(se.key,se):ee.set(se.index,se),se=se.sibling;return ee}function v(se,ee){return se=_r(se,ee),se.index=0,se.sibling=null,se}function _(se,ee,le){return se.index=le,r?(le=se.alternate,le!==null?(le=le.index,le<ee?(se.flags|=67108866,ee):le):(se.flags|=67108866,ee)):(se.flags|=1048576,ee)}function A(se){return r&&se.alternate===null&&(se.flags|=67108866),se}function F(se,ee,le,Ee){return ee===null||ee.tag!==6?(ee=fh(le,se.mode,Ee),ee.return=se,ee):(ee=v(ee,le),ee.return=se,ee)}function X(se,ee,le,Ee){var Be=le.type;return Be===b?ye(se,ee,le.props.children,Ee,le.key):ee!==null&&(ee.elementType===Be||typeof Be=="object"&&Be!==null&&Be.$$typeof===V&&go(Be)===ee.type)?(ee=v(ee,le.props),Vl(ee,le),ee.return=se,ee):(ee=bc(le.type,le.key,le.props,null,se.mode,Ee),Vl(ee,le),ee.return=se,ee)}function ue(se,ee,le,Ee){return ee===null||ee.tag!==4||ee.stateNode.containerInfo!==le.containerInfo||ee.stateNode.implementation!==le.implementation?(ee=hh(le,se.mode,Ee),ee.return=se,ee):(ee=v(ee,le.children||[]),ee.return=se,ee)}function ye(se,ee,le,Ee,Be){return ee===null||ee.tag!==7?(ee=co(le,se.mode,Ee,Be),ee.return=se,ee):(ee=v(ee,le),ee.return=se,ee)}function Se(se,ee,le){if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return ee=fh(""+ee,se.mode,le),ee.return=se,ee;if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case w:return le=bc(ee.type,ee.key,ee.props,null,se.mode,le),Vl(le,ee),le.return=se,le;case C:return ee=hh(ee,se.mode,le),ee.return=se,ee;case V:return ee=go(ee),Se(se,ee,le)}if(he(ee)||U(ee))return ee=co(ee,se.mode,le,null),ee.return=se,ee;if(typeof ee.then=="function")return Se(se,Mc(ee),le);if(ee.$$typeof===B)return Se(se,Cc(se,ee),le);kc(se,ee)}return null}function de(se,ee,le,Ee){var Be=ee!==null?ee.key:null;if(typeof le=="string"&&le!==""||typeof le=="number"||typeof le=="bigint")return Be!==null?null:F(se,ee,""+le,Ee);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case w:return le.key===Be?X(se,ee,le,Ee):null;case C:return le.key===Be?ue(se,ee,le,Ee):null;case V:return le=go(le),de(se,ee,le,Ee)}if(he(le)||U(le))return Be!==null?null:ye(se,ee,le,Ee,null);if(typeof le.then=="function")return de(se,ee,Mc(le),Ee);if(le.$$typeof===B)return de(se,ee,Cc(se,le),Ee);kc(se,le)}return null}function me(se,ee,le,Ee,Be){if(typeof Ee=="string"&&Ee!==""||typeof Ee=="number"||typeof Ee=="bigint")return se=se.get(le)||null,F(ee,se,""+Ee,Be);if(typeof Ee=="object"&&Ee!==null){switch(Ee.$$typeof){case w:return se=se.get(Ee.key===null?le:Ee.key)||null,X(ee,se,Ee,Be);case C:return se=se.get(Ee.key===null?le:Ee.key)||null,ue(ee,se,Ee,Be);case V:return Ee=go(Ee),me(se,ee,le,Ee,Be)}if(he(Ee)||U(Ee))return se=se.get(le)||null,ye(ee,se,Ee,Be,null);if(typeof Ee.then=="function")return me(se,ee,le,Mc(Ee),Be);if(Ee.$$typeof===B)return me(se,ee,le,Cc(ee,Ee),Be);kc(ee,Ee)}return null}function Oe(se,ee,le,Ee){for(var Be=null,pt=null,ze=ee,nt=ee=0,ot=null;ze!==null&&nt<le.length;nt++){ze.index>nt?(ot=ze,ze=null):ot=ze.sibling;var mt=de(se,ze,le[nt],Ee);if(mt===null){ze===null&&(ze=ot);break}r&&ze&&mt.alternate===null&&o(se,ze),ee=_(mt,ee,nt),pt===null?Be=mt:pt.sibling=mt,pt=mt,ze=ot}if(nt===le.length)return u(se,ze),ct&&Er(se,nt),Be;if(ze===null){for(;nt<le.length;nt++)ze=Se(se,le[nt],Ee),ze!==null&&(ee=_(ze,ee,nt),pt===null?Be=ze:pt.sibling=ze,pt=ze);return ct&&Er(se,nt),Be}for(ze=d(ze);nt<le.length;nt++)ot=me(ze,se,nt,le[nt],Ee),ot!==null&&(r&&ot.alternate!==null&&ze.delete(ot.key===null?nt:ot.key),ee=_(ot,ee,nt),pt===null?Be=ot:pt.sibling=ot,pt=ot);return r&&ze.forEach(function(Is){return o(se,Is)}),ct&&Er(se,nt),Be}function He(se,ee,le,Ee){if(le==null)throw Error(i(151));for(var Be=null,pt=null,ze=ee,nt=ee=0,ot=null,mt=le.next();ze!==null&&!mt.done;nt++,mt=le.next()){ze.index>nt?(ot=ze,ze=null):ot=ze.sibling;var Is=de(se,ze,mt.value,Ee);if(Is===null){ze===null&&(ze=ot);break}r&&ze&&Is.alternate===null&&o(se,ze),ee=_(Is,ee,nt),pt===null?Be=Is:pt.sibling=Is,pt=Is,ze=ot}if(mt.done)return u(se,ze),ct&&Er(se,nt),Be;if(ze===null){for(;!mt.done;nt++,mt=le.next())mt=Se(se,mt.value,Ee),mt!==null&&(ee=_(mt,ee,nt),pt===null?Be=mt:pt.sibling=mt,pt=mt);return ct&&Er(se,nt),Be}for(ze=d(ze);!mt.done;nt++,mt=le.next())mt=me(ze,se,nt,mt.value,Ee),mt!==null&&(r&&mt.alternate!==null&&ze.delete(mt.key===null?nt:mt.key),ee=_(mt,ee,nt),pt===null?Be=mt:pt.sibling=mt,pt=mt);return r&&ze.forEach(function(OC){return o(se,OC)}),ct&&Er(se,nt),Be}function It(se,ee,le,Ee){if(typeof le=="object"&&le!==null&&le.type===b&&le.key===null&&(le=le.props.children),typeof le=="object"&&le!==null){switch(le.$$typeof){case w:e:{for(var Be=le.key;ee!==null;){if(ee.key===Be){if(Be=le.type,Be===b){if(ee.tag===7){u(se,ee.sibling),Ee=v(ee,le.props.children),Ee.return=se,se=Ee;break e}}else if(ee.elementType===Be||typeof Be=="object"&&Be!==null&&Be.$$typeof===V&&go(Be)===ee.type){u(se,ee.sibling),Ee=v(ee,le.props),Vl(Ee,le),Ee.return=se,se=Ee;break e}u(se,ee);break}else o(se,ee);ee=ee.sibling}le.type===b?(Ee=co(le.props.children,se.mode,Ee,le.key),Ee.return=se,se=Ee):(Ee=bc(le.type,le.key,le.props,null,se.mode,Ee),Vl(Ee,le),Ee.return=se,se=Ee)}return A(se);case C:e:{for(Be=le.key;ee!==null;){if(ee.key===Be)if(ee.tag===4&&ee.stateNode.containerInfo===le.containerInfo&&ee.stateNode.implementation===le.implementation){u(se,ee.sibling),Ee=v(ee,le.children||[]),Ee.return=se,se=Ee;break e}else{u(se,ee);break}else o(se,ee);ee=ee.sibling}Ee=hh(le,se.mode,Ee),Ee.return=se,se=Ee}return A(se);case V:return le=go(le),It(se,ee,le,Ee)}if(he(le))return Oe(se,ee,le,Ee);if(U(le)){if(Be=U(le),typeof Be!="function")throw Error(i(150));return le=Be.call(le),He(se,ee,le,Ee)}if(typeof le.then=="function")return It(se,ee,Mc(le),Ee);if(le.$$typeof===B)return It(se,ee,Cc(se,le),Ee);kc(se,le)}return typeof le=="string"&&le!==""||typeof le=="number"||typeof le=="bigint"?(le=""+le,ee!==null&&ee.tag===6?(u(se,ee.sibling),Ee=v(ee,le),Ee.return=se,se=Ee):(u(se,ee),Ee=fh(le,se.mode,Ee),Ee.return=se,se=Ee),A(se)):u(se,ee)}return function(se,ee,le,Ee){try{Ul=0;var Be=It(se,ee,le,Ee);return ha=null,Be}catch(ze){if(ze===fa||ze===Rc)throw ze;var pt=$n(29,ze,null,se.mode);return pt.lanes=Ee,pt.return=se,pt}finally{}}}var vo=ry(!0),sy=ry(!1),ds=!1;function Ah(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function xh(r,o){r=r.updateQueue,o.updateQueue===r&&(o.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function fs(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function hs(r,o,u){var d=r.updateQueue;if(d===null)return null;if(d=d.shared,(_t&2)!==0){var v=d.pending;return v===null?o.next=o:(o.next=v.next,v.next=o),d.pending=o,o=Sc(r),G0(r,null,u),o}return wc(r,d,o,u),Sc(r)}function Ol(r,o,u){if(o=o.updateQueue,o!==null&&(o=o.shared,(u&4194048)!==0)){var d=o.lanes;d&=r.pendingLanes,u|=d,o.lanes=u,dl(r,u)}}function Ch(r,o){var u=r.updateQueue,d=r.alternate;if(d!==null&&(d=d.updateQueue,u===d)){var v=null,_=null;if(u=u.firstBaseUpdate,u!==null){do{var A={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};_===null?v=_=A:_=_.next=A,u=u.next}while(u!==null);_===null?v=_=o:_=_.next=o}else v=_=o;u={baseState:d.baseState,firstBaseUpdate:v,lastBaseUpdate:_,shared:d.shared,callbacks:d.callbacks},r.updateQueue=u;return}r=u.lastBaseUpdate,r===null?u.firstBaseUpdate=o:r.next=o,u.lastBaseUpdate=o}var Ih=!1;function zl(){if(Ih){var r=da;if(r!==null)throw r}}function Fl(r,o,u,d){Ih=!1;var v=r.updateQueue;ds=!1;var _=v.firstBaseUpdate,A=v.lastBaseUpdate,F=v.shared.pending;if(F!==null){v.shared.pending=null;var X=F,ue=X.next;X.next=null,A===null?_=ue:A.next=ue,A=X;var ye=r.alternate;ye!==null&&(ye=ye.updateQueue,F=ye.lastBaseUpdate,F!==A&&(F===null?ye.firstBaseUpdate=ue:F.next=ue,ye.lastBaseUpdate=X))}if(_!==null){var Se=v.baseState;A=0,ye=ue=X=null,F=_;do{var de=F.lane&-536870913,me=de!==F.lane;if(me?(st&de)===de:(d&de)===de){de!==0&&de===ca&&(Ih=!0),ye!==null&&(ye=ye.next={lane:0,tag:F.tag,payload:F.payload,callback:null,next:null});e:{var Oe=r,He=F;de=o;var It=u;switch(He.tag){case 1:if(Oe=He.payload,typeof Oe=="function"){Se=Oe.call(It,Se,de);break e}Se=Oe;break e;case 3:Oe.flags=Oe.flags&-65537|128;case 0:if(Oe=He.payload,de=typeof Oe=="function"?Oe.call(It,Se,de):Oe,de==null)break e;Se=E({},Se,de);break e;case 2:ds=!0}}de=F.callback,de!==null&&(r.flags|=64,me&&(r.flags|=8192),me=v.callbacks,me===null?v.callbacks=[de]:me.push(de))}else me={lane:de,tag:F.tag,payload:F.payload,callback:F.callback,next:null},ye===null?(ue=ye=me,X=Se):ye=ye.next=me,A|=de;if(F=F.next,F===null){if(F=v.shared.pending,F===null)break;me=F,F=me.next,me.next=null,v.lastBaseUpdate=me,v.shared.pending=null}}while(!0);ye===null&&(X=Se),v.baseState=X,v.firstBaseUpdate=ue,v.lastBaseUpdate=ye,_===null&&(v.shared.lanes=0),vs|=A,r.lanes=A,r.memoizedState=Se}}function oy(r,o){if(typeof r!="function")throw Error(i(191,r));r.call(o)}function ay(r,o){var u=r.callbacks;if(u!==null)for(r.callbacks=null,r=0;r<u.length;r++)oy(u[r],o)}var pa=P(null),Dc=P(0);function ly(r,o){r=Mr,oe(Dc,r),oe(pa,o),Mr=r|o.baseLanes}function Rh(){oe(Dc,Mr),oe(pa,pa.current)}function Nh(){Mr=Dc.current,G(pa),G(Dc)}var Kn=P(null),ci=null;function ps(r){var o=r.alternate;oe(Ht,Ht.current&1),oe(Kn,r),ci===null&&(o===null||pa.current!==null||o.memoizedState!==null)&&(ci=r)}function Mh(r){oe(Ht,Ht.current),oe(Kn,r),ci===null&&(ci=r)}function uy(r){r.tag===22?(oe(Ht,Ht.current),oe(Kn,r),ci===null&&(ci=r)):ms()}function ms(){oe(Ht,Ht.current),oe(Kn,Kn.current)}function Jn(r){G(Kn),ci===r&&(ci=null),G(Ht)}var Ht=P(0);function Pc(r){for(var o=r;o!==null;){if(o.tag===13){var u=o.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||Vp(u)||Op(u)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Sr=0,tt=null,xt=null,Qt=null,Lc=!1,ma=!1,_o=!1,Uc=0,Bl=0,ga=null,Ix=0;function Ft(){throw Error(i(321))}function kh(r,o){if(o===null)return!1;for(var u=0;u<o.length&&u<r.length;u++)if(!Yn(r[u],o[u]))return!1;return!0}function Dh(r,o,u,d,v,_){return Sr=_,tt=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,ie.H=r===null||r.memoizedState===null?$y:Jh,_o=!1,_=u(d,v),_o=!1,ma&&(_=dy(o,u,d,v)),cy(r),_}function cy(r){ie.H=ql;var o=xt!==null&&xt.next!==null;if(Sr=0,Qt=xt=tt=null,Lc=!1,Bl=0,ga=null,o)throw Error(i(300));r===null||Xt||(r=r.dependencies,r!==null&&xc(r)&&(Xt=!0))}function dy(r,o,u,d){tt=r;var v=0;do{if(ma&&(ga=null),Bl=0,ma=!1,25<=v)throw Error(i(301));if(v+=1,Qt=xt=null,r.updateQueue!=null){var _=r.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}ie.H=Ky,_=o(u,d)}while(ma);return _}function Rx(){var r=ie.H,o=r.useState()[0];return o=typeof o.then=="function"?Gl(o):o,r=r.useState()[0],(xt!==null?xt.memoizedState:null)!==r&&(tt.flags|=1024),o}function Ph(){var r=Uc!==0;return Uc=0,r}function Lh(r,o,u){o.updateQueue=r.updateQueue,o.flags&=-2053,r.lanes&=~u}function Uh(r){if(Lc){for(r=r.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}Lc=!1}Sr=0,Qt=xt=tt=null,ma=!1,Bl=Uc=0,ga=null}function Mn(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qt===null?tt.memoizedState=Qt=r:Qt=Qt.next=r,Qt}function qt(){if(xt===null){var r=tt.alternate;r=r!==null?r.memoizedState:null}else r=xt.next;var o=Qt===null?tt.memoizedState:Qt.next;if(o!==null)Qt=o,xt=r;else{if(r===null)throw tt.alternate===null?Error(i(467)):Error(i(310));xt=r,r={memoizedState:xt.memoizedState,baseState:xt.baseState,baseQueue:xt.baseQueue,queue:xt.queue,next:null},Qt===null?tt.memoizedState=Qt=r:Qt=Qt.next=r}return Qt}function Vc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Gl(r){var o=Bl;return Bl+=1,ga===null&&(ga=[]),r=ty(ga,r,o),o=tt,(Qt===null?o.memoizedState:Qt.next)===null&&(o=o.alternate,ie.H=o===null||o.memoizedState===null?$y:Jh),r}function Oc(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return Gl(r);if(r.$$typeof===B)return hn(r)}throw Error(i(438,String(r)))}function Vh(r){var o=null,u=tt.updateQueue;if(u!==null&&(o=u.memoCache),o==null){var d=tt.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(o={data:d.data.map(function(v){return v.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),u===null&&(u=Vc(),tt.updateQueue=u),u.memoCache=o,u=o.data[o.index],u===void 0)for(u=o.data[o.index]=Array(r),d=0;d<r;d++)u[d]=H;return o.index++,u}function br(r,o){return typeof o=="function"?o(r):o}function zc(r){var o=qt();return Oh(o,xt,r)}function Oh(r,o,u){var d=r.queue;if(d===null)throw Error(i(311));d.lastRenderedReducer=u;var v=r.baseQueue,_=d.pending;if(_!==null){if(v!==null){var A=v.next;v.next=_.next,_.next=A}o.baseQueue=v=_,d.pending=null}if(_=r.baseState,v===null)r.memoizedState=_;else{o=v.next;var F=A=null,X=null,ue=o,ye=!1;do{var Se=ue.lane&-536870913;if(Se!==ue.lane?(st&Se)===Se:(Sr&Se)===Se){var de=ue.revertLane;if(de===0)X!==null&&(X=X.next={lane:0,revertLane:0,gesture:null,action:ue.action,hasEagerState:ue.hasEagerState,eagerState:ue.eagerState,next:null}),Se===ca&&(ye=!0);else if((Sr&de)===de){ue=ue.next,de===ca&&(ye=!0);continue}else Se={lane:0,revertLane:ue.revertLane,gesture:null,action:ue.action,hasEagerState:ue.hasEagerState,eagerState:ue.eagerState,next:null},X===null?(F=X=Se,A=_):X=X.next=Se,tt.lanes|=de,vs|=de;Se=ue.action,_o&&u(_,Se),_=ue.hasEagerState?ue.eagerState:u(_,Se)}else de={lane:Se,revertLane:ue.revertLane,gesture:ue.gesture,action:ue.action,hasEagerState:ue.hasEagerState,eagerState:ue.eagerState,next:null},X===null?(F=X=de,A=_):X=X.next=de,tt.lanes|=Se,vs|=Se;ue=ue.next}while(ue!==null&&ue!==o);if(X===null?A=_:X.next=F,!Yn(_,r.memoizedState)&&(Xt=!0,ye&&(u=da,u!==null)))throw u;r.memoizedState=_,r.baseState=A,r.baseQueue=X,d.lastRenderedState=_}return v===null&&(d.lanes=0),[r.memoizedState,d.dispatch]}function zh(r){var o=qt(),u=o.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=r;var d=u.dispatch,v=u.pending,_=o.memoizedState;if(v!==null){u.pending=null;var A=v=v.next;do _=r(_,A.action),A=A.next;while(A!==v);Yn(_,o.memoizedState)||(Xt=!0),o.memoizedState=_,o.baseQueue===null&&(o.baseState=_),u.lastRenderedState=_}return[_,d]}function fy(r,o,u){var d=tt,v=qt(),_=ct;if(_){if(u===void 0)throw Error(i(407));u=u()}else u=o();var A=!Yn((xt||v).memoizedState,u);if(A&&(v.memoizedState=u,Xt=!0),v=v.queue,Gh(my.bind(null,d,v,r),[r]),v.getSnapshot!==o||A||Qt!==null&&Qt.memoizedState.tag&1){if(d.flags|=2048,ya(9,{destroy:void 0},py.bind(null,d,v,u,o),null),Rt===null)throw Error(i(349));_||(Sr&127)!==0||hy(d,o,u)}return u}function hy(r,o,u){r.flags|=16384,r={getSnapshot:o,value:u},o=tt.updateQueue,o===null?(o=Vc(),tt.updateQueue=o,o.stores=[r]):(u=o.stores,u===null?o.stores=[r]:u.push(r))}function py(r,o,u,d){o.value=u,o.getSnapshot=d,gy(o)&&yy(r)}function my(r,o,u){return u(function(){gy(o)&&yy(r)})}function gy(r){var o=r.getSnapshot;r=r.value;try{var u=o();return!Yn(r,u)}catch{return!0}}function yy(r){var o=uo(r,2);o!==null&&Fn(o,r,2)}function Fh(r){var o=Mn();if(typeof r=="function"){var u=r;if(r=u(),_o){Tn(!0);try{u()}finally{Tn(!1)}}}return o.memoizedState=o.baseState=r,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:br,lastRenderedState:r},o}function vy(r,o,u,d){return r.baseState=u,Oh(r,xt,typeof d=="function"?d:br)}function Nx(r,o,u,d,v){if(Gc(r))throw Error(i(485));if(r=o.action,r!==null){var _={payload:v,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){_.listeners.push(A)}};ie.T!==null?u(!0):_.isTransition=!1,d(_),u=o.pending,u===null?(_.next=o.pending=_,_y(o,_)):(_.next=u.next,o.pending=u.next=_)}}function _y(r,o){var u=o.action,d=o.payload,v=r.state;if(o.isTransition){var _=ie.T,A={};ie.T=A;try{var F=u(v,d),X=ie.S;X!==null&&X(A,F),Ey(r,o,F)}catch(ue){Bh(r,o,ue)}finally{_!==null&&A.types!==null&&(_.types=A.types),ie.T=_}}else try{_=u(v,d),Ey(r,o,_)}catch(ue){Bh(r,o,ue)}}function Ey(r,o,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(d){Ty(r,o,d)},function(d){return Bh(r,o,d)}):Ty(r,o,u)}function Ty(r,o,u){o.status="fulfilled",o.value=u,wy(o),r.state=u,o=r.pending,o!==null&&(u=o.next,u===o?r.pending=null:(u=u.next,o.next=u,_y(r,u)))}function Bh(r,o,u){var d=r.pending;if(r.pending=null,d!==null){d=d.next;do o.status="rejected",o.reason=u,wy(o),o=o.next;while(o!==d)}r.action=null}function wy(r){r=r.listeners;for(var o=0;o<r.length;o++)(0,r[o])()}function Sy(r,o){return o}function by(r,o){if(ct){var u=Rt.formState;if(u!==null){e:{var d=tt;if(ct){if(Dt){t:{for(var v=Dt,_=ui;v.nodeType!==8;){if(!_){v=null;break t}if(v=di(v.nextSibling),v===null){v=null;break t}}_=v.data,v=_==="F!"||_==="F"?v:null}if(v){Dt=di(v.nextSibling),d=v.data==="F!";break e}}us(d)}d=!1}d&&(o=u[0])}}return u=Mn(),u.memoizedState=u.baseState=o,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sy,lastRenderedState:o},u.queue=d,u=Hy.bind(null,tt,d),d.dispatch=u,d=Fh(!1),_=Kh.bind(null,tt,!1,d.queue),d=Mn(),v={state:o,dispatch:null,action:r,pending:null},d.queue=v,u=Nx.bind(null,tt,v,_,u),v.dispatch=u,d.memoizedState=r,[o,u,!1]}function Ay(r){var o=qt();return xy(o,xt,r)}function xy(r,o,u){if(o=Oh(r,o,Sy)[0],r=zc(br)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var d=Gl(o)}catch(A){throw A===fa?Rc:A}else d=o;o=qt();var v=o.queue,_=v.dispatch;return u!==o.memoizedState&&(tt.flags|=2048,ya(9,{destroy:void 0},Mx.bind(null,v,u),null)),[d,_,r]}function Mx(r,o){r.action=o}function Cy(r){var o=qt(),u=xt;if(u!==null)return xy(o,u,r);qt(),o=o.memoizedState,u=qt();var d=u.queue.dispatch;return u.memoizedState=r,[o,d,!1]}function ya(r,o,u,d){return r={tag:r,create:u,deps:d,inst:o,next:null},o=tt.updateQueue,o===null&&(o=Vc(),tt.updateQueue=o),u=o.lastEffect,u===null?o.lastEffect=r.next=r:(d=u.next,u.next=r,r.next=d,o.lastEffect=r),r}function Iy(){return qt().memoizedState}function Fc(r,o,u,d){var v=Mn();tt.flags|=r,v.memoizedState=ya(1|o,{destroy:void 0},u,d===void 0?null:d)}function Bc(r,o,u,d){var v=qt();d=d===void 0?null:d;var _=v.memoizedState.inst;xt!==null&&d!==null&&kh(d,xt.memoizedState.deps)?v.memoizedState=ya(o,_,u,d):(tt.flags|=r,v.memoizedState=ya(1|o,_,u,d))}function Ry(r,o){Fc(8390656,8,r,o)}function Gh(r,o){Bc(2048,8,r,o)}function kx(r){tt.flags|=4;var o=tt.updateQueue;if(o===null)o=Vc(),tt.updateQueue=o,o.events=[r];else{var u=o.events;u===null?o.events=[r]:u.push(r)}}function Ny(r){var o=qt().memoizedState;return kx({ref:o,nextImpl:r}),function(){if((_t&2)!==0)throw Error(i(440));return o.impl.apply(void 0,arguments)}}function My(r,o){return Bc(4,2,r,o)}function ky(r,o){return Bc(4,4,r,o)}function Dy(r,o){if(typeof o=="function"){r=r();var u=o(r);return function(){typeof u=="function"?u():o(null)}}if(o!=null)return r=r(),o.current=r,function(){o.current=null}}function Py(r,o,u){u=u!=null?u.concat([r]):null,Bc(4,4,Dy.bind(null,o,r),u)}function Hh(){}function Ly(r,o){var u=qt();o=o===void 0?null:o;var d=u.memoizedState;return o!==null&&kh(o,d[1])?d[0]:(u.memoizedState=[r,o],r)}function Uy(r,o){var u=qt();o=o===void 0?null:o;var d=u.memoizedState;if(o!==null&&kh(o,d[1]))return d[0];if(d=r(),_o){Tn(!0);try{r()}finally{Tn(!1)}}return u.memoizedState=[d,o],d}function qh(r,o,u){return u===void 0||(Sr&1073741824)!==0&&(st&261930)===0?r.memoizedState=o:(r.memoizedState=u,r=Vv(),tt.lanes|=r,vs|=r,u)}function Vy(r,o,u,d){return Yn(u,o)?u:pa.current!==null?(r=qh(r,u,d),Yn(r,o)||(Xt=!0),r):(Sr&42)===0||(Sr&1073741824)!==0&&(st&261930)===0?(Xt=!0,r.memoizedState=u):(r=Vv(),tt.lanes|=r,vs|=r,o)}function Oy(r,o,u,d,v){var _=re.p;re.p=_!==0&&8>_?_:8;var A=ie.T,F={};ie.T=F,Kh(r,!1,o,u);try{var X=v(),ue=ie.S;if(ue!==null&&ue(F,X),X!==null&&typeof X=="object"&&typeof X.then=="function"){var ye=Cx(X,d);Hl(r,o,ye,Qn(r))}else Hl(r,o,d,Qn(r))}catch(Se){Hl(r,o,{then:function(){},status:"rejected",reason:Se},Qn())}finally{re.p=_,A!==null&&F.types!==null&&(A.types=F.types),ie.T=A}}function Dx(){}function Yh(r,o,u,d){if(r.tag!==5)throw Error(i(476));var v=zy(r).queue;Oy(r,v,o,be,u===null?Dx:function(){return Fy(r),u(d)})}function zy(r){var o=r.memoizedState;if(o!==null)return o;o={memoizedState:be,baseState:be,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:br,lastRenderedState:be},next:null};var u={};return o.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:br,lastRenderedState:u},next:null},r.memoizedState=o,r=r.alternate,r!==null&&(r.memoizedState=o),o}function Fy(r){var o=zy(r);o.next===null&&(o=r.alternate.memoizedState),Hl(r,o.next.queue,{},Qn())}function $h(){return hn(ou)}function By(){return qt().memoizedState}function Gy(){return qt().memoizedState}function Px(r){for(var o=r.return;o!==null;){switch(o.tag){case 24:case 3:var u=Qn();r=fs(u);var d=hs(o,r,u);d!==null&&(Fn(d,o,u),Ol(d,o,u)),o={cache:Th()},r.payload=o;return}o=o.return}}function Lx(r,o,u){var d=Qn();u={lane:d,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Gc(r)?qy(o,u):(u=ch(r,o,u,d),u!==null&&(Fn(u,r,d),Yy(u,o,d)))}function Hy(r,o,u){var d=Qn();Hl(r,o,u,d)}function Hl(r,o,u,d){var v={lane:d,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null};if(Gc(r))qy(o,v);else{var _=r.alternate;if(r.lanes===0&&(_===null||_.lanes===0)&&(_=o.lastRenderedReducer,_!==null))try{var A=o.lastRenderedState,F=_(A,u);if(v.hasEagerState=!0,v.eagerState=F,Yn(F,A))return wc(r,o,v,0),Rt===null&&Tc(),!1}catch{}finally{}if(u=ch(r,o,v,d),u!==null)return Fn(u,r,d),Yy(u,o,d),!0}return!1}function Kh(r,o,u,d){if(d={lane:2,revertLane:Ap(),gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},Gc(r)){if(o)throw Error(i(479))}else o=ch(r,u,d,2),o!==null&&Fn(o,r,2)}function Gc(r){var o=r.alternate;return r===tt||o!==null&&o===tt}function qy(r,o){ma=Lc=!0;var u=r.pending;u===null?o.next=o:(o.next=u.next,u.next=o),r.pending=o}function Yy(r,o,u){if((u&4194048)!==0){var d=o.lanes;d&=r.pendingLanes,u|=d,o.lanes=u,dl(r,u)}}var ql={readContext:hn,use:Oc,useCallback:Ft,useContext:Ft,useEffect:Ft,useImperativeHandle:Ft,useLayoutEffect:Ft,useInsertionEffect:Ft,useMemo:Ft,useReducer:Ft,useRef:Ft,useState:Ft,useDebugValue:Ft,useDeferredValue:Ft,useTransition:Ft,useSyncExternalStore:Ft,useId:Ft,useHostTransitionStatus:Ft,useFormState:Ft,useActionState:Ft,useOptimistic:Ft,useMemoCache:Ft,useCacheRefresh:Ft};ql.useEffectEvent=Ft;var $y={readContext:hn,use:Oc,useCallback:function(r,o){return Mn().memoizedState=[r,o===void 0?null:o],r},useContext:hn,useEffect:Ry,useImperativeHandle:function(r,o,u){u=u!=null?u.concat([r]):null,Fc(4194308,4,Dy.bind(null,o,r),u)},useLayoutEffect:function(r,o){return Fc(4194308,4,r,o)},useInsertionEffect:function(r,o){Fc(4,2,r,o)},useMemo:function(r,o){var u=Mn();o=o===void 0?null:o;var d=r();if(_o){Tn(!0);try{r()}finally{Tn(!1)}}return u.memoizedState=[d,o],d},useReducer:function(r,o,u){var d=Mn();if(u!==void 0){var v=u(o);if(_o){Tn(!0);try{u(o)}finally{Tn(!1)}}}else v=o;return d.memoizedState=d.baseState=v,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:v},d.queue=r,r=r.dispatch=Lx.bind(null,tt,r),[d.memoizedState,r]},useRef:function(r){var o=Mn();return r={current:r},o.memoizedState=r},useState:function(r){r=Fh(r);var o=r.queue,u=Hy.bind(null,tt,o);return o.dispatch=u,[r.memoizedState,u]},useDebugValue:Hh,useDeferredValue:function(r,o){var u=Mn();return qh(u,r,o)},useTransition:function(){var r=Fh(!1);return r=Oy.bind(null,tt,r.queue,!0,!1),Mn().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,o,u){var d=tt,v=Mn();if(ct){if(u===void 0)throw Error(i(407));u=u()}else{if(u=o(),Rt===null)throw Error(i(349));(st&127)!==0||hy(d,o,u)}v.memoizedState=u;var _={value:u,getSnapshot:o};return v.queue=_,Ry(my.bind(null,d,_,r),[r]),d.flags|=2048,ya(9,{destroy:void 0},py.bind(null,d,_,u,o),null),u},useId:function(){var r=Mn(),o=Rt.identifierPrefix;if(ct){var u=ir,d=nr;u=(d&~(1<<32-yt(d)-1)).toString(32)+u,o="_"+o+"R_"+u,u=Uc++,0<u&&(o+="H"+u.toString(32)),o+="_"}else u=Ix++,o="_"+o+"r_"+u.toString(32)+"_";return r.memoizedState=o},useHostTransitionStatus:$h,useFormState:by,useActionState:by,useOptimistic:function(r){var o=Mn();o.memoizedState=o.baseState=r;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=u,o=Kh.bind(null,tt,!0,u),u.dispatch=o,[r,o]},useMemoCache:Vh,useCacheRefresh:function(){return Mn().memoizedState=Px.bind(null,tt)},useEffectEvent:function(r){var o=Mn(),u={impl:r};return o.memoizedState=u,function(){if((_t&2)!==0)throw Error(i(440));return u.impl.apply(void 0,arguments)}}},Jh={readContext:hn,use:Oc,useCallback:Ly,useContext:hn,useEffect:Gh,useImperativeHandle:Py,useInsertionEffect:My,useLayoutEffect:ky,useMemo:Uy,useReducer:zc,useRef:Iy,useState:function(){return zc(br)},useDebugValue:Hh,useDeferredValue:function(r,o){var u=qt();return Vy(u,xt.memoizedState,r,o)},useTransition:function(){var r=zc(br)[0],o=qt().memoizedState;return[typeof r=="boolean"?r:Gl(r),o]},useSyncExternalStore:fy,useId:By,useHostTransitionStatus:$h,useFormState:Ay,useActionState:Ay,useOptimistic:function(r,o){var u=qt();return vy(u,xt,r,o)},useMemoCache:Vh,useCacheRefresh:Gy};Jh.useEffectEvent=Ny;var Ky={readContext:hn,use:Oc,useCallback:Ly,useContext:hn,useEffect:Gh,useImperativeHandle:Py,useInsertionEffect:My,useLayoutEffect:ky,useMemo:Uy,useReducer:zh,useRef:Iy,useState:function(){return zh(br)},useDebugValue:Hh,useDeferredValue:function(r,o){var u=qt();return xt===null?qh(u,r,o):Vy(u,xt.memoizedState,r,o)},useTransition:function(){var r=zh(br)[0],o=qt().memoizedState;return[typeof r=="boolean"?r:Gl(r),o]},useSyncExternalStore:fy,useId:By,useHostTransitionStatus:$h,useFormState:Cy,useActionState:Cy,useOptimistic:function(r,o){var u=qt();return xt!==null?vy(u,xt,r,o):(u.baseState=r,[r,u.queue.dispatch])},useMemoCache:Vh,useCacheRefresh:Gy};Ky.useEffectEvent=Ny;function jh(r,o,u,d){o=r.memoizedState,u=u(d,o),u=u==null?o:E({},o,u),r.memoizedState=u,r.lanes===0&&(r.updateQueue.baseState=u)}var Wh={enqueueSetState:function(r,o,u){r=r._reactInternals;var d=Qn(),v=fs(d);v.payload=o,u!=null&&(v.callback=u),o=hs(r,v,d),o!==null&&(Fn(o,r,d),Ol(o,r,d))},enqueueReplaceState:function(r,o,u){r=r._reactInternals;var d=Qn(),v=fs(d);v.tag=1,v.payload=o,u!=null&&(v.callback=u),o=hs(r,v,d),o!==null&&(Fn(o,r,d),Ol(o,r,d))},enqueueForceUpdate:function(r,o){r=r._reactInternals;var u=Qn(),d=fs(u);d.tag=2,o!=null&&(d.callback=o),o=hs(r,d,u),o!==null&&(Fn(o,r,u),Ol(o,r,u))}};function Jy(r,o,u,d,v,_,A){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(d,_,A):o.prototype&&o.prototype.isPureReactComponent?!Nl(u,d)||!Nl(v,_):!0}function jy(r,o,u,d){r=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(u,d),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(u,d),o.state!==r&&Wh.enqueueReplaceState(o,o.state,null)}function Eo(r,o){var u=o;if("ref"in o){u={};for(var d in o)d!=="ref"&&(u[d]=o[d])}if(r=r.defaultProps){u===o&&(u=E({},u));for(var v in r)u[v]===void 0&&(u[v]=r[v])}return u}function Wy(r){Ec(r)}function Qy(r){console.error(r)}function Xy(r){Ec(r)}function Hc(r,o){try{var u=r.onUncaughtError;u(o.value,{componentStack:o.stack})}catch(d){setTimeout(function(){throw d})}}function Zy(r,o,u){try{var d=r.onCaughtError;d(u.value,{componentStack:u.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function Qh(r,o,u){return u=fs(u),u.tag=3,u.payload={element:null},u.callback=function(){Hc(r,o)},u}function ev(r){return r=fs(r),r.tag=3,r}function tv(r,o,u,d){var v=u.type.getDerivedStateFromError;if(typeof v=="function"){var _=d.value;r.payload=function(){return v(_)},r.callback=function(){Zy(o,u,d)}}var A=u.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(r.callback=function(){Zy(o,u,d),typeof v!="function"&&(_s===null?_s=new Set([this]):_s.add(this));var F=d.stack;this.componentDidCatch(d.value,{componentStack:F!==null?F:""})})}function Ux(r,o,u,d,v){if(u.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(o=u.alternate,o!==null&&ua(o,u,v,!0),u=Kn.current,u!==null){switch(u.tag){case 31:case 13:return ci===null?td():u.alternate===null&&Bt===0&&(Bt=3),u.flags&=-257,u.flags|=65536,u.lanes=v,d===Nc?u.flags|=16384:(o=u.updateQueue,o===null?u.updateQueue=new Set([d]):o.add(d),wp(r,d,v)),!1;case 22:return u.flags|=65536,d===Nc?u.flags|=16384:(o=u.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([d])},u.updateQueue=o):(u=o.retryQueue,u===null?o.retryQueue=new Set([d]):u.add(d)),wp(r,d,v)),!1}throw Error(i(435,u.tag))}return wp(r,d,v),td(),!1}if(ct)return o=Kn.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=v,d!==gh&&(r=Error(i(422),{cause:d}),Dl(oi(r,u)))):(d!==gh&&(o=Error(i(423),{cause:d}),Dl(oi(o,u))),r=r.current.alternate,r.flags|=65536,v&=-v,r.lanes|=v,d=oi(d,u),v=Qh(r.stateNode,d,v),Ch(r,v),Bt!==4&&(Bt=2)),!1;var _=Error(i(520),{cause:d});if(_=oi(_,u),Xl===null?Xl=[_]:Xl.push(_),Bt!==4&&(Bt=2),o===null)return!0;d=oi(d,u),u=o;do{switch(u.tag){case 3:return u.flags|=65536,r=v&-v,u.lanes|=r,r=Qh(u.stateNode,d,r),Ch(u,r),!1;case 1:if(o=u.type,_=u.stateNode,(u.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(_s===null||!_s.has(_))))return u.flags|=65536,v&=-v,u.lanes|=v,v=ev(v),tv(v,r,u,d),Ch(u,v),!1}u=u.return}while(u!==null);return!1}var Xh=Error(i(461)),Xt=!1;function pn(r,o,u,d){o.child=r===null?sy(o,null,u,d):vo(o,r.child,u,d)}function nv(r,o,u,d,v){u=u.render;var _=o.ref;if("ref"in d){var A={};for(var F in d)F!=="ref"&&(A[F]=d[F])}else A=d;return po(o),d=Dh(r,o,u,A,_,v),F=Ph(),r!==null&&!Xt?(Lh(r,o,v),Ar(r,o,v)):(ct&&F&&ph(o),o.flags|=1,pn(r,o,d,v),o.child)}function iv(r,o,u,d,v){if(r===null){var _=u.type;return typeof _=="function"&&!dh(_)&&_.defaultProps===void 0&&u.compare===null?(o.tag=15,o.type=_,rv(r,o,_,d,v)):(r=bc(u.type,null,d,o,o.mode,v),r.ref=o.ref,r.return=o,o.child=r)}if(_=r.child,!op(r,v)){var A=_.memoizedProps;if(u=u.compare,u=u!==null?u:Nl,u(A,d)&&r.ref===o.ref)return Ar(r,o,v)}return o.flags|=1,r=_r(_,d),r.ref=o.ref,r.return=o,o.child=r}function rv(r,o,u,d,v){if(r!==null){var _=r.memoizedProps;if(Nl(_,d)&&r.ref===o.ref)if(Xt=!1,o.pendingProps=d=_,op(r,v))(r.flags&131072)!==0&&(Xt=!0);else return o.lanes=r.lanes,Ar(r,o,v)}return Zh(r,o,u,d,v)}function sv(r,o,u,d){var v=d.children,_=r!==null?r.memoizedState:null;if(r===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.mode==="hidden"){if((o.flags&128)!==0){if(_=_!==null?_.baseLanes|u:u,r!==null){for(d=o.child=r.child,v=0;d!==null;)v=v|d.lanes|d.childLanes,d=d.sibling;d=v&~_}else d=0,o.child=null;return ov(r,o,_,u,d)}if((u&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},r!==null&&Ic(o,_!==null?_.cachePool:null),_!==null?ly(o,_):Rh(),uy(o);else return d=o.lanes=536870912,ov(r,o,_!==null?_.baseLanes|u:u,u,d)}else _!==null?(Ic(o,_.cachePool),ly(o,_),ms(),o.memoizedState=null):(r!==null&&Ic(o,null),Rh(),ms());return pn(r,o,v,u),o.child}function Yl(r,o){return r!==null&&r.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function ov(r,o,u,d,v){var _=Sh();return _=_===null?null:{parent:Wt._currentValue,pool:_},o.memoizedState={baseLanes:u,cachePool:_},r!==null&&Ic(o,null),Rh(),uy(o),r!==null&&ua(r,o,d,!0),o.childLanes=v,null}function qc(r,o){return o=$c({mode:o.mode,children:o.children},r.mode),o.ref=r.ref,r.child=o,o.return=r,o}function av(r,o,u){return vo(o,r.child,null,u),r=qc(o,o.pendingProps),r.flags|=2,Jn(o),o.memoizedState=null,r}function Vx(r,o,u){var d=o.pendingProps,v=(o.flags&128)!==0;if(o.flags&=-129,r===null){if(ct){if(d.mode==="hidden")return r=qc(o,d),o.lanes=536870912,Yl(null,r);if(Mh(o),(r=Dt)?(r=__(r,ui),r=r!==null&&r.data==="&"?r:null,r!==null&&(o.memoizedState={dehydrated:r,treeContext:as!==null?{id:nr,overflow:ir}:null,retryLane:536870912,hydrationErrors:null},u=q0(r),u.return=o,o.child=u,fn=o,Dt=null)):r=null,r===null)throw us(o);return o.lanes=536870912,null}return qc(o,d)}var _=r.memoizedState;if(_!==null){var A=_.dehydrated;if(Mh(o),v)if(o.flags&256)o.flags&=-257,o=av(r,o,u);else if(o.memoizedState!==null)o.child=r.child,o.flags|=128,o=null;else throw Error(i(558));else if(Xt||ua(r,o,u,!1),v=(u&r.childLanes)!==0,Xt||v){if(d=Rt,d!==null&&(A=fl(d,u),A!==0&&A!==_.retryLane))throw _.retryLane=A,uo(r,A),Fn(d,r,A),Xh;td(),o=av(r,o,u)}else r=_.treeContext,Dt=di(A.nextSibling),fn=o,ct=!0,ls=null,ui=!1,r!==null&&K0(o,r),o=qc(o,d),o.flags|=4096;return o}return r=_r(r.child,{mode:d.mode,children:d.children}),r.ref=o.ref,o.child=r,r.return=o,r}function Yc(r,o){var u=o.ref;if(u===null)r!==null&&r.ref!==null&&(o.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(i(284));(r===null||r.ref!==u)&&(o.flags|=4194816)}}function Zh(r,o,u,d,v){return po(o),u=Dh(r,o,u,d,void 0,v),d=Ph(),r!==null&&!Xt?(Lh(r,o,v),Ar(r,o,v)):(ct&&d&&ph(o),o.flags|=1,pn(r,o,u,v),o.child)}function lv(r,o,u,d,v,_){return po(o),o.updateQueue=null,u=dy(o,d,u,v),cy(r),d=Ph(),r!==null&&!Xt?(Lh(r,o,_),Ar(r,o,_)):(ct&&d&&ph(o),o.flags|=1,pn(r,o,u,_),o.child)}function uv(r,o,u,d,v){if(po(o),o.stateNode===null){var _=sa,A=u.contextType;typeof A=="object"&&A!==null&&(_=hn(A)),_=new u(d,_),o.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=Wh,o.stateNode=_,_._reactInternals=o,_=o.stateNode,_.props=d,_.state=o.memoizedState,_.refs={},Ah(o),A=u.contextType,_.context=typeof A=="object"&&A!==null?hn(A):sa,_.state=o.memoizedState,A=u.getDerivedStateFromProps,typeof A=="function"&&(jh(o,u,A,d),_.state=o.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(A=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),A!==_.state&&Wh.enqueueReplaceState(_,_.state,null),Fl(o,d,_,v),zl(),_.state=o.memoizedState),typeof _.componentDidMount=="function"&&(o.flags|=4194308),d=!0}else if(r===null){_=o.stateNode;var F=o.memoizedProps,X=Eo(u,F);_.props=X;var ue=_.context,ye=u.contextType;A=sa,typeof ye=="object"&&ye!==null&&(A=hn(ye));var Se=u.getDerivedStateFromProps;ye=typeof Se=="function"||typeof _.getSnapshotBeforeUpdate=="function",F=o.pendingProps!==F,ye||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(F||ue!==A)&&jy(o,_,d,A),ds=!1;var de=o.memoizedState;_.state=de,Fl(o,d,_,v),zl(),ue=o.memoizedState,F||de!==ue||ds?(typeof Se=="function"&&(jh(o,u,Se,d),ue=o.memoizedState),(X=ds||Jy(o,u,X,d,de,ue,A))?(ye||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(o.flags|=4194308)):(typeof _.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=d,o.memoizedState=ue),_.props=d,_.state=ue,_.context=A,d=X):(typeof _.componentDidMount=="function"&&(o.flags|=4194308),d=!1)}else{_=o.stateNode,xh(r,o),A=o.memoizedProps,ye=Eo(u,A),_.props=ye,Se=o.pendingProps,de=_.context,ue=u.contextType,X=sa,typeof ue=="object"&&ue!==null&&(X=hn(ue)),F=u.getDerivedStateFromProps,(ue=typeof F=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(A!==Se||de!==X)&&jy(o,_,d,X),ds=!1,de=o.memoizedState,_.state=de,Fl(o,d,_,v),zl();var me=o.memoizedState;A!==Se||de!==me||ds||r!==null&&r.dependencies!==null&&xc(r.dependencies)?(typeof F=="function"&&(jh(o,u,F,d),me=o.memoizedState),(ye=ds||Jy(o,u,ye,d,de,me,X)||r!==null&&r.dependencies!==null&&xc(r.dependencies))?(ue||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(d,me,X),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(d,me,X)),typeof _.componentDidUpdate=="function"&&(o.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof _.componentDidUpdate!="function"||A===r.memoizedProps&&de===r.memoizedState||(o.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||A===r.memoizedProps&&de===r.memoizedState||(o.flags|=1024),o.memoizedProps=d,o.memoizedState=me),_.props=d,_.state=me,_.context=X,d=ye):(typeof _.componentDidUpdate!="function"||A===r.memoizedProps&&de===r.memoizedState||(o.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||A===r.memoizedProps&&de===r.memoizedState||(o.flags|=1024),d=!1)}return _=d,Yc(r,o),d=(o.flags&128)!==0,_||d?(_=o.stateNode,u=d&&typeof u.getDerivedStateFromError!="function"?null:_.render(),o.flags|=1,r!==null&&d?(o.child=vo(o,r.child,null,v),o.child=vo(o,null,u,v)):pn(r,o,u,v),o.memoizedState=_.state,r=o.child):r=Ar(r,o,v),r}function cv(r,o,u,d){return fo(),o.flags|=256,pn(r,o,u,d),o.child}var ep={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function tp(r){return{baseLanes:r,cachePool:Z0()}}function np(r,o,u){return r=r!==null?r.childLanes&~u:0,o&&(r|=Wn),r}function dv(r,o,u){var d=o.pendingProps,v=!1,_=(o.flags&128)!==0,A;if((A=_)||(A=r!==null&&r.memoizedState===null?!1:(Ht.current&2)!==0),A&&(v=!0,o.flags&=-129),A=(o.flags&32)!==0,o.flags&=-33,r===null){if(ct){if(v?ps(o):ms(),(r=Dt)?(r=__(r,ui),r=r!==null&&r.data!=="&"?r:null,r!==null&&(o.memoizedState={dehydrated:r,treeContext:as!==null?{id:nr,overflow:ir}:null,retryLane:536870912,hydrationErrors:null},u=q0(r),u.return=o,o.child=u,fn=o,Dt=null)):r=null,r===null)throw us(o);return Op(r)?o.lanes=32:o.lanes=536870912,null}var F=d.children;return d=d.fallback,v?(ms(),v=o.mode,F=$c({mode:"hidden",children:F},v),d=co(d,v,u,null),F.return=o,d.return=o,F.sibling=d,o.child=F,d=o.child,d.memoizedState=tp(u),d.childLanes=np(r,A,u),o.memoizedState=ep,Yl(null,d)):(ps(o),ip(o,F))}var X=r.memoizedState;if(X!==null&&(F=X.dehydrated,F!==null)){if(_)o.flags&256?(ps(o),o.flags&=-257,o=rp(r,o,u)):o.memoizedState!==null?(ms(),o.child=r.child,o.flags|=128,o=null):(ms(),F=d.fallback,v=o.mode,d=$c({mode:"visible",children:d.children},v),F=co(F,v,u,null),F.flags|=2,d.return=o,F.return=o,d.sibling=F,o.child=d,vo(o,r.child,null,u),d=o.child,d.memoizedState=tp(u),d.childLanes=np(r,A,u),o.memoizedState=ep,o=Yl(null,d));else if(ps(o),Op(F)){if(A=F.nextSibling&&F.nextSibling.dataset,A)var ue=A.dgst;A=ue,d=Error(i(419)),d.stack="",d.digest=A,Dl({value:d,source:null,stack:null}),o=rp(r,o,u)}else if(Xt||ua(r,o,u,!1),A=(u&r.childLanes)!==0,Xt||A){if(A=Rt,A!==null&&(d=fl(A,u),d!==0&&d!==X.retryLane))throw X.retryLane=d,uo(r,d),Fn(A,r,d),Xh;Vp(F)||td(),o=rp(r,o,u)}else Vp(F)?(o.flags|=192,o.child=r.child,o=null):(r=X.treeContext,Dt=di(F.nextSibling),fn=o,ct=!0,ls=null,ui=!1,r!==null&&K0(o,r),o=ip(o,d.children),o.flags|=4096);return o}return v?(ms(),F=d.fallback,v=o.mode,X=r.child,ue=X.sibling,d=_r(X,{mode:"hidden",children:d.children}),d.subtreeFlags=X.subtreeFlags&65011712,ue!==null?F=_r(ue,F):(F=co(F,v,u,null),F.flags|=2),F.return=o,d.return=o,d.sibling=F,o.child=d,Yl(null,d),d=o.child,F=r.child.memoizedState,F===null?F=tp(u):(v=F.cachePool,v!==null?(X=Wt._currentValue,v=v.parent!==X?{parent:X,pool:X}:v):v=Z0(),F={baseLanes:F.baseLanes|u,cachePool:v}),d.memoizedState=F,d.childLanes=np(r,A,u),o.memoizedState=ep,Yl(r.child,d)):(ps(o),u=r.child,r=u.sibling,u=_r(u,{mode:"visible",children:d.children}),u.return=o,u.sibling=null,r!==null&&(A=o.deletions,A===null?(o.deletions=[r],o.flags|=16):A.push(r)),o.child=u,o.memoizedState=null,u)}function ip(r,o){return o=$c({mode:"visible",children:o},r.mode),o.return=r,r.child=o}function $c(r,o){return r=$n(22,r,null,o),r.lanes=0,r}function rp(r,o,u){return vo(o,r.child,null,u),r=ip(o,o.pendingProps.children),r.flags|=2,o.memoizedState=null,r}function fv(r,o,u){r.lanes|=o;var d=r.alternate;d!==null&&(d.lanes|=o),_h(r.return,o,u)}function sp(r,o,u,d,v,_){var A=r.memoizedState;A===null?r.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:d,tail:u,tailMode:v,treeForkCount:_}:(A.isBackwards=o,A.rendering=null,A.renderingStartTime=0,A.last=d,A.tail=u,A.tailMode=v,A.treeForkCount=_)}function hv(r,o,u){var d=o.pendingProps,v=d.revealOrder,_=d.tail;d=d.children;var A=Ht.current,F=(A&2)!==0;if(F?(A=A&1|2,o.flags|=128):A&=1,oe(Ht,A),pn(r,o,d,u),d=ct?kl:0,!F&&r!==null&&(r.flags&128)!==0)e:for(r=o.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&fv(r,u,o);else if(r.tag===19)fv(r,u,o);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===o)break e;for(;r.sibling===null;){if(r.return===null||r.return===o)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(v){case"forwards":for(u=o.child,v=null;u!==null;)r=u.alternate,r!==null&&Pc(r)===null&&(v=u),u=u.sibling;u=v,u===null?(v=o.child,o.child=null):(v=u.sibling,u.sibling=null),sp(o,!1,v,u,_,d);break;case"backwards":case"unstable_legacy-backwards":for(u=null,v=o.child,o.child=null;v!==null;){if(r=v.alternate,r!==null&&Pc(r)===null){o.child=v;break}r=v.sibling,v.sibling=u,u=v,v=r}sp(o,!0,u,null,_,d);break;case"together":sp(o,!1,null,null,void 0,d);break;default:o.memoizedState=null}return o.child}function Ar(r,o,u){if(r!==null&&(o.dependencies=r.dependencies),vs|=o.lanes,(u&o.childLanes)===0)if(r!==null){if(ua(r,o,u,!1),(u&o.childLanes)===0)return null}else return null;if(r!==null&&o.child!==r.child)throw Error(i(153));if(o.child!==null){for(r=o.child,u=_r(r,r.pendingProps),o.child=u,u.return=o;r.sibling!==null;)r=r.sibling,u=u.sibling=_r(r,r.pendingProps),u.return=o;u.sibling=null}return o.child}function op(r,o){return(r.lanes&o)!==0?!0:(r=r.dependencies,!!(r!==null&&xc(r)))}function Ox(r,o,u){switch(o.tag){case 3:Ne(o,o.stateNode.containerInfo),cs(o,Wt,r.memoizedState.cache),fo();break;case 27:case 5:je(o);break;case 4:Ne(o,o.stateNode.containerInfo);break;case 10:cs(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,Mh(o),null;break;case 13:var d=o.memoizedState;if(d!==null)return d.dehydrated!==null?(ps(o),o.flags|=128,null):(u&o.child.childLanes)!==0?dv(r,o,u):(ps(o),r=Ar(r,o,u),r!==null?r.sibling:null);ps(o);break;case 19:var v=(r.flags&128)!==0;if(d=(u&o.childLanes)!==0,d||(ua(r,o,u,!1),d=(u&o.childLanes)!==0),v){if(d)return hv(r,o,u);o.flags|=128}if(v=o.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),oe(Ht,Ht.current),d)break;return null;case 22:return o.lanes=0,sv(r,o,u,o.pendingProps);case 24:cs(o,Wt,r.memoizedState.cache)}return Ar(r,o,u)}function pv(r,o,u){if(r!==null)if(r.memoizedProps!==o.pendingProps)Xt=!0;else{if(!op(r,u)&&(o.flags&128)===0)return Xt=!1,Ox(r,o,u);Xt=(r.flags&131072)!==0}else Xt=!1,ct&&(o.flags&1048576)!==0&&$0(o,kl,o.index);switch(o.lanes=0,o.tag){case 16:e:{var d=o.pendingProps;if(r=go(o.elementType),o.type=r,typeof r=="function")dh(r)?(d=Eo(r,d),o.tag=1,o=uv(null,o,r,d,u)):(o.tag=0,o=Zh(null,o,r,d,u));else{if(r!=null){var v=r.$$typeof;if(v===Y){o.tag=11,o=nv(null,o,r,d,u);break e}else if(v===L){o.tag=14,o=iv(null,o,r,d,u);break e}}throw o=D(r)||r,Error(i(306,o,""))}}return o;case 0:return Zh(r,o,o.type,o.pendingProps,u);case 1:return d=o.type,v=Eo(d,o.pendingProps),uv(r,o,d,v,u);case 3:e:{if(Ne(o,o.stateNode.containerInfo),r===null)throw Error(i(387));d=o.pendingProps;var _=o.memoizedState;v=_.element,xh(r,o),Fl(o,d,null,u);var A=o.memoizedState;if(d=A.cache,cs(o,Wt,d),d!==_.cache&&Eh(o,[Wt],u,!0),zl(),d=A.element,_.isDehydrated)if(_={element:d,isDehydrated:!1,cache:A.cache},o.updateQueue.baseState=_,o.memoizedState=_,o.flags&256){o=cv(r,o,d,u);break e}else if(d!==v){v=oi(Error(i(424)),o),Dl(v),o=cv(r,o,d,u);break e}else{switch(r=o.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(Dt=di(r.firstChild),fn=o,ct=!0,ls=null,ui=!0,u=sy(o,null,d,u),o.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling}else{if(fo(),d===v){o=Ar(r,o,u);break e}pn(r,o,d,u)}o=o.child}return o;case 26:return Yc(r,o),r===null?(u=A_(o.type,null,o.pendingProps,null))?o.memoizedState=u:ct||(u=o.type,r=o.pendingProps,d=ld(ge.current).createElement(u),d[Kt]=o,d[on]=r,mn(d,u,r),Jt(d),o.stateNode=d):o.memoizedState=A_(o.type,r.memoizedProps,o.pendingProps,r.memoizedState),null;case 27:return je(o),r===null&&ct&&(d=o.stateNode=w_(o.type,o.pendingProps,ge.current),fn=o,ui=!0,v=Dt,Ss(o.type)?(zp=v,Dt=di(d.firstChild)):Dt=v),pn(r,o,o.pendingProps.children,u),Yc(r,o),r===null&&(o.flags|=4194304),o.child;case 5:return r===null&&ct&&((v=d=Dt)&&(d=pC(d,o.type,o.pendingProps,ui),d!==null?(o.stateNode=d,fn=o,Dt=di(d.firstChild),ui=!1,v=!0):v=!1),v||us(o)),je(o),v=o.type,_=o.pendingProps,A=r!==null?r.memoizedProps:null,d=_.children,Pp(v,_)?d=null:A!==null&&Pp(v,A)&&(o.flags|=32),o.memoizedState!==null&&(v=Dh(r,o,Rx,null,null,u),ou._currentValue=v),Yc(r,o),pn(r,o,d,u),o.child;case 6:return r===null&&ct&&((r=u=Dt)&&(u=mC(u,o.pendingProps,ui),u!==null?(o.stateNode=u,fn=o,Dt=null,r=!0):r=!1),r||us(o)),null;case 13:return dv(r,o,u);case 4:return Ne(o,o.stateNode.containerInfo),d=o.pendingProps,r===null?o.child=vo(o,null,d,u):pn(r,o,d,u),o.child;case 11:return nv(r,o,o.type,o.pendingProps,u);case 7:return pn(r,o,o.pendingProps,u),o.child;case 8:return pn(r,o,o.pendingProps.children,u),o.child;case 12:return pn(r,o,o.pendingProps.children,u),o.child;case 10:return d=o.pendingProps,cs(o,o.type,d.value),pn(r,o,d.children,u),o.child;case 9:return v=o.type._context,d=o.pendingProps.children,po(o),v=hn(v),d=d(v),o.flags|=1,pn(r,o,d,u),o.child;case 14:return iv(r,o,o.type,o.pendingProps,u);case 15:return rv(r,o,o.type,o.pendingProps,u);case 19:return hv(r,o,u);case 31:return Vx(r,o,u);case 22:return sv(r,o,u,o.pendingProps);case 24:return po(o),d=hn(Wt),r===null?(v=Sh(),v===null&&(v=Rt,_=Th(),v.pooledCache=_,_.refCount++,_!==null&&(v.pooledCacheLanes|=u),v=_),o.memoizedState={parent:d,cache:v},Ah(o),cs(o,Wt,v)):((r.lanes&u)!==0&&(xh(r,o),Fl(o,null,null,u),zl()),v=r.memoizedState,_=o.memoizedState,v.parent!==d?(v={parent:d,cache:d},o.memoizedState=v,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=v),cs(o,Wt,d)):(d=_.cache,cs(o,Wt,d),d!==v.cache&&Eh(o,[Wt],u,!0))),pn(r,o,o.pendingProps.children,u),o.child;case 29:throw o.pendingProps}throw Error(i(156,o.tag))}function xr(r){r.flags|=4}function ap(r,o,u,d,v){if((o=(r.mode&32)!==0)&&(o=!1),o){if(r.flags|=16777216,(v&335544128)===v)if(r.stateNode.complete)r.flags|=8192;else if(Bv())r.flags|=8192;else throw yo=Nc,bh}else r.flags&=-16777217}function mv(r,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!N_(o))if(Bv())r.flags|=8192;else throw yo=Nc,bh}function Kc(r,o){o!==null&&(r.flags|=4),r.flags&16384&&(o=r.tag!==22?Zu():536870912,r.lanes|=o,Ta|=o)}function $l(r,o){if(!ct)switch(r.tailMode){case"hidden":o=r.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?r.tail=null:u.sibling=null;break;case"collapsed":u=r.tail;for(var d=null;u!==null;)u.alternate!==null&&(d=u),u=u.sibling;d===null?o||r.tail===null?r.tail=null:r.tail.sibling=null:d.sibling=null}}function Pt(r){var o=r.alternate!==null&&r.alternate.child===r.child,u=0,d=0;if(o)for(var v=r.child;v!==null;)u|=v.lanes|v.childLanes,d|=v.subtreeFlags&65011712,d|=v.flags&65011712,v.return=r,v=v.sibling;else for(v=r.child;v!==null;)u|=v.lanes|v.childLanes,d|=v.subtreeFlags,d|=v.flags,v.return=r,v=v.sibling;return r.subtreeFlags|=d,r.childLanes=u,o}function zx(r,o,u){var d=o.pendingProps;switch(mh(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pt(o),null;case 1:return Pt(o),null;case 3:return u=o.stateNode,d=null,r!==null&&(d=r.memoizedState.cache),o.memoizedState.cache!==d&&(o.flags|=2048),wr(Wt),De(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(r===null||r.child===null)&&(la(o)?xr(o):r===null||r.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,yh())),Pt(o),null;case 26:var v=o.type,_=o.memoizedState;return r===null?(xr(o),_!==null?(Pt(o),mv(o,_)):(Pt(o),ap(o,v,null,d,u))):_?_!==r.memoizedState?(xr(o),Pt(o),mv(o,_)):(Pt(o),o.flags&=-16777217):(r=r.memoizedProps,r!==d&&xr(o),Pt(o),ap(o,v,r,d,u)),null;case 27:if($e(o),u=ge.current,v=o.type,r!==null&&o.stateNode!=null)r.memoizedProps!==d&&xr(o);else{if(!d){if(o.stateNode===null)throw Error(i(166));return Pt(o),null}r=Q.current,la(o)?J0(o):(r=w_(v,d,u),o.stateNode=r,xr(o))}return Pt(o),null;case 5:if($e(o),v=o.type,r!==null&&o.stateNode!=null)r.memoizedProps!==d&&xr(o);else{if(!d){if(o.stateNode===null)throw Error(i(166));return Pt(o),null}if(_=Q.current,la(o))J0(o);else{var A=ld(ge.current);switch(_){case 1:_=A.createElementNS("http://www.w3.org/2000/svg",v);break;case 2:_=A.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;default:switch(v){case"svg":_=A.createElementNS("http://www.w3.org/2000/svg",v);break;case"math":_=A.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;case"script":_=A.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof d.is=="string"?A.createElement("select",{is:d.is}):A.createElement("select"),d.multiple?_.multiple=!0:d.size&&(_.size=d.size);break;default:_=typeof d.is=="string"?A.createElement(v,{is:d.is}):A.createElement(v)}}_[Kt]=o,_[on]=d;e:for(A=o.child;A!==null;){if(A.tag===5||A.tag===6)_.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===o)break e;for(;A.sibling===null;){if(A.return===null||A.return===o)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}o.stateNode=_;e:switch(mn(_,v,d),v){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}d&&xr(o)}}return Pt(o),ap(o,o.type,r===null?null:r.memoizedProps,o.pendingProps,u),null;case 6:if(r&&o.stateNode!=null)r.memoizedProps!==d&&xr(o);else{if(typeof d!="string"&&o.stateNode===null)throw Error(i(166));if(r=ge.current,la(o)){if(r=o.stateNode,u=o.memoizedProps,d=null,v=fn,v!==null)switch(v.tag){case 27:case 5:d=v.memoizedProps}r[Kt]=o,r=!!(r.nodeValue===u||d!==null&&d.suppressHydrationWarning===!0||d_(r.nodeValue,u)),r||us(o,!0)}else r=ld(r).createTextNode(d),r[Kt]=o,o.stateNode=r}return Pt(o),null;case 31:if(u=o.memoizedState,r===null||r.memoizedState!==null){if(d=la(o),u!==null){if(r===null){if(!d)throw Error(i(318));if(r=o.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(557));r[Kt]=o}else fo(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Pt(o),r=!1}else u=yh(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=u),r=!0;if(!r)return o.flags&256?(Jn(o),o):(Jn(o),null);if((o.flags&128)!==0)throw Error(i(558))}return Pt(o),null;case 13:if(d=o.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(v=la(o),d!==null&&d.dehydrated!==null){if(r===null){if(!v)throw Error(i(318));if(v=o.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(i(317));v[Kt]=o}else fo(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Pt(o),v=!1}else v=yh(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=v),v=!0;if(!v)return o.flags&256?(Jn(o),o):(Jn(o),null)}return Jn(o),(o.flags&128)!==0?(o.lanes=u,o):(u=d!==null,r=r!==null&&r.memoizedState!==null,u&&(d=o.child,v=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(v=d.alternate.memoizedState.cachePool.pool),_=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(_=d.memoizedState.cachePool.pool),_!==v&&(d.flags|=2048)),u!==r&&u&&(o.child.flags|=8192),Kc(o,o.updateQueue),Pt(o),null);case 4:return De(),r===null&&Rp(o.stateNode.containerInfo),Pt(o),null;case 10:return wr(o.type),Pt(o),null;case 19:if(G(Ht),d=o.memoizedState,d===null)return Pt(o),null;if(v=(o.flags&128)!==0,_=d.rendering,_===null)if(v)$l(d,!1);else{if(Bt!==0||r!==null&&(r.flags&128)!==0)for(r=o.child;r!==null;){if(_=Pc(r),_!==null){for(o.flags|=128,$l(d,!1),r=_.updateQueue,o.updateQueue=r,Kc(o,r),o.subtreeFlags=0,r=u,u=o.child;u!==null;)H0(u,r),u=u.sibling;return oe(Ht,Ht.current&1|2),ct&&Er(o,d.treeForkCount),o.child}r=r.sibling}d.tail!==null&&ke()>Xc&&(o.flags|=128,v=!0,$l(d,!1),o.lanes=4194304)}else{if(!v)if(r=Pc(_),r!==null){if(o.flags|=128,v=!0,r=r.updateQueue,o.updateQueue=r,Kc(o,r),$l(d,!0),d.tail===null&&d.tailMode==="hidden"&&!_.alternate&&!ct)return Pt(o),null}else 2*ke()-d.renderingStartTime>Xc&&u!==536870912&&(o.flags|=128,v=!0,$l(d,!1),o.lanes=4194304);d.isBackwards?(_.sibling=o.child,o.child=_):(r=d.last,r!==null?r.sibling=_:o.child=_,d.last=_)}return d.tail!==null?(r=d.tail,d.rendering=r,d.tail=r.sibling,d.renderingStartTime=ke(),r.sibling=null,u=Ht.current,oe(Ht,v?u&1|2:u&1),ct&&Er(o,d.treeForkCount),r):(Pt(o),null);case 22:case 23:return Jn(o),Nh(),d=o.memoizedState!==null,r!==null?r.memoizedState!==null!==d&&(o.flags|=8192):d&&(o.flags|=8192),d?(u&536870912)!==0&&(o.flags&128)===0&&(Pt(o),o.subtreeFlags&6&&(o.flags|=8192)):Pt(o),u=o.updateQueue,u!==null&&Kc(o,u.retryQueue),u=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),d=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(d=o.memoizedState.cachePool.pool),d!==u&&(o.flags|=2048),r!==null&&G(mo),null;case 24:return u=null,r!==null&&(u=r.memoizedState.cache),o.memoizedState.cache!==u&&(o.flags|=2048),wr(Wt),Pt(o),null;case 25:return null;case 30:return null}throw Error(i(156,o.tag))}function Fx(r,o){switch(mh(o),o.tag){case 1:return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 3:return wr(Wt),De(),r=o.flags,(r&65536)!==0&&(r&128)===0?(o.flags=r&-65537|128,o):null;case 26:case 27:case 5:return $e(o),null;case 31:if(o.memoizedState!==null){if(Jn(o),o.alternate===null)throw Error(i(340));fo()}return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 13:if(Jn(o),r=o.memoizedState,r!==null&&r.dehydrated!==null){if(o.alternate===null)throw Error(i(340));fo()}return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 19:return G(Ht),null;case 4:return De(),null;case 10:return wr(o.type),null;case 22:case 23:return Jn(o),Nh(),r!==null&&G(mo),r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 24:return wr(Wt),null;case 25:return null;default:return null}}function gv(r,o){switch(mh(o),o.tag){case 3:wr(Wt),De();break;case 26:case 27:case 5:$e(o);break;case 4:De();break;case 31:o.memoizedState!==null&&Jn(o);break;case 13:Jn(o);break;case 19:G(Ht);break;case 10:wr(o.type);break;case 22:case 23:Jn(o),Nh(),r!==null&&G(mo);break;case 24:wr(Wt)}}function Kl(r,o){try{var u=o.updateQueue,d=u!==null?u.lastEffect:null;if(d!==null){var v=d.next;u=v;do{if((u.tag&r)===r){d=void 0;var _=u.create,A=u.inst;d=_(),A.destroy=d}u=u.next}while(u!==v)}}catch(F){bt(o,o.return,F)}}function gs(r,o,u){try{var d=o.updateQueue,v=d!==null?d.lastEffect:null;if(v!==null){var _=v.next;d=_;do{if((d.tag&r)===r){var A=d.inst,F=A.destroy;if(F!==void 0){A.destroy=void 0,v=o;var X=u,ue=F;try{ue()}catch(ye){bt(v,X,ye)}}}d=d.next}while(d!==_)}}catch(ye){bt(o,o.return,ye)}}function yv(r){var o=r.updateQueue;if(o!==null){var u=r.stateNode;try{ay(o,u)}catch(d){bt(r,r.return,d)}}}function vv(r,o,u){u.props=Eo(r.type,r.memoizedProps),u.state=r.memoizedState;try{u.componentWillUnmount()}catch(d){bt(r,o,d)}}function Jl(r,o){try{var u=r.ref;if(u!==null){switch(r.tag){case 26:case 27:case 5:var d=r.stateNode;break;case 30:d=r.stateNode;break;default:d=r.stateNode}typeof u=="function"?r.refCleanup=u(d):u.current=d}}catch(v){bt(r,o,v)}}function rr(r,o){var u=r.ref,d=r.refCleanup;if(u!==null)if(typeof d=="function")try{d()}catch(v){bt(r,o,v)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(v){bt(r,o,v)}else u.current=null}function _v(r){var o=r.type,u=r.memoizedProps,d=r.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":u.autoFocus&&d.focus();break e;case"img":u.src?d.src=u.src:u.srcSet&&(d.srcset=u.srcSet)}}catch(v){bt(r,r.return,v)}}function lp(r,o,u){try{var d=r.stateNode;lC(d,r.type,u,o),d[on]=o}catch(v){bt(r,r.return,v)}}function Ev(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&Ss(r.type)||r.tag===4}function up(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||Ev(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&Ss(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function cp(r,o,u){var d=r.tag;if(d===5||d===6)r=r.stateNode,o?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(r,o):(o=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,o.appendChild(r),u=u._reactRootContainer,u!=null||o.onclick!==null||(o.onclick=Ti));else if(d!==4&&(d===27&&Ss(r.type)&&(u=r.stateNode,o=null),r=r.child,r!==null))for(cp(r,o,u),r=r.sibling;r!==null;)cp(r,o,u),r=r.sibling}function Jc(r,o,u){var d=r.tag;if(d===5||d===6)r=r.stateNode,o?u.insertBefore(r,o):u.appendChild(r);else if(d!==4&&(d===27&&Ss(r.type)&&(u=r.stateNode),r=r.child,r!==null))for(Jc(r,o,u),r=r.sibling;r!==null;)Jc(r,o,u),r=r.sibling}function Tv(r){var o=r.stateNode,u=r.memoizedProps;try{for(var d=r.type,v=o.attributes;v.length;)o.removeAttributeNode(v[0]);mn(o,d,u),o[Kt]=r,o[on]=u}catch(_){bt(r,r.return,_)}}var Cr=!1,Zt=!1,dp=!1,wv=typeof WeakSet=="function"?WeakSet:Set,ln=null;function Bx(r,o){if(r=r.containerInfo,kp=md,r=P0(r),rh(r)){if("selectionStart"in r)var u={start:r.selectionStart,end:r.selectionEnd};else e:{u=(u=r.ownerDocument)&&u.defaultView||window;var d=u.getSelection&&u.getSelection();if(d&&d.rangeCount!==0){u=d.anchorNode;var v=d.anchorOffset,_=d.focusNode;d=d.focusOffset;try{u.nodeType,_.nodeType}catch{u=null;break e}var A=0,F=-1,X=-1,ue=0,ye=0,Se=r,de=null;t:for(;;){for(var me;Se!==u||v!==0&&Se.nodeType!==3||(F=A+v),Se!==_||d!==0&&Se.nodeType!==3||(X=A+d),Se.nodeType===3&&(A+=Se.nodeValue.length),(me=Se.firstChild)!==null;)de=Se,Se=me;for(;;){if(Se===r)break t;if(de===u&&++ue===v&&(F=A),de===_&&++ye===d&&(X=A),(me=Se.nextSibling)!==null)break;Se=de,de=Se.parentNode}Se=me}u=F===-1||X===-1?null:{start:F,end:X}}else u=null}u=u||{start:0,end:0}}else u=null;for(Dp={focusedElem:r,selectionRange:u},md=!1,ln=o;ln!==null;)if(o=ln,r=o.child,(o.subtreeFlags&1028)!==0&&r!==null)r.return=o,ln=r;else for(;ln!==null;){switch(o=ln,_=o.alternate,r=o.flags,o.tag){case 0:if((r&4)!==0&&(r=o.updateQueue,r=r!==null?r.events:null,r!==null))for(u=0;u<r.length;u++)v=r[u],v.ref.impl=v.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&_!==null){r=void 0,u=o,v=_.memoizedProps,_=_.memoizedState,d=u.stateNode;try{var Oe=Eo(u.type,v);r=d.getSnapshotBeforeUpdate(Oe,_),d.__reactInternalSnapshotBeforeUpdate=r}catch(He){bt(u,u.return,He)}}break;case 3:if((r&1024)!==0){if(r=o.stateNode.containerInfo,u=r.nodeType,u===9)Up(r);else if(u===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":Up(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=o.sibling,r!==null){r.return=o.return,ln=r;break}ln=o.return}}function Sv(r,o,u){var d=u.flags;switch(u.tag){case 0:case 11:case 15:Rr(r,u),d&4&&Kl(5,u);break;case 1:if(Rr(r,u),d&4)if(r=u.stateNode,o===null)try{r.componentDidMount()}catch(A){bt(u,u.return,A)}else{var v=Eo(u.type,o.memoizedProps);o=o.memoizedState;try{r.componentDidUpdate(v,o,r.__reactInternalSnapshotBeforeUpdate)}catch(A){bt(u,u.return,A)}}d&64&&yv(u),d&512&&Jl(u,u.return);break;case 3:if(Rr(r,u),d&64&&(r=u.updateQueue,r!==null)){if(o=null,u.child!==null)switch(u.child.tag){case 27:case 5:o=u.child.stateNode;break;case 1:o=u.child.stateNode}try{ay(r,o)}catch(A){bt(u,u.return,A)}}break;case 27:o===null&&d&4&&Tv(u);case 26:case 5:Rr(r,u),o===null&&d&4&&_v(u),d&512&&Jl(u,u.return);break;case 12:Rr(r,u);break;case 31:Rr(r,u),d&4&&xv(r,u);break;case 13:Rr(r,u),d&4&&Cv(r,u),d&64&&(r=u.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(u=Wx.bind(null,u),gC(r,u))));break;case 22:if(d=u.memoizedState!==null||Cr,!d){o=o!==null&&o.memoizedState!==null||Zt,v=Cr;var _=Zt;Cr=d,(Zt=o)&&!_?Nr(r,u,(u.subtreeFlags&8772)!==0):Rr(r,u),Cr=v,Zt=_}break;case 30:break;default:Rr(r,u)}}function bv(r){var o=r.alternate;o!==null&&(r.alternate=null,bv(o)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(o=r.stateNode,o!==null&&Yo(o)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var Vt=null,Un=!1;function Ir(r,o,u){for(u=u.child;u!==null;)Av(r,o,u),u=u.sibling}function Av(r,o,u){if(zt&&typeof zt.onCommitFiberUnmount=="function")try{zt.onCommitFiberUnmount(ft,u)}catch{}switch(u.tag){case 26:Zt||rr(u,o),Ir(r,o,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:Zt||rr(u,o);var d=Vt,v=Un;Ss(u.type)&&(Vt=u.stateNode,Un=!1),Ir(r,o,u),iu(u.stateNode),Vt=d,Un=v;break;case 5:Zt||rr(u,o);case 6:if(d=Vt,v=Un,Vt=null,Ir(r,o,u),Vt=d,Un=v,Vt!==null)if(Un)try{(Vt.nodeType===9?Vt.body:Vt.nodeName==="HTML"?Vt.ownerDocument.body:Vt).removeChild(u.stateNode)}catch(_){bt(u,o,_)}else try{Vt.removeChild(u.stateNode)}catch(_){bt(u,o,_)}break;case 18:Vt!==null&&(Un?(r=Vt,y_(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,u.stateNode),Ra(r)):y_(Vt,u.stateNode));break;case 4:d=Vt,v=Un,Vt=u.stateNode.containerInfo,Un=!0,Ir(r,o,u),Vt=d,Un=v;break;case 0:case 11:case 14:case 15:gs(2,u,o),Zt||gs(4,u,o),Ir(r,o,u);break;case 1:Zt||(rr(u,o),d=u.stateNode,typeof d.componentWillUnmount=="function"&&vv(u,o,d)),Ir(r,o,u);break;case 21:Ir(r,o,u);break;case 22:Zt=(d=Zt)||u.memoizedState!==null,Ir(r,o,u),Zt=d;break;default:Ir(r,o,u)}}function xv(r,o){if(o.memoizedState===null&&(r=o.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{Ra(r)}catch(u){bt(o,o.return,u)}}}function Cv(r,o){if(o.memoizedState===null&&(r=o.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{Ra(r)}catch(u){bt(o,o.return,u)}}function Gx(r){switch(r.tag){case 31:case 13:case 19:var o=r.stateNode;return o===null&&(o=r.stateNode=new wv),o;case 22:return r=r.stateNode,o=r._retryCache,o===null&&(o=r._retryCache=new wv),o;default:throw Error(i(435,r.tag))}}function jc(r,o){var u=Gx(r);o.forEach(function(d){if(!u.has(d)){u.add(d);var v=Qx.bind(null,r,d);d.then(v,v)}})}function Vn(r,o){var u=o.deletions;if(u!==null)for(var d=0;d<u.length;d++){var v=u[d],_=r,A=o,F=A;e:for(;F!==null;){switch(F.tag){case 27:if(Ss(F.type)){Vt=F.stateNode,Un=!1;break e}break;case 5:Vt=F.stateNode,Un=!1;break e;case 3:case 4:Vt=F.stateNode.containerInfo,Un=!0;break e}F=F.return}if(Vt===null)throw Error(i(160));Av(_,A,v),Vt=null,Un=!1,_=v.alternate,_!==null&&(_.return=null),v.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)Iv(o,r),o=o.sibling}var Ci=null;function Iv(r,o){var u=r.alternate,d=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:Vn(o,r),On(r),d&4&&(gs(3,r,r.return),Kl(3,r),gs(5,r,r.return));break;case 1:Vn(o,r),On(r),d&512&&(Zt||u===null||rr(u,u.return)),d&64&&Cr&&(r=r.updateQueue,r!==null&&(d=r.callbacks,d!==null&&(u=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=u===null?d:u.concat(d))));break;case 26:var v=Ci;if(Vn(o,r),On(r),d&512&&(Zt||u===null||rr(u,u.return)),d&4){var _=u!==null?u.memoizedState:null;if(d=r.memoizedState,u===null)if(d===null)if(r.stateNode===null){e:{d=r.type,u=r.memoizedProps,v=v.ownerDocument||v;t:switch(d){case"title":_=v.getElementsByTagName("title")[0],(!_||_[qi]||_[Kt]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=v.createElement(d),v.head.insertBefore(_,v.querySelector("head > title"))),mn(_,d,u),_[Kt]=r,Jt(_),d=_;break e;case"link":var A=I_("link","href",v).get(d+(u.href||""));if(A){for(var F=0;F<A.length;F++)if(_=A[F],_.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&_.getAttribute("rel")===(u.rel==null?null:u.rel)&&_.getAttribute("title")===(u.title==null?null:u.title)&&_.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){A.splice(F,1);break t}}_=v.createElement(d),mn(_,d,u),v.head.appendChild(_);break;case"meta":if(A=I_("meta","content",v).get(d+(u.content||""))){for(F=0;F<A.length;F++)if(_=A[F],_.getAttribute("content")===(u.content==null?null:""+u.content)&&_.getAttribute("name")===(u.name==null?null:u.name)&&_.getAttribute("property")===(u.property==null?null:u.property)&&_.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&_.getAttribute("charset")===(u.charSet==null?null:u.charSet)){A.splice(F,1);break t}}_=v.createElement(d),mn(_,d,u),v.head.appendChild(_);break;default:throw Error(i(468,d))}_[Kt]=r,Jt(_),d=_}r.stateNode=d}else R_(v,r.type,r.stateNode);else r.stateNode=C_(v,d,r.memoizedProps);else _!==d?(_===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):_.count--,d===null?R_(v,r.type,r.stateNode):C_(v,d,r.memoizedProps)):d===null&&r.stateNode!==null&&lp(r,r.memoizedProps,u.memoizedProps)}break;case 27:Vn(o,r),On(r),d&512&&(Zt||u===null||rr(u,u.return)),u!==null&&d&4&&lp(r,r.memoizedProps,u.memoizedProps);break;case 5:if(Vn(o,r),On(r),d&512&&(Zt||u===null||rr(u,u.return)),r.flags&32){v=r.stateNode;try{Ln(v,"")}catch(Oe){bt(r,r.return,Oe)}}d&4&&r.stateNode!=null&&(v=r.memoizedProps,lp(r,v,u!==null?u.memoizedProps:v)),d&1024&&(dp=!0);break;case 6:if(Vn(o,r),On(r),d&4){if(r.stateNode===null)throw Error(i(162));d=r.memoizedProps,u=r.stateNode;try{u.nodeValue=d}catch(Oe){bt(r,r.return,Oe)}}break;case 3:if(dd=null,v=Ci,Ci=ud(o.containerInfo),Vn(o,r),Ci=v,On(r),d&4&&u!==null&&u.memoizedState.isDehydrated)try{Ra(o.containerInfo)}catch(Oe){bt(r,r.return,Oe)}dp&&(dp=!1,Rv(r));break;case 4:d=Ci,Ci=ud(r.stateNode.containerInfo),Vn(o,r),On(r),Ci=d;break;case 12:Vn(o,r),On(r);break;case 31:Vn(o,r),On(r),d&4&&(d=r.updateQueue,d!==null&&(r.updateQueue=null,jc(r,d)));break;case 13:Vn(o,r),On(r),r.child.flags&8192&&r.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(Qc=ke()),d&4&&(d=r.updateQueue,d!==null&&(r.updateQueue=null,jc(r,d)));break;case 22:v=r.memoizedState!==null;var X=u!==null&&u.memoizedState!==null,ue=Cr,ye=Zt;if(Cr=ue||v,Zt=ye||X,Vn(o,r),Zt=ye,Cr=ue,On(r),d&8192)e:for(o=r.stateNode,o._visibility=v?o._visibility&-2:o._visibility|1,v&&(u===null||X||Cr||Zt||To(r)),u=null,o=r;;){if(o.tag===5||o.tag===26){if(u===null){X=u=o;try{if(_=X.stateNode,v)A=_.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{F=X.stateNode;var Se=X.memoizedProps.style,de=Se!=null&&Se.hasOwnProperty("display")?Se.display:null;F.style.display=de==null||typeof de=="boolean"?"":(""+de).trim()}}catch(Oe){bt(X,X.return,Oe)}}}else if(o.tag===6){if(u===null){X=o;try{X.stateNode.nodeValue=v?"":X.memoizedProps}catch(Oe){bt(X,X.return,Oe)}}}else if(o.tag===18){if(u===null){X=o;try{var me=X.stateNode;v?v_(me,!0):v_(X.stateNode,!1)}catch(Oe){bt(X,X.return,Oe)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===r)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break e;for(;o.sibling===null;){if(o.return===null||o.return===r)break e;u===o&&(u=null),o=o.return}u===o&&(u=null),o.sibling.return=o.return,o=o.sibling}d&4&&(d=r.updateQueue,d!==null&&(u=d.retryQueue,u!==null&&(d.retryQueue=null,jc(r,u))));break;case 19:Vn(o,r),On(r),d&4&&(d=r.updateQueue,d!==null&&(r.updateQueue=null,jc(r,d)));break;case 30:break;case 21:break;default:Vn(o,r),On(r)}}function On(r){var o=r.flags;if(o&2){try{for(var u,d=r.return;d!==null;){if(Ev(d)){u=d;break}d=d.return}if(u==null)throw Error(i(160));switch(u.tag){case 27:var v=u.stateNode,_=up(r);Jc(r,_,v);break;case 5:var A=u.stateNode;u.flags&32&&(Ln(A,""),u.flags&=-33);var F=up(r);Jc(r,F,A);break;case 3:case 4:var X=u.stateNode.containerInfo,ue=up(r);cp(r,ue,X);break;default:throw Error(i(161))}}catch(ye){bt(r,r.return,ye)}r.flags&=-3}o&4096&&(r.flags&=-4097)}function Rv(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var o=r;Rv(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),r=r.sibling}}function Rr(r,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)Sv(r,o.alternate,o),o=o.sibling}function To(r){for(r=r.child;r!==null;){var o=r;switch(o.tag){case 0:case 11:case 14:case 15:gs(4,o,o.return),To(o);break;case 1:rr(o,o.return);var u=o.stateNode;typeof u.componentWillUnmount=="function"&&vv(o,o.return,u),To(o);break;case 27:iu(o.stateNode);case 26:case 5:rr(o,o.return),To(o);break;case 22:o.memoizedState===null&&To(o);break;case 30:To(o);break;default:To(o)}r=r.sibling}}function Nr(r,o,u){for(u=u&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var d=o.alternate,v=r,_=o,A=_.flags;switch(_.tag){case 0:case 11:case 15:Nr(v,_,u),Kl(4,_);break;case 1:if(Nr(v,_,u),d=_,v=d.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(ue){bt(d,d.return,ue)}if(d=_,v=d.updateQueue,v!==null){var F=d.stateNode;try{var X=v.shared.hiddenCallbacks;if(X!==null)for(v.shared.hiddenCallbacks=null,v=0;v<X.length;v++)oy(X[v],F)}catch(ue){bt(d,d.return,ue)}}u&&A&64&&yv(_),Jl(_,_.return);break;case 27:Tv(_);case 26:case 5:Nr(v,_,u),u&&d===null&&A&4&&_v(_),Jl(_,_.return);break;case 12:Nr(v,_,u);break;case 31:Nr(v,_,u),u&&A&4&&xv(v,_);break;case 13:Nr(v,_,u),u&&A&4&&Cv(v,_);break;case 22:_.memoizedState===null&&Nr(v,_,u),Jl(_,_.return);break;case 30:break;default:Nr(v,_,u)}o=o.sibling}}function fp(r,o){var u=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),r=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(r=o.memoizedState.cachePool.pool),r!==u&&(r!=null&&r.refCount++,u!=null&&Pl(u))}function hp(r,o){r=null,o.alternate!==null&&(r=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==r&&(o.refCount++,r!=null&&Pl(r))}function Ii(r,o,u,d){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)Nv(r,o,u,d),o=o.sibling}function Nv(r,o,u,d){var v=o.flags;switch(o.tag){case 0:case 11:case 15:Ii(r,o,u,d),v&2048&&Kl(9,o);break;case 1:Ii(r,o,u,d);break;case 3:Ii(r,o,u,d),v&2048&&(r=null,o.alternate!==null&&(r=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==r&&(o.refCount++,r!=null&&Pl(r)));break;case 12:if(v&2048){Ii(r,o,u,d),r=o.stateNode;try{var _=o.memoizedProps,A=_.id,F=_.onPostCommit;typeof F=="function"&&F(A,o.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(X){bt(o,o.return,X)}}else Ii(r,o,u,d);break;case 31:Ii(r,o,u,d);break;case 13:Ii(r,o,u,d);break;case 23:break;case 22:_=o.stateNode,A=o.alternate,o.memoizedState!==null?_._visibility&2?Ii(r,o,u,d):jl(r,o):_._visibility&2?Ii(r,o,u,d):(_._visibility|=2,va(r,o,u,d,(o.subtreeFlags&10256)!==0||!1)),v&2048&&fp(A,o);break;case 24:Ii(r,o,u,d),v&2048&&hp(o.alternate,o);break;default:Ii(r,o,u,d)}}function va(r,o,u,d,v){for(v=v&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var _=r,A=o,F=u,X=d,ue=A.flags;switch(A.tag){case 0:case 11:case 15:va(_,A,F,X,v),Kl(8,A);break;case 23:break;case 22:var ye=A.stateNode;A.memoizedState!==null?ye._visibility&2?va(_,A,F,X,v):jl(_,A):(ye._visibility|=2,va(_,A,F,X,v)),v&&ue&2048&&fp(A.alternate,A);break;case 24:va(_,A,F,X,v),v&&ue&2048&&hp(A.alternate,A);break;default:va(_,A,F,X,v)}o=o.sibling}}function jl(r,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var u=r,d=o,v=d.flags;switch(d.tag){case 22:jl(u,d),v&2048&&fp(d.alternate,d);break;case 24:jl(u,d),v&2048&&hp(d.alternate,d);break;default:jl(u,d)}o=o.sibling}}var Wl=8192;function _a(r,o,u){if(r.subtreeFlags&Wl)for(r=r.child;r!==null;)Mv(r,o,u),r=r.sibling}function Mv(r,o,u){switch(r.tag){case 26:_a(r,o,u),r.flags&Wl&&r.memoizedState!==null&&IC(u,Ci,r.memoizedState,r.memoizedProps);break;case 5:_a(r,o,u);break;case 3:case 4:var d=Ci;Ci=ud(r.stateNode.containerInfo),_a(r,o,u),Ci=d;break;case 22:r.memoizedState===null&&(d=r.alternate,d!==null&&d.memoizedState!==null?(d=Wl,Wl=16777216,_a(r,o,u),Wl=d):_a(r,o,u));break;default:_a(r,o,u)}}function kv(r){var o=r.alternate;if(o!==null&&(r=o.child,r!==null)){o.child=null;do o=r.sibling,r.sibling=null,r=o;while(r!==null)}}function Ql(r){var o=r.deletions;if((r.flags&16)!==0){if(o!==null)for(var u=0;u<o.length;u++){var d=o[u];ln=d,Pv(d,r)}kv(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Dv(r),r=r.sibling}function Dv(r){switch(r.tag){case 0:case 11:case 15:Ql(r),r.flags&2048&&gs(9,r,r.return);break;case 3:Ql(r);break;case 12:Ql(r);break;case 22:var o=r.stateNode;r.memoizedState!==null&&o._visibility&2&&(r.return===null||r.return.tag!==13)?(o._visibility&=-3,Wc(r)):Ql(r);break;default:Ql(r)}}function Wc(r){var o=r.deletions;if((r.flags&16)!==0){if(o!==null)for(var u=0;u<o.length;u++){var d=o[u];ln=d,Pv(d,r)}kv(r)}for(r=r.child;r!==null;){switch(o=r,o.tag){case 0:case 11:case 15:gs(8,o,o.return),Wc(o);break;case 22:u=o.stateNode,u._visibility&2&&(u._visibility&=-3,Wc(o));break;default:Wc(o)}r=r.sibling}}function Pv(r,o){for(;ln!==null;){var u=ln;switch(u.tag){case 0:case 11:case 15:gs(8,u,o);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var d=u.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:Pl(u.memoizedState.cache)}if(d=u.child,d!==null)d.return=u,ln=d;else e:for(u=r;ln!==null;){d=ln;var v=d.sibling,_=d.return;if(bv(d),d===u){ln=null;break e}if(v!==null){v.return=_,ln=v;break e}ln=_}}}var Hx={getCacheForType:function(r){var o=hn(Wt),u=o.data.get(r);return u===void 0&&(u=r(),o.data.set(r,u)),u},cacheSignal:function(){return hn(Wt).controller.signal}},qx=typeof WeakMap=="function"?WeakMap:Map,_t=0,Rt=null,it=null,st=0,St=0,jn=null,ys=!1,Ea=!1,pp=!1,Mr=0,Bt=0,vs=0,wo=0,mp=0,Wn=0,Ta=0,Xl=null,zn=null,gp=!1,Qc=0,Lv=0,Xc=1/0,Zc=null,_s=null,rn=0,Es=null,wa=null,kr=0,yp=0,vp=null,Uv=null,Zl=0,_p=null;function Qn(){return(_t&2)!==0&&st!==0?st&-st:ie.T!==null?Ap():ec()}function Vv(){if(Wn===0)if((st&536870912)===0||ct){var r=Fi;Fi<<=1,(Fi&3932160)===0&&(Fi=262144),Wn=r}else Wn=536870912;return r=Kn.current,r!==null&&(r.flags|=32),Wn}function Fn(r,o,u){(r===Rt&&(St===2||St===9)||r.cancelPendingCommit!==null)&&(Sa(r,0),Ts(r,st,Wn,!1)),js(r,u),((_t&2)===0||r!==Rt)&&(r===Rt&&((_t&2)===0&&(wo|=u),Bt===4&&Ts(r,st,Wn,!1)),sr(r))}function Ov(r,o,u){if((_t&6)!==0)throw Error(i(327));var d=!u&&(o&127)===0&&(o&r.expiredLanes)===0||vi(r,o),v=d?Kx(r,o):Tp(r,o,!0),_=d;do{if(v===0){Ea&&!d&&Ts(r,o,0,!1);break}else{if(u=r.current.alternate,_&&!Yx(u)){v=Tp(r,o,!1),_=!1;continue}if(v===2){if(_=o,r.errorRecoveryDisabledLanes&_)var A=0;else A=r.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){o=A;e:{var F=r;v=Xl;var X=F.current.memoizedState.isDehydrated;if(X&&(Sa(F,A).flags|=256),A=Tp(F,A,!1),A!==2){if(pp&&!X){F.errorRecoveryDisabledLanes|=_,wo|=_,v=4;break e}_=zn,zn=v,_!==null&&(zn===null?zn=_:zn.push.apply(zn,_))}v=A}if(_=!1,v!==2)continue}}if(v===1){Sa(r,0),Ts(r,o,0,!0);break}e:{switch(d=r,_=v,_){case 0:case 1:throw Error(i(345));case 4:if((o&4194048)!==o)break;case 6:Ts(d,o,Wn,!ys);break e;case 2:zn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((o&62914560)===o&&(v=Qc+300-ke(),10<v)){if(Ts(d,o,Wn,!ys),Bi(d,0,!0)!==0)break e;kr=o,d.timeoutHandle=m_(zv.bind(null,d,u,zn,Zc,gp,o,Wn,wo,Ta,ys,_,"Throttled",-0,0),v);break e}zv(d,u,zn,Zc,gp,o,Wn,wo,Ta,ys,_,null,-0,0)}}break}while(!0);sr(r)}function zv(r,o,u,d,v,_,A,F,X,ue,ye,Se,de,me){if(r.timeoutHandle=-1,Se=o.subtreeFlags,Se&8192||(Se&16785408)===16785408){Se={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ti},Mv(o,_,Se);var Oe=(_&62914560)===_?Qc-ke():(_&4194048)===_?Lv-ke():0;if(Oe=RC(Se,Oe),Oe!==null){kr=_,r.cancelPendingCommit=Oe(Kv.bind(null,r,o,_,u,d,v,A,F,X,ye,Se,null,de,me)),Ts(r,_,A,!ue);return}}Kv(r,o,_,u,d,v,A,F,X)}function Yx(r){for(var o=r;;){var u=o.tag;if((u===0||u===11||u===15)&&o.flags&16384&&(u=o.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var d=0;d<u.length;d++){var v=u[d],_=v.getSnapshot;v=v.value;try{if(!Yn(_(),v))return!1}catch{return!1}}if(u=o.child,o.subtreeFlags&16384&&u!==null)u.return=o,o=u;else{if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Ts(r,o,u,d){o&=~mp,o&=~wo,r.suspendedLanes|=o,r.pingedLanes&=~o,d&&(r.warmLanes|=o),d=r.expirationTimes;for(var v=o;0<v;){var _=31-yt(v),A=1<<_;d[_]=-1,v&=~A}u!==0&&Ws(r,u,o)}function ed(){return(_t&6)===0?(eu(0),!1):!0}function Ep(){if(it!==null){if(St===0)var r=it.return;else r=it,Tr=ho=null,Uh(r),ha=null,Ul=0,r=it;for(;r!==null;)gv(r.alternate,r),r=r.return;it=null}}function Sa(r,o){var u=r.timeoutHandle;u!==-1&&(r.timeoutHandle=-1,dC(u)),u=r.cancelPendingCommit,u!==null&&(r.cancelPendingCommit=null,u()),kr=0,Ep(),Rt=r,it=u=_r(r.current,null),st=o,St=0,jn=null,ys=!1,Ea=vi(r,o),pp=!1,Ta=Wn=mp=wo=vs=Bt=0,zn=Xl=null,gp=!1,(o&8)!==0&&(o|=o&32);var d=r.entangledLanes;if(d!==0)for(r=r.entanglements,d&=o;0<d;){var v=31-yt(d),_=1<<v;o|=r[v],d&=~_}return Mr=o,Tc(),u}function Fv(r,o){tt=null,ie.H=ql,o===fa||o===Rc?(o=ny(),St=3):o===bh?(o=ny(),St=4):St=o===Xh?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,jn=o,it===null&&(Bt=1,Hc(r,oi(o,r.current)))}function Bv(){var r=Kn.current;return r===null?!0:(st&4194048)===st?ci===null:(st&62914560)===st||(st&536870912)!==0?r===ci:!1}function Gv(){var r=ie.H;return ie.H=ql,r===null?ql:r}function Hv(){var r=ie.A;return ie.A=Hx,r}function td(){Bt=4,ys||(st&4194048)!==st&&Kn.current!==null||(Ea=!0),(vs&134217727)===0&&(wo&134217727)===0||Rt===null||Ts(Rt,st,Wn,!1)}function Tp(r,o,u){var d=_t;_t|=2;var v=Gv(),_=Hv();(Rt!==r||st!==o)&&(Zc=null,Sa(r,o)),o=!1;var A=Bt;e:do try{if(St!==0&&it!==null){var F=it,X=jn;switch(St){case 8:Ep(),A=6;break e;case 3:case 2:case 9:case 6:Kn.current===null&&(o=!0);var ue=St;if(St=0,jn=null,ba(r,F,X,ue),u&&Ea){A=0;break e}break;default:ue=St,St=0,jn=null,ba(r,F,X,ue)}}$x(),A=Bt;break}catch(ye){Fv(r,ye)}while(!0);return o&&r.shellSuspendCounter++,Tr=ho=null,_t=d,ie.H=v,ie.A=_,it===null&&(Rt=null,st=0,Tc()),A}function $x(){for(;it!==null;)qv(it)}function Kx(r,o){var u=_t;_t|=2;var d=Gv(),v=Hv();Rt!==r||st!==o?(Zc=null,Xc=ke()+500,Sa(r,o)):Ea=vi(r,o);e:do try{if(St!==0&&it!==null){o=it;var _=jn;t:switch(St){case 1:St=0,jn=null,ba(r,o,_,1);break;case 2:case 9:if(ey(_)){St=0,jn=null,Yv(o);break}o=function(){St!==2&&St!==9||Rt!==r||(St=7),sr(r)},_.then(o,o);break e;case 3:St=7;break e;case 4:St=5;break e;case 7:ey(_)?(St=0,jn=null,Yv(o)):(St=0,jn=null,ba(r,o,_,7));break;case 5:var A=null;switch(it.tag){case 26:A=it.memoizedState;case 5:case 27:var F=it;if(A?N_(A):F.stateNode.complete){St=0,jn=null;var X=F.sibling;if(X!==null)it=X;else{var ue=F.return;ue!==null?(it=ue,nd(ue)):it=null}break t}}St=0,jn=null,ba(r,o,_,5);break;case 6:St=0,jn=null,ba(r,o,_,6);break;case 8:Ep(),Bt=6;break e;default:throw Error(i(462))}}Jx();break}catch(ye){Fv(r,ye)}while(!0);return Tr=ho=null,ie.H=d,ie.A=v,_t=u,it!==null?0:(Rt=null,st=0,Tc(),Bt)}function Jx(){for(;it!==null&&!ce();)qv(it)}function qv(r){var o=pv(r.alternate,r,Mr);r.memoizedProps=r.pendingProps,o===null?nd(r):it=o}function Yv(r){var o=r,u=o.alternate;switch(o.tag){case 15:case 0:o=lv(u,o,o.pendingProps,o.type,void 0,st);break;case 11:o=lv(u,o,o.pendingProps,o.type.render,o.ref,st);break;case 5:Uh(o);default:gv(u,o),o=it=H0(o,Mr),o=pv(u,o,Mr)}r.memoizedProps=r.pendingProps,o===null?nd(r):it=o}function ba(r,o,u,d){Tr=ho=null,Uh(o),ha=null,Ul=0;var v=o.return;try{if(Ux(r,v,o,u,st)){Bt=1,Hc(r,oi(u,r.current)),it=null;return}}catch(_){if(v!==null)throw it=v,_;Bt=1,Hc(r,oi(u,r.current)),it=null;return}o.flags&32768?(ct||d===1?r=!0:Ea||(st&536870912)!==0?r=!1:(ys=r=!0,(d===2||d===9||d===3||d===6)&&(d=Kn.current,d!==null&&d.tag===13&&(d.flags|=16384))),$v(o,r)):nd(o)}function nd(r){var o=r;do{if((o.flags&32768)!==0){$v(o,ys);return}r=o.return;var u=zx(o.alternate,o,Mr);if(u!==null){it=u;return}if(o=o.sibling,o!==null){it=o;return}it=o=r}while(o!==null);Bt===0&&(Bt=5)}function $v(r,o){do{var u=Fx(r.alternate,r);if(u!==null){u.flags&=32767,it=u;return}if(u=r.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!o&&(r=r.sibling,r!==null)){it=r;return}it=r=u}while(r!==null);Bt=6,it=null}function Kv(r,o,u,d,v,_,A,F,X){r.cancelPendingCommit=null;do id();while(rn!==0);if((_t&6)!==0)throw Error(i(327));if(o!==null){if(o===r.current)throw Error(i(177));if(_=o.lanes|o.childLanes,_|=uh,eh(r,u,_,A,F,X),r===Rt&&(it=Rt=null,st=0),wa=o,Es=r,kr=u,yp=_,vp=v,Uv=d,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,Xx(Ze,function(){return Xv(),null})):(r.callbackNode=null,r.callbackPriority=0),d=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||d){d=ie.T,ie.T=null,v=re.p,re.p=2,A=_t,_t|=4;try{Bx(r,o,u)}finally{_t=A,re.p=v,ie.T=d}}rn=1,Jv(),jv(),Wv()}}function Jv(){if(rn===1){rn=0;var r=Es,o=wa,u=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||u){u=ie.T,ie.T=null;var d=re.p;re.p=2;var v=_t;_t|=4;try{Iv(o,r);var _=Dp,A=P0(r.containerInfo),F=_.focusedElem,X=_.selectionRange;if(A!==F&&F&&F.ownerDocument&&D0(F.ownerDocument.documentElement,F)){if(X!==null&&rh(F)){var ue=X.start,ye=X.end;if(ye===void 0&&(ye=ue),"selectionStart"in F)F.selectionStart=ue,F.selectionEnd=Math.min(ye,F.value.length);else{var Se=F.ownerDocument||document,de=Se&&Se.defaultView||window;if(de.getSelection){var me=de.getSelection(),Oe=F.textContent.length,He=Math.min(X.start,Oe),It=X.end===void 0?He:Math.min(X.end,Oe);!me.extend&&He>It&&(A=It,It=He,He=A);var se=k0(F,He),ee=k0(F,It);if(se&&ee&&(me.rangeCount!==1||me.anchorNode!==se.node||me.anchorOffset!==se.offset||me.focusNode!==ee.node||me.focusOffset!==ee.offset)){var le=Se.createRange();le.setStart(se.node,se.offset),me.removeAllRanges(),He>It?(me.addRange(le),me.extend(ee.node,ee.offset)):(le.setEnd(ee.node,ee.offset),me.addRange(le))}}}}for(Se=[],me=F;me=me.parentNode;)me.nodeType===1&&Se.push({element:me,left:me.scrollLeft,top:me.scrollTop});for(typeof F.focus=="function"&&F.focus(),F=0;F<Se.length;F++){var Ee=Se[F];Ee.element.scrollLeft=Ee.left,Ee.element.scrollTop=Ee.top}}md=!!kp,Dp=kp=null}finally{_t=v,re.p=d,ie.T=u}}r.current=o,rn=2}}function jv(){if(rn===2){rn=0;var r=Es,o=wa,u=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||u){u=ie.T,ie.T=null;var d=re.p;re.p=2;var v=_t;_t|=4;try{Sv(r,o.alternate,o)}finally{_t=v,re.p=d,ie.T=u}}rn=3}}function Wv(){if(rn===4||rn===3){rn=0,Ie();var r=Es,o=wa,u=kr,d=Uv;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?rn=5:(rn=0,wa=Es=null,Qv(r,r.pendingLanes));var v=r.pendingLanes;if(v===0&&(_s=null),mr(u),o=o.stateNode,zt&&typeof zt.onCommitFiberRoot=="function")try{zt.onCommitFiberRoot(ft,o,void 0,(o.current.flags&128)===128)}catch{}if(d!==null){o=ie.T,v=re.p,re.p=2,ie.T=null;try{for(var _=r.onRecoverableError,A=0;A<d.length;A++){var F=d[A];_(F.value,{componentStack:F.stack})}}finally{ie.T=o,re.p=v}}(kr&3)!==0&&id(),sr(r),v=r.pendingLanes,(u&261930)!==0&&(v&42)!==0?r===_p?Zl++:(Zl=0,_p=r):Zl=0,eu(0)}}function Qv(r,o){(r.pooledCacheLanes&=o)===0&&(o=r.pooledCache,o!=null&&(r.pooledCache=null,Pl(o)))}function id(){return Jv(),jv(),Wv(),Xv()}function Xv(){if(rn!==5)return!1;var r=Es,o=yp;yp=0;var u=mr(kr),d=ie.T,v=re.p;try{re.p=32>u?32:u,ie.T=null,u=vp,vp=null;var _=Es,A=kr;if(rn=0,wa=Es=null,kr=0,(_t&6)!==0)throw Error(i(331));var F=_t;if(_t|=4,Dv(_.current),Nv(_,_.current,A,u),_t=F,eu(0,!1),zt&&typeof zt.onPostCommitFiberRoot=="function")try{zt.onPostCommitFiberRoot(ft,_)}catch{}return!0}finally{re.p=v,ie.T=d,Qv(r,o)}}function Zv(r,o,u){o=oi(u,o),o=Qh(r.stateNode,o,2),r=hs(r,o,2),r!==null&&(js(r,2),sr(r))}function bt(r,o,u){if(r.tag===3)Zv(r,r,u);else for(;o!==null;){if(o.tag===3){Zv(o,r,u);break}else if(o.tag===1){var d=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(_s===null||!_s.has(d))){r=oi(u,r),u=ev(2),d=hs(o,u,2),d!==null&&(tv(u,d,o,r),js(d,2),sr(d));break}}o=o.return}}function wp(r,o,u){var d=r.pingCache;if(d===null){d=r.pingCache=new qx;var v=new Set;d.set(o,v)}else v=d.get(o),v===void 0&&(v=new Set,d.set(o,v));v.has(u)||(pp=!0,v.add(u),r=jx.bind(null,r,o,u),o.then(r,r))}function jx(r,o,u){var d=r.pingCache;d!==null&&d.delete(o),r.pingedLanes|=r.suspendedLanes&u,r.warmLanes&=~u,Rt===r&&(st&u)===u&&(Bt===4||Bt===3&&(st&62914560)===st&&300>ke()-Qc?(_t&2)===0&&Sa(r,0):mp|=u,Ta===st&&(Ta=0)),sr(r)}function e_(r,o){o===0&&(o=Zu()),r=uo(r,o),r!==null&&(js(r,o),sr(r))}function Wx(r){var o=r.memoizedState,u=0;o!==null&&(u=o.retryLane),e_(r,u)}function Qx(r,o){var u=0;switch(r.tag){case 31:case 13:var d=r.stateNode,v=r.memoizedState;v!==null&&(u=v.retryLane);break;case 19:d=r.stateNode;break;case 22:d=r.stateNode._retryCache;break;default:throw Error(i(314))}d!==null&&d.delete(o),e_(r,u)}function Xx(r,o){return ve(r,o)}var rd=null,Aa=null,Sp=!1,sd=!1,bp=!1,ws=0;function sr(r){r!==Aa&&r.next===null&&(Aa===null?rd=Aa=r:Aa=Aa.next=r),sd=!0,Sp||(Sp=!0,eC())}function eu(r,o){if(!bp&&sd){bp=!0;do for(var u=!1,d=rd;d!==null;){if(r!==0){var v=d.pendingLanes;if(v===0)var _=0;else{var A=d.suspendedLanes,F=d.pingedLanes;_=(1<<31-yt(42|r)+1)-1,_&=v&~(A&~F),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(u=!0,r_(d,_))}else _=st,_=Bi(d,d===Rt?_:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(_&3)===0||vi(d,_)||(u=!0,r_(d,_));d=d.next}while(u);bp=!1}}function Zx(){t_()}function t_(){sd=Sp=!1;var r=0;ws!==0&&cC()&&(r=ws);for(var o=ke(),u=null,d=rd;d!==null;){var v=d.next,_=n_(d,o);_===0?(d.next=null,u===null?rd=v:u.next=v,v===null&&(Aa=u)):(u=d,(r!==0||(_&3)!==0)&&(sd=!0)),d=v}rn!==0&&rn!==5||eu(r),ws!==0&&(ws=0)}function n_(r,o){for(var u=r.suspendedLanes,d=r.pingedLanes,v=r.expirationTimes,_=r.pendingLanes&-62914561;0<_;){var A=31-yt(_),F=1<<A,X=v[A];X===-1?((F&u)===0||(F&d)!==0)&&(v[A]=Zf(F,o)):X<=o&&(r.expiredLanes|=F),_&=~F}if(o=Rt,u=st,u=Bi(r,r===o?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),d=r.callbackNode,u===0||r===o&&(St===2||St===9)||r.cancelPendingCommit!==null)return d!==null&&d!==null&&Ce(d),r.callbackNode=null,r.callbackPriority=0;if((u&3)===0||vi(r,u)){if(o=u&-u,o===r.callbackPriority)return o;switch(d!==null&&Ce(d),mr(u)){case 2:case 8:u=ht;break;case 32:u=Ze;break;case 268435456:u=Oi;break;default:u=Ze}return d=i_.bind(null,r),u=ve(u,d),r.callbackPriority=o,r.callbackNode=u,o}return d!==null&&d!==null&&Ce(d),r.callbackPriority=2,r.callbackNode=null,2}function i_(r,o){if(rn!==0&&rn!==5)return r.callbackNode=null,r.callbackPriority=0,null;var u=r.callbackNode;if(id()&&r.callbackNode!==u)return null;var d=st;return d=Bi(r,r===Rt?d:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),d===0?null:(Ov(r,d,o),n_(r,ke()),r.callbackNode!=null&&r.callbackNode===u?i_.bind(null,r):null)}function r_(r,o){if(id())return null;Ov(r,o,!0)}function eC(){fC(function(){(_t&6)!==0?ve(Fe,Zx):t_()})}function Ap(){if(ws===0){var r=ca;r===0&&(r=ei,ei<<=1,(ei&261888)===0&&(ei=256)),ws=r}return ws}function s_(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:jo(""+r)}function o_(r,o){var u=o.ownerDocument.createElement("input");return u.name=o.name,u.value=o.value,r.id&&u.setAttribute("form",r.id),o.parentNode.insertBefore(u,o),r=new FormData(r),u.parentNode.removeChild(u),r}function tC(r,o,u,d,v){if(o==="submit"&&u&&u.stateNode===v){var _=s_((v[on]||null).action),A=d.submitter;A&&(o=(o=A[on]||null)?s_(o.formAction):A.getAttribute("formAction"),o!==null&&(_=o,A=null));var F=new Xi("action","action",null,d,v);r.push({event:F,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(ws!==0){var X=A?o_(v,A):new FormData(v);Yh(u,{pending:!0,data:X,method:v.method,action:_},null,X)}}else typeof _=="function"&&(F.preventDefault(),X=A?o_(v,A):new FormData(v),Yh(u,{pending:!0,data:X,method:v.method,action:_},_,X))},currentTarget:v}]})}}for(var xp=0;xp<lh.length;xp++){var Cp=lh[xp],nC=Cp.toLowerCase(),iC=Cp[0].toUpperCase()+Cp.slice(1);xi(nC,"on"+iC)}xi(V0,"onAnimationEnd"),xi(O0,"onAnimationIteration"),xi(z0,"onAnimationStart"),xi("dblclick","onDoubleClick"),xi("focusin","onFocus"),xi("focusout","onBlur"),xi(_x,"onTransitionRun"),xi(Ex,"onTransitionStart"),xi(Tx,"onTransitionCancel"),xi(F0,"onTransitionEnd"),Ji("onMouseEnter",["mouseout","mouseover"]),Ji("onMouseLeave",["mouseout","mouseover"]),Ji("onPointerEnter",["pointerout","pointerover"]),Ji("onPointerLeave",["pointerout","pointerover"]),Ki("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ki("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ki("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ki("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ki("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ki("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var tu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),rC=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(tu));function a_(r,o){o=(o&4)!==0;for(var u=0;u<r.length;u++){var d=r[u],v=d.event;d=d.listeners;e:{var _=void 0;if(o)for(var A=d.length-1;0<=A;A--){var F=d[A],X=F.instance,ue=F.currentTarget;if(F=F.listener,X!==_&&v.isPropagationStopped())break e;_=F,v.currentTarget=ue;try{_(v)}catch(ye){Ec(ye)}v.currentTarget=null,_=X}else for(A=0;A<d.length;A++){if(F=d[A],X=F.instance,ue=F.currentTarget,F=F.listener,X!==_&&v.isPropagationStopped())break e;_=F,v.currentTarget=ue;try{_(v)}catch(ye){Ec(ye)}v.currentTarget=null,_=X}}}}function rt(r,o){var u=o[qo];u===void 0&&(u=o[qo]=new Set);var d=r+"__bubble";u.has(d)||(l_(o,r,2,!1),u.add(d))}function Ip(r,o,u){var d=0;o&&(d|=4),l_(u,r,d,o)}var od="_reactListening"+Math.random().toString(36).slice(2);function Rp(r){if(!r[od]){r[od]=!0,hl.forEach(function(u){u!=="selectionchange"&&(rC.has(u)||Ip(u,!1,r),Ip(u,!0,r))});var o=r.nodeType===9?r:r.ownerDocument;o===null||o[od]||(o[od]=!0,Ip("selectionchange",!1,o))}}function l_(r,o,u,d){switch(V_(o)){case 2:var v=kC;break;case 8:v=DC;break;default:v=qp}u=v.bind(null,o,u,r),v=void 0,!to||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(v=!0),d?v!==void 0?r.addEventListener(o,u,{capture:!0,passive:v}):r.addEventListener(o,u,!0):v!==void 0?r.addEventListener(o,u,{passive:v}):r.addEventListener(o,u,!1)}function Np(r,o,u,d,v){var _=d;if((o&1)===0&&(o&2)===0&&d!==null)e:for(;;){if(d===null)return;var A=d.tag;if(A===3||A===4){var F=d.stateNode.containerInfo;if(F===v)break;if(A===4)for(A=d.return;A!==null;){var X=A.tag;if((X===3||X===4)&&A.stateNode.containerInfo===v)return;A=A.return}for(;F!==null;){if(A=Yi(F),A===null)return;if(X=A.tag,X===5||X===6||X===26||X===27){d=_=A;continue e}F=F.parentNode}}d=d.return}is(function(){var ue=_,ye=ni(u),Se=[];e:{var de=B0.get(r);if(de!==void 0){var me=Xi,Oe=r;switch(r){case"keypress":if(io(u)===0)break e;case"keydown":case"keyup":me=yc;break;case"focusin":Oe="focus",me=so;break;case"focusout":Oe="blur",me=so;break;case"beforeblur":case"afterblur":me=so;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":me=xl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":me=lc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":me=S;break;case V0:case O0:case z0:me=cc;break;case F0:me=q;break;case"scroll":case"scrollend":me=Al;break;case"wheel":me=fe;break;case"copy":case"cut":case"paste":me=dc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":me=vr;break;case"toggle":case"beforetoggle":me=et}var He=(o&4)!==0,It=!He&&(r==="scroll"||r==="scrollend"),se=He?de!==null?de+"Capture":null:de;He=[];for(var ee=ue,le;ee!==null;){var Ee=ee;if(le=Ee.stateNode,Ee=Ee.tag,Ee!==5&&Ee!==26&&Ee!==27||le===null||se===null||(Ee=wi(ee,se),Ee!=null&&He.push(nu(ee,Ee,le))),It)break;ee=ee.return}0<He.length&&(de=new me(de,Oe,null,u,ye),Se.push({event:de,listeners:He}))}}if((o&7)===0){e:{if(de=r==="mouseover"||r==="pointerover",me=r==="mouseout"||r==="pointerout",de&&u!==wl&&(Oe=u.relatedTarget||u.fromElement)&&(Yi(Oe)||Oe[Hi]))break e;if((me||de)&&(de=ye.window===ye?ye:(de=ye.ownerDocument)?de.defaultView||de.parentWindow:window,me?(Oe=u.relatedTarget||u.toElement,me=ue,Oe=Oe?Yi(Oe):null,Oe!==null&&(It=a(Oe),He=Oe.tag,Oe!==It||He!==5&&He!==27&&He!==6)&&(Oe=null)):(me=null,Oe=ue),me!==Oe)){if(He=xl,Ee="onMouseLeave",se="onMouseEnter",ee="mouse",(r==="pointerout"||r==="pointerover")&&(He=vr,Ee="onPointerLeave",se="onPointerEnter",ee="pointer"),It=me==null?de:Hn(me),le=Oe==null?de:Hn(Oe),de=new He(Ee,ee+"leave",me,u,ye),de.target=It,de.relatedTarget=le,Ee=null,Yi(ye)===ue&&(He=new He(se,ee+"enter",Oe,u,ye),He.target=le,He.relatedTarget=It,Ee=He),It=Ee,me&&Oe)t:{for(He=sC,se=me,ee=Oe,le=0,Ee=se;Ee;Ee=He(Ee))le++;Ee=0;for(var Be=ee;Be;Be=He(Be))Ee++;for(;0<le-Ee;)se=He(se),le--;for(;0<Ee-le;)ee=He(ee),Ee--;for(;le--;){if(se===ee||ee!==null&&se===ee.alternate){He=se;break t}se=He(se),ee=He(ee)}He=null}else He=null;me!==null&&u_(Se,de,me,He,!1),Oe!==null&&It!==null&&u_(Se,It,Oe,He,!0)}}e:{if(de=ue?Hn(ue):window,me=de.nodeName&&de.nodeName.toLowerCase(),me==="select"||me==="input"&&de.type==="file")var pt=x0;else if(b0(de))if(C0)pt=gx;else{pt=px;var ze=hx}else me=de.nodeName,!me||me.toLowerCase()!=="input"||de.type!=="checkbox"&&de.type!=="radio"?ue&&Jo(ue.elementType)&&(pt=x0):pt=mx;if(pt&&(pt=pt(r,ue))){A0(Se,pt,u,ye);break e}ze&&ze(r,de,ue),r==="focusout"&&ue&&de.type==="number"&&ue.memoizedProps.value!=null&&_l(de,"number",de.value)}switch(ze=ue?Hn(ue):window,r){case"focusin":(b0(ze)||ze.contentEditable==="true")&&(na=ze,sh=ue,Ml=null);break;case"focusout":Ml=sh=na=null;break;case"mousedown":oh=!0;break;case"contextmenu":case"mouseup":case"dragend":oh=!1,L0(Se,u,ye);break;case"selectionchange":if(vx)break;case"keydown":case"keyup":L0(Se,u,ye)}var nt;if(vt)e:{switch(r){case"compositionstart":var ot="onCompositionStart";break e;case"compositionend":ot="onCompositionEnd";break e;case"compositionupdate":ot="onCompositionUpdate";break e}ot=void 0}else ta?oo(r,u)&&(ot="onCompositionEnd"):r==="keydown"&&u.keyCode===229&&(ot="onCompositionStart");ot&&(tr&&u.locale!=="ko"&&(ta||ot!=="onCompositionStart"?ot==="onCompositionEnd"&&ta&&(nt=bl()):(Qi=ye,Sl="value"in Qi?Qi.value:Qi.textContent,ta=!0)),ze=ad(ue,ot),0<ze.length&&(ot=new er(ot,r,null,u,ye),Se.push({event:ot,listeners:ze}),nt?ot.data=nt:(nt=ea(u),nt!==null&&(ot.data=nt)))),(nt=ri?ux(r,u):cx(r,u))&&(ot=ad(ue,"onBeforeInput"),0<ot.length&&(ze=new er("onBeforeInput","beforeinput",null,u,ye),Se.push({event:ze,listeners:ot}),ze.data=nt)),tC(Se,r,ue,u,ye)}a_(Se,o)})}function nu(r,o,u){return{instance:r,listener:o,currentTarget:u}}function ad(r,o){for(var u=o+"Capture",d=[];r!==null;){var v=r,_=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||_===null||(v=wi(r,u),v!=null&&d.unshift(nu(r,v,_)),v=wi(r,o),v!=null&&d.push(nu(r,v,_))),r.tag===3)return d;r=r.return}return[]}function sC(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function u_(r,o,u,d,v){for(var _=o._reactName,A=[];u!==null&&u!==d;){var F=u,X=F.alternate,ue=F.stateNode;if(F=F.tag,X!==null&&X===d)break;F!==5&&F!==26&&F!==27||ue===null||(X=ue,v?(ue=wi(u,_),ue!=null&&A.unshift(nu(u,ue,X))):v||(ue=wi(u,_),ue!=null&&A.push(nu(u,ue,X)))),u=u.return}A.length!==0&&r.push({event:o,listeners:A})}var oC=/\r\n?/g,aC=/\u0000|\uFFFD/g;function c_(r){return(typeof r=="string"?r:""+r).replace(oC,`
`).replace(aC,"")}function d_(r,o){return o=c_(o),c_(r)===o}function Ct(r,o,u,d,v,_){switch(u){case"children":typeof d=="string"?o==="body"||o==="textarea"&&d===""||Ln(r,d):(typeof d=="number"||typeof d=="bigint")&&o!=="body"&&Ln(r,""+d);break;case"className":qn(r,"class",d);break;case"tabIndex":qn(r,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":qn(r,u,d);break;case"style":Tl(r,d,_);break;case"data":if(o!=="object"){qn(r,"data",d);break}case"src":case"href":if(d===""&&(o!=="a"||u!=="href")){r.removeAttribute(u);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){r.removeAttribute(u);break}d=jo(""+d),r.setAttribute(u,d);break;case"action":case"formAction":if(typeof d=="function"){r.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(u==="formAction"?(o!=="input"&&Ct(r,o,"name",v.name,v,null),Ct(r,o,"formEncType",v.formEncType,v,null),Ct(r,o,"formMethod",v.formMethod,v,null),Ct(r,o,"formTarget",v.formTarget,v,null)):(Ct(r,o,"encType",v.encType,v,null),Ct(r,o,"method",v.method,v,null),Ct(r,o,"target",v.target,v,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){r.removeAttribute(u);break}d=jo(""+d),r.setAttribute(u,d);break;case"onClick":d!=null&&(r.onclick=Ti);break;case"onScroll":d!=null&&rt("scroll",r);break;case"onScrollEnd":d!=null&&rt("scrollend",r);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(i(61));if(u=d.__html,u!=null){if(v.children!=null)throw Error(i(60));r.innerHTML=u}}break;case"multiple":r.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":r.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){r.removeAttribute("xlink:href");break}u=jo(""+d),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?r.setAttribute(u,""+d):r.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?r.setAttribute(u,""):r.removeAttribute(u);break;case"capture":case"download":d===!0?r.setAttribute(u,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?r.setAttribute(u,d):r.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?r.setAttribute(u,d):r.removeAttribute(u);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?r.removeAttribute(u):r.setAttribute(u,d);break;case"popover":rt("beforetoggle",r),rt("toggle",r),$o(r,"popover",d);break;case"xlinkActuate":jt(r,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":jt(r,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":jt(r,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":jt(r,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":jt(r,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":jt(r,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":jt(r,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":jt(r,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":jt(r,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":$o(r,"is",d);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=ac.get(u)||u,$o(r,u,d))}}function Mp(r,o,u,d,v,_){switch(u){case"style":Tl(r,d,_);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(i(61));if(u=d.__html,u!=null){if(v.children!=null)throw Error(i(60));r.innerHTML=u}}break;case"children":typeof d=="string"?Ln(r,d):(typeof d=="number"||typeof d=="bigint")&&Ln(r,""+d);break;case"onScroll":d!=null&&rt("scroll",r);break;case"onScrollEnd":d!=null&&rt("scrollend",r);break;case"onClick":d!=null&&(r.onclick=Ti);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!pl.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(v=u.endsWith("Capture"),o=u.slice(2,v?u.length-7:void 0),_=r[on]||null,_=_!=null?_[u]:null,typeof _=="function"&&r.removeEventListener(o,_,v),typeof d=="function")){typeof _!="function"&&_!==null&&(u in r?r[u]=null:r.hasAttribute(u)&&r.removeAttribute(u)),r.addEventListener(o,d,v);break e}u in r?r[u]=d:d===!0?r.setAttribute(u,""):$o(r,u,d)}}}function mn(r,o,u){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":rt("error",r),rt("load",r);var d=!1,v=!1,_;for(_ in u)if(u.hasOwnProperty(_)){var A=u[_];if(A!=null)switch(_){case"src":d=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:Ct(r,o,_,A,u,null)}}v&&Ct(r,o,"srcSet",u.srcSet,u,null),d&&Ct(r,o,"src",u.src,u,null);return;case"input":rt("invalid",r);var F=_=A=v=null,X=null,ue=null;for(d in u)if(u.hasOwnProperty(d)){var ye=u[d];if(ye!=null)switch(d){case"name":v=ye;break;case"type":A=ye;break;case"checked":X=ye;break;case"defaultChecked":ue=ye;break;case"value":_=ye;break;case"defaultValue":F=ye;break;case"children":case"dangerouslySetInnerHTML":if(ye!=null)throw Error(i(137,o));break;default:Ct(r,o,d,ye,u,null)}}rc(r,_,F,X,ue,A,v,!1);return;case"select":rt("invalid",r),d=A=_=null;for(v in u)if(u.hasOwnProperty(v)&&(F=u[v],F!=null))switch(v){case"value":_=F;break;case"defaultValue":A=F;break;case"multiple":d=F;default:Ct(r,o,v,F,u,null)}o=_,u=A,r.multiple=!!d,o!=null?Zr(r,!!d,o,!1):u!=null&&Zr(r,!!d,u,!0);return;case"textarea":rt("invalid",r),_=v=d=null;for(A in u)if(u.hasOwnProperty(A)&&(F=u[A],F!=null))switch(A){case"value":d=F;break;case"defaultValue":v=F;break;case"children":_=F;break;case"dangerouslySetInnerHTML":if(F!=null)throw Error(i(91));break;default:Ct(r,o,A,F,u,null)}es(r,d,v,_);return;case"option":for(X in u)if(u.hasOwnProperty(X)&&(d=u[X],d!=null))switch(X){case"selected":r.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:Ct(r,o,X,d,u,null)}return;case"dialog":rt("beforetoggle",r),rt("toggle",r),rt("cancel",r),rt("close",r);break;case"iframe":case"object":rt("load",r);break;case"video":case"audio":for(d=0;d<tu.length;d++)rt(tu[d],r);break;case"image":rt("error",r),rt("load",r);break;case"details":rt("toggle",r);break;case"embed":case"source":case"link":rt("error",r),rt("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ue in u)if(u.hasOwnProperty(ue)&&(d=u[ue],d!=null))switch(ue){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:Ct(r,o,ue,d,u,null)}return;default:if(Jo(o)){for(ye in u)u.hasOwnProperty(ye)&&(d=u[ye],d!==void 0&&Mp(r,o,ye,d,u,void 0));return}}for(F in u)u.hasOwnProperty(F)&&(d=u[F],d!=null&&Ct(r,o,F,d,u,null))}function lC(r,o,u,d){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,_=null,A=null,F=null,X=null,ue=null,ye=null;for(me in u){var Se=u[me];if(u.hasOwnProperty(me)&&Se!=null)switch(me){case"checked":break;case"value":break;case"defaultValue":X=Se;default:d.hasOwnProperty(me)||Ct(r,o,me,null,d,Se)}}for(var de in d){var me=d[de];if(Se=u[de],d.hasOwnProperty(de)&&(me!=null||Se!=null))switch(de){case"type":_=me;break;case"name":v=me;break;case"checked":ue=me;break;case"defaultChecked":ye=me;break;case"value":A=me;break;case"defaultValue":F=me;break;case"children":case"dangerouslySetInnerHTML":if(me!=null)throw Error(i(137,o));break;default:me!==Se&&Ct(r,o,de,me,d,Se)}}Ko(r,A,F,X,ue,ye,_,v);return;case"select":me=A=F=de=null;for(_ in u)if(X=u[_],u.hasOwnProperty(_)&&X!=null)switch(_){case"value":break;case"multiple":me=X;default:d.hasOwnProperty(_)||Ct(r,o,_,null,d,X)}for(v in d)if(_=d[v],X=u[v],d.hasOwnProperty(v)&&(_!=null||X!=null))switch(v){case"value":de=_;break;case"defaultValue":F=_;break;case"multiple":A=_;default:_!==X&&Ct(r,o,v,_,d,X)}o=F,u=A,d=me,de!=null?Zr(r,!!u,de,!1):!!d!=!!u&&(o!=null?Zr(r,!!u,o,!0):Zr(r,!!u,u?[]:"",!1));return;case"textarea":me=de=null;for(F in u)if(v=u[F],u.hasOwnProperty(F)&&v!=null&&!d.hasOwnProperty(F))switch(F){case"value":break;case"children":break;default:Ct(r,o,F,null,d,v)}for(A in d)if(v=d[A],_=u[A],d.hasOwnProperty(A)&&(v!=null||_!=null))switch(A){case"value":de=v;break;case"defaultValue":me=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(i(91));break;default:v!==_&&Ct(r,o,A,v,d,_)}sc(r,de,me);return;case"option":for(var Oe in u)if(de=u[Oe],u.hasOwnProperty(Oe)&&de!=null&&!d.hasOwnProperty(Oe))switch(Oe){case"selected":r.selected=!1;break;default:Ct(r,o,Oe,null,d,de)}for(X in d)if(de=d[X],me=u[X],d.hasOwnProperty(X)&&de!==me&&(de!=null||me!=null))switch(X){case"selected":r.selected=de&&typeof de!="function"&&typeof de!="symbol";break;default:Ct(r,o,X,de,d,me)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var He in u)de=u[He],u.hasOwnProperty(He)&&de!=null&&!d.hasOwnProperty(He)&&Ct(r,o,He,null,d,de);for(ue in d)if(de=d[ue],me=u[ue],d.hasOwnProperty(ue)&&de!==me&&(de!=null||me!=null))switch(ue){case"children":case"dangerouslySetInnerHTML":if(de!=null)throw Error(i(137,o));break;default:Ct(r,o,ue,de,d,me)}return;default:if(Jo(o)){for(var It in u)de=u[It],u.hasOwnProperty(It)&&de!==void 0&&!d.hasOwnProperty(It)&&Mp(r,o,It,void 0,d,de);for(ye in d)de=d[ye],me=u[ye],!d.hasOwnProperty(ye)||de===me||de===void 0&&me===void 0||Mp(r,o,ye,de,d,me);return}}for(var se in u)de=u[se],u.hasOwnProperty(se)&&de!=null&&!d.hasOwnProperty(se)&&Ct(r,o,se,null,d,de);for(Se in d)de=d[Se],me=u[Se],!d.hasOwnProperty(Se)||de===me||de==null&&me==null||Ct(r,o,Se,de,d,me)}function f_(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function uC(){if(typeof performance.getEntriesByType=="function"){for(var r=0,o=0,u=performance.getEntriesByType("resource"),d=0;d<u.length;d++){var v=u[d],_=v.transferSize,A=v.initiatorType,F=v.duration;if(_&&F&&f_(A)){for(A=0,F=v.responseEnd,d+=1;d<u.length;d++){var X=u[d],ue=X.startTime;if(ue>F)break;var ye=X.transferSize,Se=X.initiatorType;ye&&f_(Se)&&(X=X.responseEnd,A+=ye*(X<F?1:(F-ue)/(X-ue)))}if(--d,o+=8*(_+A)/(v.duration/1e3),r++,10<r)break}}if(0<r)return o/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var kp=null,Dp=null;function ld(r){return r.nodeType===9?r:r.ownerDocument}function h_(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function p_(r,o){if(r===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&o==="foreignObject"?0:r}function Pp(r,o){return r==="textarea"||r==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Lp=null;function cC(){var r=window.event;return r&&r.type==="popstate"?r===Lp?!1:(Lp=r,!0):(Lp=null,!1)}var m_=typeof setTimeout=="function"?setTimeout:void 0,dC=typeof clearTimeout=="function"?clearTimeout:void 0,g_=typeof Promise=="function"?Promise:void 0,fC=typeof queueMicrotask=="function"?queueMicrotask:typeof g_<"u"?function(r){return g_.resolve(null).then(r).catch(hC)}:m_;function hC(r){setTimeout(function(){throw r})}function Ss(r){return r==="head"}function y_(r,o){var u=o,d=0;do{var v=u.nextSibling;if(r.removeChild(u),v&&v.nodeType===8)if(u=v.data,u==="/$"||u==="/&"){if(d===0){r.removeChild(v),Ra(o);return}d--}else if(u==="$"||u==="$?"||u==="$~"||u==="$!"||u==="&")d++;else if(u==="html")iu(r.ownerDocument.documentElement);else if(u==="head"){u=r.ownerDocument.head,iu(u);for(var _=u.firstChild;_;){var A=_.nextSibling,F=_.nodeName;_[qi]||F==="SCRIPT"||F==="STYLE"||F==="LINK"&&_.rel.toLowerCase()==="stylesheet"||u.removeChild(_),_=A}}else u==="body"&&iu(r.ownerDocument.body);u=v}while(u);Ra(o)}function v_(r,o){var u=r;r=0;do{var d=u.nextSibling;if(u.nodeType===1?o?(u._stashedDisplay=u.style.display,u.style.display="none"):(u.style.display=u._stashedDisplay||"",u.getAttribute("style")===""&&u.removeAttribute("style")):u.nodeType===3&&(o?(u._stashedText=u.nodeValue,u.nodeValue=""):u.nodeValue=u._stashedText||""),d&&d.nodeType===8)if(u=d.data,u==="/$"){if(r===0)break;r--}else u!=="$"&&u!=="$?"&&u!=="$~"&&u!=="$!"||r++;u=d}while(u)}function Up(r){var o=r.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var u=o;switch(o=o.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":Up(u),Yo(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}r.removeChild(u)}}function pC(r,o,u,d){for(;r.nodeType===1;){var v=u;if(r.nodeName.toLowerCase()!==o.toLowerCase()){if(!d&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(d){if(!r[qi])switch(o){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(_=r.getAttribute("rel"),_==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(_!==v.rel||r.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||r.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||r.getAttribute("title")!==(v.title==null?null:v.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(_=r.getAttribute("src"),(_!==(v.src==null?null:v.src)||r.getAttribute("type")!==(v.type==null?null:v.type)||r.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&_&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(o==="input"&&r.type==="hidden"){var _=v.name==null?null:""+v.name;if(v.type==="hidden"&&r.getAttribute("name")===_)return r}else return r;if(r=di(r.nextSibling),r===null)break}return null}function mC(r,o,u){if(o==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!u||(r=di(r.nextSibling),r===null))return null;return r}function __(r,o){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!o||(r=di(r.nextSibling),r===null))return null;return r}function Vp(r){return r.data==="$?"||r.data==="$~"}function Op(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function gC(r,o){var u=r.ownerDocument;if(r.data==="$~")r._reactRetry=o;else if(r.data!=="$?"||u.readyState!=="loading")o();else{var d=function(){o(),u.removeEventListener("DOMContentLoaded",d)};u.addEventListener("DOMContentLoaded",d),r._reactRetry=d}}function di(r){for(;r!=null;r=r.nextSibling){var o=r.nodeType;if(o===1||o===3)break;if(o===8){if(o=r.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return r}var zp=null;function E_(r){r=r.nextSibling;for(var o=0;r;){if(r.nodeType===8){var u=r.data;if(u==="/$"||u==="/&"){if(o===0)return di(r.nextSibling);o--}else u!=="$"&&u!=="$!"&&u!=="$?"&&u!=="$~"&&u!=="&"||o++}r=r.nextSibling}return null}function T_(r){r=r.previousSibling;for(var o=0;r;){if(r.nodeType===8){var u=r.data;if(u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"){if(o===0)return r;o--}else u!=="/$"&&u!=="/&"||o++}r=r.previousSibling}return null}function w_(r,o,u){switch(o=ld(u),r){case"html":if(r=o.documentElement,!r)throw Error(i(452));return r;case"head":if(r=o.head,!r)throw Error(i(453));return r;case"body":if(r=o.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}function iu(r){for(var o=r.attributes;o.length;)r.removeAttributeNode(o[0]);Yo(r)}var fi=new Map,S_=new Set;function ud(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var Dr=re.d;re.d={f:yC,r:vC,D:_C,C:EC,L:TC,m:wC,X:bC,S:SC,M:AC};function yC(){var r=Dr.f(),o=ed();return r||o}function vC(r){var o=ti(r);o!==null&&o.tag===5&&o.type==="form"?Fy(o):Dr.r(r)}var xa=typeof document>"u"?null:document;function b_(r,o,u){var d=xa;if(d&&typeof o=="string"&&o){var v=Pn(o);v='link[rel="'+r+'"][href="'+v+'"]',typeof u=="string"&&(v+='[crossorigin="'+u+'"]'),S_.has(v)||(S_.add(v),r={rel:r,crossOrigin:u,href:o},d.querySelector(v)===null&&(o=d.createElement("link"),mn(o,"link",r),Jt(o),d.head.appendChild(o)))}}function _C(r){Dr.D(r),b_("dns-prefetch",r,null)}function EC(r,o){Dr.C(r,o),b_("preconnect",r,o)}function TC(r,o,u){Dr.L(r,o,u);var d=xa;if(d&&r&&o){var v='link[rel="preload"][as="'+Pn(o)+'"]';o==="image"&&u&&u.imageSrcSet?(v+='[imagesrcset="'+Pn(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(v+='[imagesizes="'+Pn(u.imageSizes)+'"]')):v+='[href="'+Pn(r)+'"]';var _=v;switch(o){case"style":_=Ca(r);break;case"script":_=Ia(r)}fi.has(_)||(r=E({rel:"preload",href:o==="image"&&u&&u.imageSrcSet?void 0:r,as:o},u),fi.set(_,r),d.querySelector(v)!==null||o==="style"&&d.querySelector(ru(_))||o==="script"&&d.querySelector(su(_))||(o=d.createElement("link"),mn(o,"link",r),Jt(o),d.head.appendChild(o)))}}function wC(r,o){Dr.m(r,o);var u=xa;if(u&&r){var d=o&&typeof o.as=="string"?o.as:"script",v='link[rel="modulepreload"][as="'+Pn(d)+'"][href="'+Pn(r)+'"]',_=v;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=Ia(r)}if(!fi.has(_)&&(r=E({rel:"modulepreload",href:r},o),fi.set(_,r),u.querySelector(v)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(su(_)))return}d=u.createElement("link"),mn(d,"link",r),Jt(d),u.head.appendChild(d)}}}function SC(r,o,u){Dr.S(r,o,u);var d=xa;if(d&&r){var v=$i(d).hoistableStyles,_=Ca(r);o=o||"default";var A=v.get(_);if(!A){var F={loading:0,preload:null};if(A=d.querySelector(ru(_)))F.loading=5;else{r=E({rel:"stylesheet",href:r,"data-precedence":o},u),(u=fi.get(_))&&Fp(r,u);var X=A=d.createElement("link");Jt(X),mn(X,"link",r),X._p=new Promise(function(ue,ye){X.onload=ue,X.onerror=ye}),X.addEventListener("load",function(){F.loading|=1}),X.addEventListener("error",function(){F.loading|=2}),F.loading|=4,cd(A,o,d)}A={type:"stylesheet",instance:A,count:1,state:F},v.set(_,A)}}}function bC(r,o){Dr.X(r,o);var u=xa;if(u&&r){var d=$i(u).hoistableScripts,v=Ia(r),_=d.get(v);_||(_=u.querySelector(su(v)),_||(r=E({src:r,async:!0},o),(o=fi.get(v))&&Bp(r,o),_=u.createElement("script"),Jt(_),mn(_,"link",r),u.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},d.set(v,_))}}function AC(r,o){Dr.M(r,o);var u=xa;if(u&&r){var d=$i(u).hoistableScripts,v=Ia(r),_=d.get(v);_||(_=u.querySelector(su(v)),_||(r=E({src:r,async:!0,type:"module"},o),(o=fi.get(v))&&Bp(r,o),_=u.createElement("script"),Jt(_),mn(_,"link",r),u.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},d.set(v,_))}}function A_(r,o,u,d){var v=(v=ge.current)?ud(v):null;if(!v)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(o=Ca(u.href),u=$i(v).hoistableStyles,d=u.get(o),d||(d={type:"style",instance:null,count:0,state:null},u.set(o,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){r=Ca(u.href);var _=$i(v).hoistableStyles,A=_.get(r);if(A||(v=v.ownerDocument||v,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(r,A),(_=v.querySelector(ru(r)))&&!_._p&&(A.instance=_,A.state.loading=5),fi.has(r)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},fi.set(r,u),_||xC(v,r,u,A.state))),o&&d===null)throw Error(i(528,""));return A}if(o&&d!==null)throw Error(i(529,""));return null;case"script":return o=u.async,u=u.src,typeof u=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=Ia(u),u=$i(v).hoistableScripts,d=u.get(o),d||(d={type:"script",instance:null,count:0,state:null},u.set(o,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function Ca(r){return'href="'+Pn(r)+'"'}function ru(r){return'link[rel="stylesheet"]['+r+"]"}function x_(r){return E({},r,{"data-precedence":r.precedence,precedence:null})}function xC(r,o,u,d){r.querySelector('link[rel="preload"][as="style"]['+o+"]")?d.loading=1:(o=r.createElement("link"),d.preload=o,o.addEventListener("load",function(){return d.loading|=1}),o.addEventListener("error",function(){return d.loading|=2}),mn(o,"link",u),Jt(o),r.head.appendChild(o))}function Ia(r){return'[src="'+Pn(r)+'"]'}function su(r){return"script[async]"+r}function C_(r,o,u){if(o.count++,o.instance===null)switch(o.type){case"style":var d=r.querySelector('style[data-href~="'+Pn(u.href)+'"]');if(d)return o.instance=d,Jt(d),d;var v=E({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return d=(r.ownerDocument||r).createElement("style"),Jt(d),mn(d,"style",v),cd(d,u.precedence,r),o.instance=d;case"stylesheet":v=Ca(u.href);var _=r.querySelector(ru(v));if(_)return o.state.loading|=4,o.instance=_,Jt(_),_;d=x_(u),(v=fi.get(v))&&Fp(d,v),_=(r.ownerDocument||r).createElement("link"),Jt(_);var A=_;return A._p=new Promise(function(F,X){A.onload=F,A.onerror=X}),mn(_,"link",d),o.state.loading|=4,cd(_,u.precedence,r),o.instance=_;case"script":return _=Ia(u.src),(v=r.querySelector(su(_)))?(o.instance=v,Jt(v),v):(d=u,(v=fi.get(_))&&(d=E({},u),Bp(d,v)),r=r.ownerDocument||r,v=r.createElement("script"),Jt(v),mn(v,"link",d),r.head.appendChild(v),o.instance=v);case"void":return null;default:throw Error(i(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(d=o.instance,o.state.loading|=4,cd(d,u.precedence,r));return o.instance}function cd(r,o,u){for(var d=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=d.length?d[d.length-1]:null,_=v,A=0;A<d.length;A++){var F=d[A];if(F.dataset.precedence===o)_=F;else if(_!==v)break}_?_.parentNode.insertBefore(r,_.nextSibling):(o=u.nodeType===9?u.head:u,o.insertBefore(r,o.firstChild))}function Fp(r,o){r.crossOrigin==null&&(r.crossOrigin=o.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=o.referrerPolicy),r.title==null&&(r.title=o.title)}function Bp(r,o){r.crossOrigin==null&&(r.crossOrigin=o.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=o.referrerPolicy),r.integrity==null&&(r.integrity=o.integrity)}var dd=null;function I_(r,o,u){if(dd===null){var d=new Map,v=dd=new Map;v.set(u,d)}else v=dd,d=v.get(u),d||(d=new Map,v.set(u,d));if(d.has(r))return d;for(d.set(r,null),u=u.getElementsByTagName(r),v=0;v<u.length;v++){var _=u[v];if(!(_[qi]||_[Kt]||r==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var A=_.getAttribute(o)||"";A=r+A;var F=d.get(A);F?F.push(_):d.set(A,[_])}}return d}function R_(r,o,u){r=r.ownerDocument||r,r.head.insertBefore(u,o==="title"?r.querySelector("head > title"):null)}function CC(r,o,u){if(u===1||o.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return r=o.disabled,typeof o.precedence=="string"&&r==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function N_(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function IC(r,o,u,d){if(u.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var v=Ca(d.href),_=o.querySelector(ru(v));if(_){o=_._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(r.count++,r=fd.bind(r),o.then(r,r)),u.state.loading|=4,u.instance=_,Jt(_);return}_=o.ownerDocument||o,d=x_(d),(v=fi.get(v))&&Fp(d,v),_=_.createElement("link"),Jt(_);var A=_;A._p=new Promise(function(F,X){A.onload=F,A.onerror=X}),mn(_,"link",d),u.instance=_}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(u,o),(o=u.state.preload)&&(u.state.loading&3)===0&&(r.count++,u=fd.bind(r),o.addEventListener("load",u),o.addEventListener("error",u))}}var Gp=0;function RC(r,o){return r.stylesheets&&r.count===0&&pd(r,r.stylesheets),0<r.count||0<r.imgCount?function(u){var d=setTimeout(function(){if(r.stylesheets&&pd(r,r.stylesheets),r.unsuspend){var _=r.unsuspend;r.unsuspend=null,_()}},6e4+o);0<r.imgBytes&&Gp===0&&(Gp=62500*uC());var v=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&pd(r,r.stylesheets),r.unsuspend)){var _=r.unsuspend;r.unsuspend=null,_()}},(r.imgBytes>Gp?50:800)+o);return r.unsuspend=u,function(){r.unsuspend=null,clearTimeout(d),clearTimeout(v)}}:null}function fd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)pd(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var hd=null;function pd(r,o){r.stylesheets=null,r.unsuspend!==null&&(r.count++,hd=new Map,o.forEach(NC,r),hd=null,fd.call(r))}function NC(r,o){if(!(o.state.loading&4)){var u=hd.get(r);if(u)var d=u.get(null);else{u=new Map,hd.set(r,u);for(var v=r.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<v.length;_++){var A=v[_];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(u.set(A.dataset.precedence,A),d=A)}d&&u.set(null,d)}v=o.instance,A=v.getAttribute("data-precedence"),_=u.get(A)||d,_===d&&u.set(null,v),u.set(A,v),this.count++,d=fd.bind(this),v.addEventListener("load",d),v.addEventListener("error",d),_?_.parentNode.insertBefore(v,_.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(v,r.firstChild)),o.state.loading|=4}}var ou={$$typeof:B,Provider:null,Consumer:null,_currentValue:be,_currentValue2:be,_threadCount:0};function MC(r,o,u,d,v,_,A,F,X){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Gi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Gi(0),this.hiddenUpdates=Gi(null),this.identifierPrefix=d,this.onUncaughtError=v,this.onCaughtError=_,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=X,this.incompleteTransitions=new Map}function M_(r,o,u,d,v,_,A,F,X,ue,ye,Se){return r=new MC(r,o,u,A,X,ue,ye,Se,F),o=1,_===!0&&(o|=24),_=$n(3,null,null,o),r.current=_,_.stateNode=r,o=Th(),o.refCount++,r.pooledCache=o,o.refCount++,_.memoizedState={element:d,isDehydrated:u,cache:o},Ah(_),r}function k_(r){return r?(r=sa,r):sa}function D_(r,o,u,d,v,_){v=k_(v),d.context===null?d.context=v:d.pendingContext=v,d=fs(o),d.payload={element:u},_=_===void 0?null:_,_!==null&&(d.callback=_),u=hs(r,d,o),u!==null&&(Fn(u,r,o),Ol(u,r,o))}function P_(r,o){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var u=r.retryLane;r.retryLane=u!==0&&u<o?u:o}}function Hp(r,o){P_(r,o),(r=r.alternate)&&P_(r,o)}function L_(r){if(r.tag===13||r.tag===31){var o=uo(r,67108864);o!==null&&Fn(o,r,67108864),Hp(r,67108864)}}function U_(r){if(r.tag===13||r.tag===31){var o=Qn();o=Qs(o);var u=uo(r,o);u!==null&&Fn(u,r,o),Hp(r,o)}}var md=!0;function kC(r,o,u,d){var v=ie.T;ie.T=null;var _=re.p;try{re.p=2,qp(r,o,u,d)}finally{re.p=_,ie.T=v}}function DC(r,o,u,d){var v=ie.T;ie.T=null;var _=re.p;try{re.p=8,qp(r,o,u,d)}finally{re.p=_,ie.T=v}}function qp(r,o,u,d){if(md){var v=Yp(d);if(v===null)Np(r,o,d,gd,u),O_(r,d);else if(LC(v,r,o,u,d))d.stopPropagation();else if(O_(r,d),o&4&&-1<PC.indexOf(r)){for(;v!==null;){var _=ti(v);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var A=Rn(_.pendingLanes);if(A!==0){var F=_;for(F.pendingLanes|=2,F.entangledLanes|=2;A;){var X=1<<31-yt(A);F.entanglements[1]|=X,A&=~X}sr(_),(_t&6)===0&&(Xc=ke()+500,eu(0))}}break;case 31:case 13:F=uo(_,2),F!==null&&Fn(F,_,2),ed(),Hp(_,2)}if(_=Yp(d),_===null&&Np(r,o,d,gd,u),_===v)break;v=_}v!==null&&d.stopPropagation()}else Np(r,o,d,null,u)}}function Yp(r){return r=ni(r),$p(r)}var gd=null;function $p(r){if(gd=null,r=Yi(r),r!==null){var o=a(r);if(o===null)r=null;else{var u=o.tag;if(u===13){if(r=l(o),r!==null)return r;r=null}else if(u===31){if(r=c(o),r!==null)return r;r=null}else if(u===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;r=null}else o!==r&&(r=null)}}return gd=r,null}function V_(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Re()){case Fe:return 2;case ht:return 8;case Ze:case En:return 32;case Oi:return 268435456;default:return 32}default:return 32}}var Kp=!1,bs=null,As=null,xs=null,au=new Map,lu=new Map,Cs=[],PC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function O_(r,o){switch(r){case"focusin":case"focusout":bs=null;break;case"dragenter":case"dragleave":As=null;break;case"mouseover":case"mouseout":xs=null;break;case"pointerover":case"pointerout":au.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":lu.delete(o.pointerId)}}function uu(r,o,u,d,v,_){return r===null||r.nativeEvent!==_?(r={blockedOn:o,domEventName:u,eventSystemFlags:d,nativeEvent:_,targetContainers:[v]},o!==null&&(o=ti(o),o!==null&&L_(o)),r):(r.eventSystemFlags|=d,o=r.targetContainers,v!==null&&o.indexOf(v)===-1&&o.push(v),r)}function LC(r,o,u,d,v){switch(o){case"focusin":return bs=uu(bs,r,o,u,d,v),!0;case"dragenter":return As=uu(As,r,o,u,d,v),!0;case"mouseover":return xs=uu(xs,r,o,u,d,v),!0;case"pointerover":var _=v.pointerId;return au.set(_,uu(au.get(_)||null,r,o,u,d,v)),!0;case"gotpointercapture":return _=v.pointerId,lu.set(_,uu(lu.get(_)||null,r,o,u,d,v)),!0}return!1}function z_(r){var o=Yi(r.target);if(o!==null){var u=a(o);if(u!==null){if(o=u.tag,o===13){if(o=l(u),o!==null){r.blockedOn=o,_i(r.priority,function(){U_(u)});return}}else if(o===31){if(o=c(u),o!==null){r.blockedOn=o,_i(r.priority,function(){U_(u)});return}}else if(o===3&&u.stateNode.current.memoizedState.isDehydrated){r.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}r.blockedOn=null}function yd(r){if(r.blockedOn!==null)return!1;for(var o=r.targetContainers;0<o.length;){var u=Yp(r.nativeEvent);if(u===null){u=r.nativeEvent;var d=new u.constructor(u.type,u);wl=d,u.target.dispatchEvent(d),wl=null}else return o=ti(u),o!==null&&L_(o),r.blockedOn=u,!1;o.shift()}return!0}function F_(r,o,u){yd(r)&&u.delete(o)}function UC(){Kp=!1,bs!==null&&yd(bs)&&(bs=null),As!==null&&yd(As)&&(As=null),xs!==null&&yd(xs)&&(xs=null),au.forEach(F_),lu.forEach(F_)}function vd(r,o){r.blockedOn===o&&(r.blockedOn=null,Kp||(Kp=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,UC)))}var _d=null;function B_(r){_d!==r&&(_d=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){_d===r&&(_d=null);for(var o=0;o<r.length;o+=3){var u=r[o],d=r[o+1],v=r[o+2];if(typeof d!="function"){if($p(d||u)===null)continue;break}var _=ti(u);_!==null&&(r.splice(o,3),o-=3,Yh(_,{pending:!0,data:v,method:u.method,action:d},d,v))}}))}function Ra(r){function o(X){return vd(X,r)}bs!==null&&vd(bs,r),As!==null&&vd(As,r),xs!==null&&vd(xs,r),au.forEach(o),lu.forEach(o);for(var u=0;u<Cs.length;u++){var d=Cs[u];d.blockedOn===r&&(d.blockedOn=null)}for(;0<Cs.length&&(u=Cs[0],u.blockedOn===null);)z_(u),u.blockedOn===null&&Cs.shift();if(u=(r.ownerDocument||r).$$reactFormReplay,u!=null)for(d=0;d<u.length;d+=3){var v=u[d],_=u[d+1],A=v[on]||null;if(typeof _=="function")A||B_(u);else if(A){var F=null;if(_&&_.hasAttribute("formAction")){if(v=_,A=_[on]||null)F=A.formAction;else if($p(v)!==null)continue}else F=A.action;typeof F=="function"?u[d+1]=F:(u.splice(d,3),d-=3),B_(u)}}}function G_(){function r(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(A){return v=A})},focusReset:"manual",scroll:"manual"})}function o(){v!==null&&(v(),v=null),d||setTimeout(u,20)}function u(){if(!d&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var d=!1,v=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(u,100),function(){d=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),v!==null&&(v(),v=null)}}}function Jp(r){this._internalRoot=r}Ed.prototype.render=Jp.prototype.render=function(r){var o=this._internalRoot;if(o===null)throw Error(i(409));var u=o.current,d=Qn();D_(u,d,r,o,null,null)},Ed.prototype.unmount=Jp.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var o=r.containerInfo;D_(r.current,2,null,r,null,null),ed(),o[Hi]=null}};function Ed(r){this._internalRoot=r}Ed.prototype.unstable_scheduleHydration=function(r){if(r){var o=ec();r={blockedOn:null,target:r,priority:o};for(var u=0;u<Cs.length&&o!==0&&o<Cs[u].priority;u++);Cs.splice(u,0,r),u===0&&z_(r)}};var H_=e.version;if(H_!=="19.2.4")throw Error(i(527,H_,"19.2.4"));re.findDOMNode=function(r){var o=r._reactInternals;if(o===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=h(o),r=r!==null?y(r):null,r=r===null?null:r.stateNode,r};var VC={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:ie,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Td=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Td.isDisabled&&Td.supportsFiber)try{ft=Td.inject(VC),zt=Td}catch{}}return du.createRoot=function(r,o){if(!s(r))throw Error(i(299));var u=!1,d="",v=Wy,_=Qy,A=Xy;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(d=o.identifierPrefix),o.onUncaughtError!==void 0&&(v=o.onUncaughtError),o.onCaughtError!==void 0&&(_=o.onCaughtError),o.onRecoverableError!==void 0&&(A=o.onRecoverableError)),o=M_(r,1,!1,null,null,u,d,null,v,_,A,G_),r[Hi]=o.current,Rp(r),new Jp(o)},du.hydrateRoot=function(r,o,u){if(!s(r))throw Error(i(299));var d=!1,v="",_=Wy,A=Qy,F=Xy,X=null;return u!=null&&(u.unstable_strictMode===!0&&(d=!0),u.identifierPrefix!==void 0&&(v=u.identifierPrefix),u.onUncaughtError!==void 0&&(_=u.onUncaughtError),u.onCaughtError!==void 0&&(A=u.onCaughtError),u.onRecoverableError!==void 0&&(F=u.onRecoverableError),u.formState!==void 0&&(X=u.formState)),o=M_(r,1,!0,o,u??null,d,v,X,_,A,F,G_),o.context=k_(null),u=o.current,d=Qn(),d=Qs(d),v=fs(d),v.callback=null,hs(u,v,d),u=d,o.current.lanes=u,js(o,u),sr(o),r[Hi]=o.current,Rp(r),new Ed(o)},du.version="19.2.4",du}var Z_;function KC(){if(Z_)return Qp.exports;Z_=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Qp.exports=$C(),Qp.exports}var JC=KC();const jC=ug(JC);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k1=(...n)=>n.filter((e,t,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WC=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QC=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,i)=>i?i.toUpperCase():t.toLowerCase());/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eE=n=>{const e=QC(n);return e.charAt(0).toUpperCase()+e.slice(1)};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var XC={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZC=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0;return!1};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eI=Ve.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:i,className:s="",children:a,iconNode:l,...c},f)=>Ve.createElement("svg",{ref:f,...XC,width:e,height:e,stroke:n,strokeWidth:i?Number(t)*24/Number(e):t,className:k1("lucide",s),...!a&&!ZC(c)&&{"aria-hidden":"true"},...c},[...l.map(([h,y])=>Ve.createElement(h,y)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xe=(n,e)=>{const t=Ve.forwardRef(({className:i,...s},a)=>Ve.createElement(eI,{ref:a,iconNode:e,className:k1(`lucide-${WC(eE(n))}`,`lucide-${n}`,i),...s}));return t.displayName=eE(n),t};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tI=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],nI=Xe("archive",tI);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iI=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],tE=Xe("arrow-left",iI);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rI=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],D1=Xe("arrow-right",rI);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sI=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],oI=Xe("check",sI);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aI=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],lI=Xe("chevron-down",aI);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uI=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],cI=Xe("circle-alert",uI);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dI=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],fI=Xe("clock",dI);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hI=[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]],pI=Xe("code-xml",hI);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mI=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],gI=Xe("code",mI);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yI=[["path",{d:"M15 6v12a3 3 0 1 0 3-3H6a3 3 0 1 0 3 3V6a3 3 0 1 0-3 3h12a3 3 0 1 0-3-3",key:"11bfej"}]],vI=Xe("command",yI);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _I=[["path",{d:"M20 4v7a4 4 0 0 1-4 4H4",key:"6o5b7l"}],["path",{d:"m9 10-5 5 5 5",key:"1kshq7"}]],EI=Xe("corner-down-left",_I);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TI=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],wI=Xe("download",TI);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SI=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],bI=Xe("eye-off",SI);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AI=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],xI=Xe("eye",AI);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CI=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]],II=Xe("file-braces",CI);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RI=[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]],NI=Xe("github",RI);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MI=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],kI=Xe("image",MI);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DI=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],P1=Xe("layers",DI);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PI=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],LI=Xe("layout-grid",PI);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UI=[["rect",{width:"18",height:"7",x:"3",y:"3",rx:"1",key:"f1a2em"}],["rect",{width:"9",height:"7",x:"3",y:"14",rx:"1",key:"jqznyg"}],["rect",{width:"5",height:"7",x:"16",y:"14",rx:"1",key:"q5h2i8"}]],VI=Xe("layout-template",UI);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OI=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],wu=Xe("loader-circle",OI);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zI=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],FI=Xe("lock",zI);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BI=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],nE=Xe("mail",BI);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GI=[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]],HI=Xe("maximize",GI);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qI=[["path",{d:"M5 12h14",key:"1ays0h"}]],YI=Xe("minus",qI);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $I=[["path",{d:"M18 8V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h8",key:"10dyio"}],["path",{d:"M10 19v-3.96 3.15",key:"1irgej"}],["path",{d:"M7 19h5",key:"qswx4l"}],["rect",{width:"6",height:"10",x:"16",y:"12",rx:"2",key:"1egngj"}]],KI=Xe("monitor-smartphone",$I);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JI=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],jI=Xe("monitor",JI);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WI=[["path",{d:"M4.037 4.688a.495.495 0 0 1 .651-.651l16 6.5a.5.5 0 0 1-.063.947l-6.124 1.58a2 2 0 0 0-1.438 1.435l-1.579 6.126a.5.5 0 0 1-.947.063z",key:"edeuup"}]],QI=Xe("mouse-pointer-2",WI);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XI=[["path",{d:"M5 3v16h16",key:"1mqmf9"}],["path",{d:"m5 19 6-6",key:"jh6hbb"}],["path",{d:"m2 6 3-3 3 3",key:"tkyvxa"}],["path",{d:"m18 16 3 3-3 3",key:"1d4glt"}]],ZI=Xe("move-3d",XI);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e2=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m16 15-3-3 3-3",key:"14y99z"}]],t2=Xe("panel-left-close",e2);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n2=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m14 9 3 3-3 3",key:"8010ee"}]],i2=Xe("panel-left-open",n2);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r2=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Su=Xe("plus",r2);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s2=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],o2=Xe("search",s2);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a2=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],l2=Xe("send",a2);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u2=[["path",{d:"M14 17H5",key:"gfn3mx"}],["path",{d:"M19 7h-9",key:"6i9tg"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]],c2=Xe("settings-2",u2);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d2=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],f2=Xe("smartphone",d2);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h2=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],p2=Xe("sparkles",h2);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m2=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],g2=Xe("square",m2);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y2=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Af=Xe("trash-2",y2);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v2=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],_2=Xe("type",v2);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E2=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],T2=Xe("user",E2);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w2=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],L1=Xe("wand-sparkles",w2);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S2=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],b2=Xe("x",S2);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A2=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],x2=Xe("zap",A2),C2=({element:n,onUpdate:e,onAiUpdate:t,onClose:i,onDelete:s})=>{const[a,l]=Ve.useState(""),[c,f]=Ve.useState(""),[h,y]=Ve.useState(""),[E,T]=Ve.useState(""),[w,C]=Ve.useState(!1);if(Ve.useEffect(()=>{if(n){const Y=n.getAttribute("class")||"";l($=>Y!==$?Y:$);const J=n instanceof HTMLElement?n.innerText:n.textContent||"";f($=>J!==$?J:$),y(n.tagName.toLowerCase()),T("")}},[n]),!n)return null;const b=Y=>{const J=Y.target.value;l(J),e({className:J})},x=Y=>{const J=Y.target.value;f(J),e({innerText:J})},N=async()=>{if(E.trim()){C(!0);try{await t(E),T("")}catch(Y){console.error(Y)}finally{C(!1)}}},z=n.children.length>0,B=(n instanceof HTMLElement?n.innerText:n.textContent||"").length;return M.jsxs("div",{className:"absolute top-4 right-4 w-80 bg-zinc-900 border border-white/10 rounded-xl shadow-2xl flex flex-col z-[100] animate-in slide-in-from-right-4 fade-in duration-200",onWheel:Y=>Y.stopPropagation(),children:[M.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-white/5 bg-zinc-900 rounded-t-xl",children:[M.jsxs("div",{className:"flex items-center gap-2",children:[M.jsx("div",{className:"px-1.5 py-0.5 rounded bg-indigo-500/20 text-indigo-400 font-mono text-[10px] uppercase font-bold border border-indigo-500/20",children:h}),M.jsx("span",{className:"text-xs text-zinc-400 font-medium",children:"Inspector"})]}),M.jsx("button",{onClick:i,className:"p-1 hover:bg-white/10 rounded text-zinc-500 hover:text-white transition-colors",children:M.jsx(b2,{className:"w-3.5 h-3.5"})})]}),M.jsxs("div",{className:"p-4 space-y-5 max-h-[75vh] overflow-y-auto custom-scrollbar",children:[M.jsxs("div",{className:"bg-indigo-500/5 border border-indigo-500/20 rounded-lg p-3 space-y-2",children:[M.jsxs("div",{className:"flex items-center gap-2 text-xs font-semibold text-indigo-400 uppercase tracking-wider",children:[M.jsx(L1,{className:"w-3 h-3"}),M.jsx("span",{children:"Edit with AI"})]}),M.jsxs("div",{className:"relative",children:[M.jsx("textarea",{value:E,onChange:Y=>T(Y.target.value),disabled:w,className:"w-full bg-zinc-900 border border-indigo-500/20 rounded-lg p-2.5 pr-8 text-xs text-zinc-200 focus:outline-none focus:ring-1 focus:ring-indigo-500/50 resize-none h-20 placeholder:text-indigo-500/30",placeholder:"e.g. Make this button red and rounded..."}),M.jsx("button",{onClick:N,disabled:w||!E.trim(),className:"absolute right-2 bottom-2 p-1.5 bg-indigo-500 text-white rounded-md hover:bg-indigo-600 disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-lg",children:w?M.jsx(wu,{className:"w-3 h-3 animate-spin"}):M.jsx(l2,{className:"w-3 h-3"})})]})]}),M.jsxs("div",{className:"space-y-1.5",children:[M.jsxs("div",{className:"flex items-center gap-2 text-xs font-semibold text-zinc-500 uppercase tracking-wider",children:[M.jsx(gI,{className:"w-3 h-3"}),M.jsx("span",{children:"Tailwind Classes"})]}),M.jsx("textarea",{value:a,onChange:b,className:"w-full bg-black/30 border border-white/10 rounded-lg p-3 text-xs font-mono text-zinc-300 focus:outline-none focus:border-indigo-500/50 focus:ring-1 focus:ring-indigo-500/20 transition-all leading-relaxed resize-none h-24",placeholder:"text-red-500 p-4..."})]}),M.jsxs("div",{className:"space-y-1.5",children:[M.jsxs("div",{className:"flex items-center gap-2 text-xs font-semibold text-zinc-500 uppercase tracking-wider",children:[M.jsx(_2,{className:"w-3 h-3"}),M.jsx("span",{children:"Content"})]}),M.jsx("textarea",{value:c,onChange:x,disabled:z&&B>50,className:`w-full bg-black/30 border border-white/10 rounded-lg p-3 text-xs text-zinc-300 focus:outline-none focus:border-indigo-500/50 focus:ring-1 focus:ring-indigo-500/20 transition-all leading-relaxed resize-none h-20 ${z?"opacity-50 cursor-not-allowed":""}`,placeholder:z?"Contains nested elements - edit unavailable":"Element text content..."}),z&&M.jsx("p",{className:"text-[10px] text-zinc-600",children:"Editing text on containers is disabled to preserve structure."})]}),M.jsxs("div",{className:"pt-2 border-t border-white/5 grid grid-cols-2 gap-2",children:[M.jsxs("div",{className:"bg-white/5 rounded-lg p-2",children:[M.jsx("span",{className:"block text-[10px] text-zinc-500 uppercase",children:"Width"}),M.jsxs("span",{className:"text-xs font-mono text-zinc-300",children:[Math.round(n.getBoundingClientRect().width),"px"]})]}),M.jsxs("div",{className:"bg-white/5 rounded-lg p-2",children:[M.jsx("span",{className:"block text-[10px] text-zinc-500 uppercase",children:"Height"}),M.jsxs("span",{className:"text-xs font-mono text-zinc-300",children:[Math.round(n.getBoundingClientRect().height),"px"]})]})]}),M.jsxs("button",{onClick:s,className:"w-full flex items-center justify-center gap-2 py-2 bg-red-500/10 hover:bg-red-500/20 text-red-400 rounded-lg text-xs font-semibold transition-colors border border-red-500/10",children:[M.jsx(Af,{className:"w-3.5 h-3.5"}),M.jsx("span",{children:"Delete Element"})]})]})]})},I2=Object.prototype.toString,R2=n=>I2.call(n)==="[object Error]",N2=new Set(["network error","Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed","fetch failed","terminated"," A network error occurred.","Network connection lost"]);function M2(n){if(!(n&&R2(n)&&n.name==="TypeError"&&typeof n.message=="string"))return!1;const{message:t,stack:i}=n;return t==="Load failed"?i===void 0||"__sentry_captured__"in n:t.startsWith("error sending request for url")?!0:N2.has(t)}function k2(n){if(typeof n=="number"){if(n<0)throw new TypeError("Expected `retries` to be a non-negative number.");if(Number.isNaN(n))throw new TypeError("Expected `retries` to be a valid number or Infinity, got NaN.")}else if(n!==void 0)throw new TypeError("Expected `retries` to be a number or Infinity.")}function Sd(n,e,{min:t=0,allowInfinity:i=!1}={}){if(e!==void 0){if(typeof e!="number"||Number.isNaN(e))throw new TypeError(`Expected \`${n}\` to be a number${i?" or Infinity":""}.`);if(!i&&!Number.isFinite(e))throw new TypeError(`Expected \`${n}\` to be a finite number.`);if(e<t)throw new TypeError(`Expected \`${n}\` to be  ${t}.`)}}class U1 extends Error{constructor(e){super(),e instanceof Error?(this.originalError=e,{message:e}=e):(this.originalError=new Error(e),this.originalError.stack=this.stack),this.name="AbortError",this.message=e}}function D2(n,e){const t=Math.max(1,n+1),i=e.randomize?Math.random()+1:1;let s=Math.round(i*e.minTimeout*e.factor**(t-1));return s=Math.min(s,e.maxTimeout),s}function iE(n,e){return Number.isFinite(e)?e-(performance.now()-n):e}async function P2({error:n,attemptNumber:e,retriesConsumed:t,startTime:i,options:s}){var w,C,b,x;const a=n instanceof Error?n:new TypeError(`Non-error was thrown: "${n}". You should only throw errors.`);if(a instanceof U1)throw a.originalError;const l=Number.isFinite(s.retries)?Math.max(0,s.retries-t):s.retries,c=s.maxRetryTime??Number.POSITIVE_INFINITY,f=Object.freeze({error:a,attemptNumber:e,retriesLeft:l,retriesConsumed:t});if(await s.onFailedAttempt(f),iE(i,c)<=0)throw a;const h=await s.shouldConsumeRetry(f),y=iE(i,c);if(y<=0||l<=0)throw a;if(a instanceof TypeError&&!M2(a)){if(h)throw a;return(w=s.signal)==null||w.throwIfAborted(),!1}if(!await s.shouldRetry(f))throw a;if(!h)return(C=s.signal)==null||C.throwIfAborted(),!1;const E=D2(t,s),T=Math.min(E,y);return(b=s.signal)==null||b.throwIfAborted(),T>0&&await new Promise((N,z)=>{var J,$;const B=()=>{var L;clearTimeout(Y),(L=s.signal)==null||L.removeEventListener("abort",B),z(s.signal.reason)},Y=setTimeout(()=>{var L;(L=s.signal)==null||L.removeEventListener("abort",B),N()},T);s.unref&&((J=Y.unref)==null||J.call(Y)),($=s.signal)==null||$.addEventListener("abort",B,{once:!0})}),(x=s.signal)==null||x.throwIfAborted(),!0}async function L2(n,e={}){var a,l,c;if(e={...e},k2(e.retries),Object.hasOwn(e,"forever"))throw new Error("The `forever` option is no longer supported. For many use-cases, you can set `retries: Infinity` instead.");e.retries??(e.retries=10),e.factor??(e.factor=2),e.minTimeout??(e.minTimeout=1e3),e.maxTimeout??(e.maxTimeout=Number.POSITIVE_INFINITY),e.maxRetryTime??(e.maxRetryTime=Number.POSITIVE_INFINITY),e.randomize??(e.randomize=!1),e.onFailedAttempt??(e.onFailedAttempt=()=>{}),e.shouldRetry??(e.shouldRetry=()=>!0),e.shouldConsumeRetry??(e.shouldConsumeRetry=()=>!0),Sd("factor",e.factor,{min:0,allowInfinity:!1}),Sd("minTimeout",e.minTimeout,{min:0,allowInfinity:!1}),Sd("maxTimeout",e.maxTimeout,{min:0,allowInfinity:!0}),Sd("maxRetryTime",e.maxRetryTime,{min:0,allowInfinity:!0}),e.factor>0||(e.factor=1),(a=e.signal)==null||a.throwIfAborted();let t=0,i=0;const s=performance.now();for(;!Number.isFinite(e.retries)||i<=e.retries;){t++;try{(l=e.signal)==null||l.throwIfAborted();const f=await n(t);return(c=e.signal)==null||c.throwIfAborted(),f}catch(f){await P2({error:f,attemptNumber:t,retriesConsumed:i,startTime:s,options:e})&&i++}}throw new Error("Retry attempts exhausted without throwing an error.")}var U2={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let V2,O2;function z2(){return{geminiUrl:V2,vertexUrl:O2}}function F2(n,e,t,i){var s,a;if(!(n!=null&&n.baseUrl)){const l=z2();return e?(s=l.vertexUrl)!==null&&s!==void 0?s:t:(a=l.geminiUrl)!==null&&a!==void 0?a:i}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $r{}function Pe(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(i,s)=>{if(Object.prototype.hasOwnProperty.call(e,s)){const a=e[s];return a!=null?String(a):""}else throw new Error(`Key '${s}' not found in valueMap.`)})}function m(n,e,t){for(let a=0;a<e.length-1;a++){const l=e[a];if(l.endsWith("[]")){const c=l.slice(0,-2);if(!(c in n))if(Array.isArray(t))n[c]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${l}`);if(Array.isArray(n[c])){const f=n[c];if(Array.isArray(t))for(let h=0;h<f.length;h++){const y=f[h];m(y,e.slice(a+1),t[h])}else for(const h of f)m(h,e.slice(a+1),t)}return}else if(l.endsWith("[0]")){const c=l.slice(0,-3);c in n||(n[c]=[{}]);const f=n[c];m(f[0],e.slice(a+1),t);return}(!n[l]||typeof n[l]!="object")&&(n[l]={}),n=n[l]}const i=e[e.length-1],s=n[i];if(s!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===s)return;if(typeof s=="object"&&typeof t=="object"&&s!==null&&t!==null)Object.assign(s,t);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[i]=t}function p(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let i=0;i<e.length;i++){if(typeof n!="object"||n===null)return t;const s=e[i];if(s.endsWith("[]")){const a=s.slice(0,-2);if(a in n){const l=n[a];return Array.isArray(l)?l.map(c=>p(c,e.slice(i+1),t)):t}else return t}else n=n[s]}return n}catch(i){if(i instanceof TypeError)return t;throw i}}function B2(n,e){for(const[t,i]of Object.entries(e)){const s=t.split("."),a=i.split("."),l=new Set;let c=-1;for(let f=0;f<s.length;f++)if(s[f]==="*"){c=f;break}if(c!==-1&&a.length>c)for(let f=c;f<a.length;f++){const h=a[f];h!=="*"&&!h.endsWith("[]")&&!h.endsWith("[0]")&&l.add(h)}Tm(n,s,a,0,l)}}function Tm(n,e,t,i,s){if(i>=e.length||typeof n!="object"||n===null)return;const a=e[i];if(a.endsWith("[]")){const l=a.slice(0,-2),c=n;if(l in c&&Array.isArray(c[l]))for(const f of c[l])Tm(f,e,t,i+1,s)}else if(a==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const l=n,c=Object.keys(l).filter(h=>!h.startsWith("_")&&!s.has(h)),f={};for(const h of c)f[h]=l[h];for(const[h,y]of Object.entries(f)){const E=[];for(const T of t.slice(i))T==="*"?E.push(h):E.push(T);m(l,E,y)}for(const h of c)delete l[h]}}else{const l=n;a in l&&Tm(l[a],e,t,i+1,s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function dg(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function G2(n){const e={},t=p(n,["operationName"]);t!=null&&m(e,["operationName"],t);const i=p(n,["resourceName"]);return i!=null&&m(e,["_url","resourceName"],i),e}function H2(n){const e={},t=p(n,["name"]);t!=null&&m(e,["name"],t);const i=p(n,["metadata"]);i!=null&&m(e,["metadata"],i);const s=p(n,["done"]);s!=null&&m(e,["done"],s);const a=p(n,["error"]);a!=null&&m(e,["error"],a);const l=p(n,["response","generateVideoResponse"]);return l!=null&&m(e,["response"],Y2(l)),e}function q2(n){const e={},t=p(n,["name"]);t!=null&&m(e,["name"],t);const i=p(n,["metadata"]);i!=null&&m(e,["metadata"],i);const s=p(n,["done"]);s!=null&&m(e,["done"],s);const a=p(n,["error"]);a!=null&&m(e,["error"],a);const l=p(n,["response"]);return l!=null&&m(e,["response"],$2(l)),e}function Y2(n){const e={},t=p(n,["generatedSamples"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(l=>K2(l))),m(e,["generatedVideos"],a)}const i=p(n,["raiMediaFilteredCount"]);i!=null&&m(e,["raiMediaFilteredCount"],i);const s=p(n,["raiMediaFilteredReasons"]);return s!=null&&m(e,["raiMediaFilteredReasons"],s),e}function $2(n){const e={},t=p(n,["videos"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(l=>J2(l))),m(e,["generatedVideos"],a)}const i=p(n,["raiMediaFilteredCount"]);i!=null&&m(e,["raiMediaFilteredCount"],i);const s=p(n,["raiMediaFilteredReasons"]);return s!=null&&m(e,["raiMediaFilteredReasons"],s),e}function K2(n){const e={},t=p(n,["video"]);return t!=null&&m(e,["video"],eR(t)),e}function J2(n){const e={},t=p(n,["_self"]);return t!=null&&m(e,["video"],tR(t)),e}function j2(n){const e={},t=p(n,["operationName"]);return t!=null&&m(e,["_url","operationName"],t),e}function W2(n){const e={},t=p(n,["operationName"]);return t!=null&&m(e,["_url","operationName"],t),e}function Q2(n){const e={},t=p(n,["name"]);t!=null&&m(e,["name"],t);const i=p(n,["metadata"]);i!=null&&m(e,["metadata"],i);const s=p(n,["done"]);s!=null&&m(e,["done"],s);const a=p(n,["error"]);a!=null&&m(e,["error"],a);const l=p(n,["response"]);return l!=null&&m(e,["response"],X2(l)),e}function X2(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=p(n,["parent"]);i!=null&&m(e,["parent"],i);const s=p(n,["documentName"]);return s!=null&&m(e,["documentName"],s),e}function V1(n){const e={},t=p(n,["name"]);t!=null&&m(e,["name"],t);const i=p(n,["metadata"]);i!=null&&m(e,["metadata"],i);const s=p(n,["done"]);s!=null&&m(e,["done"],s);const a=p(n,["error"]);a!=null&&m(e,["error"],a);const l=p(n,["response"]);return l!=null&&m(e,["response"],Z2(l)),e}function Z2(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=p(n,["parent"]);i!=null&&m(e,["parent"],i);const s=p(n,["documentName"]);return s!=null&&m(e,["documentName"],s),e}function eR(n){const e={},t=p(n,["uri"]);t!=null&&m(e,["uri"],t);const i=p(n,["encodedVideo"]);i!=null&&m(e,["videoBytes"],dg(i));const s=p(n,["encoding"]);return s!=null&&m(e,["mimeType"],s),e}function tR(n){const e={},t=p(n,["gcsUri"]);t!=null&&m(e,["uri"],t);const i=p(n,["bytesBase64Encoded"]);i!=null&&m(e,["videoBytes"],dg(i));const s=p(n,["mimeType"]);return s!=null&&m(e,["mimeType"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var rE;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(rE||(rE={}));var sE;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(sE||(sE={}));var oE;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(oE||(oE={}));var Ds;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(Ds||(Ds={}));var aE;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(aE||(aE={}));var lE;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(lE||(lE={}));var uE;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(uE||(uE={}));var cE;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(cE||(cE={}));var dE;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(dE||(dE={}));var fE;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(fE||(fE={}));var hE;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(hE||(hE={}));var pE;(function(n){n.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH",n.MINIMAL="MINIMAL"})(pE||(pE={}));var mE;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(mE||(mE={}));var gE;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(gE||(gE={}));var yE;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(yE||(yE={}));var vE;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE",n.IMAGE_RECITATION="IMAGE_RECITATION",n.IMAGE_OTHER="IMAGE_OTHER"})(vE||(vE={}));var _E;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(_E||(_E={}));var EE;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(EE||(EE={}));var TE;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(TE||(TE={}));var wE;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(wE||(wE={}));var SE;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(SE||(SE={}));var Wd;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(Wd||(Wd={}));var bE;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(bE||(bE={}));var AE;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(AE||(AE={}));var xE;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(xE||(xE={}));var wm;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(wm||(wm={}));var CE;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(CE||(CE={}));var IE;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",n.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(IE||(IE={}));var Sm;(function(n){n.COLLECTION="COLLECTION"})(Sm||(Sm={}));var RE;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(RE||(RE={}));var NE;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(NE||(NE={}));var ME;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(ME||(ME={}));var kE;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(kE||(kE={}));var DE;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(DE||(DE={}));var PE;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(PE||(PE={}));var LE;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(LE||(LE={}));var UE;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(UE||(UE={}));var VE;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(VE||(VE={}));var OE;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(OE||(OE={}));var zE;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(zE||(zE={}));var FE;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(FE||(FE={}));var BE;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(BE||(BE={}));var GE;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING",n.DISTILLATION="DISTILLATION"})(GE||(GE={}));var HE;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(HE||(HE={}));var qE;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(qE||(qE={}));var YE;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED",n.REGISTERED="REGISTERED"})(YE||(YE={}));var $E;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})($E||($E={}));var KE;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(KE||(KE={}));var JE;(function(n){n.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",n.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",n.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(JE||(JE={}));var jE;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.ACTIVITY_START="ACTIVITY_START",n.ACTIVITY_END="ACTIVITY_END"})(jE||(jE={}));var WE;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(WE||(WE={}));var QE;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(QE||(QE={}));var XE;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(XE||(XE={}));var ZE;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(ZE||(ZE={}));var eT;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(eT||(eT={}));var tT;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(tT||(tT={}));var Va;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(Va||(Va={}));class bm{constructor(e){const t={};for(const i of e.headers.entries())t[i[0]]=i[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class fu{get text(){var e,t,i,s,a,l,c,f;if(((s=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let h="",y=!1;const E=[];for(const T of(f=(c=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)!==null&&f!==void 0?f:[]){for(const[w,C]of Object.entries(T))w!=="text"&&w!=="thought"&&w!=="thoughtSignature"&&(C!==null||C!==void 0)&&E.push(w);if(typeof T.text=="string"){if(typeof T.thought=="boolean"&&T.thought)continue;y=!0,h+=T.text}}return E.length>0&&console.warn(`there are non-text parts ${E} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),y?h:void 0}get data(){var e,t,i,s,a,l,c,f;if(((s=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let h="";const y=[];for(const E of(f=(c=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)!==null&&f!==void 0?f:[]){for(const[T,w]of Object.entries(E))T!=="inlineData"&&(w!==null||w!==void 0)&&y.push(T);E.inlineData&&typeof E.inlineData.data=="string"&&(h+=atob(E.inlineData.data))}return y.length>0&&console.warn(`there are non-data parts ${y} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),h.length>0?btoa(h):void 0}get functionCalls(){var e,t,i,s,a,l,c,f;if(((s=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const h=(f=(c=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)===null||f===void 0?void 0:f.filter(y=>y.functionCall).map(y=>y.functionCall).filter(y=>y!==void 0);if((h==null?void 0:h.length)!==0)return h}get executableCode(){var e,t,i,s,a,l,c,f,h;if(((s=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const y=(f=(c=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)===null||f===void 0?void 0:f.filter(E=>E.executableCode).map(E=>E.executableCode).filter(E=>E!==void 0);if((y==null?void 0:y.length)!==0)return(h=y==null?void 0:y[0])===null||h===void 0?void 0:h.code}get codeExecutionResult(){var e,t,i,s,a,l,c,f,h;if(((s=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const y=(f=(c=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)===null||f===void 0?void 0:f.filter(E=>E.codeExecutionResult).map(E=>E.codeExecutionResult).filter(E=>E!==void 0);if((y==null?void 0:y.length)!==0)return(h=y==null?void 0:y[0])===null||h===void 0?void 0:h.output}}class nT{}class iT{}class nR{}class iR{}class rR{}class sR{}class rT{}class sT{}class oT{}class oR{}class Qd{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new Qd;let s;const a=e;return t?s=q2(a):s=H2(a),Object.assign(i,s),i}}class aT{}class lT{}class uT{}class cT{}class aR{}class lR{}class uR{}class fg{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new fg,a=Q2(e);return Object.assign(i,a),i}}class cR{}class dR{}class fR{}class hR{}class dT{}class pR{get text(){var e,t,i;let s="",a=!1;const l=[];for(const c of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[f,h]of Object.entries(c))f!=="text"&&f!=="thought"&&h!==null&&l.push(f);if(typeof c.text=="string"){if(typeof c.thought=="boolean"&&c.thought)continue;a=!0,s+=c.text}}return l.length>0&&console.warn(`there are non-text parts ${l} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?s:void 0}get data(){var e,t,i;let s="";const a=[];for(const l of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[c,f]of Object.entries(l))c!=="inlineData"&&f!==null&&a.push(c);l.inlineData&&typeof l.inlineData.data=="string"&&(s+=atob(l.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),s.length>0?btoa(s):void 0}}class mR{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class hg{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new hg,a=V1(e);return Object.assign(i,a),i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function gt(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function O1(n,e){const t=gt(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function z1(n){return Array.isArray(n)?n.map(e=>Xd(e)):[Xd(n)]}function Xd(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function F1(n){const e=Xd(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function B1(n){const e=Xd(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function fT(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function G1(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>fT(e)):[fT(n)]}function Am(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function hT(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function pT(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function xn(n){if(n==null)throw new Error("ContentUnion is required");return Am(n)?n:{role:"user",parts:G1(n)}}function pg(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const i=xn(t);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(n.isVertexAI()){const t=xn(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>xn(t)):[xn(e)]}function mi(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(hT(n)||pT(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[xn(n)]}const e=[],t=[],i=Am(n[0]);for(const s of n){const a=Am(s);if(a!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)e.push(s);else{if(hT(s)||pT(s))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(s)}}return i||e.push({role:"user",parts:G1(t)}),e}function gR(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(i=>i!=="null");if(t.length===1)e.type=Object.values(Ds).includes(t[0].toUpperCase())?t[0].toUpperCase():Ds.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of t)e.anyOf.push({type:Object.values(Ds).includes(i.toUpperCase())?i.toUpperCase():Ds.TYPE_UNSPECIFIED})}}function za(n){const e={},t=["items"],i=["anyOf"],s=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=n.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(e.nullable=!0,n=a[1]):a[1].type==="null"&&(e.nullable=!0,n=a[0])),n.type instanceof Array&&gR(n.type,e);for(const[l,c]of Object.entries(n))if(c!=null)if(l=="type"){if(c==="null")throw new Error("type: null can not be the only possible type for the field.");if(c instanceof Array)continue;e.type=Object.values(Ds).includes(c.toUpperCase())?c.toUpperCase():Ds.TYPE_UNSPECIFIED}else if(t.includes(l))e[l]=za(c);else if(i.includes(l)){const f=[];for(const h of c){if(h.type=="null"){e.nullable=!0;continue}f.push(za(h))}e[l]=f}else if(s.includes(l)){const f={};for(const[h,y]of Object.entries(c))f[h]=za(y);e[l]=f}else{if(l==="additionalProperties")continue;e[l]=c}return e}function mg(n){return za(n)}function gg(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function yg(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function el(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=za(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=za(e.response));return n}function tl(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function yR(n,e,t,i=1){const s=!e.startsWith(`${t}/`)&&e.split("/").length===i;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:s?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:s?`${t}/${e}`:e}function Kr(n,e){if(typeof e!="string")throw new Error("name must be a string");return yR(n,e,"cachedContents")}function H1(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function $s(n){return dg(n)}function vR(n){return n!=null&&typeof n=="object"&&"name"in n}function _R(n){return n!=null&&typeof n=="object"&&"video"in n}function ER(n){return n!=null&&typeof n=="object"&&"uri"in n}function q1(n){var e;let t;if(vR(n)&&(t=n.name),!(ER(n)&&(t=n.uri,t===void 0))&&!(_R(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const s=t.split("files/")[1].match(/[a-z0-9]+/);if(s===null)throw new Error(`Could not extract file name from URI ${t}`);t=s[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function Y1(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function $1(n){for(const e of["models","tunedModels","publisherModels"])if(TR(n,e))return n[e];return[]}function TR(n,e){return n!==null&&typeof n=="object"&&e in n}function wR(n,e={}){const t=n,i={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(i.responseJsonSchema=t.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function SR(n,e={}){const t=[],i=new Set;for(const s of n){const a=s.name;if(i.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);i.add(a);const l=wR(s,e);l.functionDeclarations&&t.push(...l.functionDeclarations)}return{functionDeclarations:t}}function K1(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const i=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,s=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(s>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||s!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function bR(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function J1(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const s=t.inlinedResponses;if(!Array.isArray(s)||s.length===0)return n;let a=!1;for(const l of s){if(typeof l!="object"||l===null)continue;const f=l.response;if(typeof f!="object"||f===null)continue;if(f.embedding!==void 0){a=!0;break}}return a&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function nl(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function j1(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function AR(n){const e={},t=p(n,["responsesFile"]);t!=null&&m(e,["fileName"],t);const i=p(n,["inlinedResponses","inlinedResponses"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>sN(l))),m(e,["inlinedResponses"],a)}const s=p(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),m(e,["inlinedEmbedContentResponses"],a)}return e}function xR(n){const e={},t=p(n,["predictionsFormat"]);t!=null&&m(e,["format"],t);const i=p(n,["gcsDestination","outputUriPrefix"]);i!=null&&m(e,["gcsUri"],i);const s=p(n,["bigqueryDestination","outputUri"]);return s!=null&&m(e,["bigqueryUri"],s),e}function CR(n){const e={},t=p(n,["format"]);t!=null&&m(e,["predictionsFormat"],t);const i=p(n,["gcsUri"]);i!=null&&m(e,["gcsDestination","outputUriPrefix"],i);const s=p(n,["bigqueryUri"]);if(s!=null&&m(e,["bigqueryDestination","outputUri"],s),p(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(p(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(p(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Vd(n){const e={},t=p(n,["name"]);t!=null&&m(e,["name"],t);const i=p(n,["metadata","displayName"]);i!=null&&m(e,["displayName"],i);const s=p(n,["metadata","state"]);s!=null&&m(e,["state"],j1(s));const a=p(n,["metadata","createTime"]);a!=null&&m(e,["createTime"],a);const l=p(n,["metadata","endTime"]);l!=null&&m(e,["endTime"],l);const c=p(n,["metadata","updateTime"]);c!=null&&m(e,["updateTime"],c);const f=p(n,["metadata","model"]);f!=null&&m(e,["model"],f);const h=p(n,["metadata","output"]);return h!=null&&m(e,["dest"],AR(J1(h))),e}function xm(n){const e={},t=p(n,["name"]);t!=null&&m(e,["name"],t);const i=p(n,["displayName"]);i!=null&&m(e,["displayName"],i);const s=p(n,["state"]);s!=null&&m(e,["state"],j1(s));const a=p(n,["error"]);a!=null&&m(e,["error"],a);const l=p(n,["createTime"]);l!=null&&m(e,["createTime"],l);const c=p(n,["startTime"]);c!=null&&m(e,["startTime"],c);const f=p(n,["endTime"]);f!=null&&m(e,["endTime"],f);const h=p(n,["updateTime"]);h!=null&&m(e,["updateTime"],h);const y=p(n,["model"]);y!=null&&m(e,["model"],y);const E=p(n,["inputConfig"]);E!=null&&m(e,["src"],IR(E));const T=p(n,["outputConfig"]);T!=null&&m(e,["dest"],xR(J1(T)));const w=p(n,["completionStats"]);return w!=null&&m(e,["completionStats"],w),e}function IR(n){const e={},t=p(n,["instancesFormat"]);t!=null&&m(e,["format"],t);const i=p(n,["gcsSource","uris"]);i!=null&&m(e,["gcsUri"],i);const s=p(n,["bigquerySource","inputUri"]);return s!=null&&m(e,["bigqueryUri"],s),e}function RR(n,e){const t={};if(p(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(p(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(p(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=p(e,["fileName"]);i!=null&&m(t,["fileName"],i);const s=p(e,["inlinedRequests"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>rN(n,l))),m(t,["requests","requests"],a)}return t}function NR(n){const e={},t=p(n,["format"]);t!=null&&m(e,["instancesFormat"],t);const i=p(n,["gcsUri"]);i!=null&&m(e,["gcsSource","uris"],i);const s=p(n,["bigqueryUri"]);if(s!=null&&m(e,["bigquerySource","inputUri"],s),p(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(p(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function MR(n){const e={},t=p(n,["data"]);if(t!=null&&m(e,["data"],t),p(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=p(n,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function kR(n,e){const t={},i=p(e,["name"]);return i!=null&&m(t,["_url","name"],nl(n,i)),t}function DR(n,e){const t={},i=p(e,["name"]);return i!=null&&m(t,["_url","name"],nl(n,i)),t}function PR(n){const e={},t=p(n,["content"]);t!=null&&m(e,["content"],t);const i=p(n,["citationMetadata"]);i!=null&&m(e,["citationMetadata"],LR(i));const s=p(n,["tokenCount"]);s!=null&&m(e,["tokenCount"],s);const a=p(n,["finishReason"]);a!=null&&m(e,["finishReason"],a);const l=p(n,["avgLogprobs"]);l!=null&&m(e,["avgLogprobs"],l);const c=p(n,["groundingMetadata"]);c!=null&&m(e,["groundingMetadata"],c);const f=p(n,["index"]);f!=null&&m(e,["index"],f);const h=p(n,["logprobsResult"]);h!=null&&m(e,["logprobsResult"],h);const y=p(n,["safetyRatings"]);if(y!=null){let T=y;Array.isArray(T)&&(T=T.map(w=>w)),m(e,["safetyRatings"],T)}const E=p(n,["urlContextMetadata"]);return E!=null&&m(e,["urlContextMetadata"],E),e}function LR(n){const e={},t=p(n,["citationSources"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>s)),m(e,["citations"],i)}return e}function W1(n){const e={},t=p(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(a=>fN(a))),m(e,["parts"],s)}const i=p(n,["role"]);return i!=null&&m(e,["role"],i),e}function UR(n,e){const t={},i=p(n,["displayName"]);if(e!==void 0&&i!=null&&m(e,["batch","displayName"],i),p(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function VR(n,e){const t={},i=p(n,["displayName"]);e!==void 0&&i!=null&&m(e,["displayName"],i);const s=p(n,["dest"]);return e!==void 0&&s!=null&&m(e,["outputConfig"],CR(bR(s))),t}function mT(n,e){const t={},i=p(e,["model"]);i!=null&&m(t,["_url","model"],gt(n,i));const s=p(e,["src"]);s!=null&&m(t,["batch","inputConfig"],RR(n,K1(n,s)));const a=p(e,["config"]);return a!=null&&UR(a,t),t}function OR(n,e){const t={},i=p(e,["model"]);i!=null&&m(t,["model"],gt(n,i));const s=p(e,["src"]);s!=null&&m(t,["inputConfig"],NR(K1(n,s)));const a=p(e,["config"]);return a!=null&&VR(a,t),t}function zR(n,e){const t={},i=p(n,["displayName"]);return e!==void 0&&i!=null&&m(e,["batch","displayName"],i),t}function FR(n,e){const t={},i=p(e,["model"]);i!=null&&m(t,["_url","model"],gt(n,i));const s=p(e,["src"]);s!=null&&m(t,["batch","inputConfig"],KR(n,s));const a=p(e,["config"]);return a!=null&&zR(a,t),t}function BR(n,e){const t={},i=p(e,["name"]);return i!=null&&m(t,["_url","name"],nl(n,i)),t}function GR(n,e){const t={},i=p(e,["name"]);return i!=null&&m(t,["_url","name"],nl(n,i)),t}function HR(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=p(n,["name"]);i!=null&&m(e,["name"],i);const s=p(n,["done"]);s!=null&&m(e,["done"],s);const a=p(n,["error"]);return a!=null&&m(e,["error"],a),e}function qR(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=p(n,["name"]);i!=null&&m(e,["name"],i);const s=p(n,["done"]);s!=null&&m(e,["done"],s);const a=p(n,["error"]);return a!=null&&m(e,["error"],a),e}function YR(n,e){const t={},i=p(e,["contents"]);if(i!=null){let a=pg(n,i);Array.isArray(a)&&(a=a.map(l=>l)),m(t,["requests[]","request","content"],a)}const s=p(e,["config"]);return s!=null&&(m(t,["_self"],$R(s,t)),B2(t,{"requests[].*":"requests[].request.*"})),t}function $R(n,e){const t={},i=p(n,["taskType"]);e!==void 0&&i!=null&&m(e,["requests[]","taskType"],i);const s=p(n,["title"]);e!==void 0&&s!=null&&m(e,["requests[]","title"],s);const a=p(n,["outputDimensionality"]);if(e!==void 0&&a!=null&&m(e,["requests[]","outputDimensionality"],a),p(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(p(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function KR(n,e){const t={},i=p(e,["fileName"]);i!=null&&m(t,["file_name"],i);const s=p(e,["inlinedRequests"]);return s!=null&&m(t,["requests"],YR(n,s)),t}function JR(n){const e={};if(p(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=p(n,["fileUri"]);t!=null&&m(e,["fileUri"],t);const i=p(n,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function jR(n){const e={},t=p(n,["id"]);t!=null&&m(e,["id"],t);const i=p(n,["args"]);i!=null&&m(e,["args"],i);const s=p(n,["name"]);if(s!=null&&m(e,["name"],s),p(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(p(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function WR(n){const e={},t=p(n,["allowedFunctionNames"]);t!=null&&m(e,["allowedFunctionNames"],t);const i=p(n,["mode"]);if(i!=null&&m(e,["mode"],i),p(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function QR(n,e,t){const i={},s=p(e,["systemInstruction"]);t!==void 0&&s!=null&&m(t,["systemInstruction"],W1(xn(s)));const a=p(e,["temperature"]);a!=null&&m(i,["temperature"],a);const l=p(e,["topP"]);l!=null&&m(i,["topP"],l);const c=p(e,["topK"]);c!=null&&m(i,["topK"],c);const f=p(e,["candidateCount"]);f!=null&&m(i,["candidateCount"],f);const h=p(e,["maxOutputTokens"]);h!=null&&m(i,["maxOutputTokens"],h);const y=p(e,["stopSequences"]);y!=null&&m(i,["stopSequences"],y);const E=p(e,["responseLogprobs"]);E!=null&&m(i,["responseLogprobs"],E);const T=p(e,["logprobs"]);T!=null&&m(i,["logprobs"],T);const w=p(e,["presencePenalty"]);w!=null&&m(i,["presencePenalty"],w);const C=p(e,["frequencyPenalty"]);C!=null&&m(i,["frequencyPenalty"],C);const b=p(e,["seed"]);b!=null&&m(i,["seed"],b);const x=p(e,["responseMimeType"]);x!=null&&m(i,["responseMimeType"],x);const N=p(e,["responseSchema"]);N!=null&&m(i,["responseSchema"],mg(N));const z=p(e,["responseJsonSchema"]);if(z!=null&&m(i,["responseJsonSchema"],z),p(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(p(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const B=p(e,["safetySettings"]);if(t!==void 0&&B!=null){let O=B;Array.isArray(O)&&(O=O.map(D=>hN(D))),m(t,["safetySettings"],O)}const Y=p(e,["tools"]);if(t!==void 0&&Y!=null){let O=tl(Y);Array.isArray(O)&&(O=O.map(D=>mN(el(D)))),m(t,["tools"],O)}const J=p(e,["toolConfig"]);if(t!==void 0&&J!=null&&m(t,["toolConfig"],pN(J)),p(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const $=p(e,["cachedContent"]);t!==void 0&&$!=null&&m(t,["cachedContent"],Kr(n,$));const L=p(e,["responseModalities"]);L!=null&&m(i,["responseModalities"],L);const V=p(e,["mediaResolution"]);V!=null&&m(i,["mediaResolution"],V);const k=p(e,["speechConfig"]);if(k!=null&&m(i,["speechConfig"],gg(k)),p(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const H=p(e,["thinkingConfig"]);H!=null&&m(i,["thinkingConfig"],H);const K=p(e,["imageConfig"]);K!=null&&m(i,["imageConfig"],iN(K));const U=p(e,["enableEnhancedCivicAnswers"]);if(U!=null&&m(i,["enableEnhancedCivicAnswers"],U),p(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return i}function XR(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=p(n,["candidates"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(h=>PR(h))),m(e,["candidates"],f)}const s=p(n,["modelVersion"]);s!=null&&m(e,["modelVersion"],s);const a=p(n,["promptFeedback"]);a!=null&&m(e,["promptFeedback"],a);const l=p(n,["responseId"]);l!=null&&m(e,["responseId"],l);const c=p(n,["usageMetadata"]);return c!=null&&m(e,["usageMetadata"],c),e}function ZR(n,e){const t={},i=p(e,["name"]);return i!=null&&m(t,["_url","name"],nl(n,i)),t}function eN(n,e){const t={},i=p(e,["name"]);return i!=null&&m(t,["_url","name"],nl(n,i)),t}function tN(n){const e={};if(p(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=p(n,["enableWidget"]);return t!=null&&m(e,["enableWidget"],t),e}function nN(n){const e={};if(p(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=p(n,["timeRangeFilter"]);return t!=null&&m(e,["timeRangeFilter"],t),e}function iN(n){const e={},t=p(n,["aspectRatio"]);t!=null&&m(e,["aspectRatio"],t);const i=p(n,["imageSize"]);if(i!=null&&m(e,["imageSize"],i),p(n,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(p(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(p(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function rN(n,e){const t={},i=p(e,["model"]);i!=null&&m(t,["request","model"],gt(n,i));const s=p(e,["contents"]);if(s!=null){let c=mi(s);Array.isArray(c)&&(c=c.map(f=>W1(f))),m(t,["request","contents"],c)}const a=p(e,["metadata"]);a!=null&&m(t,["metadata"],a);const l=p(e,["config"]);return l!=null&&m(t,["request","generationConfig"],QR(n,l,p(t,["request"],{}))),t}function sN(n){const e={},t=p(n,["response"]);t!=null&&m(e,["response"],XR(t));const i=p(n,["metadata"]);i!=null&&m(e,["metadata"],i);const s=p(n,["error"]);return s!=null&&m(e,["error"],s),e}function oN(n,e){const t={},i=p(n,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const s=p(n,["pageToken"]);if(e!==void 0&&s!=null&&m(e,["_query","pageToken"],s),p(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function aN(n,e){const t={},i=p(n,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const s=p(n,["pageToken"]);e!==void 0&&s!=null&&m(e,["_query","pageToken"],s);const a=p(n,["filter"]);return e!==void 0&&a!=null&&m(e,["_query","filter"],a),t}function lN(n){const e={},t=p(n,["config"]);return t!=null&&oN(t,e),e}function uN(n){const e={},t=p(n,["config"]);return t!=null&&aN(t,e),e}function cN(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=p(n,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const s=p(n,["operations"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>Vd(l))),m(e,["batchJobs"],a)}return e}function dN(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=p(n,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const s=p(n,["batchPredictionJobs"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>xm(l))),m(e,["batchJobs"],a)}return e}function fN(n){const e={},t=p(n,["mediaResolution"]);t!=null&&m(e,["mediaResolution"],t);const i=p(n,["codeExecutionResult"]);i!=null&&m(e,["codeExecutionResult"],i);const s=p(n,["executableCode"]);s!=null&&m(e,["executableCode"],s);const a=p(n,["fileData"]);a!=null&&m(e,["fileData"],JR(a));const l=p(n,["functionCall"]);l!=null&&m(e,["functionCall"],jR(l));const c=p(n,["functionResponse"]);c!=null&&m(e,["functionResponse"],c);const f=p(n,["inlineData"]);f!=null&&m(e,["inlineData"],MR(f));const h=p(n,["text"]);h!=null&&m(e,["text"],h);const y=p(n,["thought"]);y!=null&&m(e,["thought"],y);const E=p(n,["thoughtSignature"]);E!=null&&m(e,["thoughtSignature"],E);const T=p(n,["videoMetadata"]);return T!=null&&m(e,["videoMetadata"],T),e}function hN(n){const e={},t=p(n,["category"]);if(t!=null&&m(e,["category"],t),p(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=p(n,["threshold"]);return i!=null&&m(e,["threshold"],i),e}function pN(n){const e={},t=p(n,["retrievalConfig"]);t!=null&&m(e,["retrievalConfig"],t);const i=p(n,["functionCallingConfig"]);return i!=null&&m(e,["functionCallingConfig"],WR(i)),e}function mN(n){const e={};if(p(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=p(n,["computerUse"]);t!=null&&m(e,["computerUse"],t);const i=p(n,["fileSearch"]);i!=null&&m(e,["fileSearch"],i);const s=p(n,["codeExecution"]);if(s!=null&&m(e,["codeExecution"],s),p(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=p(n,["functionDeclarations"]);if(a!=null){let y=a;Array.isArray(y)&&(y=y.map(E=>E)),m(e,["functionDeclarations"],y)}const l=p(n,["googleMaps"]);l!=null&&m(e,["googleMaps"],tN(l));const c=p(n,["googleSearch"]);c!=null&&m(e,["googleSearch"],nN(c));const f=p(n,["googleSearchRetrieval"]);f!=null&&m(e,["googleSearchRetrieval"],f);const h=p(n,["urlContext"]);return h!=null&&m(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Br;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(Br||(Br={}));class Oo{constructor(e,t,i,s){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,i,s)}init(e,t,i){var s,a;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let l={config:{}};!i||Object.keys(i).length===0?l={config:{}}:typeof i=="object"?l=Object.assign({},i):l=i,l.config&&(l.config.pageToken=t.nextPageToken),this.paramsInternal=l,this.pageInternalSize=(a=(s=l.config)===null||s===void 0?void 0:s.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class gN extends $r{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Oo(Br.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(t),t),this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)}}createInlinedGenerateContentRequest(e){const t=mT(this.apiClient,e),i=t._url,s=Pe("{model}:batchGenerateContent",i),c=t.batch.inputConfig.requests,f=c.requests,h=[];for(const y of f){const E=Object.assign({},y);if(E.systemInstruction){const T=E.systemInstruction;delete E.systemInstruction;const w=E.request;w.systemInstruction=T,E.request=w}h.push(E)}return c.requests=h,delete t.config,delete t._url,delete t._query,{path:s,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const i=t?Object.assign({},t):{},s=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${s}`),i.dest===void 0){const a=this.getGcsUri(e),l=this.getBigqueryUri(e);if(a)a.endsWith(".jsonl")?i.dest=`${a.slice(0,-6)}/dest`:i.dest=`${a}_dest_${s}`;else if(l)i.dest=`${l}_dest_${s}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var t,i,s,a;let l,c="",f={};if(this.apiClient.isVertexAI()){const h=OR(this.apiClient,e);return c=Pe("batchPredictionJobs",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),l.then(y=>xm(y))}else{const h=mT(this.apiClient,e);return c=Pe("{model}:batchGenerateContent",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),l.then(y=>Vd(y))}}async createEmbeddingsInternal(e){var t,i;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=FR(this.apiClient,e);return a=Pe("{model}:asyncBatchEmbedContent",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>Vd(f))}}async get(e){var t,i,s,a;let l,c="",f={};if(this.apiClient.isVertexAI()){const h=eN(this.apiClient,e);return c=Pe("batchPredictionJobs/{name}",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),l.then(y=>xm(y))}else{const h=ZR(this.apiClient,e);return c=Pe("batches/{name}",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),l.then(y=>Vd(y))}}async cancel(e){var t,i,s,a;let l="",c={};if(this.apiClient.isVertexAI()){const f=DR(this.apiClient,e);l=Pe("batchPredictionJobs/{name}:cancel",f._url),c=f._query,delete f._url,delete f._query,await this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const f=kR(this.apiClient,e);l=Pe("batches/{name}:cancel",f._url),c=f._query,delete f._url,delete f._query,await this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(e){var t,i,s,a;let l,c="",f={};if(this.apiClient.isVertexAI()){const h=uN(e);return c=Pe("batchPredictionJobs",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),l.then(y=>{const E=dN(y),T=new dT;return Object.assign(T,E),T})}else{const h=lN(e);return c=Pe("batches",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),l.then(y=>{const E=cN(y),T=new dT;return Object.assign(T,E),T})}}async delete(e){var t,i,s,a;let l,c="",f={};if(this.apiClient.isVertexAI()){const h=GR(this.apiClient,e);return c=Pe("batchPredictionJobs/{name}",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),l.then(y=>qR(y))}else{const h=BR(this.apiClient,e);return c=Pe("batches/{name}",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),l.then(y=>HR(y))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function yN(n){const e={},t=p(n,["data"]);if(t!=null&&m(e,["data"],t),p(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=p(n,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function gT(n){const e={},t=p(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(a=>FN(a))),m(e,["parts"],s)}const i=p(n,["role"]);return i!=null&&m(e,["role"],i),e}function vN(n,e){const t={},i=p(n,["ttl"]);e!==void 0&&i!=null&&m(e,["ttl"],i);const s=p(n,["expireTime"]);e!==void 0&&s!=null&&m(e,["expireTime"],s);const a=p(n,["displayName"]);e!==void 0&&a!=null&&m(e,["displayName"],a);const l=p(n,["contents"]);if(e!==void 0&&l!=null){let y=mi(l);Array.isArray(y)&&(y=y.map(E=>gT(E))),m(e,["contents"],y)}const c=p(n,["systemInstruction"]);e!==void 0&&c!=null&&m(e,["systemInstruction"],gT(xn(c)));const f=p(n,["tools"]);if(e!==void 0&&f!=null){let y=f;Array.isArray(y)&&(y=y.map(E=>GN(E))),m(e,["tools"],y)}const h=p(n,["toolConfig"]);if(e!==void 0&&h!=null&&m(e,["toolConfig"],BN(h)),p(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function _N(n,e){const t={},i=p(n,["ttl"]);e!==void 0&&i!=null&&m(e,["ttl"],i);const s=p(n,["expireTime"]);e!==void 0&&s!=null&&m(e,["expireTime"],s);const a=p(n,["displayName"]);e!==void 0&&a!=null&&m(e,["displayName"],a);const l=p(n,["contents"]);if(e!==void 0&&l!=null){let E=mi(l);Array.isArray(E)&&(E=E.map(T=>T)),m(e,["contents"],E)}const c=p(n,["systemInstruction"]);e!==void 0&&c!=null&&m(e,["systemInstruction"],xn(c));const f=p(n,["tools"]);if(e!==void 0&&f!=null){let E=f;Array.isArray(E)&&(E=E.map(T=>HN(T))),m(e,["tools"],E)}const h=p(n,["toolConfig"]);e!==void 0&&h!=null&&m(e,["toolConfig"],h);const y=p(n,["kmsKeyName"]);return e!==void 0&&y!=null&&m(e,["encryption_spec","kmsKeyName"],y),t}function EN(n,e){const t={},i=p(e,["model"]);i!=null&&m(t,["model"],O1(n,i));const s=p(e,["config"]);return s!=null&&vN(s,t),t}function TN(n,e){const t={},i=p(e,["model"]);i!=null&&m(t,["model"],O1(n,i));const s=p(e,["config"]);return s!=null&&_N(s,t),t}function wN(n,e){const t={},i=p(e,["name"]);return i!=null&&m(t,["_url","name"],Kr(n,i)),t}function SN(n,e){const t={},i=p(e,["name"]);return i!=null&&m(t,["_url","name"],Kr(n,i)),t}function bN(n){const e={},t=p(n,["sdkHttpResponse"]);return t!=null&&m(e,["sdkHttpResponse"],t),e}function AN(n){const e={},t=p(n,["sdkHttpResponse"]);return t!=null&&m(e,["sdkHttpResponse"],t),e}function xN(n){const e={};if(p(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=p(n,["fileUri"]);t!=null&&m(e,["fileUri"],t);const i=p(n,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function CN(n){const e={},t=p(n,["id"]);t!=null&&m(e,["id"],t);const i=p(n,["args"]);i!=null&&m(e,["args"],i);const s=p(n,["name"]);if(s!=null&&m(e,["name"],s),p(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(p(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function IN(n){const e={},t=p(n,["allowedFunctionNames"]);t!=null&&m(e,["allowedFunctionNames"],t);const i=p(n,["mode"]);if(i!=null&&m(e,["mode"],i),p(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function RN(n){const e={},t=p(n,["description"]);t!=null&&m(e,["description"],t);const i=p(n,["name"]);i!=null&&m(e,["name"],i);const s=p(n,["parameters"]);s!=null&&m(e,["parameters"],s);const a=p(n,["parametersJsonSchema"]);a!=null&&m(e,["parametersJsonSchema"],a);const l=p(n,["response"]);l!=null&&m(e,["response"],l);const c=p(n,["responseJsonSchema"]);if(c!=null&&m(e,["responseJsonSchema"],c),p(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function NN(n,e){const t={},i=p(e,["name"]);return i!=null&&m(t,["_url","name"],Kr(n,i)),t}function MN(n,e){const t={},i=p(e,["name"]);return i!=null&&m(t,["_url","name"],Kr(n,i)),t}function kN(n){const e={};if(p(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=p(n,["enableWidget"]);return t!=null&&m(e,["enableWidget"],t),e}function DN(n){const e={};if(p(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=p(n,["timeRangeFilter"]);return t!=null&&m(e,["timeRangeFilter"],t),e}function PN(n,e){const t={},i=p(n,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const s=p(n,["pageToken"]);return e!==void 0&&s!=null&&m(e,["_query","pageToken"],s),t}function LN(n,e){const t={},i=p(n,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const s=p(n,["pageToken"]);return e!==void 0&&s!=null&&m(e,["_query","pageToken"],s),t}function UN(n){const e={},t=p(n,["config"]);return t!=null&&PN(t,e),e}function VN(n){const e={},t=p(n,["config"]);return t!=null&&LN(t,e),e}function ON(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=p(n,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const s=p(n,["cachedContents"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),m(e,["cachedContents"],a)}return e}function zN(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=p(n,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const s=p(n,["cachedContents"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),m(e,["cachedContents"],a)}return e}function FN(n){const e={},t=p(n,["mediaResolution"]);t!=null&&m(e,["mediaResolution"],t);const i=p(n,["codeExecutionResult"]);i!=null&&m(e,["codeExecutionResult"],i);const s=p(n,["executableCode"]);s!=null&&m(e,["executableCode"],s);const a=p(n,["fileData"]);a!=null&&m(e,["fileData"],xN(a));const l=p(n,["functionCall"]);l!=null&&m(e,["functionCall"],CN(l));const c=p(n,["functionResponse"]);c!=null&&m(e,["functionResponse"],c);const f=p(n,["inlineData"]);f!=null&&m(e,["inlineData"],yN(f));const h=p(n,["text"]);h!=null&&m(e,["text"],h);const y=p(n,["thought"]);y!=null&&m(e,["thought"],y);const E=p(n,["thoughtSignature"]);E!=null&&m(e,["thoughtSignature"],E);const T=p(n,["videoMetadata"]);return T!=null&&m(e,["videoMetadata"],T),e}function BN(n){const e={},t=p(n,["retrievalConfig"]);t!=null&&m(e,["retrievalConfig"],t);const i=p(n,["functionCallingConfig"]);return i!=null&&m(e,["functionCallingConfig"],IN(i)),e}function GN(n){const e={};if(p(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=p(n,["computerUse"]);t!=null&&m(e,["computerUse"],t);const i=p(n,["fileSearch"]);i!=null&&m(e,["fileSearch"],i);const s=p(n,["codeExecution"]);if(s!=null&&m(e,["codeExecution"],s),p(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=p(n,["functionDeclarations"]);if(a!=null){let y=a;Array.isArray(y)&&(y=y.map(E=>E)),m(e,["functionDeclarations"],y)}const l=p(n,["googleMaps"]);l!=null&&m(e,["googleMaps"],kN(l));const c=p(n,["googleSearch"]);c!=null&&m(e,["googleSearch"],DN(c));const f=p(n,["googleSearchRetrieval"]);f!=null&&m(e,["googleSearchRetrieval"],f);const h=p(n,["urlContext"]);return h!=null&&m(e,["urlContext"],h),e}function HN(n){const e={},t=p(n,["retrieval"]);t!=null&&m(e,["retrieval"],t);const i=p(n,["computerUse"]);if(i!=null&&m(e,["computerUse"],i),p(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=p(n,["codeExecution"]);s!=null&&m(e,["codeExecution"],s);const a=p(n,["enterpriseWebSearch"]);a!=null&&m(e,["enterpriseWebSearch"],a);const l=p(n,["functionDeclarations"]);if(l!=null){let E=l;Array.isArray(E)&&(E=E.map(T=>RN(T))),m(e,["functionDeclarations"],E)}const c=p(n,["googleMaps"]);c!=null&&m(e,["googleMaps"],c);const f=p(n,["googleSearch"]);f!=null&&m(e,["googleSearch"],f);const h=p(n,["googleSearchRetrieval"]);h!=null&&m(e,["googleSearchRetrieval"],h);const y=p(n,["urlContext"]);return y!=null&&m(e,["urlContext"],y),e}function qN(n,e){const t={},i=p(n,["ttl"]);e!==void 0&&i!=null&&m(e,["ttl"],i);const s=p(n,["expireTime"]);return e!==void 0&&s!=null&&m(e,["expireTime"],s),t}function YN(n,e){const t={},i=p(n,["ttl"]);e!==void 0&&i!=null&&m(e,["ttl"],i);const s=p(n,["expireTime"]);return e!==void 0&&s!=null&&m(e,["expireTime"],s),t}function $N(n,e){const t={},i=p(e,["name"]);i!=null&&m(t,["_url","name"],Kr(n,i));const s=p(e,["config"]);return s!=null&&qN(s,t),t}function KN(n,e){const t={},i=p(e,["name"]);i!=null&&m(t,["_url","name"],Kr(n,i));const s=p(e,["config"]);return s!=null&&YN(s,t),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class JN extends $r{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Oo(Br.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(t),t)}async create(e){var t,i,s,a;let l,c="",f={};if(this.apiClient.isVertexAI()){const h=TN(this.apiClient,e);return c=Pe("cachedContents",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),l.then(y=>y)}else{const h=EN(this.apiClient,e);return c=Pe("cachedContents",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),l.then(y=>y)}}async get(e){var t,i,s,a;let l,c="",f={};if(this.apiClient.isVertexAI()){const h=MN(this.apiClient,e);return c=Pe("{name}",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),l.then(y=>y)}else{const h=NN(this.apiClient,e);return c=Pe("{name}",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),l.then(y=>y)}}async delete(e){var t,i,s,a;let l,c="",f={};if(this.apiClient.isVertexAI()){const h=SN(this.apiClient,e);return c=Pe("{name}",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),l.then(y=>{const E=AN(y),T=new uT;return Object.assign(T,E),T})}else{const h=wN(this.apiClient,e);return c=Pe("{name}",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),l.then(y=>{const E=bN(y),T=new uT;return Object.assign(T,E),T})}}async update(e){var t,i,s,a;let l,c="",f={};if(this.apiClient.isVertexAI()){const h=KN(this.apiClient,e);return c=Pe("{name}",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),l.then(y=>y)}else{const h=$N(this.apiClient,e);return c=Pe("{name}",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),l.then(y=>y)}}async listInternal(e){var t,i,s,a;let l,c="",f={};if(this.apiClient.isVertexAI()){const h=VN(e);return c=Pe("cachedContents",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),l.then(y=>{const E=zN(y),T=new cT;return Object.assign(T,E),T})}else{const h=UN(e);return c=Pe("cachedContents",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),l.then(y=>{const E=ON(y),T=new cT;return Object.assign(T,E),T})}}}function Zd(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(n);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(n,i[s])&&(t[i[s]]=n[i[s]]);return t}function yT(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ke(n){return this instanceof Ke?(this.v=n,this):new Ke(n)}function Mi(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),s,a=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",l),s[Symbol.asyncIterator]=function(){return this},s;function l(w){return function(C){return Promise.resolve(C).then(w,E)}}function c(w,C){i[w]&&(s[w]=function(b){return new Promise(function(x,N){a.push([w,b,x,N])>1||f(w,b)})},C&&(s[w]=C(s[w])))}function f(w,C){try{h(i[w](C))}catch(b){T(a[0][3],b)}}function h(w){w.value instanceof Ke?Promise.resolve(w.value.v).then(y,E):T(a[0][2],w)}function y(w){f("next",w)}function E(w){f("throw",w)}function T(w,C){w(C),a.shift(),a.length&&f(a[0][0],a[0][1])}}function ki(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof yT=="function"?yT(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(a){t[a]=n[a]&&function(l){return new Promise(function(c,f){l=n[a](l),s(c,f,l.done,l.value)})}}function s(a,l,c,f){Promise.resolve(f).then(function(h){a({value:h,done:c})},l)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jN(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:Q1(t)}function Q1(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function WN(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function vT(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let i=0;for(;i<t;)if(n[i].role==="user")e.push(n[i]),i++;else{const s=[];let a=!0;for(;i<t&&n[i].role==="model";)s.push(n[i]),a&&!Q1(n[i])&&(a=!1),i++;a?e.push(...s):e.pop()}return e}class QN{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new XN(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class XN{constructor(e,t,i,s={},a=[]){this.apiClient=e,this.modelsModule=t,this.model=i,this.config=s,this.history=a,this.sendPromise=Promise.resolve(),WN(a)}async sendMessage(e){var t;await this.sendPromise;const i=xn(e.message),s=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var a,l,c;const f=await s,h=(l=(a=f.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content,y=f.automaticFunctionCallingHistory,E=this.getHistory(!0).length;let T=[];y!=null&&(T=(c=y.slice(E))!==null&&c!==void 0?c:[]);const w=h?[h]:[];this.recordHistory(i,w,T)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),s}async sendMessageStream(e){var t;await this.sendPromise;const i=xn(e.message),s=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=s.then(()=>{}).catch(()=>{});const a=await s;return this.processStreamResponse(a,i)}getHistory(e=!1){const t=e?vT(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){return Mi(this,arguments,function*(){var s,a,l,c,f,h;const y=[];try{for(var E=!0,T=ki(e),w;w=yield Ke(T.next()),s=w.done,!s;E=!0){c=w.value,E=!1;const C=c;if(jN(C)){const b=(h=(f=C.candidates)===null||f===void 0?void 0:f[0])===null||h===void 0?void 0:h.content;b!==void 0&&y.push(b)}yield yield Ke(C)}}catch(C){a={error:C}}finally{try{!E&&!s&&(l=T.return)&&(yield Ke(l.call(T)))}finally{if(a)throw a.error}}this.recordHistory(t,y)})}recordHistory(e,t,i){let s=[];t.length>0&&t.every(a=>a.role!==void 0)?s=t:s.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...vT(i)):this.history.push(e),this.history.push(...s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Mu extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Mu.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ZN(n){const e={},t=p(n,["file"]);return t!=null&&m(e,["file"],t),e}function eM(n){const e={},t=p(n,["sdkHttpResponse"]);return t!=null&&m(e,["sdkHttpResponse"],t),e}function tM(n){const e={},t=p(n,["name"]);return t!=null&&m(e,["_url","file"],q1(t)),e}function nM(n){const e={},t=p(n,["sdkHttpResponse"]);return t!=null&&m(e,["sdkHttpResponse"],t),e}function iM(n){const e={},t=p(n,["name"]);return t!=null&&m(e,["_url","file"],q1(t)),e}function rM(n){const e={},t=p(n,["uris"]);return t!=null&&m(e,["uris"],t),e}function sM(n,e){const t={},i=p(n,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const s=p(n,["pageToken"]);return e!==void 0&&s!=null&&m(e,["_query","pageToken"],s),t}function oM(n){const e={},t=p(n,["config"]);return t!=null&&sM(t,e),e}function aM(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=p(n,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const s=p(n,["files"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),m(e,["files"],a)}return e}function lM(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=p(n,["files"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>a)),m(e,["files"],s)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class uM extends $r{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Oo(Br.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async registerFiles(e){throw new Error("registerFiles is only supported in Node.js environments.")}async _registerFiles(e){return this.registerFilesInternal(e)}async listInternal(e){var t,i;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=oM(e);return a=Pe("files",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:f.headers},y})),s.then(f=>{const h=aM(f),y=new cR;return Object.assign(y,h),y})}}async createInternal(e){var t,i;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=ZN(e);return a=Pe("upload/v1beta/files",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>{const h=eM(f),y=new dR;return Object.assign(y,h),y})}}async get(e){var t,i;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=iM(e);return a=Pe("files/{file}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async delete(e){var t,i;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=tM(e);return a=Pe("files/{file}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:f.headers},y})),s.then(f=>{const h=nM(f),y=new fR;return Object.assign(y,h),y})}}async registerFilesInternal(e){var t,i;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=rM(e);return a=Pe("files:register",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>{const h=lM(f),y=new hR;return Object.assign(y,h),y})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Od(n){const e={},t=p(n,["data"]);if(t!=null&&m(e,["data"],t),p(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=p(n,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function cM(n){const e={},t=p(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(a=>xM(a))),m(e,["parts"],s)}const i=p(n,["role"]);return i!=null&&m(e,["role"],i),e}function dM(n){const e={};if(p(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=p(n,["fileUri"]);t!=null&&m(e,["fileUri"],t);const i=p(n,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function fM(n){const e={},t=p(n,["id"]);t!=null&&m(e,["id"],t);const i=p(n,["args"]);i!=null&&m(e,["args"],i);const s=p(n,["name"]);if(s!=null&&m(e,["name"],s),p(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(p(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function hM(n){const e={},t=p(n,["description"]);t!=null&&m(e,["description"],t);const i=p(n,["name"]);i!=null&&m(e,["name"],i);const s=p(n,["parameters"]);s!=null&&m(e,["parameters"],s);const a=p(n,["parametersJsonSchema"]);a!=null&&m(e,["parametersJsonSchema"],a);const l=p(n,["response"]);l!=null&&m(e,["response"],l);const c=p(n,["responseJsonSchema"]);if(c!=null&&m(e,["responseJsonSchema"],c),p(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function pM(n){const e={},t=p(n,["modelSelectionConfig"]);t!=null&&m(e,["modelConfig"],t);const i=p(n,["responseJsonSchema"]);i!=null&&m(e,["responseJsonSchema"],i);const s=p(n,["audioTimestamp"]);s!=null&&m(e,["audioTimestamp"],s);const a=p(n,["candidateCount"]);a!=null&&m(e,["candidateCount"],a);const l=p(n,["enableAffectiveDialog"]);l!=null&&m(e,["enableAffectiveDialog"],l);const c=p(n,["frequencyPenalty"]);c!=null&&m(e,["frequencyPenalty"],c);const f=p(n,["logprobs"]);f!=null&&m(e,["logprobs"],f);const h=p(n,["maxOutputTokens"]);h!=null&&m(e,["maxOutputTokens"],h);const y=p(n,["mediaResolution"]);y!=null&&m(e,["mediaResolution"],y);const E=p(n,["presencePenalty"]);E!=null&&m(e,["presencePenalty"],E);const T=p(n,["responseLogprobs"]);T!=null&&m(e,["responseLogprobs"],T);const w=p(n,["responseMimeType"]);w!=null&&m(e,["responseMimeType"],w);const C=p(n,["responseModalities"]);C!=null&&m(e,["responseModalities"],C);const b=p(n,["responseSchema"]);b!=null&&m(e,["responseSchema"],b);const x=p(n,["routingConfig"]);x!=null&&m(e,["routingConfig"],x);const N=p(n,["seed"]);N!=null&&m(e,["seed"],N);const z=p(n,["speechConfig"]);z!=null&&m(e,["speechConfig"],z);const B=p(n,["stopSequences"]);B!=null&&m(e,["stopSequences"],B);const Y=p(n,["temperature"]);Y!=null&&m(e,["temperature"],Y);const J=p(n,["thinkingConfig"]);J!=null&&m(e,["thinkingConfig"],J);const $=p(n,["topK"]);$!=null&&m(e,["topK"],$);const L=p(n,["topP"]);if(L!=null&&m(e,["topP"],L),p(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function mM(n){const e={};if(p(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=p(n,["enableWidget"]);return t!=null&&m(e,["enableWidget"],t),e}function gM(n){const e={};if(p(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=p(n,["timeRangeFilter"]);return t!=null&&m(e,["timeRangeFilter"],t),e}function yM(n,e){const t={},i=p(n,["generationConfig"]);e!==void 0&&i!=null&&m(e,["setup","generationConfig"],i);const s=p(n,["responseModalities"]);e!==void 0&&s!=null&&m(e,["setup","generationConfig","responseModalities"],s);const a=p(n,["temperature"]);e!==void 0&&a!=null&&m(e,["setup","generationConfig","temperature"],a);const l=p(n,["topP"]);e!==void 0&&l!=null&&m(e,["setup","generationConfig","topP"],l);const c=p(n,["topK"]);e!==void 0&&c!=null&&m(e,["setup","generationConfig","topK"],c);const f=p(n,["maxOutputTokens"]);e!==void 0&&f!=null&&m(e,["setup","generationConfig","maxOutputTokens"],f);const h=p(n,["mediaResolution"]);e!==void 0&&h!=null&&m(e,["setup","generationConfig","mediaResolution"],h);const y=p(n,["seed"]);e!==void 0&&y!=null&&m(e,["setup","generationConfig","seed"],y);const E=p(n,["speechConfig"]);e!==void 0&&E!=null&&m(e,["setup","generationConfig","speechConfig"],yg(E));const T=p(n,["thinkingConfig"]);e!==void 0&&T!=null&&m(e,["setup","generationConfig","thinkingConfig"],T);const w=p(n,["enableAffectiveDialog"]);e!==void 0&&w!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],w);const C=p(n,["systemInstruction"]);e!==void 0&&C!=null&&m(e,["setup","systemInstruction"],cM(xn(C)));const b=p(n,["tools"]);if(e!==void 0&&b!=null){let $=tl(b);Array.isArray($)&&($=$.map(L=>IM(el(L)))),m(e,["setup","tools"],$)}const x=p(n,["sessionResumption"]);e!==void 0&&x!=null&&m(e,["setup","sessionResumption"],CM(x));const N=p(n,["inputAudioTranscription"]);e!==void 0&&N!=null&&m(e,["setup","inputAudioTranscription"],N);const z=p(n,["outputAudioTranscription"]);e!==void 0&&z!=null&&m(e,["setup","outputAudioTranscription"],z);const B=p(n,["realtimeInputConfig"]);e!==void 0&&B!=null&&m(e,["setup","realtimeInputConfig"],B);const Y=p(n,["contextWindowCompression"]);e!==void 0&&Y!=null&&m(e,["setup","contextWindowCompression"],Y);const J=p(n,["proactivity"]);if(e!==void 0&&J!=null&&m(e,["setup","proactivity"],J),p(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function vM(n,e){const t={},i=p(n,["generationConfig"]);e!==void 0&&i!=null&&m(e,["setup","generationConfig"],pM(i));const s=p(n,["responseModalities"]);e!==void 0&&s!=null&&m(e,["setup","generationConfig","responseModalities"],s);const a=p(n,["temperature"]);e!==void 0&&a!=null&&m(e,["setup","generationConfig","temperature"],a);const l=p(n,["topP"]);e!==void 0&&l!=null&&m(e,["setup","generationConfig","topP"],l);const c=p(n,["topK"]);e!==void 0&&c!=null&&m(e,["setup","generationConfig","topK"],c);const f=p(n,["maxOutputTokens"]);e!==void 0&&f!=null&&m(e,["setup","generationConfig","maxOutputTokens"],f);const h=p(n,["mediaResolution"]);e!==void 0&&h!=null&&m(e,["setup","generationConfig","mediaResolution"],h);const y=p(n,["seed"]);e!==void 0&&y!=null&&m(e,["setup","generationConfig","seed"],y);const E=p(n,["speechConfig"]);e!==void 0&&E!=null&&m(e,["setup","generationConfig","speechConfig"],yg(E));const T=p(n,["thinkingConfig"]);e!==void 0&&T!=null&&m(e,["setup","generationConfig","thinkingConfig"],T);const w=p(n,["enableAffectiveDialog"]);e!==void 0&&w!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],w);const C=p(n,["systemInstruction"]);e!==void 0&&C!=null&&m(e,["setup","systemInstruction"],xn(C));const b=p(n,["tools"]);if(e!==void 0&&b!=null){let L=tl(b);Array.isArray(L)&&(L=L.map(V=>RM(el(V)))),m(e,["setup","tools"],L)}const x=p(n,["sessionResumption"]);e!==void 0&&x!=null&&m(e,["setup","sessionResumption"],x);const N=p(n,["inputAudioTranscription"]);e!==void 0&&N!=null&&m(e,["setup","inputAudioTranscription"],N);const z=p(n,["outputAudioTranscription"]);e!==void 0&&z!=null&&m(e,["setup","outputAudioTranscription"],z);const B=p(n,["realtimeInputConfig"]);e!==void 0&&B!=null&&m(e,["setup","realtimeInputConfig"],B);const Y=p(n,["contextWindowCompression"]);e!==void 0&&Y!=null&&m(e,["setup","contextWindowCompression"],Y);const J=p(n,["proactivity"]);e!==void 0&&J!=null&&m(e,["setup","proactivity"],J);const $=p(n,["explicitVadSignal"]);return e!==void 0&&$!=null&&m(e,["setup","explicitVadSignal"],$),t}function _M(n,e){const t={},i=p(e,["model"]);i!=null&&m(t,["setup","model"],gt(n,i));const s=p(e,["config"]);return s!=null&&m(t,["config"],yM(s,t)),t}function EM(n,e){const t={},i=p(e,["model"]);i!=null&&m(t,["setup","model"],gt(n,i));const s=p(e,["config"]);return s!=null&&m(t,["config"],vM(s,t)),t}function TM(n){const e={},t=p(n,["musicGenerationConfig"]);return t!=null&&m(e,["musicGenerationConfig"],t),e}function wM(n){const e={},t=p(n,["weightedPrompts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>s)),m(e,["weightedPrompts"],i)}return e}function SM(n){const e={},t=p(n,["media"]);if(t!=null){let h=z1(t);Array.isArray(h)&&(h=h.map(y=>Od(y))),m(e,["mediaChunks"],h)}const i=p(n,["audio"]);i!=null&&m(e,["audio"],Od(B1(i)));const s=p(n,["audioStreamEnd"]);s!=null&&m(e,["audioStreamEnd"],s);const a=p(n,["video"]);a!=null&&m(e,["video"],Od(F1(a)));const l=p(n,["text"]);l!=null&&m(e,["text"],l);const c=p(n,["activityStart"]);c!=null&&m(e,["activityStart"],c);const f=p(n,["activityEnd"]);return f!=null&&m(e,["activityEnd"],f),e}function bM(n){const e={},t=p(n,["media"]);if(t!=null){let h=z1(t);Array.isArray(h)&&(h=h.map(y=>y)),m(e,["mediaChunks"],h)}const i=p(n,["audio"]);i!=null&&m(e,["audio"],B1(i));const s=p(n,["audioStreamEnd"]);s!=null&&m(e,["audioStreamEnd"],s);const a=p(n,["video"]);a!=null&&m(e,["video"],F1(a));const l=p(n,["text"]);l!=null&&m(e,["text"],l);const c=p(n,["activityStart"]);c!=null&&m(e,["activityStart"],c);const f=p(n,["activityEnd"]);return f!=null&&m(e,["activityEnd"],f),e}function AM(n){const e={},t=p(n,["setupComplete"]);t!=null&&m(e,["setupComplete"],t);const i=p(n,["serverContent"]);i!=null&&m(e,["serverContent"],i);const s=p(n,["toolCall"]);s!=null&&m(e,["toolCall"],s);const a=p(n,["toolCallCancellation"]);a!=null&&m(e,["toolCallCancellation"],a);const l=p(n,["usageMetadata"]);l!=null&&m(e,["usageMetadata"],NM(l));const c=p(n,["goAway"]);c!=null&&m(e,["goAway"],c);const f=p(n,["sessionResumptionUpdate"]);f!=null&&m(e,["sessionResumptionUpdate"],f);const h=p(n,["voiceActivityDetectionSignal"]);h!=null&&m(e,["voiceActivityDetectionSignal"],h);const y=p(n,["voiceActivity"]);return y!=null&&m(e,["voiceActivity"],MM(y)),e}function xM(n){const e={},t=p(n,["mediaResolution"]);t!=null&&m(e,["mediaResolution"],t);const i=p(n,["codeExecutionResult"]);i!=null&&m(e,["codeExecutionResult"],i);const s=p(n,["executableCode"]);s!=null&&m(e,["executableCode"],s);const a=p(n,["fileData"]);a!=null&&m(e,["fileData"],dM(a));const l=p(n,["functionCall"]);l!=null&&m(e,["functionCall"],fM(l));const c=p(n,["functionResponse"]);c!=null&&m(e,["functionResponse"],c);const f=p(n,["inlineData"]);f!=null&&m(e,["inlineData"],Od(f));const h=p(n,["text"]);h!=null&&m(e,["text"],h);const y=p(n,["thought"]);y!=null&&m(e,["thought"],y);const E=p(n,["thoughtSignature"]);E!=null&&m(e,["thoughtSignature"],E);const T=p(n,["videoMetadata"]);return T!=null&&m(e,["videoMetadata"],T),e}function CM(n){const e={},t=p(n,["handle"]);if(t!=null&&m(e,["handle"],t),p(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function IM(n){const e={};if(p(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=p(n,["computerUse"]);t!=null&&m(e,["computerUse"],t);const i=p(n,["fileSearch"]);i!=null&&m(e,["fileSearch"],i);const s=p(n,["codeExecution"]);if(s!=null&&m(e,["codeExecution"],s),p(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=p(n,["functionDeclarations"]);if(a!=null){let y=a;Array.isArray(y)&&(y=y.map(E=>E)),m(e,["functionDeclarations"],y)}const l=p(n,["googleMaps"]);l!=null&&m(e,["googleMaps"],mM(l));const c=p(n,["googleSearch"]);c!=null&&m(e,["googleSearch"],gM(c));const f=p(n,["googleSearchRetrieval"]);f!=null&&m(e,["googleSearchRetrieval"],f);const h=p(n,["urlContext"]);return h!=null&&m(e,["urlContext"],h),e}function RM(n){const e={},t=p(n,["retrieval"]);t!=null&&m(e,["retrieval"],t);const i=p(n,["computerUse"]);if(i!=null&&m(e,["computerUse"],i),p(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=p(n,["codeExecution"]);s!=null&&m(e,["codeExecution"],s);const a=p(n,["enterpriseWebSearch"]);a!=null&&m(e,["enterpriseWebSearch"],a);const l=p(n,["functionDeclarations"]);if(l!=null){let E=l;Array.isArray(E)&&(E=E.map(T=>hM(T))),m(e,["functionDeclarations"],E)}const c=p(n,["googleMaps"]);c!=null&&m(e,["googleMaps"],c);const f=p(n,["googleSearch"]);f!=null&&m(e,["googleSearch"],f);const h=p(n,["googleSearchRetrieval"]);h!=null&&m(e,["googleSearchRetrieval"],h);const y=p(n,["urlContext"]);return y!=null&&m(e,["urlContext"],y),e}function NM(n){const e={},t=p(n,["promptTokenCount"]);t!=null&&m(e,["promptTokenCount"],t);const i=p(n,["cachedContentTokenCount"]);i!=null&&m(e,["cachedContentTokenCount"],i);const s=p(n,["candidatesTokenCount"]);s!=null&&m(e,["responseTokenCount"],s);const a=p(n,["toolUsePromptTokenCount"]);a!=null&&m(e,["toolUsePromptTokenCount"],a);const l=p(n,["thoughtsTokenCount"]);l!=null&&m(e,["thoughtsTokenCount"],l);const c=p(n,["totalTokenCount"]);c!=null&&m(e,["totalTokenCount"],c);const f=p(n,["promptTokensDetails"]);if(f!=null){let w=f;Array.isArray(w)&&(w=w.map(C=>C)),m(e,["promptTokensDetails"],w)}const h=p(n,["cacheTokensDetails"]);if(h!=null){let w=h;Array.isArray(w)&&(w=w.map(C=>C)),m(e,["cacheTokensDetails"],w)}const y=p(n,["candidatesTokensDetails"]);if(y!=null){let w=y;Array.isArray(w)&&(w=w.map(C=>C)),m(e,["responseTokensDetails"],w)}const E=p(n,["toolUsePromptTokensDetails"]);if(E!=null){let w=E;Array.isArray(w)&&(w=w.map(C=>C)),m(e,["toolUsePromptTokensDetails"],w)}const T=p(n,["trafficType"]);return T!=null&&m(e,["trafficType"],T),e}function MM(n){const e={},t=p(n,["type"]);return t!=null&&m(e,["voiceActivityType"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function kM(n,e){const t={},i=p(n,["data"]);if(i!=null&&m(t,["data"],i),p(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=p(n,["mimeType"]);return s!=null&&m(t,["mimeType"],s),t}function DM(n,e){const t={},i=p(n,["content"]);i!=null&&m(t,["content"],i);const s=p(n,["citationMetadata"]);s!=null&&m(t,["citationMetadata"],PM(s));const a=p(n,["tokenCount"]);a!=null&&m(t,["tokenCount"],a);const l=p(n,["finishReason"]);l!=null&&m(t,["finishReason"],l);const c=p(n,["avgLogprobs"]);c!=null&&m(t,["avgLogprobs"],c);const f=p(n,["groundingMetadata"]);f!=null&&m(t,["groundingMetadata"],f);const h=p(n,["index"]);h!=null&&m(t,["index"],h);const y=p(n,["logprobsResult"]);y!=null&&m(t,["logprobsResult"],y);const E=p(n,["safetyRatings"]);if(E!=null){let w=E;Array.isArray(w)&&(w=w.map(C=>C)),m(t,["safetyRatings"],w)}const T=p(n,["urlContextMetadata"]);return T!=null&&m(t,["urlContextMetadata"],T),t}function PM(n,e){const t={},i=p(n,["citationSources"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>a)),m(t,["citations"],s)}return t}function LM(n,e,t){const i={},s=p(e,["model"]);s!=null&&m(i,["_url","model"],gt(n,s));const a=p(e,["contents"]);if(a!=null){let l=mi(a);Array.isArray(l)&&(l=l.map(c=>c)),m(i,["contents"],l)}return i}function UM(n,e){const t={},i=p(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const s=p(n,["tokensInfo"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),m(t,["tokensInfo"],a)}return t}function VM(n,e){const t={},i=p(n,["values"]);i!=null&&m(t,["values"],i);const s=p(n,["statistics"]);return s!=null&&m(t,["statistics"],OM(s)),t}function OM(n,e){const t={},i=p(n,["truncated"]);i!=null&&m(t,["truncated"],i);const s=p(n,["token_count"]);return s!=null&&m(t,["tokenCount"],s),t}function xf(n,e){const t={},i=p(n,["parts"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>Kk(l))),m(t,["parts"],a)}const s=p(n,["role"]);return s!=null&&m(t,["role"],s),t}function zM(n,e){const t={},i=p(n,["controlType"]);i!=null&&m(t,["controlType"],i);const s=p(n,["enableControlImageComputation"]);return s!=null&&m(t,["computeControl"],s),t}function FM(n,e){const t={};if(p(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(p(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(p(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return t}function BM(n,e,t){const i={},s=p(n,["systemInstruction"]);e!==void 0&&s!=null&&m(e,["systemInstruction"],xn(s));const a=p(n,["tools"]);if(e!==void 0&&a!=null){let c=a;Array.isArray(c)&&(c=c.map(f=>tS(f))),m(e,["tools"],c)}const l=p(n,["generationConfig"]);return e!==void 0&&l!=null&&m(e,["generationConfig"],kk(l)),i}function GM(n,e,t){const i={},s=p(e,["model"]);s!=null&&m(i,["_url","model"],gt(n,s));const a=p(e,["contents"]);if(a!=null){let c=mi(a);Array.isArray(c)&&(c=c.map(f=>xf(f))),m(i,["contents"],c)}const l=p(e,["config"]);return l!=null&&FM(l),i}function HM(n,e,t){const i={},s=p(e,["model"]);s!=null&&m(i,["_url","model"],gt(n,s));const a=p(e,["contents"]);if(a!=null){let c=mi(a);Array.isArray(c)&&(c=c.map(f=>f)),m(i,["contents"],c)}const l=p(e,["config"]);return l!=null&&BM(l,i),i}function qM(n,e){const t={},i=p(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const s=p(n,["totalTokens"]);s!=null&&m(t,["totalTokens"],s);const a=p(n,["cachedContentTokenCount"]);return a!=null&&m(t,["cachedContentTokenCount"],a),t}function YM(n,e){const t={},i=p(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const s=p(n,["totalTokens"]);return s!=null&&m(t,["totalTokens"],s),t}function $M(n,e,t){const i={},s=p(e,["model"]);return s!=null&&m(i,["_url","name"],gt(n,s)),i}function KM(n,e,t){const i={},s=p(e,["model"]);return s!=null&&m(i,["_url","name"],gt(n,s)),i}function JM(n,e){const t={},i=p(n,["sdkHttpResponse"]);return i!=null&&m(t,["sdkHttpResponse"],i),t}function jM(n,e){const t={},i=p(n,["sdkHttpResponse"]);return i!=null&&m(t,["sdkHttpResponse"],i),t}function WM(n,e,t){const i={},s=p(n,["outputGcsUri"]);e!==void 0&&s!=null&&m(e,["parameters","storageUri"],s);const a=p(n,["negativePrompt"]);e!==void 0&&a!=null&&m(e,["parameters","negativePrompt"],a);const l=p(n,["numberOfImages"]);e!==void 0&&l!=null&&m(e,["parameters","sampleCount"],l);const c=p(n,["aspectRatio"]);e!==void 0&&c!=null&&m(e,["parameters","aspectRatio"],c);const f=p(n,["guidanceScale"]);e!==void 0&&f!=null&&m(e,["parameters","guidanceScale"],f);const h=p(n,["seed"]);e!==void 0&&h!=null&&m(e,["parameters","seed"],h);const y=p(n,["safetyFilterLevel"]);e!==void 0&&y!=null&&m(e,["parameters","safetySetting"],y);const E=p(n,["personGeneration"]);e!==void 0&&E!=null&&m(e,["parameters","personGeneration"],E);const T=p(n,["includeSafetyAttributes"]);e!==void 0&&T!=null&&m(e,["parameters","includeSafetyAttributes"],T);const w=p(n,["includeRaiReason"]);e!==void 0&&w!=null&&m(e,["parameters","includeRaiReason"],w);const C=p(n,["language"]);e!==void 0&&C!=null&&m(e,["parameters","language"],C);const b=p(n,["outputMimeType"]);e!==void 0&&b!=null&&m(e,["parameters","outputOptions","mimeType"],b);const x=p(n,["outputCompressionQuality"]);e!==void 0&&x!=null&&m(e,["parameters","outputOptions","compressionQuality"],x);const N=p(n,["addWatermark"]);e!==void 0&&N!=null&&m(e,["parameters","addWatermark"],N);const z=p(n,["labels"]);e!==void 0&&z!=null&&m(e,["labels"],z);const B=p(n,["editMode"]);e!==void 0&&B!=null&&m(e,["parameters","editMode"],B);const Y=p(n,["baseSteps"]);return e!==void 0&&Y!=null&&m(e,["parameters","editConfig","baseSteps"],Y),i}function QM(n,e,t){const i={},s=p(e,["model"]);s!=null&&m(i,["_url","model"],gt(n,s));const a=p(e,["prompt"]);a!=null&&m(i,["instances[0]","prompt"],a);const l=p(e,["referenceImages"]);if(l!=null){let f=l;Array.isArray(f)&&(f=f.map(h=>Zk(h))),m(i,["instances[0]","referenceImages"],f)}const c=p(e,["config"]);return c!=null&&WM(c,i),i}function XM(n,e){const t={},i=p(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const s=p(n,["predictions"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>Cf(l))),m(t,["generatedImages"],a)}return t}function ZM(n,e,t){const i={},s=p(n,["taskType"]);e!==void 0&&s!=null&&m(e,["requests[]","taskType"],s);const a=p(n,["title"]);e!==void 0&&a!=null&&m(e,["requests[]","title"],a);const l=p(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&m(e,["requests[]","outputDimensionality"],l),p(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(p(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return i}function ek(n,e,t){const i={},s=p(n,["taskType"]);e!==void 0&&s!=null&&m(e,["instances[]","task_type"],s);const a=p(n,["title"]);e!==void 0&&a!=null&&m(e,["instances[]","title"],a);const l=p(n,["outputDimensionality"]);e!==void 0&&l!=null&&m(e,["parameters","outputDimensionality"],l);const c=p(n,["mimeType"]);e!==void 0&&c!=null&&m(e,["instances[]","mimeType"],c);const f=p(n,["autoTruncate"]);return e!==void 0&&f!=null&&m(e,["parameters","autoTruncate"],f),i}function tk(n,e,t){const i={},s=p(e,["model"]);s!=null&&m(i,["_url","model"],gt(n,s));const a=p(e,["contents"]);if(a!=null){let f=pg(n,a);Array.isArray(f)&&(f=f.map(h=>h)),m(i,["requests[]","content"],f)}const l=p(e,["config"]);l!=null&&ZM(l,i);const c=p(e,["model"]);return c!==void 0&&m(i,["requests[]","model"],gt(n,c)),i}function nk(n,e,t){const i={},s=p(e,["model"]);s!=null&&m(i,["_url","model"],gt(n,s));const a=p(e,["contents"]);if(a!=null){let c=pg(n,a);Array.isArray(c)&&(c=c.map(f=>f)),m(i,["instances[]","content"],c)}const l=p(e,["config"]);return l!=null&&ek(l,i),i}function ik(n,e){const t={},i=p(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const s=p(n,["embeddings"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>c)),m(t,["embeddings"],l)}const a=p(n,["metadata"]);return a!=null&&m(t,["metadata"],a),t}function rk(n,e){const t={},i=p(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const s=p(n,["predictions[]","embeddings"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>VM(c))),m(t,["embeddings"],l)}const a=p(n,["metadata"]);return a!=null&&m(t,["metadata"],a),t}function sk(n,e){const t={},i=p(n,["endpoint"]);i!=null&&m(t,["name"],i);const s=p(n,["deployedModelId"]);return s!=null&&m(t,["deployedModelId"],s),t}function ok(n,e){const t={};if(p(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=p(n,["fileUri"]);i!=null&&m(t,["fileUri"],i);const s=p(n,["mimeType"]);return s!=null&&m(t,["mimeType"],s),t}function ak(n,e){const t={},i=p(n,["id"]);i!=null&&m(t,["id"],i);const s=p(n,["args"]);s!=null&&m(t,["args"],s);const a=p(n,["name"]);if(a!=null&&m(t,["name"],a),p(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(p(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function lk(n,e){const t={},i=p(n,["allowedFunctionNames"]);i!=null&&m(t,["allowedFunctionNames"],i);const s=p(n,["mode"]);if(s!=null&&m(t,["mode"],s),p(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function uk(n,e){const t={},i=p(n,["description"]);i!=null&&m(t,["description"],i);const s=p(n,["name"]);s!=null&&m(t,["name"],s);const a=p(n,["parameters"]);a!=null&&m(t,["parameters"],a);const l=p(n,["parametersJsonSchema"]);l!=null&&m(t,["parametersJsonSchema"],l);const c=p(n,["response"]);c!=null&&m(t,["response"],c);const f=p(n,["responseJsonSchema"]);if(f!=null&&m(t,["responseJsonSchema"],f),p(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return t}function ck(n,e,t,i){const s={},a=p(e,["systemInstruction"]);t!==void 0&&a!=null&&m(t,["systemInstruction"],xf(xn(a)));const l=p(e,["temperature"]);l!=null&&m(s,["temperature"],l);const c=p(e,["topP"]);c!=null&&m(s,["topP"],c);const f=p(e,["topK"]);f!=null&&m(s,["topK"],f);const h=p(e,["candidateCount"]);h!=null&&m(s,["candidateCount"],h);const y=p(e,["maxOutputTokens"]);y!=null&&m(s,["maxOutputTokens"],y);const E=p(e,["stopSequences"]);E!=null&&m(s,["stopSequences"],E);const T=p(e,["responseLogprobs"]);T!=null&&m(s,["responseLogprobs"],T);const w=p(e,["logprobs"]);w!=null&&m(s,["logprobs"],w);const C=p(e,["presencePenalty"]);C!=null&&m(s,["presencePenalty"],C);const b=p(e,["frequencyPenalty"]);b!=null&&m(s,["frequencyPenalty"],b);const x=p(e,["seed"]);x!=null&&m(s,["seed"],x);const N=p(e,["responseMimeType"]);N!=null&&m(s,["responseMimeType"],N);const z=p(e,["responseSchema"]);z!=null&&m(s,["responseSchema"],mg(z));const B=p(e,["responseJsonSchema"]);if(B!=null&&m(s,["responseJsonSchema"],B),p(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(p(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const Y=p(e,["safetySettings"]);if(t!==void 0&&Y!=null){let D=Y;Array.isArray(D)&&(D=D.map(he=>eD(he))),m(t,["safetySettings"],D)}const J=p(e,["tools"]);if(t!==void 0&&J!=null){let D=tl(J);Array.isArray(D)&&(D=D.map(he=>aD(el(he)))),m(t,["tools"],D)}const $=p(e,["toolConfig"]);if(t!==void 0&&$!=null&&m(t,["toolConfig"],oD($)),p(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const L=p(e,["cachedContent"]);t!==void 0&&L!=null&&m(t,["cachedContent"],Kr(n,L));const V=p(e,["responseModalities"]);V!=null&&m(s,["responseModalities"],V);const k=p(e,["mediaResolution"]);k!=null&&m(s,["mediaResolution"],k);const H=p(e,["speechConfig"]);if(H!=null&&m(s,["speechConfig"],gg(H)),p(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const K=p(e,["thinkingConfig"]);K!=null&&m(s,["thinkingConfig"],K);const U=p(e,["imageConfig"]);U!=null&&m(s,["imageConfig"],Vk(U));const O=p(e,["enableEnhancedCivicAnswers"]);if(O!=null&&m(s,["enableEnhancedCivicAnswers"],O),p(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return s}function dk(n,e,t,i){const s={},a=p(e,["systemInstruction"]);t!==void 0&&a!=null&&m(t,["systemInstruction"],xn(a));const l=p(e,["temperature"]);l!=null&&m(s,["temperature"],l);const c=p(e,["topP"]);c!=null&&m(s,["topP"],c);const f=p(e,["topK"]);f!=null&&m(s,["topK"],f);const h=p(e,["candidateCount"]);h!=null&&m(s,["candidateCount"],h);const y=p(e,["maxOutputTokens"]);y!=null&&m(s,["maxOutputTokens"],y);const E=p(e,["stopSequences"]);E!=null&&m(s,["stopSequences"],E);const T=p(e,["responseLogprobs"]);T!=null&&m(s,["responseLogprobs"],T);const w=p(e,["logprobs"]);w!=null&&m(s,["logprobs"],w);const C=p(e,["presencePenalty"]);C!=null&&m(s,["presencePenalty"],C);const b=p(e,["frequencyPenalty"]);b!=null&&m(s,["frequencyPenalty"],b);const x=p(e,["seed"]);x!=null&&m(s,["seed"],x);const N=p(e,["responseMimeType"]);N!=null&&m(s,["responseMimeType"],N);const z=p(e,["responseSchema"]);z!=null&&m(s,["responseSchema"],mg(z));const B=p(e,["responseJsonSchema"]);B!=null&&m(s,["responseJsonSchema"],B);const Y=p(e,["routingConfig"]);Y!=null&&m(s,["routingConfig"],Y);const J=p(e,["modelSelectionConfig"]);J!=null&&m(s,["modelConfig"],J);const $=p(e,["safetySettings"]);if(t!==void 0&&$!=null){let be=$;Array.isArray(be)&&(be=be.map(ne=>ne)),m(t,["safetySettings"],be)}const L=p(e,["tools"]);if(t!==void 0&&L!=null){let be=tl(L);Array.isArray(be)&&(be=be.map(ne=>tS(el(ne)))),m(t,["tools"],be)}const V=p(e,["toolConfig"]);t!==void 0&&V!=null&&m(t,["toolConfig"],V);const k=p(e,["labels"]);t!==void 0&&k!=null&&m(t,["labels"],k);const H=p(e,["cachedContent"]);t!==void 0&&H!=null&&m(t,["cachedContent"],Kr(n,H));const K=p(e,["responseModalities"]);K!=null&&m(s,["responseModalities"],K);const U=p(e,["mediaResolution"]);U!=null&&m(s,["mediaResolution"],U);const O=p(e,["speechConfig"]);O!=null&&m(s,["speechConfig"],gg(O));const D=p(e,["audioTimestamp"]);D!=null&&m(s,["audioTimestamp"],D);const he=p(e,["thinkingConfig"]);he!=null&&m(s,["thinkingConfig"],he);const ie=p(e,["imageConfig"]);if(ie!=null&&m(s,["imageConfig"],Ok(ie)),p(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");const re=p(e,["modelArmorConfig"]);return t!==void 0&&re!=null&&m(t,["modelArmorConfig"],re),s}function _T(n,e,t){const i={},s=p(e,["model"]);s!=null&&m(i,["_url","model"],gt(n,s));const a=p(e,["contents"]);if(a!=null){let c=mi(a);Array.isArray(c)&&(c=c.map(f=>xf(f))),m(i,["contents"],c)}const l=p(e,["config"]);return l!=null&&m(i,["generationConfig"],ck(n,l,i)),i}function ET(n,e,t){const i={},s=p(e,["model"]);s!=null&&m(i,["_url","model"],gt(n,s));const a=p(e,["contents"]);if(a!=null){let c=mi(a);Array.isArray(c)&&(c=c.map(f=>f)),m(i,["contents"],c)}const l=p(e,["config"]);return l!=null&&m(i,["generationConfig"],dk(n,l,i)),i}function TT(n,e){const t={},i=p(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const s=p(n,["candidates"]);if(s!=null){let h=s;Array.isArray(h)&&(h=h.map(y=>DM(y))),m(t,["candidates"],h)}const a=p(n,["modelVersion"]);a!=null&&m(t,["modelVersion"],a);const l=p(n,["promptFeedback"]);l!=null&&m(t,["promptFeedback"],l);const c=p(n,["responseId"]);c!=null&&m(t,["responseId"],c);const f=p(n,["usageMetadata"]);return f!=null&&m(t,["usageMetadata"],f),t}function wT(n,e){const t={},i=p(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const s=p(n,["candidates"]);if(s!=null){let y=s;Array.isArray(y)&&(y=y.map(E=>E)),m(t,["candidates"],y)}const a=p(n,["createTime"]);a!=null&&m(t,["createTime"],a);const l=p(n,["modelVersion"]);l!=null&&m(t,["modelVersion"],l);const c=p(n,["promptFeedback"]);c!=null&&m(t,["promptFeedback"],c);const f=p(n,["responseId"]);f!=null&&m(t,["responseId"],f);const h=p(n,["usageMetadata"]);return h!=null&&m(t,["usageMetadata"],h),t}function fk(n,e,t){const i={};if(p(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(p(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const s=p(n,["numberOfImages"]);e!==void 0&&s!=null&&m(e,["parameters","sampleCount"],s);const a=p(n,["aspectRatio"]);e!==void 0&&a!=null&&m(e,["parameters","aspectRatio"],a);const l=p(n,["guidanceScale"]);if(e!==void 0&&l!=null&&m(e,["parameters","guidanceScale"],l),p(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const c=p(n,["safetyFilterLevel"]);e!==void 0&&c!=null&&m(e,["parameters","safetySetting"],c);const f=p(n,["personGeneration"]);e!==void 0&&f!=null&&m(e,["parameters","personGeneration"],f);const h=p(n,["includeSafetyAttributes"]);e!==void 0&&h!=null&&m(e,["parameters","includeSafetyAttributes"],h);const y=p(n,["includeRaiReason"]);e!==void 0&&y!=null&&m(e,["parameters","includeRaiReason"],y);const E=p(n,["language"]);e!==void 0&&E!=null&&m(e,["parameters","language"],E);const T=p(n,["outputMimeType"]);e!==void 0&&T!=null&&m(e,["parameters","outputOptions","mimeType"],T);const w=p(n,["outputCompressionQuality"]);if(e!==void 0&&w!=null&&m(e,["parameters","outputOptions","compressionQuality"],w),p(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(p(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const C=p(n,["imageSize"]);if(e!==void 0&&C!=null&&m(e,["parameters","sampleImageSize"],C),p(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return i}function hk(n,e,t){const i={},s=p(n,["outputGcsUri"]);e!==void 0&&s!=null&&m(e,["parameters","storageUri"],s);const a=p(n,["negativePrompt"]);e!==void 0&&a!=null&&m(e,["parameters","negativePrompt"],a);const l=p(n,["numberOfImages"]);e!==void 0&&l!=null&&m(e,["parameters","sampleCount"],l);const c=p(n,["aspectRatio"]);e!==void 0&&c!=null&&m(e,["parameters","aspectRatio"],c);const f=p(n,["guidanceScale"]);e!==void 0&&f!=null&&m(e,["parameters","guidanceScale"],f);const h=p(n,["seed"]);e!==void 0&&h!=null&&m(e,["parameters","seed"],h);const y=p(n,["safetyFilterLevel"]);e!==void 0&&y!=null&&m(e,["parameters","safetySetting"],y);const E=p(n,["personGeneration"]);e!==void 0&&E!=null&&m(e,["parameters","personGeneration"],E);const T=p(n,["includeSafetyAttributes"]);e!==void 0&&T!=null&&m(e,["parameters","includeSafetyAttributes"],T);const w=p(n,["includeRaiReason"]);e!==void 0&&w!=null&&m(e,["parameters","includeRaiReason"],w);const C=p(n,["language"]);e!==void 0&&C!=null&&m(e,["parameters","language"],C);const b=p(n,["outputMimeType"]);e!==void 0&&b!=null&&m(e,["parameters","outputOptions","mimeType"],b);const x=p(n,["outputCompressionQuality"]);e!==void 0&&x!=null&&m(e,["parameters","outputOptions","compressionQuality"],x);const N=p(n,["addWatermark"]);e!==void 0&&N!=null&&m(e,["parameters","addWatermark"],N);const z=p(n,["labels"]);e!==void 0&&z!=null&&m(e,["labels"],z);const B=p(n,["imageSize"]);e!==void 0&&B!=null&&m(e,["parameters","sampleImageSize"],B);const Y=p(n,["enhancePrompt"]);return e!==void 0&&Y!=null&&m(e,["parameters","enhancePrompt"],Y),i}function pk(n,e,t){const i={},s=p(e,["model"]);s!=null&&m(i,["_url","model"],gt(n,s));const a=p(e,["prompt"]);a!=null&&m(i,["instances[0]","prompt"],a);const l=p(e,["config"]);return l!=null&&fk(l,i),i}function mk(n,e,t){const i={},s=p(e,["model"]);s!=null&&m(i,["_url","model"],gt(n,s));const a=p(e,["prompt"]);a!=null&&m(i,["instances[0]","prompt"],a);const l=p(e,["config"]);return l!=null&&hk(l,i),i}function gk(n,e){const t={},i=p(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const s=p(n,["predictions"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>Ik(c))),m(t,["generatedImages"],l)}const a=p(n,["positivePromptSafetyAttributes"]);return a!=null&&m(t,["positivePromptSafetyAttributes"],Z1(a)),t}function yk(n,e){const t={},i=p(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const s=p(n,["predictions"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>Cf(c))),m(t,["generatedImages"],l)}const a=p(n,["positivePromptSafetyAttributes"]);return a!=null&&m(t,["positivePromptSafetyAttributes"],eS(a)),t}function vk(n,e,t){const i={},s=p(n,["numberOfVideos"]);if(e!==void 0&&s!=null&&m(e,["parameters","sampleCount"],s),p(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(p(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const a=p(n,["durationSeconds"]);if(e!==void 0&&a!=null&&m(e,["parameters","durationSeconds"],a),p(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=p(n,["aspectRatio"]);e!==void 0&&l!=null&&m(e,["parameters","aspectRatio"],l);const c=p(n,["resolution"]);e!==void 0&&c!=null&&m(e,["parameters","resolution"],c);const f=p(n,["personGeneration"]);if(e!==void 0&&f!=null&&m(e,["parameters","personGeneration"],f),p(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const h=p(n,["negativePrompt"]);e!==void 0&&h!=null&&m(e,["parameters","negativePrompt"],h);const y=p(n,["enhancePrompt"]);if(e!==void 0&&y!=null&&m(e,["parameters","enhancePrompt"],y),p(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const E=p(n,["lastFrame"]);e!==void 0&&E!=null&&m(e,["instances[0]","lastFrame"],If(E));const T=p(n,["referenceImages"]);if(e!==void 0&&T!=null){let w=T;Array.isArray(w)&&(w=w.map(C=>ED(C))),m(e,["instances[0]","referenceImages"],w)}if(p(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(p(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return i}function _k(n,e,t){const i={},s=p(n,["numberOfVideos"]);e!==void 0&&s!=null&&m(e,["parameters","sampleCount"],s);const a=p(n,["outputGcsUri"]);e!==void 0&&a!=null&&m(e,["parameters","storageUri"],a);const l=p(n,["fps"]);e!==void 0&&l!=null&&m(e,["parameters","fps"],l);const c=p(n,["durationSeconds"]);e!==void 0&&c!=null&&m(e,["parameters","durationSeconds"],c);const f=p(n,["seed"]);e!==void 0&&f!=null&&m(e,["parameters","seed"],f);const h=p(n,["aspectRatio"]);e!==void 0&&h!=null&&m(e,["parameters","aspectRatio"],h);const y=p(n,["resolution"]);e!==void 0&&y!=null&&m(e,["parameters","resolution"],y);const E=p(n,["personGeneration"]);e!==void 0&&E!=null&&m(e,["parameters","personGeneration"],E);const T=p(n,["pubsubTopic"]);e!==void 0&&T!=null&&m(e,["parameters","pubsubTopic"],T);const w=p(n,["negativePrompt"]);e!==void 0&&w!=null&&m(e,["parameters","negativePrompt"],w);const C=p(n,["enhancePrompt"]);e!==void 0&&C!=null&&m(e,["parameters","enhancePrompt"],C);const b=p(n,["generateAudio"]);e!==void 0&&b!=null&&m(e,["parameters","generateAudio"],b);const x=p(n,["lastFrame"]);e!==void 0&&x!=null&&m(e,["instances[0]","lastFrame"],Vi(x));const N=p(n,["referenceImages"]);if(e!==void 0&&N!=null){let Y=N;Array.isArray(Y)&&(Y=Y.map(J=>TD(J))),m(e,["instances[0]","referenceImages"],Y)}const z=p(n,["mask"]);e!==void 0&&z!=null&&m(e,["instances[0]","mask"],_D(z));const B=p(n,["compressionQuality"]);return e!==void 0&&B!=null&&m(e,["parameters","compressionQuality"],B),i}function Ek(n,e){const t={},i=p(n,["name"]);i!=null&&m(t,["name"],i);const s=p(n,["metadata"]);s!=null&&m(t,["metadata"],s);const a=p(n,["done"]);a!=null&&m(t,["done"],a);const l=p(n,["error"]);l!=null&&m(t,["error"],l);const c=p(n,["response","generateVideoResponse"]);return c!=null&&m(t,["response"],bk(c)),t}function Tk(n,e){const t={},i=p(n,["name"]);i!=null&&m(t,["name"],i);const s=p(n,["metadata"]);s!=null&&m(t,["metadata"],s);const a=p(n,["done"]);a!=null&&m(t,["done"],a);const l=p(n,["error"]);l!=null&&m(t,["error"],l);const c=p(n,["response"]);return c!=null&&m(t,["response"],Ak(c)),t}function wk(n,e,t){const i={},s=p(e,["model"]);s!=null&&m(i,["_url","model"],gt(n,s));const a=p(e,["prompt"]);a!=null&&m(i,["instances[0]","prompt"],a);const l=p(e,["image"]);l!=null&&m(i,["instances[0]","image"],If(l));const c=p(e,["video"]);c!=null&&m(i,["instances[0]","video"],nS(c));const f=p(e,["source"]);f!=null&&xk(f,i);const h=p(e,["config"]);return h!=null&&vk(h,i),i}function Sk(n,e,t){const i={},s=p(e,["model"]);s!=null&&m(i,["_url","model"],gt(n,s));const a=p(e,["prompt"]);a!=null&&m(i,["instances[0]","prompt"],a);const l=p(e,["image"]);l!=null&&m(i,["instances[0]","image"],Vi(l));const c=p(e,["video"]);c!=null&&m(i,["instances[0]","video"],iS(c));const f=p(e,["source"]);f!=null&&Ck(f,i);const h=p(e,["config"]);return h!=null&&_k(h,i),i}function bk(n,e){const t={},i=p(n,["generatedSamples"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>Nk(c))),m(t,["generatedVideos"],l)}const s=p(n,["raiMediaFilteredCount"]);s!=null&&m(t,["raiMediaFilteredCount"],s);const a=p(n,["raiMediaFilteredReasons"]);return a!=null&&m(t,["raiMediaFilteredReasons"],a),t}function Ak(n,e){const t={},i=p(n,["videos"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>Mk(c))),m(t,["generatedVideos"],l)}const s=p(n,["raiMediaFilteredCount"]);s!=null&&m(t,["raiMediaFilteredCount"],s);const a=p(n,["raiMediaFilteredReasons"]);return a!=null&&m(t,["raiMediaFilteredReasons"],a),t}function xk(n,e,t){const i={},s=p(n,["prompt"]);e!==void 0&&s!=null&&m(e,["instances[0]","prompt"],s);const a=p(n,["image"]);e!==void 0&&a!=null&&m(e,["instances[0]","image"],If(a));const l=p(n,["video"]);return e!==void 0&&l!=null&&m(e,["instances[0]","video"],nS(l)),i}function Ck(n,e,t){const i={},s=p(n,["prompt"]);e!==void 0&&s!=null&&m(e,["instances[0]","prompt"],s);const a=p(n,["image"]);e!==void 0&&a!=null&&m(e,["instances[0]","image"],Vi(a));const l=p(n,["video"]);return e!==void 0&&l!=null&&m(e,["instances[0]","video"],iS(l)),i}function Ik(n,e){const t={},i=p(n,["_self"]);i!=null&&m(t,["image"],zk(i));const s=p(n,["raiFilteredReason"]);s!=null&&m(t,["raiFilteredReason"],s);const a=p(n,["_self"]);return a!=null&&m(t,["safetyAttributes"],Z1(a)),t}function Cf(n,e){const t={},i=p(n,["_self"]);i!=null&&m(t,["image"],X1(i));const s=p(n,["raiFilteredReason"]);s!=null&&m(t,["raiFilteredReason"],s);const a=p(n,["_self"]);a!=null&&m(t,["safetyAttributes"],eS(a));const l=p(n,["prompt"]);return l!=null&&m(t,["enhancedPrompt"],l),t}function Rk(n,e){const t={},i=p(n,["_self"]);i!=null&&m(t,["mask"],X1(i));const s=p(n,["labels"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),m(t,["labels"],a)}return t}function Nk(n,e){const t={},i=p(n,["video"]);return i!=null&&m(t,["video"],yD(i)),t}function Mk(n,e){const t={},i=p(n,["_self"]);return i!=null&&m(t,["video"],vD(i)),t}function kk(n,e){const t={},i=p(n,["modelSelectionConfig"]);i!=null&&m(t,["modelConfig"],i);const s=p(n,["responseJsonSchema"]);s!=null&&m(t,["responseJsonSchema"],s);const a=p(n,["audioTimestamp"]);a!=null&&m(t,["audioTimestamp"],a);const l=p(n,["candidateCount"]);l!=null&&m(t,["candidateCount"],l);const c=p(n,["enableAffectiveDialog"]);c!=null&&m(t,["enableAffectiveDialog"],c);const f=p(n,["frequencyPenalty"]);f!=null&&m(t,["frequencyPenalty"],f);const h=p(n,["logprobs"]);h!=null&&m(t,["logprobs"],h);const y=p(n,["maxOutputTokens"]);y!=null&&m(t,["maxOutputTokens"],y);const E=p(n,["mediaResolution"]);E!=null&&m(t,["mediaResolution"],E);const T=p(n,["presencePenalty"]);T!=null&&m(t,["presencePenalty"],T);const w=p(n,["responseLogprobs"]);w!=null&&m(t,["responseLogprobs"],w);const C=p(n,["responseMimeType"]);C!=null&&m(t,["responseMimeType"],C);const b=p(n,["responseModalities"]);b!=null&&m(t,["responseModalities"],b);const x=p(n,["responseSchema"]);x!=null&&m(t,["responseSchema"],x);const N=p(n,["routingConfig"]);N!=null&&m(t,["routingConfig"],N);const z=p(n,["seed"]);z!=null&&m(t,["seed"],z);const B=p(n,["speechConfig"]);B!=null&&m(t,["speechConfig"],B);const Y=p(n,["stopSequences"]);Y!=null&&m(t,["stopSequences"],Y);const J=p(n,["temperature"]);J!=null&&m(t,["temperature"],J);const $=p(n,["thinkingConfig"]);$!=null&&m(t,["thinkingConfig"],$);const L=p(n,["topK"]);L!=null&&m(t,["topK"],L);const V=p(n,["topP"]);if(V!=null&&m(t,["topP"],V),p(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function Dk(n,e,t){const i={},s=p(e,["model"]);return s!=null&&m(i,["_url","name"],gt(n,s)),i}function Pk(n,e,t){const i={},s=p(e,["model"]);return s!=null&&m(i,["_url","name"],gt(n,s)),i}function Lk(n,e){const t={};if(p(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=p(n,["enableWidget"]);return i!=null&&m(t,["enableWidget"],i),t}function Uk(n,e){const t={};if(p(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=p(n,["timeRangeFilter"]);return i!=null&&m(t,["timeRangeFilter"],i),t}function Vk(n,e){const t={},i=p(n,["aspectRatio"]);i!=null&&m(t,["aspectRatio"],i);const s=p(n,["imageSize"]);if(s!=null&&m(t,["imageSize"],s),p(n,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(p(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(p(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function Ok(n,e){const t={},i=p(n,["aspectRatio"]);i!=null&&m(t,["aspectRatio"],i);const s=p(n,["imageSize"]);s!=null&&m(t,["imageSize"],s);const a=p(n,["personGeneration"]);a!=null&&m(t,["personGeneration"],a);const l=p(n,["outputMimeType"]);l!=null&&m(t,["imageOutputOptions","mimeType"],l);const c=p(n,["outputCompressionQuality"]);return c!=null&&m(t,["imageOutputOptions","compressionQuality"],c),t}function zk(n,e){const t={},i=p(n,["bytesBase64Encoded"]);i!=null&&m(t,["imageBytes"],$s(i));const s=p(n,["mimeType"]);return s!=null&&m(t,["mimeType"],s),t}function X1(n,e){const t={},i=p(n,["gcsUri"]);i!=null&&m(t,["gcsUri"],i);const s=p(n,["bytesBase64Encoded"]);s!=null&&m(t,["imageBytes"],$s(s));const a=p(n,["mimeType"]);return a!=null&&m(t,["mimeType"],a),t}function If(n,e){const t={};if(p(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const i=p(n,["imageBytes"]);i!=null&&m(t,["bytesBase64Encoded"],$s(i));const s=p(n,["mimeType"]);return s!=null&&m(t,["mimeType"],s),t}function Vi(n,e){const t={},i=p(n,["gcsUri"]);i!=null&&m(t,["gcsUri"],i);const s=p(n,["imageBytes"]);s!=null&&m(t,["bytesBase64Encoded"],$s(s));const a=p(n,["mimeType"]);return a!=null&&m(t,["mimeType"],a),t}function Fk(n,e,t,i){const s={},a=p(e,["pageSize"]);t!==void 0&&a!=null&&m(t,["_query","pageSize"],a);const l=p(e,["pageToken"]);t!==void 0&&l!=null&&m(t,["_query","pageToken"],l);const c=p(e,["filter"]);t!==void 0&&c!=null&&m(t,["_query","filter"],c);const f=p(e,["queryBase"]);return t!==void 0&&f!=null&&m(t,["_url","models_url"],Y1(n,f)),s}function Bk(n,e,t,i){const s={},a=p(e,["pageSize"]);t!==void 0&&a!=null&&m(t,["_query","pageSize"],a);const l=p(e,["pageToken"]);t!==void 0&&l!=null&&m(t,["_query","pageToken"],l);const c=p(e,["filter"]);t!==void 0&&c!=null&&m(t,["_query","filter"],c);const f=p(e,["queryBase"]);return t!==void 0&&f!=null&&m(t,["_url","models_url"],Y1(n,f)),s}function Gk(n,e,t){const i={},s=p(e,["config"]);return s!=null&&Fk(n,s,i),i}function Hk(n,e,t){const i={},s=p(e,["config"]);return s!=null&&Bk(n,s,i),i}function qk(n,e){const t={},i=p(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const s=p(n,["nextPageToken"]);s!=null&&m(t,["nextPageToken"],s);const a=p(n,["_self"]);if(a!=null){let l=$1(a);Array.isArray(l)&&(l=l.map(c=>Cm(c))),m(t,["models"],l)}return t}function Yk(n,e){const t={},i=p(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const s=p(n,["nextPageToken"]);s!=null&&m(t,["nextPageToken"],s);const a=p(n,["_self"]);if(a!=null){let l=$1(a);Array.isArray(l)&&(l=l.map(c=>Im(c))),m(t,["models"],l)}return t}function $k(n,e){const t={},i=p(n,["maskMode"]);i!=null&&m(t,["maskMode"],i);const s=p(n,["segmentationClasses"]);s!=null&&m(t,["maskClasses"],s);const a=p(n,["maskDilation"]);return a!=null&&m(t,["dilation"],a),t}function Cm(n,e){const t={},i=p(n,["name"]);i!=null&&m(t,["name"],i);const s=p(n,["displayName"]);s!=null&&m(t,["displayName"],s);const a=p(n,["description"]);a!=null&&m(t,["description"],a);const l=p(n,["version"]);l!=null&&m(t,["version"],l);const c=p(n,["_self"]);c!=null&&m(t,["tunedModelInfo"],lD(c));const f=p(n,["inputTokenLimit"]);f!=null&&m(t,["inputTokenLimit"],f);const h=p(n,["outputTokenLimit"]);h!=null&&m(t,["outputTokenLimit"],h);const y=p(n,["supportedGenerationMethods"]);y!=null&&m(t,["supportedActions"],y);const E=p(n,["temperature"]);E!=null&&m(t,["temperature"],E);const T=p(n,["maxTemperature"]);T!=null&&m(t,["maxTemperature"],T);const w=p(n,["topP"]);w!=null&&m(t,["topP"],w);const C=p(n,["topK"]);C!=null&&m(t,["topK"],C);const b=p(n,["thinking"]);return b!=null&&m(t,["thinking"],b),t}function Im(n,e){const t={},i=p(n,["name"]);i!=null&&m(t,["name"],i);const s=p(n,["displayName"]);s!=null&&m(t,["displayName"],s);const a=p(n,["description"]);a!=null&&m(t,["description"],a);const l=p(n,["versionId"]);l!=null&&m(t,["version"],l);const c=p(n,["deployedModels"]);if(c!=null){let T=c;Array.isArray(T)&&(T=T.map(w=>sk(w))),m(t,["endpoints"],T)}const f=p(n,["labels"]);f!=null&&m(t,["labels"],f);const h=p(n,["_self"]);h!=null&&m(t,["tunedModelInfo"],uD(h));const y=p(n,["defaultCheckpointId"]);y!=null&&m(t,["defaultCheckpointId"],y);const E=p(n,["checkpoints"]);if(E!=null){let T=E;Array.isArray(T)&&(T=T.map(w=>w)),m(t,["checkpoints"],T)}return t}function Kk(n,e){const t={},i=p(n,["mediaResolution"]);i!=null&&m(t,["mediaResolution"],i);const s=p(n,["codeExecutionResult"]);s!=null&&m(t,["codeExecutionResult"],s);const a=p(n,["executableCode"]);a!=null&&m(t,["executableCode"],a);const l=p(n,["fileData"]);l!=null&&m(t,["fileData"],ok(l));const c=p(n,["functionCall"]);c!=null&&m(t,["functionCall"],ak(c));const f=p(n,["functionResponse"]);f!=null&&m(t,["functionResponse"],f);const h=p(n,["inlineData"]);h!=null&&m(t,["inlineData"],kM(h));const y=p(n,["text"]);y!=null&&m(t,["text"],y);const E=p(n,["thought"]);E!=null&&m(t,["thought"],E);const T=p(n,["thoughtSignature"]);T!=null&&m(t,["thoughtSignature"],T);const w=p(n,["videoMetadata"]);return w!=null&&m(t,["videoMetadata"],w),t}function Jk(n,e){const t={},i=p(n,["productImage"]);return i!=null&&m(t,["image"],Vi(i)),t}function jk(n,e,t){const i={},s=p(n,["numberOfImages"]);e!==void 0&&s!=null&&m(e,["parameters","sampleCount"],s);const a=p(n,["baseSteps"]);e!==void 0&&a!=null&&m(e,["parameters","baseSteps"],a);const l=p(n,["outputGcsUri"]);e!==void 0&&l!=null&&m(e,["parameters","storageUri"],l);const c=p(n,["seed"]);e!==void 0&&c!=null&&m(e,["parameters","seed"],c);const f=p(n,["safetyFilterLevel"]);e!==void 0&&f!=null&&m(e,["parameters","safetySetting"],f);const h=p(n,["personGeneration"]);e!==void 0&&h!=null&&m(e,["parameters","personGeneration"],h);const y=p(n,["addWatermark"]);e!==void 0&&y!=null&&m(e,["parameters","addWatermark"],y);const E=p(n,["outputMimeType"]);e!==void 0&&E!=null&&m(e,["parameters","outputOptions","mimeType"],E);const T=p(n,["outputCompressionQuality"]);e!==void 0&&T!=null&&m(e,["parameters","outputOptions","compressionQuality"],T);const w=p(n,["enhancePrompt"]);e!==void 0&&w!=null&&m(e,["parameters","enhancePrompt"],w);const C=p(n,["labels"]);return e!==void 0&&C!=null&&m(e,["labels"],C),i}function Wk(n,e,t){const i={},s=p(e,["model"]);s!=null&&m(i,["_url","model"],gt(n,s));const a=p(e,["source"]);a!=null&&Xk(a,i);const l=p(e,["config"]);return l!=null&&jk(l,i),i}function Qk(n,e){const t={},i=p(n,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>Cf(a))),m(t,["generatedImages"],s)}return t}function Xk(n,e,t){const i={},s=p(n,["prompt"]);e!==void 0&&s!=null&&m(e,["instances[0]","prompt"],s);const a=p(n,["personImage"]);e!==void 0&&a!=null&&m(e,["instances[0]","personImage","image"],Vi(a));const l=p(n,["productImages"]);if(e!==void 0&&l!=null){let c=l;Array.isArray(c)&&(c=c.map(f=>Jk(f))),m(e,["instances[0]","productImages"],c)}return i}function Zk(n,e){const t={},i=p(n,["referenceImage"]);i!=null&&m(t,["referenceImage"],Vi(i));const s=p(n,["referenceId"]);s!=null&&m(t,["referenceId"],s);const a=p(n,["referenceType"]);a!=null&&m(t,["referenceType"],a);const l=p(n,["maskImageConfig"]);l!=null&&m(t,["maskImageConfig"],$k(l));const c=p(n,["controlImageConfig"]);c!=null&&m(t,["controlImageConfig"],zM(c));const f=p(n,["styleImageConfig"]);f!=null&&m(t,["styleImageConfig"],f);const h=p(n,["subjectImageConfig"]);return h!=null&&m(t,["subjectImageConfig"],h),t}function Z1(n,e){const t={},i=p(n,["safetyAttributes","categories"]);i!=null&&m(t,["categories"],i);const s=p(n,["safetyAttributes","scores"]);s!=null&&m(t,["scores"],s);const a=p(n,["contentType"]);return a!=null&&m(t,["contentType"],a),t}function eS(n,e){const t={},i=p(n,["safetyAttributes","categories"]);i!=null&&m(t,["categories"],i);const s=p(n,["safetyAttributes","scores"]);s!=null&&m(t,["scores"],s);const a=p(n,["contentType"]);return a!=null&&m(t,["contentType"],a),t}function eD(n,e){const t={},i=p(n,["category"]);if(i!=null&&m(t,["category"],i),p(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=p(n,["threshold"]);return s!=null&&m(t,["threshold"],s),t}function tD(n,e){const t={},i=p(n,["image"]);return i!=null&&m(t,["image"],Vi(i)),t}function nD(n,e,t){const i={},s=p(n,["mode"]);e!==void 0&&s!=null&&m(e,["parameters","mode"],s);const a=p(n,["maxPredictions"]);e!==void 0&&a!=null&&m(e,["parameters","maxPredictions"],a);const l=p(n,["confidenceThreshold"]);e!==void 0&&l!=null&&m(e,["parameters","confidenceThreshold"],l);const c=p(n,["maskDilation"]);e!==void 0&&c!=null&&m(e,["parameters","maskDilation"],c);const f=p(n,["binaryColorThreshold"]);e!==void 0&&f!=null&&m(e,["parameters","binaryColorThreshold"],f);const h=p(n,["labels"]);return e!==void 0&&h!=null&&m(e,["labels"],h),i}function iD(n,e,t){const i={},s=p(e,["model"]);s!=null&&m(i,["_url","model"],gt(n,s));const a=p(e,["source"]);a!=null&&sD(a,i);const l=p(e,["config"]);return l!=null&&nD(l,i),i}function rD(n,e){const t={},i=p(n,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>Rk(a))),m(t,["generatedMasks"],s)}return t}function sD(n,e,t){const i={},s=p(n,["prompt"]);e!==void 0&&s!=null&&m(e,["instances[0]","prompt"],s);const a=p(n,["image"]);e!==void 0&&a!=null&&m(e,["instances[0]","image"],Vi(a));const l=p(n,["scribbleImage"]);return e!==void 0&&l!=null&&m(e,["instances[0]","scribble"],tD(l)),i}function oD(n,e){const t={},i=p(n,["retrievalConfig"]);i!=null&&m(t,["retrievalConfig"],i);const s=p(n,["functionCallingConfig"]);return s!=null&&m(t,["functionCallingConfig"],lk(s)),t}function aD(n,e){const t={};if(p(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=p(n,["computerUse"]);i!=null&&m(t,["computerUse"],i);const s=p(n,["fileSearch"]);s!=null&&m(t,["fileSearch"],s);const a=p(n,["codeExecution"]);if(a!=null&&m(t,["codeExecution"],a),p(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=p(n,["functionDeclarations"]);if(l!=null){let E=l;Array.isArray(E)&&(E=E.map(T=>T)),m(t,["functionDeclarations"],E)}const c=p(n,["googleMaps"]);c!=null&&m(t,["googleMaps"],Lk(c));const f=p(n,["googleSearch"]);f!=null&&m(t,["googleSearch"],Uk(f));const h=p(n,["googleSearchRetrieval"]);h!=null&&m(t,["googleSearchRetrieval"],h);const y=p(n,["urlContext"]);return y!=null&&m(t,["urlContext"],y),t}function tS(n,e){const t={},i=p(n,["retrieval"]);i!=null&&m(t,["retrieval"],i);const s=p(n,["computerUse"]);if(s!=null&&m(t,["computerUse"],s),p(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=p(n,["codeExecution"]);a!=null&&m(t,["codeExecution"],a);const l=p(n,["enterpriseWebSearch"]);l!=null&&m(t,["enterpriseWebSearch"],l);const c=p(n,["functionDeclarations"]);if(c!=null){let T=c;Array.isArray(T)&&(T=T.map(w=>uk(w))),m(t,["functionDeclarations"],T)}const f=p(n,["googleMaps"]);f!=null&&m(t,["googleMaps"],f);const h=p(n,["googleSearch"]);h!=null&&m(t,["googleSearch"],h);const y=p(n,["googleSearchRetrieval"]);y!=null&&m(t,["googleSearchRetrieval"],y);const E=p(n,["urlContext"]);return E!=null&&m(t,["urlContext"],E),t}function lD(n,e){const t={},i=p(n,["baseModel"]);i!=null&&m(t,["baseModel"],i);const s=p(n,["createTime"]);s!=null&&m(t,["createTime"],s);const a=p(n,["updateTime"]);return a!=null&&m(t,["updateTime"],a),t}function uD(n,e){const t={},i=p(n,["labels","google-vertex-llm-tuning-base-model-id"]);i!=null&&m(t,["baseModel"],i);const s=p(n,["createTime"]);s!=null&&m(t,["createTime"],s);const a=p(n,["updateTime"]);return a!=null&&m(t,["updateTime"],a),t}function cD(n,e,t){const i={},s=p(n,["displayName"]);e!==void 0&&s!=null&&m(e,["displayName"],s);const a=p(n,["description"]);e!==void 0&&a!=null&&m(e,["description"],a);const l=p(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&m(e,["defaultCheckpointId"],l),i}function dD(n,e,t){const i={},s=p(n,["displayName"]);e!==void 0&&s!=null&&m(e,["displayName"],s);const a=p(n,["description"]);e!==void 0&&a!=null&&m(e,["description"],a);const l=p(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&m(e,["defaultCheckpointId"],l),i}function fD(n,e,t){const i={},s=p(e,["model"]);s!=null&&m(i,["_url","name"],gt(n,s));const a=p(e,["config"]);return a!=null&&cD(a,i),i}function hD(n,e,t){const i={},s=p(e,["model"]);s!=null&&m(i,["_url","model"],gt(n,s));const a=p(e,["config"]);return a!=null&&dD(a,i),i}function pD(n,e,t){const i={},s=p(n,["outputGcsUri"]);e!==void 0&&s!=null&&m(e,["parameters","storageUri"],s);const a=p(n,["safetyFilterLevel"]);e!==void 0&&a!=null&&m(e,["parameters","safetySetting"],a);const l=p(n,["personGeneration"]);e!==void 0&&l!=null&&m(e,["parameters","personGeneration"],l);const c=p(n,["includeRaiReason"]);e!==void 0&&c!=null&&m(e,["parameters","includeRaiReason"],c);const f=p(n,["outputMimeType"]);e!==void 0&&f!=null&&m(e,["parameters","outputOptions","mimeType"],f);const h=p(n,["outputCompressionQuality"]);e!==void 0&&h!=null&&m(e,["parameters","outputOptions","compressionQuality"],h);const y=p(n,["enhanceInputImage"]);e!==void 0&&y!=null&&m(e,["parameters","upscaleConfig","enhanceInputImage"],y);const E=p(n,["imagePreservationFactor"]);e!==void 0&&E!=null&&m(e,["parameters","upscaleConfig","imagePreservationFactor"],E);const T=p(n,["labels"]);e!==void 0&&T!=null&&m(e,["labels"],T);const w=p(n,["numberOfImages"]);e!==void 0&&w!=null&&m(e,["parameters","sampleCount"],w);const C=p(n,["mode"]);return e!==void 0&&C!=null&&m(e,["parameters","mode"],C),i}function mD(n,e,t){const i={},s=p(e,["model"]);s!=null&&m(i,["_url","model"],gt(n,s));const a=p(e,["image"]);a!=null&&m(i,["instances[0]","image"],Vi(a));const l=p(e,["upscaleFactor"]);l!=null&&m(i,["parameters","upscaleConfig","upscaleFactor"],l);const c=p(e,["config"]);return c!=null&&pD(c,i),i}function gD(n,e){const t={},i=p(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const s=p(n,["predictions"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>Cf(l))),m(t,["generatedImages"],a)}return t}function yD(n,e){const t={},i=p(n,["uri"]);i!=null&&m(t,["uri"],i);const s=p(n,["encodedVideo"]);s!=null&&m(t,["videoBytes"],$s(s));const a=p(n,["encoding"]);return a!=null&&m(t,["mimeType"],a),t}function vD(n,e){const t={},i=p(n,["gcsUri"]);i!=null&&m(t,["uri"],i);const s=p(n,["bytesBase64Encoded"]);s!=null&&m(t,["videoBytes"],$s(s));const a=p(n,["mimeType"]);return a!=null&&m(t,["mimeType"],a),t}function _D(n,e){const t={},i=p(n,["image"]);i!=null&&m(t,["_self"],Vi(i));const s=p(n,["maskMode"]);return s!=null&&m(t,["maskMode"],s),t}function ED(n,e){const t={},i=p(n,["image"]);i!=null&&m(t,["image"],If(i));const s=p(n,["referenceType"]);return s!=null&&m(t,["referenceType"],s),t}function TD(n,e){const t={},i=p(n,["image"]);i!=null&&m(t,["image"],Vi(i));const s=p(n,["referenceType"]);return s!=null&&m(t,["referenceType"],s),t}function nS(n,e){const t={},i=p(n,["uri"]);i!=null&&m(t,["uri"],i);const s=p(n,["videoBytes"]);s!=null&&m(t,["encodedVideo"],$s(s));const a=p(n,["mimeType"]);return a!=null&&m(t,["encoding"],a),t}function iS(n,e){const t={},i=p(n,["uri"]);i!=null&&m(t,["gcsUri"],i);const s=p(n,["videoBytes"]);s!=null&&m(t,["bytesBase64Encoded"],$s(s));const a=p(n,["mimeType"]);return a!=null&&m(t,["mimeType"],a),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wD(n,e){const t={},i=p(n,["displayName"]);return e!==void 0&&i!=null&&m(e,["displayName"],i),t}function SD(n){const e={},t=p(n,["config"]);return t!=null&&wD(t,e),e}function bD(n,e){const t={},i=p(n,["force"]);return e!==void 0&&i!=null&&m(e,["_query","force"],i),t}function AD(n){const e={},t=p(n,["name"]);t!=null&&m(e,["_url","name"],t);const i=p(n,["config"]);return i!=null&&bD(i,e),e}function xD(n){const e={},t=p(n,["name"]);return t!=null&&m(e,["_url","name"],t),e}function CD(n,e){const t={},i=p(n,["customMetadata"]);if(e!==void 0&&i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>l)),m(e,["customMetadata"],a)}const s=p(n,["chunkingConfig"]);return e!==void 0&&s!=null&&m(e,["chunkingConfig"],s),t}function ID(n){const e={},t=p(n,["name"]);t!=null&&m(e,["name"],t);const i=p(n,["metadata"]);i!=null&&m(e,["metadata"],i);const s=p(n,["done"]);s!=null&&m(e,["done"],s);const a=p(n,["error"]);a!=null&&m(e,["error"],a);const l=p(n,["response"]);return l!=null&&m(e,["response"],ND(l)),e}function RD(n){const e={},t=p(n,["fileSearchStoreName"]);t!=null&&m(e,["_url","file_search_store_name"],t);const i=p(n,["fileName"]);i!=null&&m(e,["fileName"],i);const s=p(n,["config"]);return s!=null&&CD(s,e),e}function ND(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=p(n,["parent"]);i!=null&&m(e,["parent"],i);const s=p(n,["documentName"]);return s!=null&&m(e,["documentName"],s),e}function MD(n,e){const t={},i=p(n,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const s=p(n,["pageToken"]);return e!==void 0&&s!=null&&m(e,["_query","pageToken"],s),t}function kD(n){const e={},t=p(n,["config"]);return t!=null&&MD(t,e),e}function DD(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=p(n,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const s=p(n,["fileSearchStores"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),m(e,["fileSearchStores"],a)}return e}function rS(n,e){const t={},i=p(n,["mimeType"]);e!==void 0&&i!=null&&m(e,["mimeType"],i);const s=p(n,["displayName"]);e!==void 0&&s!=null&&m(e,["displayName"],s);const a=p(n,["customMetadata"]);if(e!==void 0&&a!=null){let c=a;Array.isArray(c)&&(c=c.map(f=>f)),m(e,["customMetadata"],c)}const l=p(n,["chunkingConfig"]);return e!==void 0&&l!=null&&m(e,["chunkingConfig"],l),t}function PD(n){const e={},t=p(n,["fileSearchStoreName"]);t!=null&&m(e,["_url","file_search_store_name"],t);const i=p(n,["config"]);return i!=null&&rS(i,e),e}function LD(n){const e={},t=p(n,["sdkHttpResponse"]);return t!=null&&m(e,["sdkHttpResponse"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const UD="Content-Type",VD="X-Server-Timeout",OD="User-Agent",Rm="x-goog-api-client",zD="1.41.0",FD=`google-genai-sdk/${zD}`,BD="v1beta1",GD="v1beta",HD=5,qD=[408,429,500,502,503,504];class YD{constructor(e){var t,i,s;this.clientOptions=Object.assign({},e),this.customBaseUrl=(t=e.httpOptions)===null||t===void 0?void 0:t.baseUrl,this.clientOptions.vertexai&&(this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:this.clientOptions.apiKey&&(this.clientOptions.project=void 0,this.clientOptions.location=void 0));const a={};if(this.clientOptions.vertexai){if(!this.clientOptions.location&&!this.clientOptions.apiKey&&!this.customBaseUrl&&(this.clientOptions.location="global"),!(this.clientOptions.project&&this.clientOptions.location||this.clientOptions.apiKey)&&!this.customBaseUrl)throw new Error("Authentication is not set up. Please provide either a project and location, or an API key, or a custom base URL.");const c=e.project&&e.location||!!e.apiKey;this.customBaseUrl&&!c?(a.baseUrl=this.customBaseUrl,this.clientOptions.project=void 0,this.clientOptions.location=void 0):this.clientOptions.apiKey||this.clientOptions.location==="global"?a.baseUrl="https://aiplatform.googleapis.com/":this.clientOptions.project&&this.clientOptions.location&&(a.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`),a.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:BD}else{if(!this.clientOptions.apiKey)throw new Mu({message:"API key must be set when using the Gemini API.",status:403});a.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:GD,a.baseUrl="https://generativelanguage.googleapis.com/"}a.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=a,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(a,e.httpOptions))}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getCustomBaseUrl(){return this.customBaseUrl}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,i){const s=[this.getRequestUrlInternal(t)];return i&&s.push(this.getBaseResourcePath()),e!==""&&s.push(e),new URL(`${s.join("/")}`)}shouldPrependVertexProjectPath(e,t){return!(t.baseUrl&&t.baseUrlResourceScope===Sm.COLLECTION||this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e,t),s=this.constructUrl(e.path,t,i);if(e.queryParams)for(const[l,c]of Object.entries(e.queryParams))s.searchParams.append(l,String(c));let a={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=e.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,t,s.toString(),e.abortSignal),this.unaryApiCall(s,a,e.httpMethod)}patchHttpOptions(e,t){const i=JSON.parse(JSON.stringify(e));for(const[s,a]of Object.entries(t))typeof a=="object"?i[s]=Object.assign(Object.assign({},i[s]),a):a!==void 0&&(i[s]=a);return i}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e,t),s=this.constructUrl(e.path,t,i);(!s.searchParams.has("alt")||s.searchParams.get("alt")!=="sse")&&s.searchParams.set("alt","sse");let a={};return a.body=e.body,a=await this.includeExtraHttpOptionsToRequestInit(a,t,s.toString(),e.abortSignal),this.streamApiCall(s,a,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,i,s){if(t&&t.timeout||s){const a=new AbortController,l=a.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const c=setTimeout(()=>a.abort(),t.timeout);c&&typeof c.unref=="function"&&c.unref()}s&&s.addEventListener("abort",()=>{a.abort()}),e.signal=l}return t&&t.extraBody!==null&&$D(e,t.extraBody),e.headers=await this.getHeadersInternal(t,i),e}async unaryApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async s=>(await ST(s),new bm(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}async streamApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async s=>(await ST(s),this.processStreamResponse(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}processStreamResponse(e){return Mi(this,arguments,function*(){var i;const s=(i=e==null?void 0:e.body)===null||i===void 0?void 0:i.getReader(),a=new TextDecoder("utf-8");if(!s)throw new Error("Response body is empty");try{let l="";const c="data:",f=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:h,value:y}=yield Ke(s.read());if(h){if(l.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const E=a.decode(y,{stream:!0});try{const C=JSON.parse(E);if("error"in C){const b=JSON.parse(JSON.stringify(C.error)),x=b.status,N=b.code,z=`got status: ${x}. ${JSON.stringify(C)}`;if(N>=400&&N<600)throw new Mu({message:z,status:N})}}catch(C){if(C.name==="ApiError")throw C}l+=E;let T=-1,w=0;for(;;){T=-1,w=0;for(const x of f){const N=l.indexOf(x);N!==-1&&(T===-1||N<T)&&(T=N,w=x.length)}if(T===-1)break;const C=l.substring(0,T);l=l.substring(T+w);const b=C.trim();if(b.startsWith(c)){const x=b.substring(c.length).trim();try{const N=new Response(x,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Ke(new bm(N))}catch(N){throw new Error(`exception parsing stream chunk ${x}. ${N}`)}}}}}finally{s.releaseLock()}})}async apiCall(e,t){var i;if(!this.clientOptions.httpOptions||!this.clientOptions.httpOptions.retryOptions)return fetch(e,t);const s=this.clientOptions.httpOptions.retryOptions;return L2(async()=>{const l=await fetch(e,t);if(l.ok)return l;throw qD.includes(l.status)?new Error(`Retryable HTTP Error: ${l.statusText}`):new U1(`Non-retryable exception ${l.statusText} sending request`)},{retries:((i=s.attempts)!==null&&i!==void 0?i:HD)-1})}getDefaultHeaders(){const e={},t=FD+" "+this.clientOptions.userAgentExtra;return e[OD]=t,e[Rm]=t,e[UD]="application/json",e}async getHeadersInternal(e,t){const i=new Headers;if(e&&e.headers){for(const[s,a]of Object.entries(e.headers))i.append(s,a);e.timeout&&e.timeout>0&&i.append(VD,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,t),i}getFileName(e){var t;let i="";return typeof e=="string"&&(i=e.replace(/[/\\]+$/,""),i=(t=i.split(/[/\\]/).pop())!==null&&t!==void 0?t:""),i}async uploadFile(e,t){var i;const s={};t!=null&&(s.mimeType=t.mimeType,s.name=t.name,s.displayName=t.displayName),s.name&&!s.name.startsWith("files/")&&(s.name=`files/${s.name}`);const a=this.clientOptions.uploader,l=await a.stat(e);s.sizeBytes=String(l.size);const c=(i=t==null?void 0:t.mimeType)!==null&&i!==void 0?i:l.type;if(c===void 0||c==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");s.mimeType=c;const f={file:s},h=this.getFileName(e),y=Pe("upload/v1beta/files",f._url),E=await this.fetchUploadUrl(y,s.sizeBytes,s.mimeType,h,f,t==null?void 0:t.httpOptions);return a.upload(e,E,this)}async uploadFileToFileSearchStore(e,t,i){var s;const a=this.clientOptions.uploader,l=await a.stat(t),c=String(l.size),f=(s=i==null?void 0:i.mimeType)!==null&&s!==void 0?s:l.type;if(f===void 0||f==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const h=`upload/v1beta/${e}:uploadToFileSearchStore`,y=this.getFileName(t),E={};i!=null&&rS(i,E);const T=await this.fetchUploadUrl(h,c,f,y,E,i==null?void 0:i.httpOptions);return a.uploadToFileSearchStore(t,T,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t,i,s,a,l){var c;let f={};l?f=l:f={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t}`,"X-Goog-Upload-Header-Content-Type":`${i}`},s?{"X-Goog-Upload-File-Name":s}:{})};const h=await this.request({path:e,body:JSON.stringify(a),httpMethod:"POST",httpOptions:f});if(!h||!(h!=null&&h.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const y=(c=h==null?void 0:h.headers)===null||c===void 0?void 0:c["x-goog-upload-url"];if(y===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return y}}async function ST(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let i;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await n.json():i={error:{message:await n.text(),code:n.status,status:n.statusText}};const s=JSON.stringify(i);throw t>=400&&t<600?new Mu({message:s,status:t}):new Error(s)}}function $D(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const a=JSON.parse(n.body);if(typeof a=="object"&&a!==null&&!Array.isArray(a))t=a;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(a,l){const c=Object.assign({},a);for(const f in l)if(Object.prototype.hasOwnProperty.call(l,f)){const h=l[f],y=c[f];h&&typeof h=="object"&&!Array.isArray(h)&&y&&typeof y=="object"&&!Array.isArray(y)?c[f]=i(y,h):(y&&h&&typeof y!=typeof h&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${f}". Original type: ${typeof y}, New type: ${typeof h}. Overwriting.`),c[f]=h)}return c}const s=i(t,e);n.body=JSON.stringify(s)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const KD="mcp_used/unknown";let JD=!1;function sS(n){for(const e of n)if(jD(e)||typeof e=="object"&&"inputSchema"in e)return!0;return JD}function oS(n){var e;const t=(e=n[Rm])!==null&&e!==void 0?e:"";n[Rm]=(t+` ${KD}`).trimStart()}function jD(n){return n!==null&&typeof n=="object"&&n instanceof vg}function WD(n){return Mi(this,arguments,function*(t,i=100){let s,a=0;for(;a<i;){const l=yield Ke(t.listTools({cursor:s}));for(const c of l.tools)yield yield Ke(c),a++;if(!l.nextCursor)break;s=l.nextCursor}})}class vg{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new vg(e,t)}async initialize(){var e,t,i,s;if(this.mcpTools.length>0)return;const a={},l=[];for(const y of this.mcpClients)try{for(var c=!0,f=(t=void 0,ki(WD(y))),h;h=await f.next(),e=h.done,!e;c=!0){s=h.value,c=!1;const E=s;l.push(E);const T=E.name;if(a[T])throw new Error(`Duplicate function name ${T} found in MCP tools. Please ensure function names are unique.`);a[T]=y}}catch(E){t={error:E}}finally{try{!c&&!e&&(i=f.return)&&await i.call(f)}finally{if(t)throw t.error}}this.mcpTools=l,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),SR(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const s=this.functionNameToMcpClient[i.name];let a;this.config.timeout&&(a={timeout:this.config.timeout});const l=await s.callTool({name:i.name,arguments:i.args},void 0,a);t.push({functionResponse:{name:i.name,response:l.isError?{error:l}:l}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function QD(n,e,t){const i=new mR;let s;t.data instanceof Blob?s=JSON.parse(await t.data.text()):s=JSON.parse(t.data),Object.assign(i,s),e(i)}class XD{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i}async connect(e){var t,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const s=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),l=t5(this.apiClient.getDefaultHeaders()),c=this.apiClient.getApiKey(),f=`${s}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${c}`;let h=()=>{};const y=new Promise(B=>{h=B}),E=e.callbacks,T=function(){h({})},w=this.apiClient,C={onopen:T,onmessage:B=>{QD(w,E.onmessage,B)},onerror:(t=E==null?void 0:E.onerror)!==null&&t!==void 0?t:function(B){},onclose:(i=E==null?void 0:E.onclose)!==null&&i!==void 0?i:function(B){}},b=this.webSocketFactory.create(f,e5(l),C);b.connect(),await y;const z={setup:{model:gt(this.apiClient,e.model)}};return b.send(JSON.stringify(z)),new ZD(b,this.apiClient)}}class ZD{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=wM(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=TM(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(Va.PLAY)}pause(){this.sendPlaybackControl(Va.PAUSE)}stop(){this.sendPlaybackControl(Va.STOP)}resetContext(){this.sendPlaybackControl(Va.RESET_CONTEXT)}close(){this.conn.close()}}function e5(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function t5(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const n5="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function i5(n,e,t){const i=new pR;let s;t.data instanceof Blob?s=await t.data.text():t.data instanceof ArrayBuffer?s=new TextDecoder().decode(t.data):s=t.data;const a=JSON.parse(s);if(n.isVertexAI()){const l=AM(a);Object.assign(i,l)}else Object.assign(i,a);e(i)}class r5{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i,this.music=new XD(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,i,s,a,l,c;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const f=this.apiClient.getWebsocketBaseUrl(),h=this.apiClient.getApiVersion();let y;const E=this.apiClient.getHeaders();e.config&&e.config.tools&&sS(e.config.tools)&&oS(E);const T=l5(E);if(this.apiClient.isVertexAI()){const k=this.apiClient.getProject(),H=this.apiClient.getLocation(),K=this.apiClient.getApiKey(),U=!!k&&!!H||!!K;this.apiClient.getCustomBaseUrl()&&!U?y=f:(y=`${f}/ws/google.cloud.aiplatform.${h}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(T,y))}else{const k=this.apiClient.getApiKey();let H="BidiGenerateContent",K="key";k!=null&&k.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),h!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),H="BidiGenerateContentConstrained",K="access_token"),y=`${f}/ws/google.ai.generativelanguage.${h}.GenerativeService.${H}?${K}=${k}`}let w=()=>{};const C=new Promise(k=>{w=k}),b=e.callbacks,x=function(){var k;(k=b==null?void 0:b.onopen)===null||k===void 0||k.call(b),w({})},N=this.apiClient,z={onopen:x,onmessage:k=>{i5(N,b.onmessage,k)},onerror:(t=b==null?void 0:b.onerror)!==null&&t!==void 0?t:function(k){},onclose:(i=b==null?void 0:b.onclose)!==null&&i!==void 0?i:function(k){}},B=this.webSocketFactory.create(y,a5(T),z);B.connect(),await C;let Y=gt(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&Y.startsWith("publishers/")){const k=this.apiClient.getProject(),H=this.apiClient.getLocation();k&&H&&(Y=`projects/${k}/locations/${H}/`+Y)}let J={};this.apiClient.isVertexAI()&&((s=e.config)===null||s===void 0?void 0:s.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Wd.AUDIO]}:e.config.responseModalities=[Wd.AUDIO]),!((a=e.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const $=(c=(l=e.config)===null||l===void 0?void 0:l.tools)!==null&&c!==void 0?c:[],L=[];for(const k of $)if(this.isCallableTool(k)){const H=k;L.push(await H.tool())}else L.push(k);L.length>0&&(e.config.tools=L);const V={model:Y,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?J=EM(this.apiClient,V):J=_M(this.apiClient,V),delete J.config,B.send(JSON.stringify(J)),new o5(B,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const s5={turnComplete:!0};class o5{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let i=[];try{i=mi(t.turns),e.isVertexAI()||(i=i.map(s=>xf(s)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:i,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let i=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?i=t.functionResponses:i=[t.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const a of i){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!e.isVertexAI()&&!("id"in a))throw new Error(n5)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},s5),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:bM(e)}:t={realtimeInput:SM(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function a5(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function l5(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const bT=10;function AT(n){var e,t,i;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let s=!1;for(const l of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(Fa(l)){s=!0;break}if(!s)return!0;const a=(i=n==null?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function Fa(n){return"callTool"in n&&typeof n.callTool=="function"}function u5(n){var e,t,i;return(i=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(s=>Fa(s)))!==null&&i!==void 0?i:!1}function xT(n){var e;const t=[];return!((e=n==null?void 0:n.config)===null||e===void 0)&&e.tools&&n.config.tools.forEach((i,s)=>{if(Fa(i))return;const a=i;a.functionDeclarations&&a.functionDeclarations.length>0&&t.push(s)}),t}function CT(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class c5 extends $r{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var i,s,a,l,c;const f=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!u5(t)||AT(t.config))return await this.generateContentInternal(f);const h=xT(t);if(h.length>0){const b=h.map(x=>`tools[${x}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${b}.`)}let y,E;const T=mi(f.contents),w=(a=(s=(i=f.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&a!==void 0?a:bT;let C=0;for(;C<w&&(y=await this.generateContentInternal(f),!(!y.functionCalls||y.functionCalls.length===0));){const b=y.candidates[0].content,x=[];for(const N of(c=(l=t.config)===null||l===void 0?void 0:l.tools)!==null&&c!==void 0?c:[])if(Fa(N)){const B=await N.callTool(y.functionCalls);x.push(...B)}C++,E={role:"user",parts:x},f.contents=mi(f.contents),f.contents.push(b),f.contents.push(E),CT(f.config)&&(T.push(b),T.push(E))}return CT(f.config)&&(y.automaticFunctionCallingHistory=T),y},this.generateContentStream=async t=>{var i,s,a,l,c;if(this.maybeMoveToResponseJsonSchem(t),AT(t.config)){const E=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(E)}const f=xT(t);if(f.length>0){const E=f.map(T=>`tools[${T}]`).join(", ");throw new Error(`Incompatible tools found at ${E}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const h=(a=(s=(i=t==null?void 0:t.config)===null||i===void 0?void 0:i.toolConfig)===null||s===void 0?void 0:s.functionCallingConfig)===null||a===void 0?void 0:a.streamFunctionCallArguments,y=(c=(l=t==null?void 0:t.config)===null||l===void 0?void 0:l.automaticFunctionCalling)===null||c===void 0?void 0:c.disable;if(h&&!y)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(i=>{var s;let a;const l=[];if(i!=null&&i.generatedImages)for(const f of i.generatedImages)f&&(f!=null&&f.safetyAttributes)&&((s=f==null?void 0:f.safetyAttributes)===null||s===void 0?void 0:s.contentType)==="Positive Prompt"?a=f==null?void 0:f.safetyAttributes:l.push(f);let c;return a?c={generatedImages:l,positivePromptSafetyAttributes:a,sdkHttpResponse:i.sdkHttpResponse}:c={generatedImages:l,sdkHttpResponse:i.sdkHttpResponse},c}),this.list=async t=>{var i;const l={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!l.config.queryBase){if(!((i=l.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");l.config.filter="labels.tune-type:*"}return new Oo(Br.PAGED_ITEM_MODELS,c=>this.listInternal(c),await this.listInternal(l),l)},this.editImage=async t=>{const i={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(i.referenceImages=t.referenceImages.map(s=>s.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async t=>{let i={numberOfImages:1,mode:"upscale"};t.config&&(i=Object.assign(Object.assign({},i),t.config));const s={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:i};return await this.upscaleImageInternal(s)},this.generateVideos=async t=>{var i,s,a,l,c,f;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=t.video)===null||i===void 0)&&i.uri&&(!((s=t.video)===null||s===void 0)&&s.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((l=(a=t.source)===null||a===void 0?void 0:a.video)===null||l===void 0)&&l.uri&&(!((f=(c=t.source)===null||c===void 0?void 0:c.video)===null||f===void 0)&&f.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,i,s;const a=(t=e.config)===null||t===void 0?void 0:t.tools;if(!a)return e;const l=await Promise.all(a.map(async f=>Fa(f)?await f.tool():f)),c={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:l})};if(c.config.tools=l,e.config&&e.config.tools&&sS(e.config.tools)){const f=(s=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&s!==void 0?s:{};let h=Object.assign({},f);Object.keys(h).length===0&&(h=this.apiClient.getDefaultHeaders()),oS(h),c.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:h})}return c}async initAfcToolsMap(e){var t,i,s;const a=new Map;for(const l of(i=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&i!==void 0?i:[])if(Fa(l)){const c=l,f=await c.tool();for(const h of(s=f.functionDeclarations)!==null&&s!==void 0?s:[]){if(!h.name)throw new Error("Function declaration name is required.");if(a.has(h.name))throw new Error(`Duplicate tool declaration name: ${h.name}`);a.set(h.name,c)}}return a}async processAfcStream(e){var t,i,s;const a=(s=(i=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&s!==void 0?s:bT;let l=!1,c=0;const f=await this.initAfcToolsMap(e);return(function(h,y,E){return Mi(this,arguments,function*(){for(var T,w,C,b,x,N;c<a;){l&&(c++,l=!1);const J=yield Ke(h.processParamsMaybeAddMcpUsage(E)),$=yield Ke(h.generateContentStreamInternal(J)),L=[],V=[];try{for(var z=!0,B=(w=void 0,ki($)),Y;Y=yield Ke(B.next()),T=Y.done,!T;z=!0){b=Y.value,z=!1;const k=b;if(yield yield Ke(k),k.candidates&&(!((x=k.candidates[0])===null||x===void 0)&&x.content)){V.push(k.candidates[0].content);for(const H of(N=k.candidates[0].content.parts)!==null&&N!==void 0?N:[])if(c<a&&H.functionCall){if(!H.functionCall.name)throw new Error("Function call name was not returned by the model.");if(y.has(H.functionCall.name)){const K=yield Ke(y.get(H.functionCall.name).callTool([H.functionCall]));L.push(...K)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${y.keys()}, mising tool: ${H.functionCall.name}`)}}}}catch(k){w={error:k}}finally{try{!z&&!T&&(C=B.return)&&(yield Ke(C.call(B)))}finally{if(w)throw w.error}}if(L.length>0){l=!0;const k=new fu;k.candidates=[{content:{role:"user",parts:L}}],yield yield Ke(k);const H=[];H.push(...V),H.push({role:"user",parts:L});const K=mi(E.contents).concat(H);E.contents=K}else break}})})(this,f,e)}async generateContentInternal(e){var t,i,s,a;let l,c="",f={};if(this.apiClient.isVertexAI()){const h=ET(this.apiClient,e);return c=Pe("{model}:generateContent",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),l.then(y=>{const E=wT(y),T=new fu;return Object.assign(T,E),T})}else{const h=_T(this.apiClient,e);return c=Pe("{model}:generateContent",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),l.then(y=>{const E=TT(y),T=new fu;return Object.assign(T,E),T})}}async generateContentStreamInternal(e){var t,i,s,a;let l,c="",f={};if(this.apiClient.isVertexAI()){const h=ET(this.apiClient,e);return c=Pe("{model}:streamGenerateContent?alt=sse",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.requestStream({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),l.then(function(E){return Mi(this,arguments,function*(){var T,w,C,b;try{for(var x=!0,N=ki(E),z;z=yield Ke(N.next()),T=z.done,!T;x=!0){b=z.value,x=!1;const B=b,Y=wT(yield Ke(B.json()),e);Y.sdkHttpResponse={headers:B.headers};const J=new fu;Object.assign(J,Y),yield yield Ke(J)}}catch(B){w={error:B}}finally{try{!x&&!T&&(C=N.return)&&(yield Ke(C.call(N)))}finally{if(w)throw w.error}}})})}else{const h=_T(this.apiClient,e);return c=Pe("{model}:streamGenerateContent?alt=sse",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.requestStream({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),l.then(function(E){return Mi(this,arguments,function*(){var T,w,C,b;try{for(var x=!0,N=ki(E),z;z=yield Ke(N.next()),T=z.done,!T;x=!0){b=z.value,x=!1;const B=b,Y=TT(yield Ke(B.json()),e);Y.sdkHttpResponse={headers:B.headers};const J=new fu;Object.assign(J,Y),yield yield Ke(J)}}catch(B){w={error:B}}finally{try{!x&&!T&&(C=N.return)&&(yield Ke(C.call(N)))}finally{if(w)throw w.error}}})})}}async embedContent(e){var t,i,s,a;let l,c="",f={};if(this.apiClient.isVertexAI()){const h=nk(this.apiClient,e);return c=Pe("{model}:predict",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),l.then(y=>{const E=rk(y),T=new nT;return Object.assign(T,E),T})}else{const h=tk(this.apiClient,e);return c=Pe("{model}:batchEmbedContents",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),l.then(y=>{const E=ik(y),T=new nT;return Object.assign(T,E),T})}}async generateImagesInternal(e){var t,i,s,a;let l,c="",f={};if(this.apiClient.isVertexAI()){const h=mk(this.apiClient,e);return c=Pe("{model}:predict",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),l.then(y=>{const E=yk(y),T=new iT;return Object.assign(T,E),T})}else{const h=pk(this.apiClient,e);return c=Pe("{model}:predict",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),l.then(y=>{const E=gk(y),T=new iT;return Object.assign(T,E),T})}}async editImageInternal(e){var t,i;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=QM(this.apiClient,e);return a=Pe("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:f.headers},y})),s.then(f=>{const h=XM(f),y=new nR;return Object.assign(y,h),y})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,i;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=mD(this.apiClient,e);return a=Pe("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:f.headers},y})),s.then(f=>{const h=gD(f),y=new iR;return Object.assign(y,h),y})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,i;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=Wk(this.apiClient,e);return a=Pe("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>{const h=Qk(f),y=new rR;return Object.assign(y,h),y})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,i;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=iD(this.apiClient,e);return a=Pe("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>{const h=rD(f),y=new sR;return Object.assign(y,h),y})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,i,s,a;let l,c="",f={};if(this.apiClient.isVertexAI()){const h=Pk(this.apiClient,e);return c=Pe("{name}",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),l.then(y=>Im(y))}else{const h=Dk(this.apiClient,e);return c=Pe("{name}",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),l.then(y=>Cm(y))}}async listInternal(e){var t,i,s,a;let l,c="",f={};if(this.apiClient.isVertexAI()){const h=Hk(this.apiClient,e);return c=Pe("{models_url}",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),l.then(y=>{const E=Yk(y),T=new rT;return Object.assign(T,E),T})}else{const h=Gk(this.apiClient,e);return c=Pe("{models_url}",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),l.then(y=>{const E=qk(y),T=new rT;return Object.assign(T,E),T})}}async update(e){var t,i,s,a;let l,c="",f={};if(this.apiClient.isVertexAI()){const h=hD(this.apiClient,e);return c=Pe("{model}",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),l.then(y=>Im(y))}else{const h=fD(this.apiClient,e);return c=Pe("{name}",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),l.then(y=>Cm(y))}}async delete(e){var t,i,s,a;let l,c="",f={};if(this.apiClient.isVertexAI()){const h=KM(this.apiClient,e);return c=Pe("{name}",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),l.then(y=>{const E=jM(y),T=new sT;return Object.assign(T,E),T})}else{const h=$M(this.apiClient,e);return c=Pe("{name}",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),l.then(y=>{const E=JM(y),T=new sT;return Object.assign(T,E),T})}}async countTokens(e){var t,i,s,a;let l,c="",f={};if(this.apiClient.isVertexAI()){const h=HM(this.apiClient,e);return c=Pe("{model}:countTokens",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),l.then(y=>{const E=YM(y),T=new oT;return Object.assign(T,E),T})}else{const h=GM(this.apiClient,e);return c=Pe("{model}:countTokens",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),l.then(y=>{const E=qM(y),T=new oT;return Object.assign(T,E),T})}}async computeTokens(e){var t,i;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=LM(this.apiClient,e);return a=Pe("{model}:computeTokens",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:f.headers},y})),s.then(f=>{const h=UM(f),y=new oR;return Object.assign(y,h),y})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,i,s,a;let l,c="",f={};if(this.apiClient.isVertexAI()){const h=Sk(this.apiClient,e);return c=Pe("{model}:predictLongRunning",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),l.then(y=>{const E=Tk(y),T=new Qd;return Object.assign(T,E),T})}else{const h=wk(this.apiClient,e);return c=Pe("{model}:predictLongRunning",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),l.then(y=>{const E=Ek(y),T=new Qd;return Object.assign(T,E),T})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class d5 extends $r{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=t.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const l=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:s,config:{httpOptions:a}});return t._fromAPIResponse({apiResponse:l,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async get(e){const t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=t.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const l=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:s,config:{httpOptions:a}});return t._fromAPIResponse({apiResponse:l,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async getVideosOperationInternal(e){var t,i,s,a;let l,c="",f={};if(this.apiClient.isVertexAI()){const h=W2(e);return c=Pe("{operationName}",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),l}else{const h=j2(e);return c=Pe("{operationName}",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),l}}async fetchPredictVideosOperationInternal(e){var t,i;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=G2(e);return a=Pe("{resourceName}:fetchPredictOperation",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function f5(n){const e={},t=p(n,["data"]);if(t!=null&&m(e,["data"],t),p(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=p(n,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function h5(n){const e={},t=p(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(a=>w5(a))),m(e,["parts"],s)}const i=p(n,["role"]);return i!=null&&m(e,["role"],i),e}function p5(n,e,t){const i={},s=p(e,["expireTime"]);t!==void 0&&s!=null&&m(t,["expireTime"],s);const a=p(e,["newSessionExpireTime"]);t!==void 0&&a!=null&&m(t,["newSessionExpireTime"],a);const l=p(e,["uses"]);t!==void 0&&l!=null&&m(t,["uses"],l);const c=p(e,["liveConnectConstraints"]);t!==void 0&&c!=null&&m(t,["bidiGenerateContentSetup"],T5(n,c));const f=p(e,["lockAdditionalFields"]);return t!==void 0&&f!=null&&m(t,["fieldMask"],f),i}function m5(n,e){const t={},i=p(e,["config"]);return i!=null&&m(t,["config"],p5(n,i,t)),t}function g5(n){const e={};if(p(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=p(n,["fileUri"]);t!=null&&m(e,["fileUri"],t);const i=p(n,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function y5(n){const e={},t=p(n,["id"]);t!=null&&m(e,["id"],t);const i=p(n,["args"]);i!=null&&m(e,["args"],i);const s=p(n,["name"]);if(s!=null&&m(e,["name"],s),p(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(p(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function v5(n){const e={};if(p(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=p(n,["enableWidget"]);return t!=null&&m(e,["enableWidget"],t),e}function _5(n){const e={};if(p(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=p(n,["timeRangeFilter"]);return t!=null&&m(e,["timeRangeFilter"],t),e}function E5(n,e){const t={},i=p(n,["generationConfig"]);e!==void 0&&i!=null&&m(e,["setup","generationConfig"],i);const s=p(n,["responseModalities"]);e!==void 0&&s!=null&&m(e,["setup","generationConfig","responseModalities"],s);const a=p(n,["temperature"]);e!==void 0&&a!=null&&m(e,["setup","generationConfig","temperature"],a);const l=p(n,["topP"]);e!==void 0&&l!=null&&m(e,["setup","generationConfig","topP"],l);const c=p(n,["topK"]);e!==void 0&&c!=null&&m(e,["setup","generationConfig","topK"],c);const f=p(n,["maxOutputTokens"]);e!==void 0&&f!=null&&m(e,["setup","generationConfig","maxOutputTokens"],f);const h=p(n,["mediaResolution"]);e!==void 0&&h!=null&&m(e,["setup","generationConfig","mediaResolution"],h);const y=p(n,["seed"]);e!==void 0&&y!=null&&m(e,["setup","generationConfig","seed"],y);const E=p(n,["speechConfig"]);e!==void 0&&E!=null&&m(e,["setup","generationConfig","speechConfig"],yg(E));const T=p(n,["thinkingConfig"]);e!==void 0&&T!=null&&m(e,["setup","generationConfig","thinkingConfig"],T);const w=p(n,["enableAffectiveDialog"]);e!==void 0&&w!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],w);const C=p(n,["systemInstruction"]);e!==void 0&&C!=null&&m(e,["setup","systemInstruction"],h5(xn(C)));const b=p(n,["tools"]);if(e!==void 0&&b!=null){let $=tl(b);Array.isArray($)&&($=$.map(L=>b5(el(L)))),m(e,["setup","tools"],$)}const x=p(n,["sessionResumption"]);e!==void 0&&x!=null&&m(e,["setup","sessionResumption"],S5(x));const N=p(n,["inputAudioTranscription"]);e!==void 0&&N!=null&&m(e,["setup","inputAudioTranscription"],N);const z=p(n,["outputAudioTranscription"]);e!==void 0&&z!=null&&m(e,["setup","outputAudioTranscription"],z);const B=p(n,["realtimeInputConfig"]);e!==void 0&&B!=null&&m(e,["setup","realtimeInputConfig"],B);const Y=p(n,["contextWindowCompression"]);e!==void 0&&Y!=null&&m(e,["setup","contextWindowCompression"],Y);const J=p(n,["proactivity"]);if(e!==void 0&&J!=null&&m(e,["setup","proactivity"],J),p(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function T5(n,e){const t={},i=p(e,["model"]);i!=null&&m(t,["setup","model"],gt(n,i));const s=p(e,["config"]);return s!=null&&m(t,["config"],E5(s,t)),t}function w5(n){const e={},t=p(n,["mediaResolution"]);t!=null&&m(e,["mediaResolution"],t);const i=p(n,["codeExecutionResult"]);i!=null&&m(e,["codeExecutionResult"],i);const s=p(n,["executableCode"]);s!=null&&m(e,["executableCode"],s);const a=p(n,["fileData"]);a!=null&&m(e,["fileData"],g5(a));const l=p(n,["functionCall"]);l!=null&&m(e,["functionCall"],y5(l));const c=p(n,["functionResponse"]);c!=null&&m(e,["functionResponse"],c);const f=p(n,["inlineData"]);f!=null&&m(e,["inlineData"],f5(f));const h=p(n,["text"]);h!=null&&m(e,["text"],h);const y=p(n,["thought"]);y!=null&&m(e,["thought"],y);const E=p(n,["thoughtSignature"]);E!=null&&m(e,["thoughtSignature"],E);const T=p(n,["videoMetadata"]);return T!=null&&m(e,["videoMetadata"],T),e}function S5(n){const e={},t=p(n,["handle"]);if(t!=null&&m(e,["handle"],t),p(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function b5(n){const e={};if(p(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=p(n,["computerUse"]);t!=null&&m(e,["computerUse"],t);const i=p(n,["fileSearch"]);i!=null&&m(e,["fileSearch"],i);const s=p(n,["codeExecution"]);if(s!=null&&m(e,["codeExecution"],s),p(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=p(n,["functionDeclarations"]);if(a!=null){let y=a;Array.isArray(y)&&(y=y.map(E=>E)),m(e,["functionDeclarations"],y)}const l=p(n,["googleMaps"]);l!=null&&m(e,["googleMaps"],v5(l));const c=p(n,["googleSearch"]);c!=null&&m(e,["googleSearch"],_5(c));const f=p(n,["googleSearchRetrieval"]);f!=null&&m(e,["googleSearchRetrieval"],f);const h=p(n,["urlContext"]);return h!=null&&m(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function A5(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const i=n[t];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const s=Object.keys(i).map(a=>`${t}.${a}`);e.push(...s)}else e.push(t)}return e.join(",")}function x5(n,e){let t=null;const i=n.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const a=i.setup;typeof a=="object"&&a!==null?(n.bidiGenerateContentSetup=a,t=a):delete n.bidiGenerateContentSetup}else i!==void 0&&delete n.bidiGenerateContentSetup;const s=n.fieldMask;if(t){const a=A5(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)a?n.fieldMask=a:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&s!==null&&Array.isArray(s)&&s.length>0){const l=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let c=[];s.length>0&&(c=s.map(h=>l.includes(h)?`generationConfig.${h}`:h));const f=[];a&&f.push(a),c.length>0&&f.push(...c),f.length>0?n.fieldMask=f.join(","):delete n.fieldMask}else delete n.fieldMask}else s!==null&&Array.isArray(s)&&s.length>0?n.fieldMask=s.join(","):delete n.fieldMask;return n}class C5 extends $r{constructor(e){super(),this.apiClient=e}async create(e){var t,i;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const c=m5(this.apiClient,e);a=Pe("auth_tokens",c._url),l=c._query,delete c.config,delete c._url,delete c._query;const f=x5(c,e.config);return s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),s.then(h=>h)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function I5(n,e){const t={},i=p(n,["force"]);return e!==void 0&&i!=null&&m(e,["_query","force"],i),t}function R5(n){const e={},t=p(n,["name"]);t!=null&&m(e,["_url","name"],t);const i=p(n,["config"]);return i!=null&&I5(i,e),e}function N5(n){const e={},t=p(n,["name"]);return t!=null&&m(e,["_url","name"],t),e}function M5(n,e){const t={},i=p(n,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const s=p(n,["pageToken"]);return e!==void 0&&s!=null&&m(e,["_query","pageToken"],s),t}function k5(n){const e={},t=p(n,["parent"]);t!=null&&m(e,["_url","parent"],t);const i=p(n,["config"]);return i!=null&&M5(i,e),e}function D5(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=p(n,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const s=p(n,["documents"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),m(e,["documents"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class P5 extends $r{constructor(e){super(),this.apiClient=e,this.list=async t=>new Oo(Br.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:t.parent,config:i.config}),await this.listInternal(t),t)}async get(e){var t,i;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=N5(e);return a=Pe("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async delete(e){var t,i;let s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=R5(e);s=Pe("{name}",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var t,i;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=k5(e);return a=Pe("{parent}/documents",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>{const h=D5(f),y=new aR;return Object.assign(y,h),y})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class L5 extends $r{constructor(e,t=new P5(e)){super(),this.apiClient=e,this.documents=t,this.list=async(i={})=>new Oo(Br.PAGED_ITEM_FILE_SEARCH_STORES,s=>this.listInternal(s),await this.listInternal(i),i)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var t,i;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=SD(e);return a=Pe("fileSearchStores",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async get(e){var t,i;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=xD(e);return a=Pe("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async delete(e){var t,i;let s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=AD(e);s=Pe("{name}",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var t,i;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=kD(e);return a=Pe("fileSearchStores",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>{const h=DD(f),y=new lR;return Object.assign(y,h),y})}}async uploadToFileSearchStoreInternal(e){var t,i;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=PD(e);return a=Pe("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>{const h=LD(f),y=new uR;return Object.assign(y,h),y})}}async importFile(e){var t,i;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=RD(e);return a=Pe("{file_search_store_name}:importFile",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>{const h=ID(f),y=new fg;return Object.assign(y,h),y})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let aS=function(){const{crypto:n}=globalThis;if(n!=null&&n.randomUUID)return aS=n.randomUUID.bind(n),n.randomUUID();const e=new Uint8Array(1),t=n?()=>n.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,i=>(+i^t()&15>>+i/4).toString(16))};const U5=()=>aS();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Nm(n){return typeof n=="object"&&n!==null&&("name"in n&&n.name==="AbortError"||"message"in n&&String(n.message).includes("FetchRequestCanceledException"))}const Mm=n=>{if(n instanceof Error)return n;if(typeof n=="object"&&n!==null){try{if(Object.prototype.toString.call(n)==="[object Error]"){const e=new Error(n.message,n.cause?{cause:n.cause}:{});return n.stack&&(e.stack=n.stack),n.cause&&!e.cause&&(e.cause=n.cause),n.name&&(e.name=n.name),e}}catch{}try{return new Error(JSON.stringify(n))}catch{}}return new Error(n)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class gi extends Error{}class Dn extends gi{constructor(e,t,i,s){super(`${Dn.makeMessage(e,t,i)}`),this.status=e,this.headers=s,this.error=t}static makeMessage(e,t,i){const s=t!=null&&t.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):i;return e&&s?`${e} ${s}`:e?`${e} status code (no body)`:s||"(no status code or body)"}static generate(e,t,i,s){if(!e||!s)return new Rf({message:i,cause:Mm(t)});const a=t;return e===400?new uS(e,a,i,s):e===401?new cS(e,a,i,s):e===403?new dS(e,a,i,s):e===404?new fS(e,a,i,s):e===409?new hS(e,a,i,s):e===422?new pS(e,a,i,s):e===429?new mS(e,a,i,s):e>=500?new gS(e,a,i,s):new Dn(e,a,i,s)}}class km extends Dn{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Rf extends Dn{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}class lS extends Rf{constructor({message:e}={}){super({message:e??"Request timed out."})}}class uS extends Dn{}class cS extends Dn{}class dS extends Dn{}class fS extends Dn{}class hS extends Dn{}class pS extends Dn{}class mS extends Dn{}class gS extends Dn{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const V5=/^[a-z][a-z0-9+.-]*:/i,O5=n=>V5.test(n);let Dm=n=>(Dm=Array.isArray,Dm(n));const z5=Dm;let F5=z5;const IT=F5;function B5(n){if(!n)return!0;for(const e in n)return!1;return!0}function G5(n,e){return Object.prototype.hasOwnProperty.call(n,e)}const H5=(n,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new gi(`${n} must be an integer`);if(e<0)throw new gi(`${n} must be a positive integer`);return e},q5=n=>{try{return JSON.parse(n)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Y5=n=>new Promise(e=>setTimeout(e,n));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ka="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $5(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const K5=()=>{var n,e,t,i,s;const a=$5();if(a==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ka,"X-Stainless-OS":NT(Deno.build.os),"X-Stainless-Arch":RT(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(n=Deno.version)===null||n===void 0?void 0:n.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ka,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(a==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ka,"X-Stainless-OS":NT((t=globalThis.process.platform)!==null&&t!==void 0?t:"unknown"),"X-Stainless-Arch":RT((i=globalThis.process.arch)!==null&&i!==void 0?i:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(s=globalThis.process.version)!==null&&s!==void 0?s:"unknown"};const l=J5();return l?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ka,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${l.browser}`,"X-Stainless-Runtime-Version":l.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ka,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function J5(){if(typeof navigator>"u"||!navigator)return null;const n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:t}of n){const i=t.exec(navigator.userAgent);if(i){const s=i[1]||0,a=i[2]||0,l=i[3]||0;return{browser:e,version:`${s}.${a}.${l}`}}}return null}const RT=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",NT=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown");let bd;const j5=()=>bd??(bd=K5());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function W5(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function yS(...n){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...n)}function Q5(n){let e=Symbol.asyncIterator in n?n[Symbol.asyncIterator]():n[Symbol.iterator]();return yS({start(){},async pull(t){const{done:i,value:s}=await e.next();i?t.close():t.enqueue(s)},async cancel(){var t;await((t=e.return)===null||t===void 0?void 0:t.call(e))}})}function vS(n){if(n[Symbol.asyncIterator])return n;const e=n.getReader();return{async next(){try{const t=await e.read();return t!=null&&t.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){const t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function X5(n){var e,t;if(n===null||typeof n!="object")return;if(n[Symbol.asyncIterator]){await((t=(e=n[Symbol.asyncIterator]()).return)===null||t===void 0?void 0:t.call(e));return}const i=n.getReader(),s=i.cancel();i.releaseLock(),await s}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Z5=({headers:n,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const _S=()=>{var n;if(typeof File>"u"){const{process:e}=globalThis,t=typeof((n=e==null?void 0:e.versions)===null||n===void 0?void 0:n.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(t?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function tm(n,e,t){return _S(),new File(n,e??"unknown_file",t)}function eP(n){return(typeof n=="object"&&n!==null&&("name"in n&&n.name&&String(n.name)||"url"in n&&n.url&&String(n.url)||"filename"in n&&n.filename&&String(n.filename)||"path"in n&&n.path&&String(n.path))||"").split(/[\\/]/).pop()||void 0}const tP=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ES=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",nP=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&ES(n),iP=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function";async function rP(n,e,t){if(_S(),n=await n,nP(n))return n instanceof File?n:tm([await n.arrayBuffer()],n.name);if(iP(n)){const s=await n.blob();return e||(e=new URL(n.url).pathname.split(/[\\/]/).pop()),tm(await Pm(s),e,t)}const i=await Pm(n);if(e||(e=eP(n)),!(t!=null&&t.type)){const s=i.find(a=>typeof a=="object"&&"type"in a&&a.type);typeof s=="string"&&(t=Object.assign(Object.assign({},t),{type:s}))}return tm(i,e,t)}async function Pm(n){var e,t,i,s,a;let l=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)l.push(n);else if(ES(n))l.push(n instanceof Blob?n:await n.arrayBuffer());else if(tP(n))try{for(var c=!0,f=ki(n),h;h=await f.next(),e=h.done,!e;c=!0){s=h.value,c=!1;const y=s;l.push(...await Pm(y))}}catch(y){t={error:y}}finally{try{!c&&!e&&(i=f.return)&&await i.call(f)}finally{if(t)throw t.error}}else{const y=(a=n==null?void 0:n.constructor)===null||a===void 0?void 0:a.name;throw new Error(`Unexpected data type: ${typeof n}${y?`; constructor: ${y}`:""}${sP(n)}`)}return l}function sP(n){return typeof n!="object"||n===null?"":`; props: [${Object.getOwnPropertyNames(n).map(t=>`"${t}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class TS{constructor(e){this._client=e}}TS._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wS(n){return n.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const MT=Object.freeze(Object.create(null)),oP=(n=wS)=>(function(t,...i){if(t.length===1)return t[0];let s=!1;const a=[],l=t.reduce((y,E,T)=>{var w,C,b;/[?#]/.test(E)&&(s=!0);const x=i[T];let N=(s?encodeURIComponent:n)(""+x);return T!==i.length&&(x==null||typeof x=="object"&&x.toString===((b=Object.getPrototypeOf((C=Object.getPrototypeOf((w=x.hasOwnProperty)!==null&&w!==void 0?w:MT))!==null&&C!==void 0?C:MT))===null||b===void 0?void 0:b.toString))&&(N=x+"",a.push({start:y.length+E.length,length:N.length,error:`Value of type ${Object.prototype.toString.call(x).slice(8,-1)} is not a valid path parameter`})),y+E+(T===i.length?"":N)},""),c=l.split(/[?#]/,1)[0],f=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let h;for(;(h=f.exec(c))!==null;)a.push({start:h.index,length:h[0].length,error:`Value "${h[0]}" can't be safely passed as a path parameter`});if(a.sort((y,E)=>y.start-E.start),a.length>0){let y=0;const E=a.reduce((T,w)=>{const C=" ".repeat(w.start-y),b="^".repeat(w.length);return y=w.start+w.length,T+C+b},"");throw new gi(`Path parameters result in path with invalid segments:
${a.map(T=>T.error).join(`
`)}
${l}
${E}`)}return l}),Ad=oP(wS);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class SS extends TS{create(e,t){var i;const{api_version:s=this._client.apiVersion}=e,a=Zd(e,["api_version"]);if("model"in a&&"agent_config"in a)throw new gi("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in a&&"generation_config"in a)throw new gi("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Ad`/${s}/interactions`,Object.assign(Object.assign({body:a},t),{stream:(i=e.stream)!==null&&i!==void 0?i:!1}))}delete(e,t={},i){const{api_version:s=this._client.apiVersion}=t??{};return this._client.delete(Ad`/${s}/interactions/${e}`,i)}cancel(e,t={},i){const{api_version:s=this._client.apiVersion}=t??{};return this._client.post(Ad`/${s}/interactions/${e}/cancel`,i)}get(e,t={},i){var s;const a=t??{},{api_version:l=this._client.apiVersion}=a,c=Zd(a,["api_version"]);return this._client.get(Ad`/${l}/interactions/${e}`,Object.assign(Object.assign({query:c},i),{stream:(s=t==null?void 0:t.stream)!==null&&s!==void 0?s:!1}))}}SS._key=Object.freeze(["interactions"]);class bS extends SS{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function aP(n){let e=0;for(const s of n)e+=s.length;const t=new Uint8Array(e);let i=0;for(const s of n)t.set(s,i),i+=s.length;return t}let xd;function _g(n){let e;return(xd??(e=new globalThis.TextEncoder,xd=e.encode.bind(e)))(n)}let Cd;function kT(n){let e;return(Cd??(e=new globalThis.TextDecoder,Cd=e.decode.bind(e)))(n)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Nf{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const t=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?_g(e):e;this.buffer=aP([this.buffer,t]);const i=[];let s;for(;(s=lP(this.buffer,this.carriageReturnIndex))!=null;){if(s.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=s.index;continue}if(this.carriageReturnIndex!=null&&(s.index!==this.carriageReturnIndex+1||s.carriage)){i.push(kT(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const a=this.carriageReturnIndex!==null?s.preceding-1:s.preceding,l=kT(this.buffer.subarray(0,a));i.push(l),this.buffer=this.buffer.subarray(s.index),this.carriageReturnIndex=null}return i}flush(){return this.buffer.length?this.decode(`
`):[]}}Nf.NEWLINE_CHARS=new Set([`
`,"\r"]);Nf.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function lP(n,e){for(let s=e??0;s<n.length;s++){if(n[s]===10)return{preceding:s,index:s+1,carriage:!1};if(n[s]===13)return{preceding:s,index:s+1,carriage:!0}}return null}function uP(n){for(let i=0;i<n.length-1;i++){if(n[i]===10&&n[i+1]===10||n[i]===13&&n[i+1]===13)return i+2;if(n[i]===13&&n[i+1]===10&&i+3<n.length&&n[i+2]===13&&n[i+3]===10)return i+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ef={off:0,error:200,warn:300,info:400,debug:500},DT=(n,e,t)=>{if(n){if(G5(ef,n))return n;kn(t).warn(`${e} was set to ${JSON.stringify(n)}, expected one of ${JSON.stringify(Object.keys(ef))}`)}};function mu(){}function Id(n,e,t){return!e||ef[n]>ef[t]?mu:e[n].bind(e)}const cP={error:mu,warn:mu,info:mu,debug:mu};let PT=new WeakMap;function kn(n){var e;const t=n.logger,i=(e=n.logLevel)!==null&&e!==void 0?e:"off";if(!t)return cP;const s=PT.get(t);if(s&&s[0]===i)return s[1];const a={error:Id("error",t,i),warn:Id("warn",t,i),info:Id("info",t,i),debug:Id("debug",t,i)};return PT.set(t,[i,a]),a}const So=n=>(n.options&&(n.options=Object.assign({},n.options),delete n.options.headers),n.headers&&(n.headers=Object.fromEntries((n.headers instanceof Headers?[...n.headers]:Object.entries(n.headers)).map(([e,t])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":t]))),"retryOfRequestLogID"in n&&(n.retryOfRequestLogID&&(n.retryOf=n.retryOfRequestLogID),delete n.retryOfRequestLogID),n);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Oa{constructor(e,t,i){this.iterator=e,this.controller=t,this.client=i}static fromSSEResponse(e,t,i){let s=!1;const a=i?kn(i):console;function l(){return Mi(this,arguments,function*(){var f,h,y,E;if(s)throw new gi("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let T=!1;try{try{for(var w=!0,C=ki(dP(e,t)),b;b=yield Ke(C.next()),f=b.done,!f;w=!0){E=b.value,w=!1;const x=E;if(!T)if(x.data.startsWith("[DONE]")){T=!0;continue}else try{yield yield Ke(JSON.parse(x.data))}catch(N){throw a.error("Could not parse message into JSON:",x.data),a.error("From chunk:",x.raw),N}}}catch(x){h={error:x}}finally{try{!w&&!f&&(y=C.return)&&(yield Ke(y.call(C)))}finally{if(h)throw h.error}}T=!0}catch(x){if(Nm(x))return yield Ke(void 0);throw x}finally{T||t.abort()}})}return new Oa(l,t,i)}static fromReadableStream(e,t,i){let s=!1;function a(){return Mi(this,arguments,function*(){var f,h,y,E;const T=new Nf,w=vS(e);try{for(var C=!0,b=ki(w),x;x=yield Ke(b.next()),f=x.done,!f;C=!0){E=x.value,C=!1;const N=E;for(const z of T.decode(N))yield yield Ke(z)}}catch(N){h={error:N}}finally{try{!C&&!f&&(y=b.return)&&(yield Ke(y.call(b)))}finally{if(h)throw h.error}}for(const N of T.flush())yield yield Ke(N)})}function l(){return Mi(this,arguments,function*(){var f,h,y,E;if(s)throw new gi("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let T=!1;try{try{for(var w=!0,C=ki(a()),b;b=yield Ke(C.next()),f=b.done,!f;w=!0){E=b.value,w=!1;const x=E;T||x&&(yield yield Ke(JSON.parse(x)))}}catch(x){h={error:x}}finally{try{!w&&!f&&(y=C.return)&&(yield Ke(y.call(C)))}finally{if(h)throw h.error}}T=!0}catch(x){if(Nm(x))return yield Ke(void 0);throw x}finally{T||t.abort()}})}return new Oa(l,t,i)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],i=this.iterator(),s=a=>({next:()=>{if(a.length===0){const l=i.next();e.push(l),t.push(l)}return a.shift()}});return[new Oa(()=>s(e),this.controller,this.client),new Oa(()=>s(t),this.controller,this.client)]}toReadableStream(){const e=this;let t;return yS({async start(){t=e[Symbol.asyncIterator]()},async pull(i){try{const{value:s,done:a}=await t.next();if(a)return i.close();const l=_g(JSON.stringify(s)+`
`);i.enqueue(l)}catch(s){i.error(s)}},async cancel(){var i;await((i=t.return)===null||i===void 0?void 0:i.call(t))}})}}function dP(n,e){return Mi(this,arguments,function*(){var i,s,a,l;if(!n.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new gi("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new gi("Attempted to iterate over a response with no body");const c=new hP,f=new Nf,h=vS(n.body);try{for(var y=!0,E=ki(fP(h)),T;T=yield Ke(E.next()),i=T.done,!i;y=!0){l=T.value,y=!1;const w=l;for(const C of f.decode(w)){const b=c.decode(C);b&&(yield yield Ke(b))}}}catch(w){s={error:w}}finally{try{!y&&!i&&(a=E.return)&&(yield Ke(a.call(E)))}finally{if(s)throw s.error}}for(const w of f.flush()){const C=c.decode(w);C&&(yield yield Ke(C))}})}function fP(n){return Mi(this,arguments,function*(){var t,i,s,a;let l=new Uint8Array;try{for(var c=!0,f=ki(n),h;h=yield Ke(f.next()),t=h.done,!t;c=!0){a=h.value,c=!1;const y=a;if(y==null)continue;const E=y instanceof ArrayBuffer?new Uint8Array(y):typeof y=="string"?_g(y):y;let T=new Uint8Array(l.length+E.length);T.set(l),T.set(E,l.length),l=T;let w;for(;(w=uP(l))!==-1;)yield yield Ke(l.slice(0,w)),l=l.slice(w)}}catch(y){i={error:y}}finally{try{!c&&!t&&(s=f.return)&&(yield Ke(s.call(f)))}finally{if(i)throw i.error}}l.length>0&&(yield yield Ke(l))})}class hP{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,i,s]=pP(e,":");return s.startsWith(" ")&&(s=s.substring(1)),t==="event"?this.event=s:t==="data"&&this.data.push(s),null}}function pP(n,e){const t=n.indexOf(e);return t!==-1?[n.substring(0,t),e,n.substring(t+e.length)]:[n,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function mP(n,e){const{response:t,requestLogID:i,retryOfRequestLogID:s,startTime:a}=e,l=await(async()=>{var c;if(e.options.stream)return kn(n).debug("response",t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller,n):Oa.fromSSEResponse(t,e.controller,n);if(t.status===204)return null;if(e.options.__binaryResponse)return t;const f=t.headers.get("content-type"),h=(c=f==null?void 0:f.split(";")[0])===null||c===void 0?void 0:c.trim();return(h==null?void 0:h.includes("application/json"))||(h==null?void 0:h.endsWith("+json"))?t.headers.get("content-length")==="0"?void 0:await t.json():await t.text()})();return kn(n).debug(`[${i}] response parsed`,So({retryOfRequestLogID:s,url:t.url,status:t.status,body:l,durationMs:Date.now()-a})),l}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Eg extends Promise{constructor(e,t,i=mP){super(s=>{s(null)}),this.responsePromise=t,this.parseResponse=i,this.client=e}_thenUnwrap(e){return new Eg(this.client,this.responsePromise,async(t,i)=>e(await this.parseResponse(t,i),i))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const AS=Symbol("brand.privateNullableHeaders");function*gP(n){if(!n)return;if(AS in n){const{values:i,nulls:s}=n;yield*i.entries();for(const a of s)yield[a,null];return}let e=!1,t;n instanceof Headers?t=n.entries():IT(n)?t=n:(e=!0,t=Object.entries(n??{}));for(let i of t){const s=i[0];if(typeof s!="string")throw new TypeError("expected header name to be a string");const a=IT(i[1])?i[1]:[i[1]];let l=!1;for(const c of a)c!==void 0&&(e&&!l&&(l=!0,yield[s,null]),yield[s,c])}}const hu=n=>{const e=new Headers,t=new Set;for(const i of n){const s=new Set;for(const[a,l]of gP(i)){const c=a.toLowerCase();s.has(c)||(e.delete(a),s.add(c)),l===null?(e.delete(a),t.add(c)):(e.append(a,l),t.delete(c))}}return{[AS]:!0,values:e,nulls:t}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const nm=n=>{var e,t,i,s,a,l;if(typeof globalThis.process<"u")return(i=(t=(e=U2)===null||e===void 0?void 0:e[n])===null||t===void 0?void 0:t.trim())!==null&&i!==void 0?i:void 0;if(typeof globalThis.Deno<"u")return(l=(a=(s=globalThis.Deno.env)===null||s===void 0?void 0:s.get)===null||a===void 0?void 0:a.call(s,n))===null||l===void 0?void 0:l.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var xS;class Mf{constructor(e){var t,i,s,a,l,c,f,{baseURL:h=nm("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:y=(t=nm("GEMINI_API_KEY"))!==null&&t!==void 0?t:null,apiVersion:E="v1beta"}=e,T=Zd(e,["baseURL","apiKey","apiVersion"]);const w=Object.assign(Object.assign({apiKey:y,apiVersion:E},T),{baseURL:h||"https://generativelanguage.googleapis.com"});this.baseURL=w.baseURL,this.timeout=(i=w.timeout)!==null&&i!==void 0?i:Mf.DEFAULT_TIMEOUT,this.logger=(s=w.logger)!==null&&s!==void 0?s:console;const C="warn";this.logLevel=C,this.logLevel=(l=(a=DT(w.logLevel,"ClientOptions.logLevel",this))!==null&&a!==void 0?a:DT(nm("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&l!==void 0?l:C,this.fetchOptions=w.fetchOptions,this.maxRetries=(c=w.maxRetries)!==null&&c!==void 0?c:2,this.fetch=(f=w.fetch)!==null&&f!==void 0?f:W5(),this.encoder=Z5,this._options=w,this.apiKey=y,this.apiVersion=E,this.clientAdapter=w.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:t}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!t.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const t=hu([e.headers]);if(!(t.values.has("authorization")||t.values.has("x-goog-api-key"))){if(this.apiKey)return hu([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return hu([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([t,i])=>typeof i<"u").map(([t,i])=>{if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")return`${encodeURIComponent(t)}=${encodeURIComponent(i)}`;if(i===null)return`${encodeURIComponent(t)}=`;throw new gi(`Cannot stringify type ${typeof i}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${ka}`}defaultIdempotencyKey(){return`stainless-node-retry-${U5()}`}makeStatusError(e,t,i,s){return Dn.generate(e,t,i,s)}buildURL(e,t,i){const s=!this.baseURLOverridden()&&i||this.baseURL,a=O5(e)?new URL(e):new URL(s+(s.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),l=this.defaultQuery();return B5(l)||(t=Object.assign(Object.assign({},l),t)),typeof t=="object"&&t&&!Array.isArray(t)&&(a.search=this.stringifyQuery(t)),a.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const t=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${t}`}}async prepareRequest(e,{url:t,options:i}){}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,i){return this.request(Promise.resolve(i).then(s=>Object.assign({method:e,path:t},s)))}request(e,t=null){return new Eg(this,this.makeRequest(e,t,void 0))}async makeRequest(e,t,i){var s,a,l;const c=await e,f=(s=c.maxRetries)!==null&&s!==void 0?s:this.maxRetries;t==null&&(t=f),await this.prepareOptions(c);const{req:h,url:y,timeout:E}=await this.buildRequest(c,{retryCount:f-t});await this.prepareRequest(h,{url:y,options:c});const T="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),w=i===void 0?"":`, retryOf: ${i}`,C=Date.now();if(kn(this).debug(`[${T}] sending request`,So({retryOfRequestLogID:i,method:c.method,url:y,options:c,headers:h.headers})),!((a=c.signal)===null||a===void 0)&&a.aborted)throw new km;const b=new AbortController,x=await this.fetchWithTimeout(y,h,E,b).catch(Mm),N=Date.now();if(x instanceof globalThis.Error){const B=`retrying, ${t} attempts remaining`;if(!((l=c.signal)===null||l===void 0)&&l.aborted)throw new km;const Y=Nm(x)||/timed? ?out/i.test(String(x)+("cause"in x?String(x.cause):""));if(t)return kn(this).info(`[${T}] connection ${Y?"timed out":"failed"} - ${B}`),kn(this).debug(`[${T}] connection ${Y?"timed out":"failed"} (${B})`,So({retryOfRequestLogID:i,url:y,durationMs:N-C,message:x.message})),this.retryRequest(c,t,i??T);throw kn(this).info(`[${T}] connection ${Y?"timed out":"failed"} - error; no more retries left`),kn(this).debug(`[${T}] connection ${Y?"timed out":"failed"} (error; no more retries left)`,So({retryOfRequestLogID:i,url:y,durationMs:N-C,message:x.message})),Y?new lS:new Rf({cause:x})}const z=`[${T}${w}] ${h.method} ${y} ${x.ok?"succeeded":"failed"} with status ${x.status} in ${N-C}ms`;if(!x.ok){const B=await this.shouldRetry(x);if(t&&B){const k=`retrying, ${t} attempts remaining`;return await X5(x.body),kn(this).info(`${z} - ${k}`),kn(this).debug(`[${T}] response error (${k})`,So({retryOfRequestLogID:i,url:x.url,status:x.status,headers:x.headers,durationMs:N-C})),this.retryRequest(c,t,i??T,x.headers)}const Y=B?"error; no more retries left":"error; not retryable";kn(this).info(`${z} - ${Y}`);const J=await x.text().catch(k=>Mm(k).message),$=q5(J),L=$?void 0:J;throw kn(this).debug(`[${T}] response error (${Y})`,So({retryOfRequestLogID:i,url:x.url,status:x.status,headers:x.headers,message:L,durationMs:Date.now()-C})),this.makeStatusError(x.status,$,L,x.headers)}return kn(this).info(z),kn(this).debug(`[${T}] response start`,So({retryOfRequestLogID:i,url:x.url,status:x.status,headers:x.headers,durationMs:N-C})),{response:x,options:c,controller:b,requestLogID:T,retryOfRequestLogID:i,startTime:C}}async fetchWithTimeout(e,t,i,s){const a=t||{},{signal:l,method:c}=a,f=Zd(a,["signal","method"]),h=this._makeAbort(s);l&&l.addEventListener("abort",h,{once:!0});const y=setTimeout(h,i),E=globalThis.ReadableStream&&f.body instanceof globalThis.ReadableStream||typeof f.body=="object"&&f.body!==null&&Symbol.asyncIterator in f.body,T=Object.assign(Object.assign(Object.assign({signal:s.signal},E?{duplex:"half"}:{}),{method:"GET"}),f);c&&(T.method=c.toUpperCase());try{return await this.fetch.call(void 0,e,T)}finally{clearTimeout(y)}}async shouldRetry(e){const t=e.headers.get("x-should-retry");return t==="true"?!0:t==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,t,i,s){var a;let l;const c=s==null?void 0:s.get("retry-after-ms");if(c){const h=parseFloat(c);Number.isNaN(h)||(l=h)}const f=s==null?void 0:s.get("retry-after");if(f&&!l){const h=parseFloat(f);Number.isNaN(h)?l=Date.parse(f)-Date.now():l=h*1e3}if(!(l&&0<=l&&l<60*1e3)){const h=(a=e.maxRetries)!==null&&a!==void 0?a:this.maxRetries;l=this.calculateDefaultRetryTimeoutMillis(t,h)}return await Y5(l),this.makeRequest(e,t-1,i)}calculateDefaultRetryTimeoutMillis(e,t){const a=t-e,l=Math.min(.5*Math.pow(2,a),8),c=1-Math.random()*.25;return l*c*1e3}async buildRequest(e,{retryCount:t=0}={}){var i,s,a;const l=Object.assign({},e),{method:c,path:f,query:h,defaultBaseURL:y}=l,E=this.buildURL(f,h,y);"timeout"in l&&H5("timeout",l.timeout),l.timeout=(i=l.timeout)!==null&&i!==void 0?i:this.timeout;const{bodyHeaders:T,body:w}=this.buildBody({options:l}),C=await this.buildHeaders({options:e,method:c,bodyHeaders:T,retryCount:t});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:c,headers:C},l.signal&&{signal:l.signal}),globalThis.ReadableStream&&w instanceof globalThis.ReadableStream&&{duplex:"half"}),w&&{body:w}),(s=this.fetchOptions)!==null&&s!==void 0?s:{}),(a=l.fetchOptions)!==null&&a!==void 0?a:{}),url:E,timeout:l.timeout}}async buildHeaders({options:e,method:t,bodyHeaders:i,retryCount:s}){let a={};this.idempotencyHeader&&t!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=e.idempotencyKey);const l=await this.authHeaders(e);let c=hu([a,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(s)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),j5()),this._options.defaultHeaders,i,e.headers,l]);return this.validateHeaders(c),c.values}_makeAbort(e){return()=>e.abort()}buildBody({options:{body:e,headers:t}}){if(!e)return{bodyHeaders:void 0,body:void 0};const i=hu([t]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&i.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:Q5(e)}:this.encoder({body:e,headers:i})}}Mf.DEFAULT_TIMEOUT=6e4;class cn extends Mf{constructor(){super(...arguments),this.interactions=new bS(this)}}xS=cn;cn.GeminiNextGenAPIClient=xS;cn.GeminiNextGenAPIClientError=gi;cn.APIError=Dn;cn.APIConnectionError=Rf;cn.APIConnectionTimeoutError=lS;cn.APIUserAbortError=km;cn.NotFoundError=fS;cn.ConflictError=hS;cn.RateLimitError=mS;cn.BadRequestError=uS;cn.AuthenticationError=cS;cn.InternalServerError=gS;cn.PermissionDeniedError=dS;cn.UnprocessableEntityError=pS;cn.toFile=rP;cn.Interactions=bS;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function yP(n,e){const t={},i=p(n,["name"]);return i!=null&&m(t,["_url","name"],i),t}function vP(n,e){const t={},i=p(n,["name"]);return i!=null&&m(t,["_url","name"],i),t}function _P(n,e){const t={},i=p(n,["sdkHttpResponse"]);return i!=null&&m(t,["sdkHttpResponse"],i),t}function EP(n,e){const t={},i=p(n,["sdkHttpResponse"]);return i!=null&&m(t,["sdkHttpResponse"],i),t}function TP(n,e,t){const i={};if(p(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const s=p(n,["tunedModelDisplayName"]);if(e!==void 0&&s!=null&&m(e,["displayName"],s),p(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const a=p(n,["epochCount"]);e!==void 0&&a!=null&&m(e,["tuningTask","hyperparameters","epochCount"],a);const l=p(n,["learningRateMultiplier"]);if(l!=null&&m(i,["tuningTask","hyperparameters","learningRateMultiplier"],l),p(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(p(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(p(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");if(p(n,["tuningMode"])!==void 0)throw new Error("tuningMode parameter is not supported in Gemini API.");if(p(n,["customBaseModel"])!==void 0)throw new Error("customBaseModel parameter is not supported in Gemini API.");const c=p(n,["batchSize"]);e!==void 0&&c!=null&&m(e,["tuningTask","hyperparameters","batchSize"],c);const f=p(n,["learningRate"]);if(e!==void 0&&f!=null&&m(e,["tuningTask","hyperparameters","learningRate"],f),p(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(p(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");if(p(n,["baseTeacherModel"])!==void 0)throw new Error("baseTeacherModel parameter is not supported in Gemini API.");if(p(n,["tunedTeacherModelSource"])!==void 0)throw new Error("tunedTeacherModelSource parameter is not supported in Gemini API.");if(p(n,["sftLossWeightMultiplier"])!==void 0)throw new Error("sftLossWeightMultiplier parameter is not supported in Gemini API.");if(p(n,["outputUri"])!==void 0)throw new Error("outputUri parameter is not supported in Gemini API.");if(p(n,["encryptionSpec"])!==void 0)throw new Error("encryptionSpec parameter is not supported in Gemini API.");return i}function wP(n,e,t){const i={};let s=p(t,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const $=p(n,["validationDataset"]);e!==void 0&&$!=null&&m(e,["supervisedTuningSpec"],im($))}else if(s==="PREFERENCE_TUNING"){const $=p(n,["validationDataset"]);e!==void 0&&$!=null&&m(e,["preferenceOptimizationSpec"],im($))}else if(s==="DISTILLATION"){const $=p(n,["validationDataset"]);e!==void 0&&$!=null&&m(e,["distillationSpec"],im($))}const a=p(n,["tunedModelDisplayName"]);e!==void 0&&a!=null&&m(e,["tunedModelDisplayName"],a);const l=p(n,["description"]);e!==void 0&&l!=null&&m(e,["description"],l);let c=p(t,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const $=p(n,["epochCount"]);e!==void 0&&$!=null&&m(e,["supervisedTuningSpec","hyperParameters","epochCount"],$)}else if(c==="PREFERENCE_TUNING"){const $=p(n,["epochCount"]);e!==void 0&&$!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],$)}else if(c==="DISTILLATION"){const $=p(n,["epochCount"]);e!==void 0&&$!=null&&m(e,["distillationSpec","hyperParameters","epochCount"],$)}let f=p(t,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const $=p(n,["learningRateMultiplier"]);e!==void 0&&$!=null&&m(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],$)}else if(f==="PREFERENCE_TUNING"){const $=p(n,["learningRateMultiplier"]);e!==void 0&&$!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],$)}else if(f==="DISTILLATION"){const $=p(n,["learningRateMultiplier"]);e!==void 0&&$!=null&&m(e,["distillationSpec","hyperParameters","learningRateMultiplier"],$)}let h=p(t,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const $=p(n,["exportLastCheckpointOnly"]);e!==void 0&&$!=null&&m(e,["supervisedTuningSpec","exportLastCheckpointOnly"],$)}else if(h==="PREFERENCE_TUNING"){const $=p(n,["exportLastCheckpointOnly"]);e!==void 0&&$!=null&&m(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],$)}else if(h==="DISTILLATION"){const $=p(n,["exportLastCheckpointOnly"]);e!==void 0&&$!=null&&m(e,["distillationSpec","exportLastCheckpointOnly"],$)}let y=p(t,["config","method"]);if(y===void 0&&(y="SUPERVISED_FINE_TUNING"),y==="SUPERVISED_FINE_TUNING"){const $=p(n,["adapterSize"]);e!==void 0&&$!=null&&m(e,["supervisedTuningSpec","hyperParameters","adapterSize"],$)}else if(y==="PREFERENCE_TUNING"){const $=p(n,["adapterSize"]);e!==void 0&&$!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],$)}else if(y==="DISTILLATION"){const $=p(n,["adapterSize"]);e!==void 0&&$!=null&&m(e,["distillationSpec","hyperParameters","adapterSize"],$)}let E=p(t,["config","method"]);if(E===void 0&&(E="SUPERVISED_FINE_TUNING"),E==="SUPERVISED_FINE_TUNING"){const $=p(n,["tuningMode"]);e!==void 0&&$!=null&&m(e,["supervisedTuningSpec","tuningMode"],$)}const T=p(n,["customBaseModel"]);e!==void 0&&T!=null&&m(e,["customBaseModel"],T);let w=p(t,["config","method"]);if(w===void 0&&(w="SUPERVISED_FINE_TUNING"),w==="SUPERVISED_FINE_TUNING"){const $=p(n,["batchSize"]);e!==void 0&&$!=null&&m(e,["supervisedTuningSpec","hyperParameters","batchSize"],$)}let C=p(t,["config","method"]);if(C===void 0&&(C="SUPERVISED_FINE_TUNING"),C==="SUPERVISED_FINE_TUNING"){const $=p(n,["learningRate"]);e!==void 0&&$!=null&&m(e,["supervisedTuningSpec","hyperParameters","learningRate"],$)}const b=p(n,["labels"]);e!==void 0&&b!=null&&m(e,["labels"],b);const x=p(n,["beta"]);e!==void 0&&x!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","beta"],x);const N=p(n,["baseTeacherModel"]);e!==void 0&&N!=null&&m(e,["distillationSpec","baseTeacherModel"],N);const z=p(n,["tunedTeacherModelSource"]);e!==void 0&&z!=null&&m(e,["distillationSpec","tunedTeacherModelSource"],z);const B=p(n,["sftLossWeightMultiplier"]);e!==void 0&&B!=null&&m(e,["distillationSpec","hyperParameters","sftLossWeightMultiplier"],B);const Y=p(n,["outputUri"]);e!==void 0&&Y!=null&&m(e,["outputUri"],Y);const J=p(n,["encryptionSpec"]);return e!==void 0&&J!=null&&m(e,["encryptionSpec"],J),i}function SP(n,e){const t={},i=p(n,["baseModel"]);i!=null&&m(t,["baseModel"],i);const s=p(n,["preTunedModel"]);s!=null&&m(t,["preTunedModel"],s);const a=p(n,["trainingDataset"]);a!=null&&PP(a);const l=p(n,["config"]);return l!=null&&TP(l,t),t}function bP(n,e){const t={},i=p(n,["baseModel"]);i!=null&&m(t,["baseModel"],i);const s=p(n,["preTunedModel"]);s!=null&&m(t,["preTunedModel"],s);const a=p(n,["trainingDataset"]);a!=null&&LP(a,t,e);const l=p(n,["config"]);return l!=null&&wP(l,t,e),t}function AP(n,e){const t={},i=p(n,["name"]);return i!=null&&m(t,["_url","name"],i),t}function xP(n,e){const t={},i=p(n,["name"]);return i!=null&&m(t,["_url","name"],i),t}function CP(n,e,t){const i={},s=p(n,["pageSize"]);e!==void 0&&s!=null&&m(e,["_query","pageSize"],s);const a=p(n,["pageToken"]);e!==void 0&&a!=null&&m(e,["_query","pageToken"],a);const l=p(n,["filter"]);return e!==void 0&&l!=null&&m(e,["_query","filter"],l),i}function IP(n,e,t){const i={},s=p(n,["pageSize"]);e!==void 0&&s!=null&&m(e,["_query","pageSize"],s);const a=p(n,["pageToken"]);e!==void 0&&a!=null&&m(e,["_query","pageToken"],a);const l=p(n,["filter"]);return e!==void 0&&l!=null&&m(e,["_query","filter"],l),i}function RP(n,e){const t={},i=p(n,["config"]);return i!=null&&CP(i,t),t}function NP(n,e){const t={},i=p(n,["config"]);return i!=null&&IP(i,t),t}function MP(n,e){const t={},i=p(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const s=p(n,["nextPageToken"]);s!=null&&m(t,["nextPageToken"],s);const a=p(n,["tunedModels"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>CS(c))),m(t,["tuningJobs"],l)}return t}function kP(n,e){const t={},i=p(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const s=p(n,["nextPageToken"]);s!=null&&m(t,["nextPageToken"],s);const a=p(n,["tuningJobs"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>Lm(c))),m(t,["tuningJobs"],l)}return t}function DP(n,e){const t={},i=p(n,["name"]);i!=null&&m(t,["model"],i);const s=p(n,["name"]);return s!=null&&m(t,["endpoint"],s),t}function PP(n,e){const t={};if(p(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(p(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=p(n,["examples"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>a)),m(t,["examples","examples"],s)}return t}function LP(n,e,t){const i={};let s=p(t,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const l=p(n,["gcsUri"]);e!==void 0&&l!=null&&m(e,["supervisedTuningSpec","trainingDatasetUri"],l)}else if(s==="PREFERENCE_TUNING"){const l=p(n,["gcsUri"]);e!==void 0&&l!=null&&m(e,["preferenceOptimizationSpec","trainingDatasetUri"],l)}else if(s==="DISTILLATION"){const l=p(n,["gcsUri"]);e!==void 0&&l!=null&&m(e,["distillationSpec","promptDatasetUri"],l)}let a=p(t,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const l=p(n,["vertexDatasetResource"]);e!==void 0&&l!=null&&m(e,["supervisedTuningSpec","trainingDatasetUri"],l)}else if(a==="PREFERENCE_TUNING"){const l=p(n,["vertexDatasetResource"]);e!==void 0&&l!=null&&m(e,["preferenceOptimizationSpec","trainingDatasetUri"],l)}else if(a==="DISTILLATION"){const l=p(n,["vertexDatasetResource"]);e!==void 0&&l!=null&&m(e,["distillationSpec","promptDatasetUri"],l)}if(p(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function CS(n,e){const t={},i=p(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const s=p(n,["name"]);s!=null&&m(t,["name"],s);const a=p(n,["state"]);a!=null&&m(t,["state"],H1(a));const l=p(n,["createTime"]);l!=null&&m(t,["createTime"],l);const c=p(n,["tuningTask","startTime"]);c!=null&&m(t,["startTime"],c);const f=p(n,["tuningTask","completeTime"]);f!=null&&m(t,["endTime"],f);const h=p(n,["updateTime"]);h!=null&&m(t,["updateTime"],h);const y=p(n,["description"]);y!=null&&m(t,["description"],y);const E=p(n,["baseModel"]);E!=null&&m(t,["baseModel"],E);const T=p(n,["_self"]);return T!=null&&m(t,["tunedModel"],DP(T)),t}function Lm(n,e){const t={},i=p(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const s=p(n,["name"]);s!=null&&m(t,["name"],s);const a=p(n,["state"]);a!=null&&m(t,["state"],H1(a));const l=p(n,["createTime"]);l!=null&&m(t,["createTime"],l);const c=p(n,["startTime"]);c!=null&&m(t,["startTime"],c);const f=p(n,["endTime"]);f!=null&&m(t,["endTime"],f);const h=p(n,["updateTime"]);h!=null&&m(t,["updateTime"],h);const y=p(n,["error"]);y!=null&&m(t,["error"],y);const E=p(n,["description"]);E!=null&&m(t,["description"],E);const T=p(n,["baseModel"]);T!=null&&m(t,["baseModel"],T);const w=p(n,["tunedModel"]);w!=null&&m(t,["tunedModel"],w);const C=p(n,["preTunedModel"]);C!=null&&m(t,["preTunedModel"],C);const b=p(n,["supervisedTuningSpec"]);b!=null&&m(t,["supervisedTuningSpec"],b);const x=p(n,["preferenceOptimizationSpec"]);x!=null&&m(t,["preferenceOptimizationSpec"],x);const N=p(n,["distillationSpec"]);N!=null&&m(t,["distillationSpec"],N);const z=p(n,["tuningDataStats"]);z!=null&&m(t,["tuningDataStats"],z);const B=p(n,["encryptionSpec"]);B!=null&&m(t,["encryptionSpec"],B);const Y=p(n,["partnerModelTuningSpec"]);Y!=null&&m(t,["partnerModelTuningSpec"],Y);const J=p(n,["customBaseModel"]);J!=null&&m(t,["customBaseModel"],J);const $=p(n,["experiment"]);$!=null&&m(t,["experiment"],$);const L=p(n,["labels"]);L!=null&&m(t,["labels"],L);const V=p(n,["outputUri"]);V!=null&&m(t,["outputUri"],V);const k=p(n,["pipelineJob"]);k!=null&&m(t,["pipelineJob"],k);const H=p(n,["serviceAccount"]);H!=null&&m(t,["serviceAccount"],H);const K=p(n,["tunedModelDisplayName"]);K!=null&&m(t,["tunedModelDisplayName"],K);const U=p(n,["veoTuningSpec"]);return U!=null&&m(t,["veoTuningSpec"],U),t}function UP(n,e){const t={},i=p(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const s=p(n,["name"]);s!=null&&m(t,["name"],s);const a=p(n,["metadata"]);a!=null&&m(t,["metadata"],a);const l=p(n,["done"]);l!=null&&m(t,["done"],l);const c=p(n,["error"]);return c!=null&&m(t,["error"],c),t}function im(n,e){const t={},i=p(n,["gcsUri"]);i!=null&&m(t,["validationDatasetUri"],i);const s=p(n,["vertexDatasetResource"]);return s!=null&&m(t,["validationDatasetUri"],s),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class VP extends $r{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Oo(Br.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(t),t),this.get=async t=>await this.getInternal(t),this.tune=async t=>{var i;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const s={tunedModelName:t.baseModel};!((i=t.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(s.checkpointId=t.config.preTunedModelCheckpointId);const a=Object.assign(Object.assign({},t),{preTunedModel:s});return a.baseModel=void 0,await this.tuneInternal(a)}else{const s=Object.assign({},t);return await this.tuneInternal(s)}else{const s=Object.assign({},t),a=await this.tuneMldevInternal(s);let l="";return a.metadata!==void 0&&a.metadata.tunedModel!==void 0?l=a.metadata.tunedModel:a.name!==void 0&&a.name.includes("/operations/")&&(l=a.name.split("/operations/")[0]),{name:l,state:wm.JOB_STATE_QUEUED}}}}async getInternal(e){var t,i,s,a;let l,c="",f={};if(this.apiClient.isVertexAI()){const h=xP(e);return c=Pe("{name}",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),l.then(y=>Lm(y))}else{const h=AP(e);return c=Pe("{name}",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),l.then(y=>CS(y))}}async listInternal(e){var t,i,s,a;let l,c="",f={};if(this.apiClient.isVertexAI()){const h=NP(e);return c=Pe("tuningJobs",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),l.then(y=>{const E=kP(y),T=new aT;return Object.assign(T,E),T})}else{const h=RP(e);return c=Pe("tunedModels",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),l.then(y=>{const E=MP(y),T=new aT;return Object.assign(T,E),T})}}async cancel(e){var t,i,s,a;let l,c="",f={};if(this.apiClient.isVertexAI()){const h=vP(e);return c=Pe("{name}:cancel",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),l.then(y=>{const E=EP(y),T=new lT;return Object.assign(T,E),T})}else{const h=yP(e);return c=Pe("{name}:cancel",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:y.headers},T})),l.then(y=>{const E=_P(y),T=new lT;return Object.assign(T,E),T})}}async tuneInternal(e){var t,i;let s,a="",l={};if(this.apiClient.isVertexAI()){const c=bP(e,e);return a=Pe("tuningJobs",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:f.headers},y})),s.then(f=>Lm(f))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,i;let s,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=SP(e);return a=Pe("tunedModels",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:f.headers},y})),s.then(f=>UP(f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class OP{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const zP=1024*1024*8,FP=3,BP=1e3,GP=2,tf="x-goog-upload-status";async function HP(n,e,t){var i;const s=await IS(n,e,t),a=await(s==null?void 0:s.json());if(((i=s==null?void 0:s.headers)===null||i===void 0?void 0:i[tf])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return a.file}async function qP(n,e,t){var i;const s=await IS(n,e,t),a=await(s==null?void 0:s.json());if(((i=s==null?void 0:s.headers)===null||i===void 0?void 0:i[tf])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const l=V1(a),c=new hg;return Object.assign(c,l),c}async function IS(n,e,t){var i,s;let a=0,l=0,c=new bm(new Response),f="upload";for(a=n.size;l<a;){const h=Math.min(zP,a-l),y=n.slice(l,l+h);l+h>=a&&(f+=", finalize");let E=0,T=BP;for(;E<FP&&(c=await t.request({path:"",body:y,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":f,"X-Goog-Upload-Offset":String(l),"Content-Length":String(h)}}}),!(!((i=c==null?void 0:c.headers)===null||i===void 0)&&i[tf]));)E++,await $P(T),T=T*GP;if(l+=h,((s=c==null?void 0:c.headers)===null||s===void 0?void 0:s[tf])!=="active")break;if(a<=l)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return c}async function YP(n){return{size:n.size,type:n.type}}function $P(n){return new Promise(e=>setTimeout(e,n))}class KP{async upload(e,t,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await HP(e,t,i)}async uploadToFileSearchStore(e,t,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await qP(e,t,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await YP(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class JP{create(e,t,i){return new jP(e,t,i)}}class jP{constructor(e,t,i){this.url=e,this.headers=t,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const LT="x-goog-api-key";class WP{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(e.get(LT)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(LT,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const QP="gl-node/";class XP{get interactions(){var e;if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const t=this.httpOptions;t!=null&&t.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const i=new cn({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:t==null?void 0:t.timeout,maxRetries:(e=t==null?void 0:t.retryOptions)===null||e===void 0?void 0:e.attempts});return this._interactions=i.interactions,this._interactions}constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const i=F2(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const s=new WP(this.apiKey);this.apiClient=new YD({auth:s,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:QP+"web",uploader:new KP,downloader:new OP}),this.models=new c5(this.apiClient),this.live=new r5(this.apiClient,s,new JP),this.batches=new gN(this.apiClient),this.chats=new QN(this.models,this.apiClient),this.caches=new JN(this.apiClient),this.files=new uM(this.apiClient),this.operations=new d5(this.apiClient),this.authTokens=new C5(this.apiClient),this.tunings=new VP(this.apiClient),this.fileSearchStores=new L5(this.apiClient)}}var or=(n=>(n.ECOMMERCE="E-commerce",n.FOOD_DELIVERY="Food Delivery",n.FITNESS="Fitness & Health",n.SOCIAL="Social Networking",n.TRAVEL="Travel & Booking",n.FINANCE="Finance & Banking",n.ENTERTAINMENT="Entertainment & Media",n.CUSTOM="Custom",n))(or||{});const ZP=`

### DESIGN MASTERY DIRECTIVES (2026)
You must apply these exact design rules. No deviations.

---

## A. LAYOUT & STRUCTURE (THE "BENTO" METHOD)

**Core Layout Philosophy: The Bento Box**
- Treat every screen as a composition of distinct rectangular containers (cards).
- **Asymmetry is key**: Never use a perfect 50/50 split. Use 60/40 or 70/30 ratios.
- **Span variants**: In grids, make one card span 2 columns (col-span-2) to break visual monotony.

**The 8-Point Grid (LOCKED):**
- **Margins**: \`px-5\` (20px) on ALL screens.
- **Card Padding**: \`p-5\` (20px) standard. \`p-6\` for hero cards.
- **Gaps**: \`gap-3\` (12px) for tight grids. \`space-y-8\` (32px) between major sections.
- **Border Radius**: \`rounded-3xl\` (24px) for cards. \`rounded-2xl\` (16px) for inner boxes.

---

## B. TYPOGRAPHY (LOCKED SCALE)

**Type Hierarchy (Use exact Tailwind classes):**
1. **Hero/Display**: \`text-4xl font-black tracking-tighter leading-[0.9]\` (Max 1 per screen)
2. **Screen Title**: \`text-2xl font-bold tracking-tight text-white\`
3. **Card Title**: \`text-lg font-semibold text-zinc-100 leading-tight\`
4. **Section Header**: \`text-xs font-bold uppercase tracking-widest text-zinc-500 mb-4\`
5. **Body**: \`text-[15px] font-normal text-zinc-400 leading-relaxed\` (NOT 14px - 15px is the new standard)
6. **Meta/Label**: \`text-xs font-medium text-zinc-500\`

**Typography Rules:**
- **Sentence Case**: Use sentence case for almost everything. UPPERCASE only for micro-labels.
- **Contrast**: Headings = White. Body = Zinc-400. Meta = Zinc-600.
- **Numbers**: Use \`font-mono\` or \`tracking-tighter\` for data/pricing to make it stand out.

---

## C. COLOR & DEPTH (DARK MODE DEFAULT)

**Surface System:**
- **Background**: \`bg-[#050505]\` (Almost black, warmer than pure black)
- **Surface 1 (Cards)**: \`bg-[#09090b]\` with \`border border-white/[0.06]\`
- **Surface 2 (Interactive)**: \`bg-white/[0.03] hover:bg-white/[0.06]\`
- **Surface 3 (Highlight)**: \`bg-white/[0.08]\`

**Accent Usage:**
- Use your ONE accent color sparingly.
- **Primary Action**: Solid accent color + text-white/black.
- **Active State**: 10% opacity accent background + accent text.
- **Glow**: Subtle shadow matching accent color (e.g., \`shadow-[0_0_20px_rgba(var(--accent),0.3)]\`).

---

## D. COMPONENT STANDARDS (MODERN 2026)

**1. Buttons & Actions:**
- Height: 48px standard. 
- Shape: \`rounded-xl\` (smooth corners).
- **Noise Texture**: Add subtle noise texture to primary buttons if possible for tactile feel.

**2. Cards (The "Glass" Touch):**
- Standard: Solid \`bg-[#09090b]\`.
- Featured/Hero: Gradient background + glass overlay effect.
- **Stroke**: discrete \`border-t border-white/10\` inner highlight on all cards.

**3. Input Fields:**
- \`h-12 bg-zinc-900/50 border border-white/10 rounded-xl px-4 text-sm focus:border-white/20 transition-all\`.
- Never use default outlines.

**4. Images & Media:**
- Always \`rounded-2xl\`.
- Aspect ratios: \`aspect-[4/3]\` or \`aspect-[3/4]\`. Avoid 16:9 unless it's video.

---

## E. VISUAL DATA (SIMPLIFIED)

**Don't over-engineer charts with CSS. Keep it iconic.**
- **Progress Bars**: \`h-2 bg-zinc-800 rounded-full overflow-hidden\`.
- **Trend Pills**: \`bg-green-500/10 text-green-400 px-2 py-0.5 rounded-full text-xs font-medium inline-flex items-center gap-1\`.
- **Stat Grid**: 2x2 grid of small cards is better than one big complex chart.

---

## F. UX MICRO-PATTERNS

- **"Load More"**: Gradient fade at bottom of lists.
- **Skeleton Loading**: \`animate-pulse bg-zinc-800 rounded\`.
- **Empty States**: Minimalist SVG icon + "No [items] found" + "Create [Item]" button.
- **Tap Targets**: Top-right actions always 44x44px minimal.

**Social Media:**
- Infinite scroll feed. Easy post/share creation. Like/comment/share.
- Smart notifications. Granular privacy controls. Report/block/mute.

**Productivity:**
- Quick capture (fast input). Tags/folders/search organization.
- Reminders. Cross-device sync. Full offline functionality. Multiple export formats.

**Finance/Banking:**
- Biometric/2FA security indicators. Balance dashboard. Transaction lists.
- Unusual activity alerts, bills due. Legal disclaimers. Clear data visualization.

**Food Delivery:**
- Restaurant/menu browsing. Cart with customization. Order tracking with map.
- Estimated delivery time. Rating after delivery. Reorder shortcuts.

**Travel/Booking:**
- Search with dates/destination filters. Price comparison. Booking confirmation.
- Itinerary view. Maps integration. Reviews and photos.

**Entertainment/Media:**
- Content discovery feed. Categories/genres browsing. Watchlist/favorites.
- Playback controls. Recommendations. Download for offline.

---

## M. CONVERSION & ENGAGEMENT DESIGN

**Call-to-Action:**
- Place above fold. Use action-oriented copy ("Start Free Trial", not "Submit").
- One primary CTA per screen. Make it the most visually dominant element.

**Friction Reduction:**
- Social login over long forms. Smart defaults. Autofill support.
- Progressive profiling (collect details over time, not all at once).
- Save user progress  never lose work.

**Social Proof:**
- User testimonials near conversion points.
- Rating/review scores. User count ("Join 100,000+ users").
- Trust badges for security.

**Gamification (when appropriate):**
- Progress bars, badges, streaks, leaderboards.
- Use to encourage positive behavior, never manipulatively.

---

## N. QUALITY CHECKLIST (APPLY TO EVERY GENERATED SCREEN)

Before finalizing any screen, ensure:
1.  Clear visual hierarchy  primary action identifiable in 1 second.
2.  Consistent spacing on the 8px grid.
3.  Typography follows the type scale (max 4 sizes per screen).
4.  Colors follow 60-30-10 rule with semantic meaning.
5.  All text meets WCAG AA contrast (4.5:1 minimum).
6.  Touch targets  44x44px for all interactive elements.
7.  Realistic content (no "Lorem Ipsum" or "Item 1").
8.  Proper empty/loading/error state consideration.
9.  Navigation consistent across all main screens.
10.  Component styles are consistent (buttons, cards, lists match).
11.  Layout uses proper whitespace  never feels cramped.
12.  App-type specific content and features are relevant.

`,UT={"E-commerce":`
    Focus on: Product imagery (large, high-quality), category filters, price display, add-to-cart CTAs, trust badges.
    Key screens: Product grid, product detail, cart, checkout, order tracking.
    Colors: Neutral backgrounds, accent for CTAs (e.g., amber/orange for "Buy Now").
    Must have: Search bar, wishlist hearts, star ratings, free shipping badges.`,"Food Delivery":`
    Focus on: Restaurant cards with food imagery, cuisine filters, delivery time estimates, order tracking.
    Key screens: Restaurant list, menu, cart with customizations, order tracking with map placeholder.
    Colors: Warm tones (red, orange) for appetite appeal. Green for healthy options.
    Must have: Search, cuisine categories, estimated delivery time, cart badge, rating stars.`,"Fitness & Health":`
    Focus on: Activity tracking, progress rings/charts, workout cards, streak counters, calorie/step data.
    Key screens: Dashboard with stats, workout detail, exercise log, progress charts, profile with achievements.
    Colors: Energetic (green, blue, orange). Success green for completed goals.
    Must have: Heatmaps, progress bars, big stat numbers, trend indicators ().`,"Social Networking":`
    Focus on: Feed with posts (text/image), user avatars, like/comment/share actions, stories row.
    Key screens: Feed, profile, post creation, notifications, messages/chat.
    Colors: Brand-forward accent. Neutral content areas. Blue for links/actions.
    Must have: Avatar circles, engagement counts, follow buttons, stories carousel.`,"Travel & Booking":`
    Focus on: Destination imagery, search with date pickers, price cards, booking flow, itinerary.
    Key screens: Search/explore, results list, hotel/flight detail, booking confirmation, trip itinerary.
    Colors: Aspirational (sky blue, teal). Warm sunset tones for leisure. Trust blue for booking CTAs.
    Must have: Star ratings, price comparison, date selectors, map placeholders, photo galleries.`,"Finance & Banking":`
    Focus on: Balance display, transaction list, spending charts, security indicators, transfer flow.
    Key screens: Dashboard with balance, transaction history, send/receive, analytics, profile/settings.
    Colors: Trust blue or green. Conservative palette. Red only for negative/alerts.
    Must have: Big balance number, transaction rows with icons, line/bar charts, security badges.`,"Entertainment & Media":`
    Focus on: Content cards with thumbnails, categories/genres, playback UI, recommendations.
    Key screens: Home feed, category browse, content detail, player/viewer, library/watchlist.
    Colors: Dark mode preferred. Vibrant accent for play buttons. Genre-specific highlight colors.
    Must have: Thumbnail grids, progress indicators on watched content, play buttons, ratings.`,Custom:`
    Focus on: Clean layout following general best practices. Adapt to the user's description.
    Apply the universal design principles: clear hierarchy, 8px grid, consistent components.
    Match color psychology to the app's purpose described by the user.`},e4=`

### NAVIGATION DESIGN (ISLAND ARCHITECTURE)

**Primary Style: The Floating Island**
Instead of a heavy bar stuck to the bottom, use a floating architectural element.

**1. The Dock (Main Nav)**
- **Position**: \`fixed bottom-6 left-1/2 -translate-x-1/2 z-50\`.
- **Look**: \`h-16 pl-6 pr-6 bg-[#121212]/90 backdrop-blur-2xl border border-white/[0.08] rounded-full shadow-[0_8px_40px_rgba(0,0,0,0.45)] flex items-center gap-8\`.
- **Items**: 
  - Active: Icon + optional dot indicator.
  - Inactive: Icon 50% opacity.
  - Action Button: Can be "broken out" (larger circle in center).

**2. The Top Shelf (Header)**
- **Position**: \`sticky top-0 z-40 bg-[#050505]/80 backdrop-blur-md\`.
- **Content**: Avatar (Left) + Page Title (Center/Left) + Actions (Right).
- **Separation**: subtle \`border-b border-white/5\`.

**3. Contextual Pills**
- For sub-navigation (e.g. "Week / Month / Year"), use a segmented control pill:
- \`bg-zinc-900 rounded-full p-1 inline-flex\`.
- Active item: \`bg-zinc-800 text-white rounded-full shadow-sm\`.

**Effect Details:**
- Box-shadow: 0 16px 48px rgba(primary, 0.4)
- Items on top: Use rgba(255,255,255,0.2) for active pill

**Tailwind Implementation:**
\`\`\`html
<nav class="fixed bottom-5 left-4 right-4 z-50">
  <div class="bg-gradient-to-r from-indigo-600 to-purple-600 rounded-full shadow-[0_16px_48px_rgba(99,102,241,0.4)] px-6 py-3 flex items-center justify-around">
    <button class="flex items-center gap-2 bg-white/20 backdrop-blur-sm px-4 py-2 rounded-full text-white shadow-[inset_0_1px_0_rgba(255,255,255,0.3)]">
      <svg class="w-5 h-5">...</svg>
      <span class="text-xs font-semibold">Home</span>
    </button>
    <button class="p-2.5 text-white/60 hover:text-white transition-colors active:scale-95">
      <svg class="w-5 h-5">...</svg>
    </button>
  </div>
</nav>
\`\`\`

---

## D. TOP NAVIGATION BAR (HEADER)

**Glassmorphic header for all screens with a top bar:**
\`\`\`html
<header class="fixed top-0 inset-x-0 z-40">
  <div class="h-14 bg-black/60 backdrop-blur-2xl saturate-[1.8] border-b border-white/[0.06] flex items-center justify-between px-5">
    <!-- Left: Back/Logo -->
    <!-- Center: Title (optional) -->
    <!-- Right: Actions -->
  </div>
</header>
\`\`\`

**Header Layout Patterns:**
1. **Logo + Actions**: \`[Logo/Avatar]  spacer  [] []\`
2. **Back + Title + Action**: \`[]  Title (centered)  []\`
3. **Search Integrated**: \`[]  [ Search...]  []\`
4. **Greeting + Avatar**: \`[Good morning, Alex]  spacer  [Avatar]\`

---

## E. ACTIVE STATE DESIGN RULES

**Every navigation MUST have clearly distinguishable active/inactive states:**

**Active Tab:**
- Icon: accent color, filled variant, scaled 1.1x, lifted -4px (translateY)
- Label: accent color, font-semibold
- Optional: glow aura (bg-[accent]/20 blur-xl behind icon)
- Optional: indicator dot/bar above or below

**Inactive Tab:**
- Icon: white/40 opacity, outline/stroke variant
- Label: white/40 opacity, font-medium
- Hover (web): white/70 opacity with 200ms transition
- Active press: scale(0.95) with 100ms transition

**Tab Count:**
- 3-5 tabs maximum
- If more needed, use "More" tab with expandable menu
- Each tab icon must be unique and recognizable

---

## F. NAVIGATION MICRO-INTERACTIONS

**Tap Feedback (apply to all nav items):**
\`\`\`
On press: transform scale(0.95), duration 100ms
On release: transform scale(1), duration 200ms ease-out
\`\`\`

**Notification Badge:**
\`\`\`html
<div class="relative">
  <svg class="w-6 h-6">...</svg>
  <div class="absolute -top-1 -right-1 w-4 h-4 bg-red-500 rounded-full flex items-center justify-center ring-2 ring-black">
    <span class="text-[8px] font-bold text-white">3</span>
  </div>
</div>
\`\`\`

**Status Dot (online/active):**
\`\`\`html
<div class="absolute -bottom-0.5 -right-0.5 w-2.5 h-2.5 bg-emerald-500 rounded-full ring-2 ring-black"></div>
\`\`\`

---

## G. NAVIGATION CONTENT RULES PER APP TYPE

**Fitness/Health:**
Tabs: Home, Workouts, Progress/Stats, Community, Profile
Icons: house, dumbbell, chart-bar, users, user-circle

**E-Commerce:**
Tabs: Home, Search, Cart, Orders, Profile
Icons: house, search, shopping-bag, package, user-circle
Badge: Show cart item count on Cart tab

**Social Media:**
Tabs: Feed, Search/Explore, Create (+), Notifications, Profile
Icons: house, compass, plus-circle, bell, user-circle
Badge: Show notification count on bell

**Finance/Banking:**
Tabs: Home, Cards, Send/Pay, Activity, Profile
Icons: house, credit-card, arrow-up-right, receipt, user-circle

**Food Delivery:**
Tabs: Home, Search, Orders, Favorites, Profile
Icons: house, search, receipt, heart, user-circle
Badge: Active order indicator dot on Orders

**Travel/Booking:**
Tabs: Explore, Search, Trips, Saved, Profile
Icons: compass, search, briefcase, bookmark, user-circle

**Entertainment/Media:**
Tabs: Home, Browse, Library, Downloads, Profile
Icons: house, grid, bookmark, download, user-circle

**Productivity:**
Tabs: Home, Tasks, Calendar, Notes, Settings
Icons: house, check-square, calendar, file-text, settings

---

## H. NAVIGATION ACCESSIBILITY REQUIREMENTS

1. All nav items MUST be \`<button>\` elements (or \`<a>\` if linking)
2. Include \`aria-label\` on the \`<nav>\` element: \`aria-label="Main navigation"\`
3. Active tab gets \`aria-current="page"\`
4. All icons must have \`aria-hidden="true"\` (labels provide meaning)
5. Touch targets: minimum 44x44px (padding counts)
6. Focus-visible outlines: \`focus-visible:ring-2 focus-visible:ring-white/50 focus-visible:ring-offset-2 focus-visible:ring-offset-black\`
7. Color is NEVER the only active indicator  always combine with: filled icon, scale, glow, or indicator shape

---

## I. NAVIGATION PERFORMANCE

1. Use \`transform\` and \`opacity\` for animations (GPU-accelerated)
2. Add \`will-change: transform\` on animated nav items
3. Limit backdrop-filter to the nav container only (not individual items)
4. Use \`contain: layout paint\` on fixed nav to prevent reflow
5. Keep nav HTML lightweight  avoid deeply nested elements

---

## J. TOP BAR + BOTTOM NAV COORDINATION

**When both exist on a screen:**
- Top bar: h-14 (56px), fixed top, z-40
- Bottom nav: h-[84px] (64px + 20px safe area), fixed bottom, z-50
- Content: \`pt-14 pb-24\` to not overlap with either bar
- Both should use matching glass intensity and border style for visual unity
- Top bar border: border-bottom border-white/[0.06]
- Bottom nav border: border-top border-white/[0.08]

`,t4={"E-commerce":"glassmorphic","Food Delivery":"glassmorphic","Fitness & Health":"glassmorphic","Social Networking":"floating-pill","Travel & Booking":"glassmorphic","Finance & Banking":"glassmorphic","Entertainment & Media":"floating-pill",Custom:"glassmorphic"},n4=`
## VISUAL EXCELLENCE DIRECTIVES (TRENDS 2026)

**Core Aesthetic**: "Dimensional Minimalism"  High depth, low noise.

### A. THE "DYNAMIC ISLAND" EFFECT
- **Fluid Containers**: Use pill-shaped containers for status updates or live activities.
- **Top-Bar Integration**: If showing a notification, make it appear to expand from the top header.
- **Floating Controls**: Place primary actions in a floating glass bar at the bottom, detached from the edge.

### B. BENTO BOX GRIDS (MANDATORY FOR DASHBOARDS)
- Never use a simple list when a grid can tell a story.
- **Variety**: Mix square (aspect-square), portrait (row-span-2), and landscape (col-span-2) cards.
- **Content density**: High density in small cards (numbers), low density in large cards (images).

### C. SOPHISTICATED GRADIENTS (NO RAINBOWS)
- **Mesh Gradients**: Use subtle, multi-point gradients for backgrounds (e.g., \`bg-[radial-gradient(ellipse_at_top_right,_var(--tw-gradient-stops))]\`).
- **Text Gradients**: Use ONLY for the single largest number or headline on the screen.
- **Button Glows**: Primary buttons should have a colored drop shadow matching their hue.

### D. DEPTH & GLASS
- **Layering**:
  1. Base: Deep black/zinc.
  2. Mid: Cards with \`border-white/5\`.
  3. Top: Glass overlays with \`backdrop-blur-xl bg-white/5\`.
- **Inner Borders**: Add \`box-shadow: inset 0 1px 0 0 rgba(255,255,255,0.1)\` to cards to simulate a 3D edge.

### E. MICRO-INTERACTIONS (CSS)
- **Active Scaling**: All clickable cards must have \`active:scale-[0.98] transition-transform\`.
- **Hover Lifts**: Interactive elements should \`hover:-translate-y-1\` (desktop only).
- **Magnetic Buttons**: Round buttons should feel like they have weight.

### F. DATA PRESENTATION
- **Big Numbers**: If a number is important, it should be at least \`text-3xl\`.
- **Sparklines**: Use simple SVG paths to show trends. Don't label every axis.
- **Context**: Always show "vs last week" or "vs goal" in small text next to data.

### G. IMAGERY & MEDIA
- **Object-Fit**: Always use \`object-cover\` for images.
- **Avatars**: \`ring-2 ring-black\` to separate avatars from backgrounds.
- **Icon Containers**: \`w-10 h-10 rounded-full flex items-center justify-center bg-zinc-800 text-white\`.
`,VT={"E-commerce":"Sunset Vibes palette (Primary #FF6B95, Secondary #FEC163, Accent #B06AFF). Use Cyber Sunset gradient for hero cards, Fire & Ice for sale banners.","Food Delivery":"Fire & Ice palette (Primary #FF0844, Secondary #FFB199). Use Cyber Sunset for featured dishes, Mint Fresh for health labels.",Fitness:"Energetic Fitness palette (Primary #FA709A, Secondary #FEE140, Accent #FF6B6B). Cyber Sunset hero cards, Mint Fresh for nutrition, Aurora Borealis for achievements.",Social:"Bold Modern palette (Primary #667eea, Secondary #764ba2, Accent #f093fb). Purple Haze for stories, Neon Nights for live features.",Travel:"Ocean Dream palette (Primary #13547A, Secondary #80D0C7). Aurora Borealis for premium listings, Cyber Sunset for deals.",Finance:"Bold Modern palette (Primary #667eea, Secondary #764ba2). Ocean Dream for portfolio, Mint Fresh for positive gains, Fire & Ice for losses.",Entertainment:"Neon Nights + Purple Haze combo. Bold gradients everywhere  gaming/media apps thrive on visual energy.",Custom:"Bold Modern palette (Primary #667eea, Secondary #764ba2, Accent #f093fb). Versatile and premium-feeling."},i4=`
## ANTI-AI-SLOP DIRECTIVES (HUMAN TOUCH)

These rules prevent the "Generic AI" look.

### RULE 1: BROKEN GRIDS (ASYMMETRY IS KING)
AI defaults to 2-column or 4-column balanced grids.
**YOU MUST**: Use asymmetrical layouts.
- Row 1: 1 big card (col-span-2) + 1 small vertical card.
- Row 2: 3 small cards.
- Row 3: 1 full-width section.
*Never stack 3 identical rows of 2 cards.*

### RULE 2: DATA IS MESSY (REALISM)
Real data is never perfect.
- **Numbers**: Use 73.4%, $1,249.00, 142 items. Never "100%", "$50", "10 items".
- **Text**: Some titles are long (wrap 2 lines), some are short.
- **Avatars**: Some have photos, some have initials.

### RULE 3: SCROLLABLE AREAS
Not everything fits on one screen.
- Use \`overflow-x-auto\` for horizontal card lists.
- Make the last card "peek" off-screen (padding-right) to imply scrollability.

### RULE 4: INTENTIONAL EMPTY SPACE
- Don't fill every white pixel.
- if a card has a big number, it doesn't need an icon AND a label AND a trend. Just the number and label is chic.

### RULE 5: NO "LOREM IPSUM" VIBES
- Use specific nouns for the App Type.
- Fitness? "Upper Body Hypertrophy", "Ramsay Park Run".
- Finance? "Netflix Subscription", "Dividend Payout".

### RULE 6: THE "UN-TEMPLATE" CHECK
- If the screen looks like a standard Bootstrap/Tailwind template, **REDO IT**.
- Add a floating element.
- Make an image break out of its container.
- Use a massive font size for one word.
`;or.ECOMMERCE,or.FOOD_DELIVERY,or.FITNESS,or.SOCIAL,or.TRAVEL,or.FINANCE,or.ENTERTAINMENT,or.CUSTOM;const OT=[{id:"auto",label:"Auto",class:"bg-zinc-800 border-dashed border-zinc-600"},{id:"slate",label:"Slate",class:"bg-slate-500"},{id:"red",label:"Red",class:"bg-red-500"},{id:"orange",label:"Orange",class:"bg-orange-500"},{id:"amber",label:"Amber",class:"bg-amber-500"},{id:"yellow",label:"Yellow",class:"bg-yellow-500"},{id:"lime",label:"Lime",class:"bg-lime-500"},{id:"green",label:"Green",class:"bg-green-500"},{id:"emerald",label:"Emerald",class:"bg-emerald-500"},{id:"teal",label:"Teal",class:"bg-teal-500"},{id:"cyan",label:"Cyan",class:"bg-cyan-500"},{id:"sky",label:"Sky",class:"bg-sky-500"},{id:"blue",label:"Blue",class:"bg-blue-500"},{id:"indigo",label:"Indigo",class:"bg-indigo-500"},{id:"violet",label:"Violet",class:"bg-violet-500"},{id:"purple",label:"Purple",class:"bg-purple-500"},{id:"fuchsia",label:"Fuchsia",class:"bg-fuchsia-500"},{id:"pink",label:"Pink",class:"bg-pink-500"},{id:"rose",label:"Rose",class:"bg-rose-500"}],zT=[{id:"auto",label:"Auto",description:"Balanced function & aesthetics",value:"auto"},{id:"modern",label:"Modern Clean",description:"High whitespace, card-based",value:"Modern Functional: Extensive whitespace, distinct cards with soft shadows (shadow-sm), clear hierarchy. Backgrounds #F9FAFB (light) or #09090B (dark). Focus on scannability."},{id:"glass",label:"Functional Glass",description:"Blur overlays, clear content",value:"Functional Glass: Use backdrop-blur-xl for separation, not decoration. Content must remain high-contrast (text-white). Borders border-white/10. Cards use bg-white/5."},{id:"swiss",label:"Swiss Minimal",description:"Grid, typography, whitespace",value:"Swiss International Style: Strict grid alignment. High contrast. Large headings (font-serif). No decoration, only content. Information Architecture is the decoration."},{id:"complex",label:"Data Density",description:"Dashboards, dense tables",value:"Data Rich: Compact spacing (gap-2), borders instead of shadows, tabular data, clear data visualization colors. For power users."}],Tg=`
You are a world-class Product Designer who has shipped award-winning mobile apps.
You design with INTENTION  every pixel, every spacing decision, every color choice has a reason.
Your work is indistinguishable from hand-crafted designs by the best human designers.
You NEVER produce generic, template-looking UI. Each screen you create has its own personality and story.

${i4}

${ZP}

${e4}

${n4}

### VISUAL LANGUAGE  LOCKED DESIGN TOKENS (override any conflicting guidance):
These values are ABSOLUTE. Use them on every screen without exception.
1. **Background**: Main: \`bg-[#050505]\`. Cards: \`bg-[#09090b]\` (Surface 1).
2. **Borders**: \`border border-white/[0.06]\` on all cards.
3. **Side Margins**: \`px-5\` on ALL screens.
4. **Section Spacing**: \`space-y-8\` between all major sections.
5. **Card Style**: \`p-5 rounded-3xl\` (Big soft corners).
6. **Border Radius System**: Cards = \`rounded-3xl\`. Inner elements = \`rounded-2xl\`.
7. **Typography**:
   - Screen title: \`text-2xl font-bold tracking-tight text-white\`.
   - Section head: \`text-xs font-bold uppercase tracking-widest text-zinc-500 mb-4\`.
   - Body: \`text-[15px] text-zinc-400 leading-relaxed\`.
   - Hero number (MAX 1 per screen): \`text-4xl font-black tracking-tighter\`.
8. **Accent Color**: ONE accent per app. Stick to it.
9. **Icons**: Lucide-style SVGs, stroke-width 2, size 20-24px.
10. **Top Bar**: Fixed, h-14, \`bg-[#050505]/80 backdrop-blur-md border-b border-white/5\`.

### NAVIGATION CONSISTENCY (CRITICAL):
For all MAIN application screens, include the bottom navigation bar.
**Navigation Style**: Glassmorphic "Island" style is preferred.

**Bottom Navigation Requirements:**
- Floating Island Effect: \`fixed bottom-6 left-4 right-4 h-16 bg-[#09090b]/80 backdrop-blur-2xl border border-white/10 rounded-full flex items-center justify-around px-6 shadow-2xl z-50\`
- NO full-width bar attached to bottom. We are in 2026.
- Active tab: \`text-white bg-white/10 rounded-full p-3\`
- Inactive tabs: \`text-zinc-500 hover:text-zinc-300\`
- 4-5 tabs max.
- Use \`<nav aria-label="Main navigation">\`

**Glassmorphic Navigation HTML Blueprint:**
\`\`\`html
<nav class="fixed bottom-6 left-5 right-5 z-50">
  <div class="h-16 bg-[#0F0F10]/80 backdrop-blur-xl border border-white/[0.08] rounded-full shadow-[0_8px_32px_rgba(0,0,0,0.4)] flex items-center justify-between px-2">
    <!-- Active Tab -->
    <button class="w-14 h-full flex items-center justify-center rounded-full bg-white/10 text-white relative">
       <div class="absolute inset-0 bg-white/5 blur-lg rounded-full"></div>
       <svg class="w-6 h-6 relative z-10">...</svg>
    </button>
    <!-- Inactive Tab -->
    <button class="w-14 h-full flex items-center justify-center rounded-full text-zinc-500 hover:text-zinc-300 transition-colors">
       <svg class="w-6 h-6">...</svg>
    </button>
    <!-- Middle "Action" Tab (Optional) -->
     <button class="w-14 h-14 rounded-full bg-indigo-500 text-white flex items-center justify-center shadow-lg shadow-indigo-500/30 hover:scale-105 transition-transform">
        <svg class="w-6 h-6">...</svg>
     </button>
  </div>
</nav>
\`\`\`

### COMPONENT BLUEPRINTS:

**A. Data Visualization (Simulated with HTML/CSS)**
   - **Bar Charts**: Flex container with bottom alignment. Bars are \`w-full rounded-t-sm bg-zinc-800\` with varying \`h-[x]\` values. Active bars use accent color.
   - **Heatmaps**: Grid (grid-cols-7) of small squares (\`aspect-square rounded-sm bg-zinc-900\`). "Active" days use accent color opacity levels (e.g., \`bg-green-500/20\`, \`bg-green-500/60\`).
   - **Progress Rings/Lines**: \`h-1.5 bg-zinc-800 rounded-full overflow-hidden\` with inner div \`bg-white h-full\`.

**B. Cards & Lists**
   - **Rich Cards**: ALWAYS \`p-5 rounded-2xl bg-[#0A0A0A] border border-white/5\`. Include: Icon/Image + Title + Subtitle + one bottom row with tags/stats.
   - **List Items**: \`flex items-center gap-4 p-3 hover:bg-white/5 rounded-xl transition-colors\`. Left icon box, middle text, right arrow/status.

### STRICT RULES:
1. **Root**: \`<div class="min-h-full w-full bg-[#050505] text-zinc-200 font-sans pb-24 pt-14 relative">\`.
2. **No Placeholders**: Do not use "Lorem Ipsum" or "Item 1". Use realistic content specific to the App Type.
3. **Spacing**: ALWAYS \`px-5\` for side margins. \`space-y-8\` between sections.
4. **One Accent Color**: Pick ONE accent color for the entire app (based on app type) and reuse it on every screen. Do NOT change accent color between screens.
5. **Card Consistency**: Every card uses the same \`p-5 rounded-2xl bg-[#0A0A0A] border border-white/5\` treatment. Vary the CONTENT inside cards, not the card shell.
`,r4={id:"dashboard-1",name:"Fitness Dashboard",description:"High-fidelity fitness tracker with activity heatmap and volume charts.",code:`
    <div class="min-h-full w-full bg-[#050505] text-zinc-200 font-sans pb-32 pt-20 relative selection:bg-indigo-500/30">
      
      <!-- Top Bar (Floating) -->
      <header class="fixed top-0 inset-x-0 h-16 bg-[#050505]/80 backdrop-blur-md z-40 flex items-center justify-between px-6 border-b border-white/[0.04]">
         <div class="flex items-center gap-4">
            <div class="w-10 h-10 rounded-full bg-gradient-to-tr from-indigo-500 to-purple-500 p-[1.5px]">
               <img src="https://i.pravatar.cc/150?u=a042581f4e29026024d" class="w-full h-full rounded-full object-cover border-2 border-black" alt="Profile" />
            </div>
            <div>
               <span class="block text-[10px] uppercase tracking-widest text-zinc-500 font-bold mb-0.5">Welcome Back</span>
               <span class="block text-lg font-bold text-white leading-none">Alex Johnson</span>
            </div>
         </div>
         <button class="w-10 h-10 rounded-full bg-white/[0.03] border border-white/[0.05] flex items-center justify-center text-zinc-400 hover:text-white hover:bg-white/[0.08] transition-all">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"/><path d="M10.3 21a1.94 1.94 0 0 0 3.4 0"/></svg>
         </button>
      </header>
    
      <main class="px-5 space-y-8">
        
        <!-- Hero Section (Bento Row 1) -->
        <section class="grid grid-cols-1 md:grid-cols-3 gap-3">
           <!-- Main Hero Card -->
           <div class="md:col-span-2 p-6 rounded-3xl bg-gradient-to-br from-indigo-600 to-violet-700 relative overflow-hidden shadow-[0_20px_40px_-10px_rgba(79,70,229,0.4)] group">
              <div class="absolute top-0 right-0 w-64 h-64 bg-white/10 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2 group-hover:bg-white/20 transition-all duration-700"></div>
              
              <div class="relative z-10 flex flex-col justify-between h-full min-h-[180px]">
                 <div class="flex justify-between items-start">
                    <span class="inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full bg-black/20 backdrop-blur-sm border border-white/10 text-[11px] font-medium text-white/90">
                       <span class="w-1.5 h-1.5 rounded-full bg-green-400 animate-pulse"></span>
                       Live Workout
                    </span>
                    <svg class="w-6 h-6 text-white/60" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"/></svg>
                 </div>
                 
                 <div>
                    <h2 class="text-3xl font-black tracking-tight text-white mb-1">Upper Body Power</h2>
                    <p class="text-indigo-100 text-sm font-medium">45 mins  High Intensity</p>
                 </div>
                 
                 <button class="w-full mt-6 bg-white py-3 rounded-xl text-indigo-900 font-bold text-sm hover:scale-[1.02] active:scale-[0.98] transition-transform shadow-xl">
                    Resume Session
                 </button>
              </div>
           </div>

           <!-- Secondary Stats Card -->
           <div class="p-5 rounded-3xl bg-[#0F0F10] border border-white/[0.06] flex flex-col justify-center relative group hover:border-white/10 transition-colors">
              <div class="absolute inset-0 bg-gradient-to-tr from-white/[0.02] to-transparent rounded-3xl"></div>
              <span class="text-xs font-medium text-zinc-500 uppercase tracking-wider mb-2">Weekly Load</span>
              <div class="flex items-baseline gap-1">
                 <span class="text-4xl font-black text-white tracking-tighter">12.4</span>
                 <span class="text-sm font-bold text-zinc-500">tons</span>
              </div>
              <div class="mt-4 flex items-center gap-2 text-[11px] font-medium text-emerald-400 bg-emerald-400/10 px-2 py-1 rounded-lg w-fit">
                 <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><polyline points="23 6 13.5 15.5 8.5 10.5 1 18"></polyline><polyline points="17 6 23 6 23 12"></polyline></svg>
                 +24% vs last week
              </div>
           </div>
        </section>

        <!-- Activity Grid (Bento Row 2) -->
        <section>
           <h3 class="text-xs font-bold uppercase tracking-widest text-zinc-600 mb-4 pl-1">Recent Activity</h3>
           <div class="grid grid-cols-2 gap-3">
              <div class="p-5 rounded-3xl bg-[#09090b] border border-white/[0.04] hover:bg-white/[0.02] transition-colors relative overflow-hidden">
                 <div class="flex justify-between items-center mb-4">
                    <div class="w-10 h-10 rounded-full bg-rose-500/10 flex items-center justify-center text-rose-500 ring-1 ring-inset ring-rose-500/20">
                       <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M7 17l9.2-9.2M17 17V7H7"/></svg>
                    </div>
                    <span class="text-xs text-zinc-500">Today</span>
                 </div>
                 <div class="text-2xl font-bold text-white mb-0.5">5.2 km</div>
                 <div class="text-xs text-zinc-500">Morning Run</div>
              </div>
              
              <div class="p-5 rounded-3xl bg-[#09090b] border border-white/[0.04] hover:bg-white/[0.02] transition-colors">
                 <div class="flex justify-between items-center mb-4">
                    <div class="w-10 h-10 rounded-full bg-cyan-500/10 flex items-center justify-center text-cyan-500 ring-1 ring-inset ring-cyan-500/20">
                       <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 12h-4l-3 9L9 3l-3 9H2"/></svg>
                    </div>
                    <span class="text-xs text-zinc-500">Yesterday</span>
                 </div>
                 <div class="text-2xl font-bold text-white mb-0.5">42 min</div>
                 <div class="text-xs text-zinc-500">HIIT Cardio</div>
              </div>
           </div>
        </section>

        <!-- Chart Section -->
        <section class="p-6 rounded-3xl bg-[#09090b] border border-white/[0.06]">
            <div class="flex items-center justify-between mb-8">
               <div>
                  <h3 class="text-base font-bold text-white">Recovery Score</h3>
                  <p class="text-xs text-zinc-500 mt-1">Based on RHR & Sleep data</p>
               </div>
               <div class="text-right">
                  <div class="text-3xl font-black text-indigo-400">92<span class="text-sm text-zinc-600 font-bold">%</span></div>
               </div>
            </div>
            
            <!-- Simple clean geometric chart -->
            <div class="flex items-end gap-2 h-32 w-full">
               <div class="flex-1 bg-zinc-800/40 rounded-t-lg h-[40%] hover:bg-zinc-700/60 transition-all cursor-pointer relative group">
                  <div class="absolute -top-8 left-1/2 -translate-x-1/2 bg-white text-black text-[10px] font-bold px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity">Mon</div>
               </div>
               <div class="flex-1 bg-zinc-800/40 rounded-t-lg h-[60%] hover:bg-zinc-700/60 transition-all cursor-pointer"></div>
               <div class="flex-1 bg-zinc-800/40 rounded-t-lg h-[35%] hover:bg-zinc-700/60 transition-all cursor-pointer"></div>
               <div class="flex-1 bg-zinc-800/40 rounded-t-lg h-[80%] hover:bg-zinc-700/60 transition-all cursor-pointer"></div>
               <div class="flex-1 bg-indigo-500 rounded-t-lg h-[92%] shadow-[0_0_20px_rgba(99,102,241,0.25)] relative">
                  <div class="absolute inset-0 bg-white/10 rounded-t-lg"></div>
               </div>
               <div class="flex-1 bg-zinc-800/40 rounded-t-lg h-[70%] hover:bg-zinc-700/60 transition-all cursor-pointer"></div>
               <div class="flex-1 bg-zinc-800/40 rounded-t-lg h-[50%] hover:bg-zinc-700/60 transition-all cursor-pointer"></div>
            </div>
        </section>

      </main>
    
      <!-- Floating Island Navigation -->
      <nav class="fixed bottom-6 left-6 right-6 z-50">
        <div class="h-16 bg-[#161616]/80 backdrop-blur-2xl border border-white/[0.1] rounded-full shadow-[0_8px_32px_-4px_rgba(0,0,0,0.5)] flex items-center justify-between px-2 pl-3">
          
          <button class="w-12 h-12 flex items-center justify-center rounded-full text-zinc-500 hover:text-zinc-200 transition-colors">
            <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path></svg>
          </button>
          
          <button class="w-12 h-12 flex items-center justify-center rounded-full text-zinc-500 hover:text-zinc-200 transition-colors">
             <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3.01" y2="6"></line><line x1="3" y1="12" x2="3.01" y2="12"></line><line x1="3" y1="18" x2="3.01" y2="18"></line></svg>
          </button>

          <!-- Floating Action Button effect -->
          <button class="w-14 h-12 flex items-center justify-center rounded-full bg-indigo-500 text-white shadow-[0_0_15px_rgba(99,102,241,0.4)] mx-2 hover:scale-105 transition-transform">
             <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
          </button>
          
          <button class="w-12 h-12 flex items-center justify-center rounded-full text-zinc-500 hover:text-zinc-200 transition-colors">
            <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="22 12 18 12 15 21 9 3 6 12 2 12"></polyline></svg>
          </button>
          
          <button class="w-12 h-12 flex items-center justify-center rounded-full text-zinc-500 hover:text-zinc-200 transition-colors">
            <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/></svg>
            <span class="text-[10px] font-medium">Settings</span>
         </button>
      </div>
    </div>
  `},wg=new XP({apiKey:"AIzaSyAvEYGgITyh55Y1i8dRfzsVbJvlgi3XorQ"}),s4=n=>new Promise(e=>setTimeout(e,n)),o4=["gemini-2.5-flash","gemini-2.0-flash","gemini-1.5-flash","gemini-2.0-flash-lite"];async function Sg(n,e=3,t=3e3){var s,a;let i;for(const l of o4)try{return await a4(()=>n(l),e,t)}catch(c){i=c;const f=(c==null?void 0:c.code)||((s=c==null?void 0:c.error)==null?void 0:s.code),h=(c==null?void 0:c.status)||((a=c==null?void 0:c.error)==null?void 0:a.status),y=(c==null?void 0:c.message)||"";if(f===503||f===429||h==="UNAVAILABLE"||h==="RESOURCE_EXHAUSTED"||y.includes("503")||y.includes("429"))continue;throw c}throw i}const bg=n=>n.replace(/<script\b[^>]*>([\s\S]*?)<\/script>/gim,"").replace(/onclick=["']([^"']*)["']/gim,"").replace(/javascript:/gim,"").replace(/h-screen/g,"min-h-full").replace(/min-h-screen/g,"min-h-full").replace(/class="([^"]*?)min-h-full/g,'class="$1min-h-full pt-14 ');async function a4(n,e=4,t=6e3){var s,a,l,c;let i;for(let f=0;f<e;f++)try{return await n()}catch(h){i=h;const y=(h==null?void 0:h.status)||((s=h==null?void 0:h.error)==null?void 0:s.status)||((a=h==null?void 0:h.response)==null?void 0:a.status),E=(h==null?void 0:h.code)||((l=h==null?void 0:h.error)==null?void 0:l.code),T=(h==null?void 0:h.message)||((c=h==null?void 0:h.error)==null?void 0:c.message);if((E===429||y==="RESOURCE_EXHAUSTED"||typeof T=="string"&&T.includes("429")||E===503)&&f<e-1){const C=t*Math.pow(2,f);await s4(C);continue}throw h}throw i}const rm=(n,e)=>{let t="",i=!1,s=e,a=!1;if(n[s]!=='"')return null;for(s++;s<n.length;s++){const l=n[s];if(i){l==="n"?t+=`
`:l==="r"?t+="\r":l==="t"?t+="	":l==='"'?t+='"':l==="\\"?t+="\\":t+=l,i=!1;continue}if(l==="\\"){i=!0;continue}if(l==='"'){a=!0,s++;break}t+=l}return{value:t,nextIndex:s,complete:a}},l4=async(n,e,t)=>{const i=UT[n.appType]||UT.Custom,s=t4[n.appType]||"glassmorphic",a=VT[n.appType]||VT.Custom,l=`
    Create a highly detailed, high-fidelity ${n.screenCount} screen mobile app design for a ${n.appType} application.
    
    ### PROJECT CONTEXT
    Description: ${n.description}
    Style: ${n.style}
    Theme: ${n.theme||"Modern Dark Mode"}
    Navigation Style: ${s} (use the matching nav pattern from the Navigation Design Framework)
    Gradient Palette: ${a}
    
    ### APP-TYPE SPECIFIC DESIGN GUIDANCE
    ${i}

    ### DESIGN REQUIREMENTS
    1. **CONSISTENCY IS KING**: Every screen must use the SAME locked design tokens: \`px-5\` margins, \`space-y-8\` sections, \`p-5 rounded-2xl bg-[#0A0A0A] border border-white/5\` cards, ONE accent color throughout, same icon style (Lucide SVG stroke-2), same top bar, same bottom nav.
    2. **Visual Richness with Restraint**: MAX 2 gradient elements per screen (hero + 1 accent). ONE hero stat/number at text-4xl font-black per screen max. Everything else: solid accent color. Gradient text on ONE heading max.
    3. **Content Variety within Consistent Structure**: Vary section ORDER and CONTENT TYPE per screen (dashboard=cards+chart, detail=image+info, profile=avatar+stats, settings=list). But use the same card shell, same spacing, same margins on all.
    4. **Realistic Content**: Use imperfect numbers (73%, 1,247, 8.3km). Vary text lengths. Mix item states (completed/in-progress/locked). Use specific timestamps ("Yesterday at 3:42 PM").
    5. **Navigation Consistency**: YOU MUST use the standardized "Bottom Dock" HTML provided in the system instructions for ALL main screens (Home, Search, Profile, etc.). Same tabs, same style. Highlight the correct active tab per screen. Do NOT add it to Onboarding/Login screens.
    6. **Elevation Hierarchy**: Most cards have NO shadow or shadow-sm. Only 1 hero/featured element per screen gets a dramatic shadow. Primary CTA gets accent glow.
    7. **Color**: ONE accent color for the ENTIRE app. Apply 60-30-10 rule (60% bg-[#050505], 30% card bg, 10% accent). Semantic colors for status (green=success, red=error).
    8. **Typography**: Follow the LOCKED type scale from the system instructions. Screen title = text-2xl font-bold. Section head = text-base font-semibold. Body = text-sm. Meta = text-xs. Micro = text-[10px] uppercase.
    9. **Accessibility**: All text WCAG AA contrast (4.5:1). All interactive elements 44x44px. Never use color alone.
    10. **The Cohesion Test**: When you view ALL screens side by side, they must look like they belong to the SAME app  same palette, same spacing, same card style, same icon style. Variety comes from CONTENT, not from structure.
    
    ### OUTPUT FORMAT: JSON
    Return a VALID JSON object with this exact structure.
    IMPORTANT: You MUST output the properties in this specific order: "name", "description", "code".
    
    {
      "screens": [
        {
          "name": "Screen Name",
          "description": "Brief description",
          "code": "<div class="min-h-full w-full bg-[#050505]">...HTML...</div>"
        }
      ]
    }

    ### RULES:
    1. **Code**: Return pure HTML string using Tailwind CSS classes.
    2. **Images**: Use \`https://loremflickr.com/{width}/{height}/{keyword}?lock={random_int}\` for content. Use keywords relevant to the app type.
    3. **Container**: Root element must be a \`div\` with \`min-h-full w-full pb-24\`.
    4. **Safety**: ALWAYS add \`pt-14\` to the top of the content to avoid the top bar/notch.
    5. **Ordering**: Always output "name", then "description", then "code" for each screen.
    6. **No Markdown**: Do not use \`\`\`json or \`\`\`html code blocks. Just raw JSON.
    7. **COMPLETENESS (CRITICAL)**: You MUST generate EXACTLY ${n.screenCount} screens. Do NOT stop early. Do NOT truncate. Every screen must have full, complete HTML code. If you are generating a large app, ensure EVERY screen is included in the output.
  `;try{const c=await Sg(h=>wg.models.generateContentStream({model:h,contents:l,config:{systemInstruction:Tg,responseMimeType:"application/json",maxOutputTokens:65536}}));let f="";for await(const h of c){if(t!=null&&t.aborted)throw new Error("Aborted");const y=h.text;if(!y)continue;f+=y;let E=0,T=0;const w=/"screens"\s*:\s*\[/.exec(f);if(w)for(E=w.index+w[0].length;;){const C=/"name"\s*:\s*/g;C.lastIndex=E;const b=C.exec(f);if(!b)break;const x=b.index+b[0].length,N=rm(f,x);if(!N)break;const z=/"description"\s*:\s*/g;z.lastIndex=N.nextIndex;const B=z.exec(f);let Y="",J=N.nextIndex;if(B){const V=B.index+B[0].length,k=rm(f,V);k&&(Y=k.value,J=k.nextIndex)}const $=/"code"\s*:\s*/g;$.lastIndex=J;const L=$.exec(f);if(L){const V=L.index+L[0].length,k=rm(f,V);if(k){const H={name:N.value,description:Y,code:bg(k.value)};if(e(H,T,k.complete),k.complete)E=k.nextIndex;else break}else break}else{e({name:N.value,description:Y,code:""},T,!1);break}T++}}}catch(c){throw c.message!=="Aborted"&&console.error("Gemini Generation Error:",c),c}},u4=async(n,e)=>{const t=`
      You are an expert UI Engineer applying the comprehensive Design Mastery Framework from the system instructions.
      Update the following UI based on the user's request while maintaining all design principles.
      
      ### REQUEST: 
      "${e}"

      ### INSTRUCTIONS:
      1. **PRIORITIZE FUNCTION & USABILITY**: Ensure the layout remains scannable. Don't break the grid. Follow the 8-point grid system.
      2. **VALID JSON**: You must return a valid JSON object. Escape all double quotes inside the HTML string properly.
      3. **NAVIGATION**: If this is a main screen (Home, Search, etc), ENSURE the standard bottom navigation from the System Instructions is present and the correct tab is highlighted.
      4. **THEME**: If the user asks for a color change, update the entire palette (backgrounds, buttons, text) following the 60-30-10 rule.
      5. **HIERARCHY**: Maintain clear visual hierarchy  ONE primary focal point per screen. Follow the type scale strictly.
      6. **ACCESSIBILITY**: Maintain WCAG AA contrast (4.5:1). All interactive elements  44x44px. Never rely on color alone.
      7. **COMPONENTS**: All buttons, cards, inputs must follow the component design standards (proper heights, border-radius, padding, states).

      Current HTML:
      ${n.code}
      
      Structure:
      {
        "screens": [
            {
                "name": "${n.name}",
                "description": "Updated version",
                "code": "<div class...updated html...</div>"
            }
        ]
      }
    `;try{const s=(await Sg(async l=>await wg.models.generateContent({model:l,contents:t,config:{systemInstruction:Tg,responseMimeType:"application/json"}}))).text;if(!s)throw new Error("No response from Gemini");let a;try{a=JSON.parse(s)}catch(l){console.warn("Refinement JSON parse failed, attempting manual extraction",l);const c=/"code"\s*:\s*"([\s\S]*?)"\s*}/.exec(s);if(c)a={screens:[{code:c[1].replace(/\\"/g,'"').replace(/\\n/g,`
`).replace(/\\t/g,"	")}]};else throw new Error("Could not recover JSON from response")}if(a.screens&&a.screens.length>0){const l=a.screens[0].code;return{...n,code:bg(l)}}throw new Error("Invalid refinement response structure")}catch(i){throw console.error("Gemini Refinement Error:",i),i}},c4=async(n,e)=>{const t=`
      You are an expert UI Engineer applying the comprehensive Design Mastery Framework from the system instructions.
      Update the following HTML element based on the user's request while maintaining all design principles.
      
      ### REQUEST: 
      "${e}"

      ### CURRENT HTML:
      ${n}

      ### INSTRUCTIONS:
      1. Return ONLY the updated HTML string for this specific element.
      2. Do NOT wrap in markdown code blocks.
      3. Use Tailwind CSS for styling following the 8-point grid and type scale.
      4. Ensure tap targets are at least 44px for buttons (WCAG accessibility).
      5. Follow component design standards: proper height, border-radius, padding, and hover/active states.
      6. Maintain visual consistency with the rest of the screen (same border-radius, spacing patterns, color semantics).
      
      Structure:
      {
        "code": "<updated html element...>"
      }
    `;try{const s=(await Sg(async l=>await wg.models.generateContent({model:l,contents:t,config:{systemInstruction:Tg,responseMimeType:"application/json"}}))).text;if(!s)throw new Error("No response from Gemini");let a;try{a=JSON.parse(s)}catch(l){console.warn("Element refinement JSON parse failed",l);const c=/"code"\s*:\s*"([\s\S]*?)"/.exec(s);if(c)a={code:c[1].replace(/\\"/g,'"').replace(/\\n/g,`
`).replace(/\\t/g,"	")};else throw new Error("Could not recover JSON from response")}if(a.code)return bg(a.code);throw new Error("Invalid element refinement response")}catch(i){throw console.error("Gemini Element Refinement Error:",i),i}},d4=375,Um=d4,RS=812,sm=64,FT=100,f4=6,h4=()=>M.jsxs("div",{className:"w-full flex-1 relative overflow-hidden bg-[#050505] flex flex-col min-h-full",children:[M.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-indigo-500/20 via-purple-500/20 to-pink-500/20 animate-gradient bg-[length:400%_400%]"}),M.jsx("div",{className:"absolute inset-0 backdrop-blur-[100px]"}),M.jsxs("div",{className:"relative z-10 p-6 pt-20 space-y-8 h-full flex flex-col opacity-40",children:[M.jsxs("div",{className:"flex justify-between items-center",children:[M.jsx("div",{className:"w-24 h-6 bg-white/10 rounded-full animate-pulse"}),M.jsx("div",{className:"w-10 h-10 bg-white/10 rounded-full animate-pulse"})]}),M.jsx("div",{className:"w-full h-64 bg-gradient-to-tr from-white/10 to-white/0 rounded-[2rem] border border-white/5 animate-pulse"}),M.jsxs("div",{className:"space-y-4 flex-1",children:[M.jsx("div",{className:"w-3/4 h-4 bg-white/10 rounded animate-pulse"}),M.jsx("div",{className:"w-1/2 h-4 bg-white/10 rounded animate-pulse"}),M.jsx("div",{className:"w-full h-4 bg-white/5 rounded animate-pulse mt-8"}),M.jsx("div",{className:"w-full h-4 bg-white/5 rounded animate-pulse"}),M.jsx("div",{className:"w-2/3 h-4 bg-white/5 rounded animate-pulse"})]}),M.jsx("div",{className:"w-full h-20 bg-white/5 rounded-[2rem] animate-pulse mt-auto mx-auto mb-4"})]}),M.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-20",children:M.jsxs("div",{className:"px-5 py-2.5 bg-black/30 backdrop-blur-xl border border-white/10 rounded-full flex items-center gap-3 shadow-2xl",children:[M.jsxs("div",{className:"flex gap-1.5",children:[M.jsx("div",{className:"w-2 h-2 rounded-full bg-indigo-400 animate-[bounce_1s_infinite_0ms]"}),M.jsx("div",{className:"w-2 h-2 rounded-full bg-purple-400 animate-[bounce_1s_infinite_200ms]"}),M.jsx("div",{className:"w-2 h-2 rounded-full bg-pink-400 animate-[bounce_1s_infinite_400ms]"})]}),M.jsx("span",{className:"text-xs font-medium text-white/90 tracking-wide",children:"GENERATING"})]})})]}),p4=M1.memo(({screen:n,index:e,isActive:t,onSelect:i,onDelete:s,inspectMode:a,onElementClick:l,onElementHover:c})=>M.jsxs("div",{className:`screen-content-wrapper relative flex-shrink-0 flex flex-col group transition-all duration-300 ${t?"z-10":"z-0"}`,style:{width:Um,contain:"layout style"},onClick:f=>{a||(f.stopPropagation(),i(n.id))},children:[M.jsx("div",{className:`mb-4 flex items-center gap-2 self-center transition-all duration-300 ${t?"opacity-100 translate-y-0":"opacity-60 group-hover:opacity-100"}`,children:M.jsx("span",{className:`text-xs font-medium bg-black/50 backdrop-blur px-3 py-1 rounded-full border border-white/5 transition-colors ${t?"text-white border-white/20":"text-zinc-500"}`,children:n.name})}),M.jsx("div",{id:`screen-preview-${n.id}`,className:`relative rounded-3xl overflow-hidden transition-all duration-500 flex flex-col box-border border border-white/5 ${t?"shadow-[0_30px_60px_-15px_rgba(0,0,0,0.6)] scale-[1.01] ring-1 ring-white/10":"shadow-2xl bg-[#050505]"}`,style:{width:Um,minHeight:RS,height:"auto",transform:"translate3d(0,0,0)"},children:M.jsx("div",{className:"relative w-full h-full flex-1 bg-[#050505] flex flex-col",children:M.jsxs("div",{className:`w-full flex-1 relative flex flex-col transform-gpu ${n.isGenerating&&!n.code,"bg-[#050505]"}`,children:[n.isGenerating&&!n.code?M.jsx(h4,{}):M.jsx("div",{className:`w-full flex-1 flex flex-col [&>div]:min-h-full [&>div]:flex-1 ${a?"cursor-crosshair":""}`,dangerouslySetInnerHTML:{__html:n.code},onClick:f=>a&&l&&l(f,n.id),onMouseMove:f=>a&&c&&c(f),onMouseLeave:f=>a&&c&&c(f)}),n.isGenerating&&n.code&&M.jsx("div",{className:"absolute bottom-4 right-4 z-50 pointer-events-none animate-in fade-in zoom-in duration-300",children:M.jsxs("div",{className:"flex items-center gap-2 px-2.5 py-1.5 bg-black/60 backdrop-blur-md rounded-full border border-white/10 text-[9px] font-medium text-white/90 shadow-xl",children:[M.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-indigo-500 animate-pulse"}),M.jsx("span",{children:"Streaming..."})]})})]})})}),s&&!n.isGenerating&&!a&&M.jsx("button",{onClick:f=>{f.stopPropagation(),s(n.id)},className:"absolute top-4 -right-12 p-2 bg-zinc-800 text-zinc-400 hover:text-red-400 hover:bg-zinc-700 rounded-full border border-white/10 opacity-0 group-hover:opacity-100 transition-all z-50 shadow-lg group-hover:-translate-x-full",children:M.jsx(Af,{className:"w-3.5 h-3.5"})})]}),(n,e)=>n.screen===e.screen&&n.isActive===e.isActive&&n.index===e.index&&n.inspectMode===e.inspectMode),m4=({screens:n,activeScreenId:e,onSelectScreen:t,onDeleteScreen:i,onUpdateScreen:s,isGenerating:a})=>{const l=Ve.useRef(null),[c,f]=Ve.useState(.5),[h,y]=Ve.useState({x:0,y:0}),[E,T]=Ve.useState(!1),[w,C]=Ve.useState({x:0,y:0}),[b,x]=Ve.useState(!1),[N,z]=Ve.useState(null),[B,Y]=Ve.useState(null),[J,$]=Ve.useState(null),L=Ve.useRef(null),V=()=>{const Q=n.length;if(Q===0)return{width:0,height:0,cols:0,rows:0};const Z=Math.min(Q,f4),ge=Math.ceil(Q/Z),Ae=Z*Um+(Z-1)*sm,Ne=ge*RS+(ge-1)*sm;return{width:Ae,height:Ne,cols:Z,rows:ge}},k=Ve.useCallback(()=>{if(!l.current||n.length===0)return;const Q=l.current.clientWidth,Z=l.current.clientHeight,{width:ge,height:Ae}=V();if(ge===0)return;const Ne=ge+FT*2,De=Ae+FT*2,je=Q/Ne,$e=Z/De,Et=Math.min(Math.min(je,$e),.85),kt=(Q-ge*Et)/2,R=(Z-Ae*Et)/2;f(Et),y({x:kt,y:R})},[n.length]);Ve.useEffect(()=>{k()},[k]),Ve.useEffect(()=>{a&&(x(!1),Y(null),z(null),$(null))},[a,e]),Ve.useEffect(()=>{var Q;if(b&&J&&e){const Z=document.getElementById(`screen-preview-${e}`);if(Z){const ge=Z.querySelector(`[data-cursor-id="${J}"]`);if(ge&&ge!==B){Y(ge);const Ae=ge.getBoundingClientRect(),Ne=(Q=l.current)==null?void 0:Q.getBoundingClientRect();Ne&&z({top:Ae.top-Ne.top,left:Ae.left-Ne.left,width:Ae.width,height:Ae.height})}}}},[n,b,J,e]);const H=Q=>{if(!l.current)return;const ge=-Q.deltaY*.001,Ae=Math.min(Math.max(.1,c+ge),3),Ne=l.current.getBoundingClientRect(),De=Q.clientX-Ne.left,je=Q.clientY-Ne.top,$e=(De-h.x)/c,Et=(je-h.y)/c,kt=De-$e*Ae,R=je-Et*Ae;f(Ae),y({x:kt,y:R})},K=Q=>{b||Q.target.closest(".screen-content-wrapper")||Q.target.closest("button")||(T(!0),C({x:Q.clientX-h.x,y:Q.clientY-h.y}))},U=Q=>{E&&y({x:Q.clientX-w.x,y:Q.clientY-w.y})},O=()=>T(!1),D=Q=>{if(l.current){const Z=l.current.getBoundingClientRect(),ge=Z.width/2,Ae=Z.height/2,Ne=(ge-h.x)/c,De=(Ae-h.y)/c,je=ge-Ne*Q,$e=Ae-De*Q;y({x:je,y:$e})}f(Q)},he=()=>D(Math.min(c+.1,3)),ie=()=>D(Math.max(c-.1,.1)),re=Q=>{var Ne;if(!b)return;Q.stopPropagation();const Z=Q.target;if(Z.id.startsWith("screen-preview")||Z.tagName==="BODY"||Z.tagName==="HTML"){z(null);return}const ge=Z.getBoundingClientRect(),Ae=(Ne=l.current)==null?void 0:Ne.getBoundingClientRect();Ae&&z({top:ge.top-Ae.top,left:ge.left-Ae.left,width:ge.width,height:ge.height})},be=(Q,Z)=>{if(!b)return;Q.stopPropagation(),Q.preventDefault();const ge=Q.target;if(ge){let Ae=ge.getAttribute("data-cursor-id");Ae||(Ae=`el-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,ge.setAttribute("data-cursor-id",Ae),ne()),$(Ae),Y(ge),Z!==e&&t(Z)}},ne=Ve.useCallback(()=>{if(!e||!s)return;const Q=document.getElementById(`screen-preview-${e}`);if(Q){const Z=Q.querySelector(".transform-gpu");if(Z&&Z.lastElementChild){Z.lastElementChild.innerHTML;const ge=Q.querySelector("[dangerouslySetInnerHTML]")||Q.querySelector(".w-full.flex-1.flex.flex-col");ge&&s(e,ge.innerHTML)}}},[e,s]),Te=Q=>{var Ae;if(!B||!e)return;Q.className!==void 0&&B.setAttribute("class",Q.className),Q.innerText!==void 0&&(B instanceof HTMLElement?B.innerText=Q.innerText:B.textContent=Q.innerText);const Z=B.getBoundingClientRect(),ge=(Ae=l.current)==null?void 0:Ae.getBoundingClientRect();ge&&z({top:Z.top-ge.top,left:Z.left-ge.left,width:Z.width,height:Z.height}),L.current&&clearTimeout(L.current),L.current=setTimeout(()=>{ne()},600)},P=async Q=>{var ge;if(!B||!e)return;const Z=B.outerHTML;try{const Ae=await c4(Z,Q);if(Ae&&B.parentElement){const Ne=document.createElement("div");Ne.innerHTML=Ae;const De=Ne.firstElementChild;if(De instanceof Element){const je=B.getAttribute("data-cursor-id")||J;je&&De.setAttribute("data-cursor-id",je),B.replaceWith(De),Y(De);const $e=De.getBoundingClientRect(),Et=(ge=l.current)==null?void 0:ge.getBoundingClientRect();Et&&z({top:$e.top-Et.top,left:$e.left-Et.left,width:$e.width,height:$e.height}),ne()}}}catch(Ae){throw console.error("AI Refine Error",Ae),Ae}},G=()=>{B&&(B.remove(),Y(null),z(null),$(null),ne())},oe=V();return M.jsxs("div",{className:"flex-1 relative bg-[#0C0C0E] overflow-hidden select-none",ref:l,onWheel:H,onMouseDown:K,onMouseMove:U,onMouseUp:O,onMouseLeave:O,style:{cursor:E?"grabbing":"grab"},children:[M.jsx("div",{className:"absolute inset-0 pointer-events-none bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-indigo-900/10 via-[#0C0C0E] to-[#0C0C0E]"}),M.jsx("div",{className:"absolute inset-0 pointer-events-none opacity-[0.03]",style:{backgroundImage:"radial-gradient(#ffffff 1px, transparent 1px)",backgroundSize:`${24*c}px ${24*c}px`,backgroundPosition:`${h.x}px ${h.y}px`}}),M.jsx("div",{style:{transform:`translate(${h.x}px, ${h.y}px) scale(${c})`,transformOrigin:"0 0",width:oe.width,willChange:E?"transform":"auto",transition:E?"none":"transform 0.2s cubic-bezier(0.2, 0, 0.2, 1)"},children:M.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:`${sm}px`,width:`${oe.width}px`,alignItems:"flex-start"},children:n.map((Q,Z)=>M.jsx(p4,{screen:Q,index:Z,isActive:e===Q.id,onSelect:t,onDelete:i,inspectMode:b,onElementClick:be,onElementHover:re},Q.id))})}),b&&N&&M.jsx("div",{className:"absolute pointer-events-none z-50 border-2 border-indigo-500 bg-indigo-500/10 transition-all duration-75",style:{top:N.top,left:N.left,width:N.width,height:N.height}}),b&&B&&M.jsx(C2,{element:B,onUpdate:Te,onAiUpdate:P,onClose:()=>{Y(null),$(null)},onDelete:G}),M.jsxs("div",{className:"absolute bottom-8 right-8 flex items-center gap-3 z-50",children:[M.jsxs("button",{onClick:()=>{x(!b),Y(null),z(null),$(null)},className:`flex items-center gap-2 px-4 py-2 rounded-full border shadow-2xl transition-all ${b?"bg-indigo-600 border-indigo-500 text-white":"bg-zinc-900/90 backdrop-blur-md border-white/10 text-zinc-400 hover:text-white"}`,children:[M.jsx(QI,{className:"w-4 h-4"}),M.jsx("span",{className:"text-xs font-semibold",children:b?"Inspecting":"Inspect"})]}),M.jsxs("div",{className:"flex items-center space-x-1 bg-zinc-900/90 backdrop-blur-md border border-white/10 p-1.5 rounded-full shadow-2xl",children:[M.jsx("button",{onClick:ie,className:"w-8 h-8 flex items-center justify-center hover:bg-white/10 rounded-full text-zinc-400 hover:text-white transition-colors",children:M.jsx(YI,{className:"w-4 h-4"})}),M.jsxs("span",{className:"text-[10px] font-mono text-zinc-500 w-8 text-center",children:[Math.round(c*100),"%"]}),M.jsx("button",{onClick:he,className:"w-8 h-8 flex items-center justify-center hover:bg-white/10 rounded-full text-zinc-400 hover:text-white transition-colors",children:M.jsx(Su,{className:"w-4 h-4"})}),M.jsx("div",{className:"w-px h-3 bg-white/10 mx-1"}),M.jsx("button",{onClick:k,className:"w-8 h-8 flex items-center justify-center hover:bg-white/10 rounded-full text-zinc-400 hover:text-white transition-colors",children:M.jsx(HI,{className:"w-3.5 h-3.5"})})]})]})]})},g4=[{label:"Finance App",prompt:"Create a dark mode fintech dashboard with a balance graph, transaction list, and quick transfer buttons.",icon:""},{label:"Food Delivery",prompt:"Design a vibrant food delivery app featuring a home feed with categories, a restaurant detail page, and a cart.",icon:""},{label:"Health Tracker",prompt:"Build a health tracking app with activity rings, heart rate history, and a workout summary view.",icon:""}],y4=({onGenerate:n,onRefine:e,onExport:t,onStop:i,isProcessing:s,hasScreens:a,messages:l,screens:c=[]})=>{const[f,h]=Ve.useState(""),[y,E]=Ve.useState(!1),[T,w]=Ve.useState(!1),[C,b]=Ve.useState(!1),[x,N]=Ve.useState("auto"),[z,B]=Ve.useState(zT[0]),[Y,J]=Ve.useState(OT[0]),[$,L]=Ve.useState(null),V=Ve.useRef(null),k=Ve.useRef(null),H=Ve.useRef(null),K=Ve.useRef(null);Ve.useEffect(()=>{var ne;(ne=V.current)==null||ne.scrollIntoView({behavior:"smooth"})},[l,s]),Ve.useEffect(()=>{const ne=Te=>{k.current&&!k.current.contains(Te.target)&&E(!1),H.current&&!H.current.contains(Te.target)&&w(!1),K.current&&!K.current.contains(Te.target)&&b(!1)};return document.addEventListener("mousedown",ne),()=>document.removeEventListener("mousedown",ne)},[]);const U=ne=>{const Te=ne.match(/\b(\d+)\s*(?:screens?|pages?|views?|uis?)\b/i);if(Te){const G=parseInt(Te[1]);if(G>0&&G<=30)return G}const P=ne.match(/(?:^|[\r\n])\s*\d+[.)]\s/g);if(P&&P.length>0){const G=P.length;if(G>0&&G<=30)return G}return null},O=ne=>{const Te=ne.toLowerCase(),P=U(ne);return!!(P&&P>1||/^(create|generate|design|build|make).+(app|application|interface|ui|screens)/i.test(Te)||Te.split(" ").length<10&&(Te.includes("app")||Te.includes("dashboard")||Te.includes("interface")))},D=ne=>{const Te=ne||f;if(!Te.trim())return;const P=U(Te);if(ne?!0:O(Te)||!a){let oe=P||8;x==="single"&&(oe=1),n({appType:or.CUSTOM,description:Te,screenCount:oe,style:z.id==="auto"?"auto":z.value,theme:Y.id==="auto"?"auto":Y.label})}else e(Te,"current");h("")},he=ne=>{if($){if($.type==="color"){const Te=$.value;J(Te),ne==="all"?e(`Change the entire app theme to use ${Te.label} as the primary color. Update all backgrounds, buttons, and accents to match the ${Te.label} palette.`,"all"):e(`Update the primary color palette of THIS screen to use ${Te.label}.`,"current")}else if($.type==="style"){const Te=$.value;B(Te),ne==="all"?e(`Refine the visual style of ALL screens to match the '${Te.label}' style. Description: ${Te.value}`,"all"):e(`Refine the visual style of THIS screen to match the '${Te.label}' style. Description: ${Te.value}`,"current")}L(null)}},ie=(ne,Te)=>{if(!a||s){ne==="color"?J(Te):B(Te),ne==="color"?b(!1):w(!1);return}L({type:ne,value:Te}),ne==="color"?b(!1):w(!1)},re=ne=>{ne.key==="Enter"&&!ne.shiftKey&&(ne.preventDefault(),D())},be=ne=>{t(ne),E(!1)};return M.jsxs("div",{className:"w-[420px] bg-[#050505] border-l border-white/5 flex flex-col h-full shrink-0 z-20 relative shadow-2xl",children:[$&&M.jsx("div",{className:"absolute inset-0 z-50 bg-[#050505]/90 backdrop-blur-sm flex items-center justify-center p-6 animate-in fade-in duration-200",children:M.jsxs("div",{className:"bg-[#121215] border border-white/10 rounded-2xl shadow-2xl p-5 w-full max-w-sm ring-1 ring-white/5 space-y-4",children:[M.jsxs("div",{className:"text-center",children:[M.jsx("div",{className:"w-10 h-10 rounded-xl bg-indigo-500/10 flex items-center justify-center mx-auto mb-3",children:M.jsx(c2,{className:"w-5 h-5 text-indigo-400"})}),M.jsxs("h3",{className:"text-lg font-semibold text-white",children:["Apply ",$.type==="color"?"Theme":"Style"," Change"]}),M.jsxs("p",{className:"text-sm text-zinc-400 mt-1",children:["Apply ",M.jsx("span",{className:"text-white font-medium",children:$.value.label})," to active screen or all?"]})]}),M.jsxs("div",{className:"grid grid-cols-2 gap-3 pt-2",children:[M.jsxs("button",{onClick:()=>he("current"),className:"flex flex-col items-center justify-center gap-2 p-3 rounded-xl bg-zinc-900 border border-zinc-800 hover:bg-zinc-800 hover:border-zinc-700 transition-all group",children:[M.jsx(KI,{className:"w-5 h-5 text-zinc-500 group-hover:text-zinc-300"}),M.jsx("span",{className:"text-xs font-medium text-zinc-400 group-hover:text-zinc-200",children:"Active Only"})]}),M.jsxs("button",{onClick:()=>he("all"),className:"flex flex-col items-center justify-center gap-2 p-3 rounded-xl bg-indigo-600/10 border border-indigo-500/20 hover:bg-indigo-600/20 hover:border-indigo-500/30 transition-all group",children:[M.jsx(VI,{className:"w-5 h-5 text-indigo-400 group-hover:text-indigo-300"}),M.jsx("span",{className:"text-xs font-medium text-indigo-300 group-hover:text-indigo-200",children:"All Screens"})]})]}),M.jsx("button",{onClick:()=>L(null),className:"w-full py-2 text-[11px] text-zinc-500 hover:text-zinc-300 transition-colors tracking-wide uppercase font-medium",children:"Cancel"})]})}),M.jsxs("div",{className:"h-14 border-b border-white/5 flex items-center justify-between px-5 shrink-0 bg-[#050505]",children:[M.jsx("div",{className:"flex items-center gap-3",children:M.jsx("h2",{className:"text-sm font-semibold text-white tracking-tight",children:"AI Designer"})}),M.jsxs("div",{className:"flex items-center gap-2",children:[M.jsxs("div",{className:"relative",ref:K,children:[M.jsx("button",{onClick:()=>b(!C),className:"w-7 h-7 rounded-md bg-zinc-900 border border-white/10 flex items-center justify-center hover:bg-zinc-800 transition-colors group",title:`Theme: ${Y.label}`,children:Y.id==="auto"?M.jsx("div",{className:"w-3 h-3 rounded-full bg-gradient-to-tr from-indigo-400 via-purple-400 to-emerald-400 group-hover:scale-110 transition-transform shadow-sm"}):M.jsx("div",{className:`w-3 h-3 rounded-full ${Y.class} ring-2 ring-zinc-900 group-hover:scale-110 transition-transform shadow-sm`})}),C&&M.jsx("div",{className:"absolute right-0 top-full mt-2 w-72 bg-[#121215] border border-white/10 rounded-xl shadow-2xl overflow-hidden z-50 p-3 ring-1 ring-white/5 animate-in fade-in zoom-in-95 duration-200 grid grid-cols-6 gap-2",children:OT.map(ne=>M.jsx("button",{onClick:()=>ie("color",ne),className:`w-8 h-8 rounded-full flex items-center justify-center transition-all ${Y.id===ne.id?"ring-2 ring-white ring-offset-2 ring-offset-[#121215]":"hover:scale-110"}`,title:ne.label,children:M.jsx("div",{className:`w-full h-full rounded-full ${ne.class} border border-white/10`})},ne.id))})]}),M.jsxs("div",{className:"relative",ref:H,children:[M.jsxs("button",{onClick:()=>w(!T),className:"flex items-center gap-2 px-2.5 py-1.5 rounded-md bg-zinc-900 border border-white/10 text-zinc-400 hover:text-white hover:bg-zinc-800 transition-all text-xs font-medium",title:"Design Style",children:[M.jsx("span",{className:"truncate max-w-[80px]",children:z.label}),M.jsx(lI,{className:"w-3 h-3 opacity-50 shrink-0"})]}),T&&M.jsx("div",{className:"absolute right-0 top-full mt-2 w-56 bg-[#121215] border border-white/10 rounded-xl shadow-2xl overflow-hidden z-50 p-1 ring-1 ring-white/5 animate-in fade-in zoom-in-95 duration-200",children:zT.map(ne=>M.jsxs("button",{onClick:()=>ie("style",ne),className:`w-full text-left px-3 py-2 rounded-lg text-xs flex items-center justify-between group transition-colors ${z.id===ne.id?"bg-indigo-500/10 text-indigo-400":"text-zinc-400 hover:bg-zinc-800 hover:text-zinc-200"}`,children:[M.jsxs("div",{children:[M.jsx("span",{className:"block font-medium",children:ne.label}),M.jsx("span",{className:"block text-[9px] opacity-60 mt-0.5 leading-tight",children:ne.description})]}),z.id===ne.id&&M.jsx(oI,{className:"w-3 h-3 text-indigo-500"})]},ne.id))})]}),M.jsxs("div",{className:"relative",ref:k,children:[M.jsx("button",{onClick:()=>E(!y),disabled:!a,className:"w-7 h-7 flex items-center justify-center rounded-md bg-zinc-900 border border-white/10 text-zinc-400 hover:text-white hover:bg-zinc-800 transition-all disabled:opacity-50 disabled:cursor-not-allowed",title:"Export",children:M.jsx(wI,{className:"w-3.5 h-3.5"})}),y&&M.jsx("div",{className:"absolute right-0 top-full mt-2 w-48 bg-[#121215] border border-white/10 rounded-xl shadow-2xl overflow-hidden z-50 ring-1 ring-white/5 animate-in fade-in zoom-in-95 duration-200",children:M.jsxs("div",{className:"p-1 space-y-0.5",children:[M.jsxs("button",{onClick:()=>be("json"),className:"w-full flex items-center gap-2 px-2 py-1.5 text-xs text-zinc-400 hover:bg-zinc-800 hover:text-zinc-200 rounded-lg transition-colors text-left",children:[M.jsx(II,{className:"w-3.5 h-3.5"}),M.jsx("span",{children:"Export JSON"})]}),M.jsxs("button",{onClick:()=>be("zip"),className:"w-full flex items-center gap-2 px-2 py-1.5 text-xs text-zinc-400 hover:bg-zinc-800 hover:text-zinc-200 rounded-lg transition-colors text-left",children:[M.jsx(nI,{className:"w-3.5 h-3.5"}),M.jsx("span",{children:"Export ZIP"})]}),M.jsx("div",{className:"my-1 border-t border-white/5"}),M.jsxs("button",{onClick:()=>be("png"),className:"w-full flex items-center gap-2 px-2 py-1.5 text-xs text-zinc-400 hover:bg-zinc-800 hover:text-zinc-200 rounded-lg transition-colors text-left",children:[M.jsx(kI,{className:"w-3.5 h-3.5"}),M.jsx("span",{children:"Export PNG"})]})]})})]})]})]}),M.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-6 custom-scrollbar scroll-smooth",children:[l.length===0?M.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center animate-in fade-in duration-500 px-4",children:[M.jsx("div",{className:"w-12 h-12 rounded-2xl bg-gradient-to-tr from-indigo-500/10 to-purple-500/10 border border-white/10 flex items-center justify-center mb-5 shadow-[0_0_40px_-10px_rgba(99,102,241,0.2)]",children:M.jsx(L1,{className:"w-5 h-5 text-indigo-400"})}),M.jsx("h3",{className:"text-sm font-medium text-white mb-2",children:"Start Designing"}),M.jsx("p",{className:"text-xs text-zinc-500 mb-6 max-w-[260px] leading-relaxed",children:"Describe your app idea, and I'll generate the screens and code for you."}),M.jsx("div",{className:"w-full space-y-2",children:g4.map((ne,Te)=>M.jsx("button",{onClick:()=>D(ne.prompt),className:"w-full text-left p-3 rounded-xl border border-white/5 bg-zinc-900/30 hover:bg-zinc-800/80 hover:border-white/10 transition-all group relative overflow-hidden",children:M.jsxs("div",{className:"flex items-center gap-3 relative z-10",children:[M.jsx("span",{className:"text-sm bg-zinc-900/80 rounded-md p-1.5 border border-white/5 text-zinc-400 group-hover:text-white transition-colors",children:ne.icon}),M.jsx("div",{children:M.jsx("span",{className:"text-xs font-medium text-zinc-300 group-hover:text-white transition-colors block",children:ne.label})}),M.jsx(D1,{className:"w-3 h-3 text-zinc-600 group-hover:text-zinc-400 ml-auto opacity-0 group-hover:opacity-100 transition-all -translate-x-2 group-hover:translate-x-0"})]})},Te))})]}):l.map((ne,Te)=>M.jsxs("div",{className:`flex flex-col ${ne.role==="user"?"items-end":"items-start"} animate-in fade-in slide-in-from-bottom-2 duration-300 gap-1`,children:[M.jsx("span",{className:"text-[10px] text-zinc-600 font-medium px-1",children:ne.role==="user"?"You":"AI Designer"}),M.jsx("div",{className:`max-w-[90%] px-4 py-3 text-xs leading-relaxed ${ne.role==="user"?"bg-zinc-800/80 text-zinc-100 rounded-2xl rounded-tr-sm border border-white/5":"bg-zinc-900/50 text-zinc-300 rounded-2xl rounded-tl-sm border border-white/5"}`,children:ne.content})]},ne.id)),s&&M.jsxs("div",{className:"flex flex-col items-start gap-1 animate-in fade-in slide-in-from-bottom-2 duration-300",children:[M.jsx("span",{className:"text-[10px] text-zinc-600 font-medium px-1",children:"AI Designer"}),M.jsxs("div",{className:"bg-zinc-900/50 border border-white/5 rounded-2xl rounded-tl-sm px-4 py-3 flex items-center gap-3",children:[M.jsx(wu,{className:"w-3.5 h-3.5 text-indigo-500 animate-spin"}),M.jsx("span",{className:"text-xs text-zinc-400",children:"Generating screens..."})]})]}),M.jsx("div",{ref:V})]}),M.jsxs("div",{className:"p-4 bg-[#050505] relative z-30",children:[M.jsxs("div",{className:"relative group",children:[M.jsx("div",{className:"absolute -inset-0.5 bg-gradient-to-r from-indigo-500/20 to-purple-500/20 rounded-xl opacity-0 group-focus-within:opacity-100 transition-opacity duration-500 blur-md pointer-events-none"}),M.jsxs("div",{className:"relative bg-zinc-900 border border-zinc-800 rounded-xl overflow-hidden transition-all group-focus-within:border-zinc-700 group-focus-within:bg-[#0a0a0c]",children:[M.jsx("textarea",{value:f,onChange:ne=>h(ne.target.value),onKeyDown:re,placeholder:s?"Generation in progress...":"Describe changes or new screens...",className:"w-full p-3 pr-12 text-sm text-zinc-200 bg-transparent placeholder:text-zinc-600 focus:outline-none resize-none min-h-[50px] max-h-32 custom-scrollbar",rows:1,style:{minHeight:"50px"},disabled:s}),M.jsx("div",{className:"absolute right-2 bottom-2",children:M.jsx("button",{onClick:()=>s?i():D(),disabled:!s&&!f.trim(),className:`p-2 rounded-lg transition-all duration-200 ${s?"text-white bg-zinc-800 hover:bg-zinc-700":"text-zinc-400 hover:text-white hover:bg-indigo-600 disabled:opacity-30 disabled:hover:bg-transparent disabled:hover:text-zinc-600"}`,children:s?M.jsx(g2,{className:"w-3.5 h-3.5 fill-current"}):M.jsx(EI,{className:"w-4 h-4"})})})]})]}),M.jsxs("div",{className:"mt-2 flex items-center justify-between px-1",children:[M.jsxs("div",{className:"flex gap-2",children:[M.jsx("button",{onClick:()=>N("auto"),className:`text-[10px] font-medium px-2 py-1 rounded transition-colors ${x==="auto"?"bg-white/5 text-zinc-300":"text-zinc-600 hover:text-zinc-400"}`,children:"Auto Flow"}),M.jsx("button",{onClick:()=>N("single"),className:`text-[10px] font-medium px-2 py-1 rounded transition-colors ${x==="single"?"bg-white/5 text-zinc-300":"text-zinc-600 hover:text-zinc-400"}`,children:"Single Screen"})]}),M.jsx("span",{className:"text-[10px] text-zinc-700 font-mono",children:"CMD+ENTER"})]})]})]})},v4=({screens:n,activeScreenId:e,onSelectScreen:t,onDeleteScreen:i,onAddScreen:s,onBackToDashboard:a})=>{const[l,c]=Ve.useState(!1);return M.jsxs("div",{className:`${l?"w-16":"w-64"} bg-[#050505] border-r border-white/5 flex flex-col h-full shrink-0 transition-all duration-300 ease-[cubic-bezier(0.2,0,0,1)] relative z-30`,children:[M.jsx("div",{className:"h-14 flex items-center px-3 border-b border-white/5 justify-between bg-[#050505]/80 backdrop-blur-md",children:l?M.jsx("button",{onClick:a,className:"w-full flex justify-center py-2 text-zinc-600 hover:text-zinc-300",children:M.jsx(tE,{className:"w-4 h-4"})}):M.jsxs("button",{onClick:a,className:"flex items-center gap-2 text-[11px] font-medium text-zinc-500 hover:text-zinc-300 transition-colors group py-1.5 px-2 rounded-md hover:bg-white/5 w-full",children:[M.jsx(tE,{className:"w-3 h-3 text-zinc-600 group-hover:text-zinc-400 transition-colors"}),M.jsx("span",{className:"tracking-wide",children:"Back to Projects"})]})}),M.jsxs("div",{className:"flex-1 overflow-y-auto py-3 space-y-0.5 no-scrollbar",children:[!l&&M.jsxs("div",{className:"px-4 mb-2 mt-2 flex items-center justify-between",children:[M.jsx("span",{className:"text-[10px] font-bold text-zinc-600 uppercase tracking-widest",children:"Screens"}),M.jsx("span",{className:"text-[9px] text-zinc-600 font-mono bg-zinc-900 border border-zinc-800 px-1.5 py-0.5 rounded-full",children:n.length})]}),n.map((f,h)=>{const y=e===f.id;return M.jsxs("div",{onClick:()=>t(f.id),className:`group relative flex items-center mx-2 px-2 py-2 rounded-md cursor-pointer transition-all duration-200 border border-transparent ${y?"bg-zinc-900 text-white shadow-sm":"text-zinc-500 hover:text-zinc-300 hover:bg-zinc-900/40"} ${l?"justify-center mx-2 px-0 py-3":""}`,children:[y&&!l&&M.jsx("div",{className:"absolute left-0 w-0.5 h-4 bg-indigo-500 rounded-full my-auto ml-1"}),M.jsx("div",{className:`relative flex items-center justify-center transition-all ${y?"text-indigo-400":"text-zinc-600 group-hover:text-zinc-500"}`,children:M.jsx(f2,{className:"w-4 h-4"})}),!l&&M.jsx("div",{className:"ml-3 flex-1 min-w-0",children:M.jsx("div",{className:"flex items-center justify-between",children:M.jsx("span",{className:`text-[13px] truncate ${y?"font-medium text-zinc-200":"font-normal"}`,children:f.name})})}),!l&&M.jsx("button",{onClick:E=>{E.stopPropagation(),i(f.id)},className:"opacity-0 group-hover:opacity-100 p-1 text-zinc-600 hover:text-red-400 hover:bg-red-500/10 rounded transition-all absolute right-2",children:M.jsx(Af,{className:"w-3.5 h-3.5"})})]},f.id)}),n.length===0&&!l&&M.jsxs("div",{className:"px-6 py-12 flex flex-col items-center justify-center text-center border border-dashed border-zinc-900 mx-4 rounded-xl mt-4 bg-zinc-900/20",children:[M.jsx(P1,{className:"w-8 h-8 text-zinc-800 mb-2"}),M.jsx("p",{className:"text-[11px] text-zinc-600 font-medium",children:"No screens generated"})]})]}),M.jsx("div",{className:"p-3 border-t border-white/5 bg-[#050505]",children:M.jsxs("div",{className:"flex gap-2",children:[M.jsxs("button",{onClick:s,className:`flex-1 flex items-center justify-center gap-2 bg-zinc-900 hover:bg-zinc-800 text-zinc-300 border border-white/5 py-2 rounded-lg text-xs font-medium transition-all group ${l?"px-0":""}`,title:"Add New Screen",children:[M.jsx(Su,{className:"w-3.5 h-3.5 group-hover:text-white"}),!l&&M.jsx("span",{children:"New Screen"})]}),M.jsx("button",{onClick:()=>c(!l),className:"w-8 flex items-center justify-center bg-zinc-900 hover:bg-zinc-800 text-zinc-500 hover:text-zinc-300 border border-white/5 rounded-lg transition-all",children:l?M.jsx(i2,{className:"w-3.5 h-3.5"}):M.jsx(t2,{className:"w-3.5 h-3.5"})})]})})]})},_4=[{id:"saas-dashboard",name:"SaaS Analytics",description:"A data-dense dashboard with sidebar navigation, charts, and data tables.",category:"Dashboard",screens:[{id:"saas-1",name:"Overview",description:"Main dashboard view",code:`
<div class="min-h-full w-full bg-[#050505] text-zinc-200 font-sans pb-24 pt-14 relative">
  <!-- Top Header -->
  <header class="fixed top-0 inset-x-0 h-14 bg-[#050505]/80 backdrop-blur-md border-b border-white/5 flex items-center justify-between px-6 z-40">
    <div class="flex items-center gap-2">
       <div class="w-6 h-6 bg-indigo-600 rounded-md flex items-center justify-center font-bold text-xs text-white">N</div>
       <span class="font-bold text-sm tracking-tight text-white">Nexus</span>
    </div>
    <div class="flex items-center gap-4">
       <button class="w-8 h-8 rounded-full bg-white/5 flex items-center justify-center text-zinc-400">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"/><path d="M10.3 21a1.94 1.94 0 0 0 3.4 0"/></svg>
       </button>
       <div class="w-8 h-8 rounded-full bg-gradient-to-tr from-indigo-500 to-purple-500 p-[1px]">
          <img src="https://i.pravatar.cc/100?img=33" class="w-full h-full rounded-full object-cover border-2 border-black" />
       </div>
    </div>
  </header>

  <main class="px-6 py-6 space-y-6">
    <!-- Stat Cards -->
    <div class="grid grid-cols-2 gap-4">
       <div class="p-5 rounded-2xl bg-[#0A0A0A] border border-white/5 relative overflow-hidden">
          <div class="absolute top-0 right-0 p-4 opacity-10 text-indigo-500">
             <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2v20M2 12h20"/></svg>
          </div>
          <div class="text-[10px] uppercase tracking-wider text-zinc-500 font-bold mb-1">Total Revenue</div>
          <div class="text-2xl font-bold text-white">$42,593</div>
          <div class="flex items-center gap-1 mt-2 text-[10px] text-emerald-400 bg-emerald-400/10 px-1.5 py-0.5 rounded w-fit">
             <span>+12.5%</span>
             <svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="23 6 13.5 15.5 8.5 10.5 1 18"/><polyline points="17 6 23 6 23 12"/></svg>
          </div>
       </div>
       <div class="p-5 rounded-2xl bg-[#0A0A0A] border border-white/5">
          <div class="text-[10px] uppercase tracking-wider text-zinc-500 font-bold mb-1">Active Users</div>
          <div class="text-2xl font-bold text-white">1,249</div>
          <div class="flex items-center gap-1 mt-2 text-[10px] text-zinc-400">
             <span>vs. last month</span>
          </div>
       </div>
    </div>

    <!-- Main Chart Area -->
    <div class="p-5 rounded-2xl bg-[#0A0A0A] border border-white/5">
       <div class="flex items-center justify-between mb-6">
          <h3 class="text-sm font-bold text-white">Traffic Overview</h3>
          <select class="bg-black border border-white/10 rounded-md text-[10px] text-zinc-400 px-2 py-1 outline-none">
             <option>Last 7 Days</option>
             <option>Last 30 Days</option>
          </select>
       </div>
       <div class="h-48 flex items-end gap-3 pt-4 border-t border-white/5">
          <div class="w-full bg-zinc-800/50 rounded-t-sm h-[30%] hover:bg-indigo-500/50 transition-colors"></div>
          <div class="w-full bg-zinc-800/50 rounded-t-sm h-[50%] hover:bg-indigo-500/50 transition-colors"></div>
          <div class="w-full bg-zinc-800/50 rounded-t-sm h-[45%] hover:bg-indigo-500/50 transition-colors"></div>
          <div class="w-full bg-zinc-800/50 rounded-t-sm h-[70%] hover:bg-indigo-500/50 transition-colors"></div>
          <div class="w-full bg-indigo-500 rounded-t-sm h-[85%] shadow-[0_0_20px_rgba(99,102,241,0.3)]"></div>
          <div class="w-full bg-zinc-800/50 rounded-t-sm h-[60%] hover:bg-indigo-500/50 transition-colors"></div>
          <div class="w-full bg-zinc-800/50 rounded-t-sm h-[75%] hover:bg-indigo-500/50 transition-colors"></div>
       </div>
       <div class="flex justify-between mt-2 text-[10px] text-zinc-600 font-medium">
          <span>Mon</span><span>Tue</span><span>Wed</span><span>Thu</span><span>Fri</span><span>Sat</span><span>Sun</span>
       </div>
    </div>

    <!-- Recent Activity -->
    <div>
       <h3 class="text-sm font-bold text-white mb-3 px-1">Recent Transactions</h3>
       <div class="space-y-1">
          <div class="flex items-center justify-between p-3 rounded-xl hover:bg-white/5 transition-colors cursor-pointer group">
             <div class="flex items-center gap-3">
                <div class="w-8 h-8 rounded-full bg-indigo-500/20 flex items-center justify-center text-indigo-400">
                   <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
                </div>
                <div>
                   <div class="text-sm font-medium text-zinc-200">Stripe Payout</div>
                   <div class="text-[10px] text-zinc-500">Today, 9:41 AM</div>
                </div>
             </div>
             <span class="text-xs font-bold text-white">+$1,250.00</span>
          </div>
          <div class="flex items-center justify-between p-3 rounded-xl hover:bg-white/5 transition-colors cursor-pointer group">
             <div class="flex items-center gap-3">
                 <div class="w-8 h-8 rounded-full bg-zinc-800 flex items-center justify-center text-zinc-400">
                   <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="1" y="4" width="22" height="16" rx="2" ry="2"/><line x1="1" y1="10" x2="23" y2="10"/></svg>
                </div>
                <div>
                   <div class="text-sm font-medium text-zinc-200">Server Costs</div>
                   <div class="text-[10px] text-zinc-500">Yesterday</div>
                </div>
             </div>
             <span class="text-xs font-medium text-zinc-400">-$249.00</span>
          </div>
       </div>
    </div>
  </main>

  <!-- Bottom Navigation -->
  <div class="fixed bottom-0 inset-x-0 h-[80px] bg-[#050505]/90 backdrop-blur-xl border-t border-white/5 flex items-start justify-between px-8 py-4 z-50">
     <button class="flex flex-col items-center gap-1.5 text-indigo-400">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="none"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/></svg>
        <span class="text-[10px] font-medium">Home</span>
     </button>
     <button class="flex flex-col items-center gap-1.5 text-zinc-500 hover:text-white transition-colors">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21.21 15.89A10 10 0 1 1 8 2.83"/><path d="M22 12A10 10 0 0 0 12 2v10z"/></svg>
        <span class="text-[10px] font-medium">Analytics</span>
     </button>
     <button class="flex flex-col items-center gap-1.5 text-zinc-500 hover:text-white transition-colors">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="3" width="20" height="14" rx="2" ry="2"/><line x1="8" y1="21" x2="16" y2="21"/><line x1="12" y1="17" x2="12" y2="21"/></svg>
        <span class="text-[10px] font-medium">Devices</span>
     </button>
     <button class="flex flex-col items-center gap-1.5 text-zinc-500 hover:text-white transition-colors">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/></svg>
        <span class="text-[10px] font-medium">Settings</span>
     </button>
  </div>
</div>
        `}]},{id:"ecommerce-app",name:"E-commerce Store",description:"Modern shopping experience with product grids, filters, and cart.",category:"Shopping",screens:[{id:"ecom-1",name:"Home Feed",description:"Main product discovery feed",code:`
<div class="min-h-full w-full bg-[#050505] text-zinc-200 font-sans pb-24 pt-14 relative">
    
    <!-- Top Nav -->
    <header class="fixed top-0 inset-x-0 h-14 bg-[#050505]/90 backdrop-blur-md border-b border-white/5 flex items-center justify-between px-6 z-40">
       <button class="p-2 -ml-2 text-zinc-400 hover:text-white">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg>
       </button>
       <span class="font-bold text-sm tracking-widest uppercase">Luxe</span>
       <button class="p-2 -mr-2 text-zinc-400 hover:text-white relative">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"/><line x1="3" y1="6" x2="21" y2="6"/><path d="M16 10a4 4 0 0 1-8 0"/></svg>
          <div class="absolute top-1.5 right-1.5 w-2 h-2 rounded-full bg-indigo-500 ring-2 ring-[#050505]"></div>
       </button>
    </header>

    <main class="space-y-8 pt-4">
        <!-- Hero Slider -->
        <div class="mx-6 h-64 rounded-2xl bg-zinc-800 relative overflow-hidden group">
            <img src="https://images.unsplash.com/photo-1483985988355-763728e1935b?auto=format&fit=crop&w=800&q=80" class="w-full h-full object-cover opacity-60 group-hover:scale-105 transition-transform duration-700" />
            <div class="absolute bottom-0 left-0 p-6 bg-gradient-to-t from-black/80 to-transparent w-full">
               <span class="text-[10px] font-bold text-indigo-400 uppercase tracking-widest mb-1 block">New Collection</span>
               <h2 class="text-2xl font-bold text-white mb-2">Summer Essentials</h2>
               <button class="text-xs font-semibold text-white border-b border-white pb-0.5">Shop Now</button>
            </div>
        </div>

        <!-- Categories -->
        <div class="pl-6 overflow-x-auto no-scrollbar flex gap-4 pb-2">
           <button class="flex-shrink-0 px-6 py-2.5 rounded-full bg-white text-black text-xs font-bold">All</button>
           <button class="flex-shrink-0 px-6 py-2.5 rounded-full bg-zinc-900 border border-white/10 text-zinc-400 text-xs font-medium hover:text-white transition-colors">Clothing</button>
           <button class="flex-shrink-0 px-6 py-2.5 rounded-full bg-zinc-900 border border-white/10 text-zinc-400 text-xs font-medium hover:text-white transition-colors">Shoes</button>
           <button class="flex-shrink-0 px-6 py-2.5 rounded-full bg-zinc-900 border border-white/10 text-zinc-400 text-xs font-medium hover:text-white transition-colors">Accessories</button>
        </div>

        <!-- Product Grid -->
        <div class="px-6 grid grid-cols-2 gap-x-4 gap-y-8">
            <!-- Product 1 -->
            <div class="group cursor-pointer">
                <div class="aspect-[3/4] bg-zinc-900 rounded-xl overflow-hidden mb-3 relative">
                     <img src="https://images.unsplash.com/photo-1515886657613-9f3515b0c78f?auto=format&fit=crop&w=400&q=80" class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-500 opacity-80 group-hover:opacity-100" />
                     <button class="absolute top-2 right-2 p-2 rounded-full bg-black/40 backdrop-blur text-white opacity-0 group-hover:opacity-100 transition-opacity">
                        <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/></svg>
                     </button>
                </div>
                <h3 class="text-sm font-medium text-white">Floral Summer Dress</h3>
                <p class="text-xs text-zinc-500 mt-1">$120.00</p>
            </div>
            <!-- Product 2 -->
            <div class="group cursor-pointer">
                <div class="aspect-[3/4] bg-zinc-900 rounded-xl overflow-hidden mb-3 relative">
                     <img src="https://images.unsplash.com/photo-1529139574466-a302c27560a0?auto=format&fit=crop&w=400&q=80" class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-500 opacity-80 group-hover:opacity-100" />
                     <div class="absolute top-2 left-2 px-2 py-1 bg-indigo-600 text-[10px] font-bold text-white uppercase rounded-sm">Sale</div>
                </div>
                <h3 class="text-sm font-medium text-white">Linen Blend Shirt</h3>
                <p class="text-xs text-zinc-500 mt-1"><span class="line-through text-zinc-700 mr-2">$85.00</span>$65.00</p>
            </div>
            <!-- Product 3 -->
            <div class="group cursor-pointer">
                <div class="aspect-[3/4] bg-zinc-900 rounded-xl overflow-hidden mb-3 relative">
                     <img src="https://images.unsplash.com/photo-1542291026-7eec264c27ff?auto=format&fit=crop&w=400&q=80" class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-500 opacity-80 group-hover:opacity-100" />
                </div>
                <h3 class="text-sm font-medium text-white">Urban Sneakers</h3>
                <p class="text-xs text-zinc-500 mt-1">$140.00</p>
            </div>
             <!-- Product 4 -->
            <div class="group cursor-pointer">
                <div class="aspect-[3/4] bg-zinc-900 rounded-xl overflow-hidden mb-3 relative">
                     <img src="https://images.unsplash.com/photo-1539109136881-3be0616acf4b?auto=format&fit=crop&w=400&q=80" class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-500 opacity-80 group-hover:opacity-100" />
                </div>
                <h3 class="text-sm font-medium text-white">Silk Scarf</h3>
                <p class="text-xs text-zinc-500 mt-1">$45.00</p>
            </div>
        </div>
    </main>

    <!-- Bottom Navigation -->
    <div class="fixed bottom-0 inset-x-0 h-[80px] bg-[#050505]/90 backdrop-blur-xl border-t border-white/5 flex items-start justify-between px-8 py-4 z-50">
        <button class="flex flex-col items-center gap-1.5 text-white">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/></svg>
            <span class="text-[10px] font-medium">Home</span>
        </button>
        <button class="flex flex-col items-center gap-1.5 text-zinc-600 hover:text-white transition-colors">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
            <span class="text-[10px] font-medium">Search</span>
        </button>
        <button class="flex flex-col items-center gap-1.5 text-zinc-600 hover:text-white transition-colors">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/></svg>
            <span class="text-[10px] font-medium">Saved</span>
        </button>
        <button class="flex flex-col items-center gap-1.5 text-zinc-600 hover:text-white transition-colors">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
            <span class="text-[10px] font-medium">Account</span>
        </button>
    </div>
</div>
        `}]},{id:"social-feed",name:"Social Network",description:"Image-heavy social feed with stories, post interactions, and profile.",category:"Social",screens:[{id:"social-1",name:"Main Feed",description:"Scrollable feed with stories",code:`
<div class="min-h-full w-full bg-[#050505] text-zinc-200 font-sans pb-24 pt-14 relative">
   
    <!-- Top Nav -->
    <header class="fixed top-0 inset-x-0 h-14 bg-[#050505]/90 backdrop-blur-md border-b border-white/5 flex items-center justify-between px-4 z-40">
        <h1 class="text-lg font-serif italic font-bold text-white tracking-wide">Vibe.</h1>
        <div class="flex items-center gap-4">
             <button class="text-zinc-400 hover:text-white"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"/><path d="M13.73 21a2 2 0 0 1-3.46 0"/></svg></button>
             <button class="text-zinc-400 hover:text-white"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg></button>
        </div>
    </header>

    <main>
        <!-- Stories Rail -->
        <div class="pt-4 pb-4 border-b border-white/5 overflow-x-auto no-scrollbar flex gap-4 px-4">
             <div class="flex flex-col items-center gap-1.5 flex-shrink-0">
                 <div class="w-16 h-16 rounded-full p-[2px] bg-gradient-to-tr from-yellow-400 via-orange-500 to-purple-600">
                     <div class="w-full h-full rounded-full border-2 border-[#050505] overflow-hidden">
                         <img src="https://i.pravatar.cc/150?img=32" class="w-full h-full object-cover" />
                     </div>
                 </div>
                 <span class="text-[10px] text-zinc-300">Your Story</span>
             </div>
             <div class="flex flex-col items-center gap-1.5 flex-shrink-0">
                 <div class="w-16 h-16 rounded-full p-[2px] bg-gradient-to-tr from-yellow-400 via-orange-500 to-purple-600">
                     <div class="w-full h-full rounded-full border-2 border-[#050505] overflow-hidden">
                         <img src="https://i.pravatar.cc/150?img=5" class="w-full h-full object-cover" />
                     </div>
                 </div>
                 <span class="text-[10px] text-zinc-300">alex.j</span>
             </div>
             <div class="flex flex-col items-center gap-1.5 flex-shrink-0">
                 <div class="w-16 h-16 rounded-full p-[2px] bg-zinc-800">
                     <div class="w-full h-full rounded-full border-2 border-[#050505] overflow-hidden">
                         <img src="https://i.pravatar.cc/150?img=12" class="w-full h-full object-cover" />
                     </div>
                 </div>
                 <span class="text-[10px] text-zinc-500">sarah_99</span>
             </div>
             <div class="flex flex-col items-center gap-1.5 flex-shrink-0">
                 <div class="w-16 h-16 rounded-full p-[2px] bg-gradient-to-tr from-yellow-400 via-orange-500 to-purple-600">
                     <div class="w-full h-full rounded-full border-2 border-[#050505] overflow-hidden">
                         <img src="https://i.pravatar.cc/150?img=44" class="w-full h-full object-cover" />
                     </div>
                 </div>
                 <span class="text-[10px] text-zinc-300">mike.des</span>
             </div>
        </div>

        <!-- Posts -->
        <div class="space-y-6 pt-4">
            
            <!-- Post 1 -->
            <article>
                <div class="flex items-center justify-between px-4 mb-3">
                    <div class="flex items-center gap-2">
                        <img src="https://i.pravatar.cc/150?img=5" class="w-8 h-8 rounded-full border border-white/10" />
                        <span class="text-sm font-semibold text-white">alex.j</span>
                    </div>
                    <button class="text-zinc-500 hover:text-white"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="1"/><circle cx="19" cy="12" r="1"/><circle cx="5" cy="12" r="1"/></svg></button>
                </div>
                
                <div class="w-full aspect-[4/5] bg-zinc-900 overflow-hidden relative group">
                    <img src="https://images.unsplash.com/photo-1470071459604-3b5ec3a7fe05?auto=format&fit=crop&w=800&q=80" class="w-full h-full object-cover" />
                </div>
                
                <div class="px-4 mt-3">
                    <div class="flex items-center justify-between mb-3">
                        <div class="flex items-center gap-4">
                            <button class="text-white hover:text-pink-500 transition-colors"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/></svg></button>
                            <button class="text-white hover:text-zinc-400 transition-colors"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg></button>
                            <button class="text-white hover:text-zinc-400 transition-colors"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="22" y1="2" x2="11" y2="13"/><polygon points="22 2 15 22 11 13 2 9 22 2"/></svg></button>
                        </div>
                        <button class="text-white hover:text-zinc-400"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"/></svg></button>
                    </div>
                    
                    <div class="text-sm font-semibold text-white mb-1">2,491 likes</div>
                    <div class="text-sm text-zinc-300"><span class="font-semibold text-white mr-2">alex.j</span>Chasing sunsets in the mountains  #nature #travel</div>
                    <button class="text-xs text-zinc-500 mt-2">View all 124 comments</button>
                    <div class="text-[10px] text-zinc-600 uppercase mt-1">2 hours ago</div>
                </div>
            </article>

        </div>
    </main>

    <!-- Bottom Navigation -->
    <div class="fixed bottom-0 inset-x-0 h-[80px] bg-[#050505]/95 backdrop-blur-xl border-t border-white/5 flex items-start justify-between px-8 py-4 z-50">
        <button class="flex flex-col items-center gap-1.5 text-white">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/></svg>
        </button>
        <button class="flex flex-col items-center gap-1.5 text-zinc-500 hover:text-white transition-colors">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
        </button>
        <button class="flex flex-col items-center gap-1.5 text-zinc-500 hover:text-white transition-colors">
            <div class="w-6 h-6 rounded-md border-2 border-currentColor flex items-center justify-center"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg></div>
        </button>
        <button class="flex flex-col items-center gap-1.5 text-zinc-500 hover:text-white transition-colors">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/></svg>
        </button>
        <button class="flex flex-col items-center gap-1.5 text-zinc-500 hover:text-white transition-colors">
            <div class="w-6 h-6 rounded-full bg-zinc-800 border border-zinc-600"></div>
        </button>
    </div>
</div>
              `}]}],E4=({projects:n,user:e,onCreateProject:t,onSelectProject:i,onDeleteProject:s,onLogout:a,onCreateFromTemplate:l})=>{const[c,f]=Ve.useState(!1),[h,y]=Ve.useState(""),[E,T]=Ve.useState(""),w=b=>{b.preventDefault(),h.trim()&&(t(h.trim()),y(""),f(!1))},C=n.filter(b=>b.name.toLowerCase().includes(E.toLowerCase())||b.description&&b.description.toLowerCase().includes(E.toLowerCase()));return M.jsxs("div",{className:"min-h-screen bg-[#050505] text-zinc-200 selection:bg-indigo-500/30 selection:text-indigo-200 font-sans relative overflow-hidden",children:[M.jsx("div",{className:"absolute top-0 left-0 w-full h-[500px] bg-gradient-to-b from-indigo-900/10 to-transparent pointer-events-none"}),M.jsx("div",{className:"border-b border-white/5 bg-transparent backdrop-blur-sm sticky top-0 z-50",children:M.jsxs("div",{className:"max-w-6xl mx-auto px-6 h-16 flex items-center justify-between",children:[M.jsxs("div",{className:"flex items-center gap-2",children:[M.jsx("div",{className:"w-5 h-5 bg-white text-black rounded flex items-center justify-center font-bold text-xs",children:"C"}),M.jsx("span",{className:"text-sm font-semibold text-white tracking-tight",children:"Studio"})]}),M.jsxs("div",{className:"flex items-center gap-4",children:[M.jsxs("div",{className:"text-xs text-zinc-500 flex items-center gap-2 px-3 py-1.5 rounded-full bg-white/5 border border-white/5",children:[M.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-500 shadow-[0_0_8px_rgba(16,185,129,0.4)]"}),M.jsx("span",{className:"hidden sm:inline font-medium text-zinc-400",children:e.email})]}),M.jsx("button",{onClick:a,className:"text-xs font-medium text-zinc-500 hover:text-white transition-colors",children:"Sign Out"})]})]})}),M.jsxs("div",{className:"max-w-6xl mx-auto px-6 py-12 relative z-10",children:[M.jsxs("div",{className:"flex flex-col md:flex-row md:items-end justify-between mb-8 gap-8",children:[M.jsxs("div",{children:[M.jsx("h1",{className:"text-3xl font-bold tracking-tight text-white mb-2",children:"Projects"}),M.jsx("p",{className:"text-zinc-500 text-sm",children:"Manage your generated interfaces and prototypes."})]}),M.jsxs("div",{className:"flex items-center gap-3 w-full md:w-auto",children:[M.jsxs("div",{className:"relative group flex-1 md:w-64",children:[M.jsx(o2,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-zinc-600 group-focus-within:text-zinc-400 transition-colors"}),M.jsx("input",{type:"text",placeholder:"Search...",value:E,onChange:b=>T(b.target.value),className:"w-full pl-9 pr-4 py-2 bg-zinc-900/50 border border-white/5 rounded-lg text-sm text-zinc-300 placeholder:text-zinc-700 focus:outline-none focus:bg-zinc-900 focus:border-white/10 transition-all"})]}),M.jsxs("button",{onClick:()=>f(!0),className:"flex items-center gap-2 px-4 py-2 bg-white text-black hover:bg-zinc-200 rounded-lg text-sm font-semibold transition-all shadow-[0_0_20px_rgba(255,255,255,0.1)] hover:scale-[1.02] active:scale-[0.98]",children:[M.jsx(Su,{className:"w-4 h-4"}),M.jsx("span",{children:"New"})]})]})]}),M.jsxs("div",{className:"mb-12",children:[M.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[M.jsx(p2,{className:"w-4 h-4 text-indigo-400"}),M.jsx("h2",{className:"text-sm font-bold text-white tracking-wide uppercase",children:"Start with a Template"})]}),M.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4",children:[M.jsxs("button",{onClick:()=>f(!0),className:"group relative h-40 rounded-xl bg-zinc-900/40 border border-white/5 hover:border-white/20 transition-all hover:bg-zinc-900 flex flex-col items-center justify-center p-6 text-center",children:[M.jsx("div",{className:"w-10 h-10 rounded-full bg-zinc-800 flex items-center justify-center mb-3 group-hover:scale-110 transition-transform",children:M.jsx(Su,{className:"w-5 h-5 text-white"})}),M.jsx("span",{className:"text-sm font-medium text-white",children:"Blank Canvas"}),M.jsx("span",{className:"text-xs text-zinc-500 mt-1",children:"Start from scratch"})]}),_4.map(b=>M.jsxs("button",{onClick:()=>l(b),className:"group relative h-40 rounded-xl bg-zinc-900/40 border border-white/5 hover:border-indigo-500/30 transition-all hover:bg-zinc-900 flex flex-col items-start justify-end p-5 text-left overflow-hidden",children:[M.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent to-black/80 z-10"}),M.jsxs("div",{className:"absolute top-0 left-0 right-0 h-2/3 bg-zinc-800/50 p-3 group-hover:scale-105 transition-transform duration-500 origin-top",children:[M.jsx("div",{className:"w-1/2 h-2 bg-white/10 rounded mb-2"}),M.jsx("div",{className:"w-full h-16 bg-white/5 rounded border border-white/5 mb-2"}),M.jsx("div",{className:"w-2/3 h-2 bg-white/5 rounded"})]}),M.jsxs("div",{className:"relative z-20",children:[M.jsx("span",{className:"text-[10px] text-indigo-400 font-medium bg-indigo-500/10 px-1.5 py-0.5 rounded border border-indigo-500/10 mb-2 inline-block",children:b.category}),M.jsx("h3",{className:"text-sm font-medium text-white leading-tight",children:b.name}),M.jsx("p",{className:"text-[10px] text-zinc-400 mt-0.5 line-clamp-1",children:b.description})]})]},b.id))]})]}),c&&M.jsx("div",{className:"mb-8 animate-in fade-in slide-in-from-top-2 duration-300",children:M.jsxs("form",{onSubmit:w,className:"relative max-w-2xl",children:[M.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2",children:M.jsx(vI,{className:"w-4 h-4 text-zinc-500"})}),M.jsx("input",{autoFocus:!0,type:"text",value:h,onChange:b=>y(b.target.value),onBlur:()=>!h&&f(!1),placeholder:"Project name...",className:"w-full bg-zinc-900 border border-zinc-800 rounded-xl py-3 pl-11 pr-4 text-white placeholder:text-zinc-600 focus:outline-none focus:ring-1 focus:ring-indigo-500/50 transition-all shadow-xl"}),M.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 flex items-center gap-2",children:M.jsx("span",{className:"text-[10px] text-zinc-600 font-mono border border-zinc-800 rounded px-1.5 py-0.5",children:"Enter"})})]})}),M.jsx("div",{className:"mb-4",children:M.jsx("h2",{className:"text-sm font-bold text-white tracking-wide uppercase",children:"Your Projects"})}),M.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 pb-20",children:[C.map(b=>M.jsxs("div",{onClick:()=>i(b.id),className:"group relative bg-[#0A0A0A] border border-white/5 rounded-xl p-5 hover:border-white/10 transition-all duration-300 cursor-pointer flex flex-col h-[200px] hover:shadow-2xl hover:shadow-black/50",children:[M.jsx("div",{className:"absolute -inset-px bg-gradient-to-br from-white/5 to-transparent rounded-xl opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none"}),M.jsxs("div",{className:"flex justify-between items-start mb-4 relative z-10",children:[M.jsx("div",{className:"w-10 h-10 rounded-lg bg-zinc-900/50 border border-white/5 flex items-center justify-center text-zinc-500 group-hover:text-white transition-colors",children:M.jsx(LI,{className:"w-5 h-5"})}),M.jsx("button",{onClick:x=>{x.preventDefault(),x.stopPropagation(),s(b.id)},className:"text-zinc-700 hover:text-red-400 transition-colors p-1",children:M.jsx(Af,{className:"w-4 h-4"})})]}),M.jsxs("div",{className:"flex-1 relative z-10",children:[M.jsx("h3",{className:"text-base font-semibold text-zinc-200 group-hover:text-white transition-colors mb-1",children:b.name}),M.jsx("p",{className:"text-xs text-zinc-500 line-clamp-2 leading-relaxed",children:b.description||"No description."})]}),M.jsxs("div",{className:"flex items-center justify-between pt-4 mt-auto border-t border-white/5 relative z-10",children:[M.jsxs("div",{className:"flex items-center gap-1.5 text-[11px] text-zinc-600",children:[M.jsx(fI,{className:"w-3 h-3"}),M.jsx("span",{children:new Date(b.lastModified).toLocaleDateString()})]}),M.jsxs("div",{className:"flex items-center gap-1.5 text-[11px] px-2 py-0.5 rounded-full bg-white/5 text-zinc-500 group-hover:text-zinc-300 transition-colors",children:[M.jsx(jI,{className:"w-3 h-3"}),M.jsx("span",{children:b.screens.length})]})]})]},b.id)),!c&&C.length===0&&M.jsxs("div",{onClick:()=>f(!0),className:"col-span-full h-40 flex flex-col items-center justify-center text-zinc-500 border border-dashed border-zinc-800 rounded-xl hover:border-zinc-700 hover:bg-zinc-900/20 transition-all cursor-pointer group",children:[M.jsx("div",{className:"w-10 h-10 rounded-full bg-zinc-900 flex items-center justify-center mb-2 group-hover:scale-110 transition-transform",children:M.jsx(Su,{className:"w-4 h-4 text-zinc-600"})}),M.jsx("span",{className:"text-sm font-medium text-zinc-400",children:"Create new project"})]})]})]})]})},T4=()=>{};var BT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NS=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let s=n.charCodeAt(i);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},w4=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const s=n[t++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const a=n[t++];e[i++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=n[t++],l=n[t++],c=n[t++],f=((s&7)<<18|(a&63)<<12|(l&63)<<6|c&63)-65536;e[i++]=String.fromCharCode(55296+(f>>10)),e[i++]=String.fromCharCode(56320+(f&1023))}else{const a=n[t++],l=n[t++];e[i++]=String.fromCharCode((s&15)<<12|(a&63)<<6|l&63)}}return e.join("")},MS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<n.length;s+=3){const a=n[s],l=s+1<n.length,c=l?n[s+1]:0,f=s+2<n.length,h=f?n[s+2]:0,y=a>>2,E=(a&3)<<4|c>>4;let T=(c&15)<<2|h>>6,w=h&63;f||(w=64,l||(T=64)),i.push(t[y],t[E],t[T],t[w])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(NS(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):w4(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<n.length;){const a=t[n.charAt(s++)],c=s<n.length?t[n.charAt(s)]:0;++s;const h=s<n.length?t[n.charAt(s)]:64;++s;const E=s<n.length?t[n.charAt(s)]:64;if(++s,a==null||c==null||h==null||E==null)throw new S4;const T=a<<2|c>>4;if(i.push(T),h!==64){const w=c<<4&240|h>>2;if(i.push(w),E!==64){const C=h<<6&192|E;i.push(C)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class S4 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const b4=function(n){const e=NS(n);return MS.encodeByteArray(e,!0)},nf=function(n){return b4(n).replace(/\./g,"")},kS=function(n){try{return MS.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A4(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x4=()=>A4().__FIREBASE_DEFAULTS__,C4=()=>{if(typeof process>"u"||typeof BT>"u")return;const n=BT.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},I4=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&kS(n[1]);return e&&JSON.parse(e)},kf=()=>{try{return T4()||x4()||C4()||I4()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},DS=n=>{var e,t;return(t=(e=kf())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},R4=n=>{const e=DS(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},PS=()=>{var n;return(n=kf())==null?void 0:n.config},LS=n=>{var e;return(e=kf())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N4{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function il(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function US(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M4(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",s=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l={iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...n};return[nf(JSON.stringify(t)),nf(JSON.stringify(l)),""].join(".")}const bu={};function k4(){const n={prod:[],emulator:[]};for(const e of Object.keys(bu))bu[e]?n.emulator.push(e):n.prod.push(e);return n}function D4(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let GT=!1;function VS(n,e){if(typeof window>"u"||typeof document>"u"||!il(window.location.host)||bu[n]===e||bu[n]||GT)return;bu[n]=e;function t(T){return`__firebase__banner__${T}`}const i="__firebase__banner",a=k4().prod.length>0;function l(){const T=document.getElementById(i);T&&T.remove()}function c(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function f(T,w){T.setAttribute("width","24"),T.setAttribute("id",w),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function h(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{GT=!0,l()},T}function y(T,w){T.setAttribute("id",w),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function E(){const T=D4(i),w=t("text"),C=document.getElementById(w)||document.createElement("span"),b=t("learnmore"),x=document.getElementById(b)||document.createElement("a"),N=t("preprendIcon"),z=document.getElementById(N)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const B=T.element;c(B),y(x,b);const Y=h();f(z,N),B.append(z,C,x,Y),document.body.appendChild(B)}a?(C.innerText="Preview backend disconnected.",z.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(z.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,C.innerText="Preview backend running in this workspace."),C.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function P4(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Cn())}function L4(){var e;const n=(e=kf())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function U4(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function V4(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function O4(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function z4(){const n=Cn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function F4(){return!L4()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function B4(){try{return typeof indexedDB=="object"}catch{return!1}}function G4(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var a;e(((a=s.error)==null?void 0:a.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H4="FirebaseError";class Jr extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=H4,Object.setPrototypeOf(this,Jr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Gu.prototype.create)}}class Gu{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},s=`${this.service}/${e}`,a=this.errors[e],l=a?q4(a,i):"Error",c=`${this.serviceName}: ${l} (${s}).`;return new Jr(s,c,i)}}function q4(n,e){return n.replace(Y4,(t,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const Y4=/\{\$([^}]+)}/g;function $4(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function No(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const s of t){if(!i.includes(s))return!1;const a=n[s],l=e[s];if(HT(a)&&HT(l)){if(!No(a,l))return!1}else if(a!==l)return!1}for(const s of i)if(!t.includes(s))return!1;return!0}function HT(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hu(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function gu(n){const e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[s,a]=i.split("=");e[decodeURIComponent(s)]=decodeURIComponent(a)}}),e}function yu(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function K4(n,e){const t=new J4(n,e);return t.subscribe.bind(t)}class J4{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let s;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");j4(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:i},s.next===void 0&&(s.next=om),s.error===void 0&&(s.error=om),s.complete===void 0&&(s.complete=om);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function j4(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function om(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vn(n){return n&&n._delegate?n._delegate:n}class Mo{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W4{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new N4;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(X4(e))try{this.getOrInitializeService({instanceIdentifier:bo})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:s});i.resolve(a)}catch{}}}}clearInstance(e=bo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=bo){return this.instances.has(e)}getOptions(e=bo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[a,l]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(a);i===c&&l.resolve(s)}return s}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),s=this.onInitCallbacks.get(i)??new Set;s.add(e),this.onInitCallbacks.set(i,s);const a=this.instances.get(i);return a&&e(a,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const s of i)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:Q4(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=bo){return this.component?this.component.multipleInstances?e:bo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Q4(n){return n===bo?void 0:n}function X4(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z4{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new W4(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var at;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(at||(at={}));const e3={debug:at.DEBUG,verbose:at.VERBOSE,info:at.INFO,warn:at.WARN,error:at.ERROR,silent:at.SILENT},t3=at.INFO,n3={[at.DEBUG]:"log",[at.VERBOSE]:"log",[at.INFO]:"info",[at.WARN]:"warn",[at.ERROR]:"error"},i3=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),s=n3[e];if(s)console[s](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ag{constructor(e){this.name=e,this._logLevel=t3,this._logHandler=i3,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in at))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?e3[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,at.DEBUG,...e),this._logHandler(this,at.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,at.VERBOSE,...e),this._logHandler(this,at.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,at.INFO,...e),this._logHandler(this,at.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,at.WARN,...e),this._logHandler(this,at.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,at.ERROR,...e),this._logHandler(this,at.ERROR,...e)}}const r3=(n,e)=>e.some(t=>n instanceof t);let qT,YT;function s3(){return qT||(qT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function o3(){return YT||(YT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const OS=new WeakMap,Vm=new WeakMap,zS=new WeakMap,am=new WeakMap,xg=new WeakMap;function a3(n){const e=new Promise((t,i)=>{const s=()=>{n.removeEventListener("success",a),n.removeEventListener("error",l)},a=()=>{t(Ls(n.result)),s()},l=()=>{i(n.error),s()};n.addEventListener("success",a),n.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&OS.set(t,n)}).catch(()=>{}),xg.set(e,n),e}function l3(n){if(Vm.has(n))return;const e=new Promise((t,i)=>{const s=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",l),n.removeEventListener("abort",l)},a=()=>{t(),s()},l=()=>{i(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",a),n.addEventListener("error",l),n.addEventListener("abort",l)});Vm.set(n,e)}let Om={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Vm.get(n);if(e==="objectStoreNames")return n.objectStoreNames||zS.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ls(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function u3(n){Om=n(Om)}function c3(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(lm(this),e,...t);return zS.set(i,e.sort?e.sort():[e]),Ls(i)}:o3().includes(n)?function(...e){return n.apply(lm(this),e),Ls(OS.get(this))}:function(...e){return Ls(n.apply(lm(this),e))}}function d3(n){return typeof n=="function"?c3(n):(n instanceof IDBTransaction&&l3(n),r3(n,s3())?new Proxy(n,Om):n)}function Ls(n){if(n instanceof IDBRequest)return a3(n);if(am.has(n))return am.get(n);const e=d3(n);return e!==n&&(am.set(n,e),xg.set(e,n)),e}const lm=n=>xg.get(n);function f3(n,e,{blocked:t,upgrade:i,blocking:s,terminated:a}={}){const l=indexedDB.open(n,e),c=Ls(l);return i&&l.addEventListener("upgradeneeded",f=>{i(Ls(l.result),f.oldVersion,f.newVersion,Ls(l.transaction),f)}),t&&l.addEventListener("blocked",f=>t(f.oldVersion,f.newVersion,f)),c.then(f=>{a&&f.addEventListener("close",()=>a()),s&&f.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),c}const h3=["get","getKey","getAll","getAllKeys","count"],p3=["put","add","delete","clear"],um=new Map;function $T(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(um.get(e))return um.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,s=p3.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(s||h3.includes(t)))return;const a=async function(l,...c){const f=this.transaction(l,s?"readwrite":"readonly");let h=f.store;return i&&(h=h.index(c.shift())),(await Promise.all([h[t](...c),s&&f.done]))[0]};return um.set(e,a),a}u3(n=>({...n,get:(e,t,i)=>$T(e,t)||n.get(e,t,i),has:(e,t)=>!!$T(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m3{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(g3(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function g3(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const zm="@firebase/app",KT="0.14.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gr=new Ag("@firebase/app"),y3="@firebase/app-compat",v3="@firebase/analytics-compat",_3="@firebase/analytics",E3="@firebase/app-check-compat",T3="@firebase/app-check",w3="@firebase/auth",S3="@firebase/auth-compat",b3="@firebase/database",A3="@firebase/data-connect",x3="@firebase/database-compat",C3="@firebase/functions",I3="@firebase/functions-compat",R3="@firebase/installations",N3="@firebase/installations-compat",M3="@firebase/messaging",k3="@firebase/messaging-compat",D3="@firebase/performance",P3="@firebase/performance-compat",L3="@firebase/remote-config",U3="@firebase/remote-config-compat",V3="@firebase/storage",O3="@firebase/storage-compat",z3="@firebase/firestore",F3="@firebase/ai",B3="@firebase/firestore-compat",G3="firebase",H3="12.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fm="[DEFAULT]",q3={[zm]:"fire-core",[y3]:"fire-core-compat",[_3]:"fire-analytics",[v3]:"fire-analytics-compat",[T3]:"fire-app-check",[E3]:"fire-app-check-compat",[w3]:"fire-auth",[S3]:"fire-auth-compat",[b3]:"fire-rtdb",[A3]:"fire-data-connect",[x3]:"fire-rtdb-compat",[C3]:"fire-fn",[I3]:"fire-fn-compat",[R3]:"fire-iid",[N3]:"fire-iid-compat",[M3]:"fire-fcm",[k3]:"fire-fcm-compat",[D3]:"fire-perf",[P3]:"fire-perf-compat",[L3]:"fire-rc",[U3]:"fire-rc-compat",[V3]:"fire-gcs",[O3]:"fire-gcs-compat",[z3]:"fire-fst",[B3]:"fire-fst-compat",[F3]:"fire-vertex","fire-js":"fire-js",[G3]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rf=new Map,Y3=new Map,Bm=new Map;function JT(n,e){try{n.container.addComponent(e)}catch(t){Gr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Ka(n){const e=n.name;if(Bm.has(e))return Gr.debug(`There were multiple attempts to register component ${e}.`),!1;Bm.set(e,n);for(const t of rf.values())JT(t,n);for(const t of Y3.values())JT(t,n);return!0}function Cg(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Zn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $3={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Us=new Gu("app","Firebase",$3);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K3{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Mo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Us.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rl=H3;function FS(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i={name:Fm,automaticDataCollectionEnabled:!0,...e},s=i.name;if(typeof s!="string"||!s)throw Us.create("bad-app-name",{appName:String(s)});if(t||(t=PS()),!t)throw Us.create("no-options");const a=rf.get(s);if(a){if(No(t,a.options)&&No(i,a.config))return a;throw Us.create("duplicate-app",{appName:s})}const l=new Z4(s);for(const f of Bm.values())l.addComponent(f);const c=new K3(t,i,l);return rf.set(s,c),c}function BS(n=Fm){const e=rf.get(n);if(!e&&n===Fm&&PS())return FS();if(!e)throw Us.create("no-app",{appName:n});return e}function Vs(n,e,t){let i=q3[n]??n;t&&(i+=`-${t}`);const s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const l=[`Unable to register library "${i}" with version "${e}":`];s&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&l.push("and"),a&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Gr.warn(l.join(" "));return}Ka(new Mo(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J3="firebase-heartbeat-database",j3=1,ku="firebase-heartbeat-store";let cm=null;function GS(){return cm||(cm=f3(J3,j3,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(ku)}catch(t){console.warn(t)}}}}).catch(n=>{throw Us.create("idb-open",{originalErrorMessage:n.message})})),cm}async function W3(n){try{const t=(await GS()).transaction(ku),i=await t.objectStore(ku).get(HS(n));return await t.done,i}catch(e){if(e instanceof Jr)Gr.warn(e.message);else{const t=Us.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Gr.warn(t.message)}}}async function jT(n,e){try{const i=(await GS()).transaction(ku,"readwrite");await i.objectStore(ku).put(e,HS(n)),await i.done}catch(t){if(t instanceof Jr)Gr.warn(t.message);else{const i=Us.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Gr.warn(i.message)}}}function HS(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q3=1024,X3=30;class Z3{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new t6(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=WT();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(l=>l.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats.length>X3){const l=n6(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Gr.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=WT(),{heartbeatsToSend:i,unsentEntries:s}=e6(this._heartbeatsCache.heartbeats),a=nf(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return Gr.warn(t),""}}}function WT(){return new Date().toISOString().substring(0,10)}function e6(n,e=Q3){const t=[];let i=n.slice();for(const s of n){const a=t.find(l=>l.agent===s.agent);if(a){if(a.dates.push(s.date),QT(t)>e){a.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),QT(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class t6{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return B4()?G4().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await W3(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return jT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return jT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function QT(n){return nf(JSON.stringify({version:2,heartbeats:n})).length}function n6(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i6(n){Ka(new Mo("platform-logger",e=>new m3(e),"PRIVATE")),Ka(new Mo("heartbeat",e=>new Z3(e),"PRIVATE")),Vs(zm,KT,n),Vs(zm,KT,"esm2020"),Vs("fire-js","")}i6("");function qS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const r6=qS,YS=new Gu("auth","Firebase",qS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sf=new Ag("@firebase/auth");function s6(n,...e){sf.logLevel<=at.WARN&&sf.warn(`Auth (${rl}): ${n}`,...e)}function zd(n,...e){sf.logLevel<=at.ERROR&&sf.error(`Auth (${rl}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yi(n,...e){throw Rg(n,...e)}function Di(n,...e){return Rg(n,...e)}function Ig(n,e,t){const i={...r6(),[e]:t};return new Gu("auth","Firebase",i).create(e,{appName:n.name})}function Or(n){return Ig(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function o6(n,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&yi(n,"argument-error"),Ig(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Rg(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return YS.create(n,...e)}function qe(n,e,...t){if(!n)throw Rg(e,...t)}function Ur(n){const e="INTERNAL ASSERTION FAILED: "+n;throw zd(e),new Error(e)}function Hr(n,e){n||Ur(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gm(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function a6(){return XT()==="http:"||XT()==="https:"}function XT(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l6(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(a6()||V4()||"connection"in navigator)?navigator.onLine:!0}function u6(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qu{constructor(e,t){this.shortDelay=e,this.longDelay=t,Hr(t>e,"Short delay should be less than long delay!"),this.isMobile=P4()||O4()}get(){return l6()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ng(n,e){Hr(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ur("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ur("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ur("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c6={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d6=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],f6=new qu(3e4,6e4);function jr(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function pr(n,e,t,i,s={}){return KS(n,s,async()=>{let a={},l={};i&&(e==="GET"?l=i:a={body:JSON.stringify(i)});const c=Hu({key:n.config.apiKey,...l}).slice(1),f=await n._getAdditionalHeaders();f["Content-Type"]="application/json",n.languageCode&&(f["X-Firebase-Locale"]=n.languageCode);const h={method:e,headers:f,...a};return U4()||(h.referrerPolicy="no-referrer"),n.emulatorConfig&&il(n.emulatorConfig.host)&&(h.credentials="include"),$S.fetch()(await JS(n,n.config.apiHost,t,c),h)})}async function KS(n,e,t){n._canInitEmulator=!1;const i={...c6,...e};try{const s=new p6(n),a=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const l=await a.json();if("needConfirmation"in l)throw Rd(n,"account-exists-with-different-credential",l);if(a.ok&&!("errorMessage"in l))return l;{const c=a.ok?l.errorMessage:l.error.message,[f,h]=c.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw Rd(n,"credential-already-in-use",l);if(f==="EMAIL_EXISTS")throw Rd(n,"email-already-in-use",l);if(f==="USER_DISABLED")throw Rd(n,"user-disabled",l);const y=i[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw Ig(n,y,h);yi(n,y)}}catch(s){if(s instanceof Jr)throw s;yi(n,"network-request-failed",{message:String(s)})}}async function Yu(n,e,t,i,s={}){const a=await pr(n,e,t,i,s);return"mfaPendingCredential"in a&&yi(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function JS(n,e,t,i){const s=`${e}${t}?${i}`,a=n,l=a.config.emulator?Ng(n.config,s):`${n.config.apiScheme}://${s}`;return d6.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(l).toString():l}function h6(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class p6{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Di(this.auth,"network-request-failed")),f6.get())})}}function Rd(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const s=Di(n,e,i);return s.customData._tokenResponse=t,s}function ZT(n){return n!==void 0&&n.enterprise!==void 0}class m6{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return h6(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function g6(n,e){return pr(n,"GET","/v2/recaptchaConfig",jr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function y6(n,e){return pr(n,"POST","/v1/accounts:delete",e)}async function of(n,e){return pr(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Au(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function v6(n,e=!1){const t=vn(n),i=await t.getIdToken(e),s=Mg(i);qe(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,l=a==null?void 0:a.sign_in_provider;return{claims:s,token:i,authTime:Au(dm(s.auth_time)),issuedAtTime:Au(dm(s.iat)),expirationTime:Au(dm(s.exp)),signInProvider:l||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function dm(n){return Number(n)*1e3}function Mg(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return zd("JWT malformed, contained fewer than 3 sections"),null;try{const s=kS(t);return s?JSON.parse(s):(zd("Failed to decode base64 JWT payload"),null)}catch(s){return zd("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function ew(n){const e=Mg(n);return qe(e,"internal-error"),qe(typeof e.exp<"u","internal-error"),qe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ja(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Jr&&_6(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function _6({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E6{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hm{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Au(this.lastLoginAt),this.creationTime=Au(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function af(n){var E;const e=n.auth,t=await n.getIdToken(),i=await Ja(n,of(e,{idToken:t}));qe(i==null?void 0:i.users.length,e,"internal-error");const s=i.users[0];n._notifyReloadListener(s);const a=(E=s.providerUserInfo)!=null&&E.length?jS(s.providerUserInfo):[],l=w6(n.providerData,a),c=n.isAnonymous,f=!(n.email&&s.passwordHash)&&!(l!=null&&l.length),h=c?f:!1,y={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new Hm(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(n,y)}async function T6(n){const e=vn(n);await af(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function w6(n,e){return[...n.filter(i=>!e.some(s=>s.providerId===i.providerId)),...e]}function jS(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S6(n,e){const t=await KS(n,{},async()=>{const i=Hu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:a}=n.config,l=await JS(n,s,"/v1/token",`key=${a}`),c=await n._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const f={method:"POST",headers:c,body:i};return n.emulatorConfig&&il(n.emulatorConfig.host)&&(f.credentials="include"),$S.fetch()(l,f)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function b6(n,e){return pr(n,"POST","/v2/accounts:revokeToken",jr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){qe(e.idToken,"internal-error"),qe(typeof e.idToken<"u","internal-error"),qe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):ew(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){qe(e.length!==0,"internal-error");const t=ew(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(qe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:s,expiresIn:a}=await S6(e,t);this.updateTokensAndExpiration(i,s,Number(a))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:s,expirationTime:a}=t,l=new Ba;return i&&(qe(typeof i=="string","internal-error",{appName:e}),l.refreshToken=i),s&&(qe(typeof s=="string","internal-error",{appName:e}),l.accessToken=s),a&&(qe(typeof a=="number","internal-error",{appName:e}),l.expirationTime=a),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ba,this.toJSON())}_performRefresh(){return Ur("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rs(n,e){qe(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Ri{constructor({uid:e,auth:t,stsTokenManager:i,...s}){this.providerId="firebase",this.proactiveRefresh=new E6(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Hm(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await Ja(this,this.stsTokenManager.getToken(this.auth,e));return qe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return v6(this,e)}reload(){return T6(this)}_assign(e){this!==e&&(qe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ri({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){qe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await af(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Zn(this.auth.app))return Promise.reject(Or(this.auth));const e=await this.getIdToken();return await Ja(this,y6(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,s=t.email??void 0,a=t.phoneNumber??void 0,l=t.photoURL??void 0,c=t.tenantId??void 0,f=t._redirectEventId??void 0,h=t.createdAt??void 0,y=t.lastLoginAt??void 0,{uid:E,emailVerified:T,isAnonymous:w,providerData:C,stsTokenManager:b}=t;qe(E&&b,e,"internal-error");const x=Ba.fromJSON(this.name,b);qe(typeof E=="string",e,"internal-error"),Rs(i,e.name),Rs(s,e.name),qe(typeof T=="boolean",e,"internal-error"),qe(typeof w=="boolean",e,"internal-error"),Rs(a,e.name),Rs(l,e.name),Rs(c,e.name),Rs(f,e.name),Rs(h,e.name),Rs(y,e.name);const N=new Ri({uid:E,auth:e,email:s,emailVerified:T,displayName:i,isAnonymous:w,photoURL:l,phoneNumber:a,tenantId:c,stsTokenManager:x,createdAt:h,lastLoginAt:y});return C&&Array.isArray(C)&&(N.providerData=C.map(z=>({...z}))),f&&(N._redirectEventId=f),N}static async _fromIdTokenResponse(e,t,i=!1){const s=new Ba;s.updateFromServerResponse(t);const a=new Ri({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:i});return await af(a),a}static async _fromGetAccountInfoResponse(e,t,i){const s=t.users[0];qe(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?jS(s.providerUserInfo):[],l=!(s.email&&s.passwordHash)&&!(a!=null&&a.length),c=new Ba;c.updateFromIdToken(i);const f=new Ri({uid:s.localId,auth:e,stsTokenManager:c,isAnonymous:l}),h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Hm(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(a!=null&&a.length)};return Object.assign(f,h),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tw=new Map;function Vr(n){Hr(n instanceof Function,"Expected a class definition");let e=tw.get(n);return e?(Hr(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,tw.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}WS.type="NONE";const nw=WS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fd(n,e,t){return`firebase:${n}:${e}:${t}`}class Ga{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:s,name:a}=this.auth;this.fullUserKey=Fd(this.userKey,s.apiKey,a),this.fullPersistenceKey=Fd("persistence",s.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await of(this.auth,{idToken:e}).catch(()=>{});return t?Ri._fromGetAccountInfoResponse(this.auth,t,e):null}return Ri._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Ga(Vr(nw),e,i);const s=(await Promise.all(t.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let a=s[0]||Vr(nw);const l=Fd(i,e.config.apiKey,e.name);let c=null;for(const h of t)try{const y=await h._get(l);if(y){let E;if(typeof y=="string"){const T=await of(e,{idToken:y}).catch(()=>{});if(!T)break;E=await Ri._fromGetAccountInfoResponse(e,T,y)}else E=Ri._fromJSON(e,y);h!==a&&(c=E),a=h;break}}catch{}const f=s.filter(h=>h._shouldAllowMigration);return!a._shouldAllowMigration||!f.length?new Ga(a,e,i):(a=f[0],c&&await a._set(l,c.toJSON()),await Promise.all(t.map(async h=>{if(h!==a)try{await h._remove(l)}catch{}})),new Ga(a,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iw(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(eb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(QS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(nb(e))return"Blackberry";if(ib(e))return"Webos";if(XS(e))return"Safari";if((e.includes("chrome/")||ZS(e))&&!e.includes("edge/"))return"Chrome";if(tb(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function QS(n=Cn()){return/firefox\//i.test(n)}function XS(n=Cn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ZS(n=Cn()){return/crios\//i.test(n)}function eb(n=Cn()){return/iemobile/i.test(n)}function tb(n=Cn()){return/android/i.test(n)}function nb(n=Cn()){return/blackberry/i.test(n)}function ib(n=Cn()){return/webos/i.test(n)}function kg(n=Cn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function A6(n=Cn()){var e;return kg(n)&&!!((e=window.navigator)!=null&&e.standalone)}function x6(){return z4()&&document.documentMode===10}function rb(n=Cn()){return kg(n)||tb(n)||ib(n)||nb(n)||/windows phone/i.test(n)||eb(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sb(n,e=[]){let t;switch(n){case"Browser":t=iw(Cn());break;case"Worker":t=`${iw(Cn())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${rl}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C6{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=a=>new Promise((l,c)=>{try{const f=e(a);l(f)}catch(f){c(f)}});i.onAbort=t,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I6(n,e={}){return pr(n,"GET","/v2/passwordPolicy",jr(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R6=6;class N6{constructor(e){var i;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??R6,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let s=0;s<e.length;s++)i=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,s,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M6{constructor(e,t,i,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new rw(this),this.idTokenSubscription=new rw(this),this.beforeStateQueue=new C6(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=YS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Vr(t)),this._initializationPromise=this.queue(async()=>{var i,s,a;if(!this._deleted&&(this.persistenceManager=await Ga.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((a=this.currentUser)==null?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await of(this,{idToken:e}),i=await Ri._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var a;if(Zn(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(c,c))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(a=this.redirectUser)==null?void 0:a._redirectEventId,c=i==null?void 0:i._redirectEventId,f=await this.tryRedirectSignIn(e);(!l||l===c)&&(f!=null&&f.user)&&(i=f.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(l){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return qe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await af(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=u6()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Zn(this.app))return Promise.reject(Or(this));const t=e?vn(e):null;return t&&qe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&qe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Zn(this.app)?Promise.reject(Or(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Zn(this.app)?Promise.reject(Or(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Vr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await I6(this),t=new N6(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Gu("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await b6(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Vr(e)||this._popupRedirectResolver;qe(t,this,"argument-error"),this.redirectPersistenceManager=await Ga.create(this,[Vr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,s){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let l=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(qe(c,this,"internal-error"),c.then(()=>{l||a(this.currentUser)}),typeof t=="function"){const f=e.addObserver(t,i,s);return()=>{l=!0,f()}}else{const f=e.addObserver(t);return()=>{l=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return qe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=sb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var t;if(Zn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&s6(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Wr(n){return vn(n)}class rw{constructor(e){this.auth=e,this.observer=null,this.addObserver=K4(t=>this.observer=t)}get next(){return qe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Df={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function k6(n){Df=n}function ob(n){return Df.loadJS(n)}function D6(){return Df.recaptchaEnterpriseScript}function P6(){return Df.gapiScript}function L6(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class U6{constructor(){this.enterprise=new V6}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class V6{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const O6="recaptcha-enterprise",ab="NO_RECAPTCHA";class z6{constructor(e){this.type=O6,this.auth=Wr(e)}async verify(e="verify",t=!1){async function i(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(l,c)=>{g6(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(f=>{if(f.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const h=new m6(f);return a.tenantId==null?a._agentRecaptchaConfig=h:a._tenantRecaptchaConfigs[a.tenantId]=h,l(h.siteKey)}}).catch(f=>{c(f)})})}function s(a,l,c){const f=window.grecaptcha;ZT(f)?f.enterprise.ready(()=>{f.enterprise.execute(a,{action:e}).then(h=>{l(h)}).catch(()=>{l(ab)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new U6().execute("siteKey",{action:"verify"}):new Promise((a,l)=>{i(this.auth).then(c=>{if(!t&&ZT(window.grecaptcha))s(c,a,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let f=D6();f.length!==0&&(f+=c),ob(f).then(()=>{s(c,a,l)}).catch(h=>{l(h)})}}).catch(c=>{l(c)})})}}async function sw(n,e,t,i=!1,s=!1){const a=new z6(n);let l;if(s)l=ab;else try{l=await a.verify(t)}catch{l=await a.verify(t,!0)}const c={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const f=c.phoneEnrollmentInfo.phoneNumber,h=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:f,recaptchaToken:h,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const f=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:f,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return i?Object.assign(c,{captchaResp:l}):Object.assign(c,{captchaResponse:l}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function lf(n,e,t,i,s){var a;if((a=n._getRecaptchaConfig())!=null&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await sw(n,e,t,t==="getOobCode");return i(n,l)}else return i(n,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await sw(n,e,t,t==="getOobCode");return i(n,c)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F6(n,e){const t=Cg(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),a=t.getOptions();if(No(a,e??{}))return s;yi(s,"already-initialized")}return t.initialize({options:e})}function B6(n,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(Vr);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function G6(n,e,t){const i=Wr(n);qe(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const s=!1,a=lb(e),{host:l,port:c}=H6(e),f=c===null?"":`:${c}`,h={url:`${a}//${l}${f}/`},y=Object.freeze({host:l,port:c,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!i._canInitEmulator){qe(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),qe(No(h,i.config.emulator)&&No(y,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=h,i.emulatorConfig=y,i.settings.appVerificationDisabledForTesting=!0,il(l)?(US(`${a}//${l}${f}`),VS("Auth",!0)):q6()}function lb(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function H6(n){const e=lb(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const a=s[1];return{host:a,port:ow(i.substr(a.length+1))}}else{const[a,l]=i.split(":");return{host:a,port:ow(l)}}}function ow(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function q6(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dg{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ur("not implemented")}_getIdTokenResponse(e){return Ur("not implemented")}_linkToIdToken(e,t){return Ur("not implemented")}_getReauthenticationResolver(e){return Ur("not implemented")}}async function Y6(n,e){return pr(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $6(n,e){return Yu(n,"POST","/v1/accounts:signInWithPassword",jr(n,e))}async function K6(n,e){return pr(n,"POST","/v1/accounts:sendOobCode",jr(n,e))}async function J6(n,e){return K6(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j6(n,e){return Yu(n,"POST","/v1/accounts:signInWithEmailLink",jr(n,e))}async function W6(n,e){return Yu(n,"POST","/v1/accounts:signInWithEmailLink",jr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Du extends Dg{constructor(e,t,i,s=null){super("password",i),this._email=e,this._password=t,this._tenantId=s}static _fromEmailAndPassword(e,t){return new Du(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new Du(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return lf(e,t,"signInWithPassword",$6);case"emailLink":return j6(e,{email:this._email,oobCode:this._password});default:yi(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return lf(e,i,"signUpPassword",Y6);case"emailLink":return W6(e,{idToken:t,email:this._email,oobCode:this._password});default:yi(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ha(n,e){return Yu(n,"POST","/v1/accounts:signInWithIdp",jr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q6="http://localhost";class ko extends Dg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ko(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):yi("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:s,...a}=t;if(!i||!s)return null;const l=new ko(i,s);return l.idToken=a.idToken||void 0,l.accessToken=a.accessToken||void 0,l.secret=a.secret,l.nonce=a.nonce,l.pendingToken=a.pendingToken||null,l}_getIdTokenResponse(e){const t=this.buildRequest();return Ha(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Ha(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ha(e,t)}buildRequest(){const e={requestUri:Q6,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Hu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X6(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Z6(n){const e=gu(yu(n)).link,t=e?gu(yu(e)).deep_link_id:null,i=gu(yu(n)).deep_link_id;return(i?gu(yu(i)).link:null)||i||t||e||n}class Pg{constructor(e){const t=gu(yu(e)),i=t.apiKey??null,s=t.oobCode??null,a=X6(t.mode??null);qe(i&&s&&a,"argument-error"),this.apiKey=i,this.operation=a,this.code=s,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=Z6(e);try{return new Pg(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sl{constructor(){this.providerId=sl.PROVIDER_ID}static credential(e,t){return Du._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=Pg.parseLink(t);return qe(i,"argument-error"),Du._fromEmailAndCode(e,i.code,i.tenantId)}}sl.PROVIDER_ID="password";sl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";sl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lg{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $u extends Lg{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms extends $u{constructor(){super("facebook.com")}static credential(e){return ko._fromParams({providerId:Ms.PROVIDER_ID,signInMethod:Ms.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ms.credentialFromTaggedObject(e)}static credentialFromError(e){return Ms.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ms.credential(e.oauthAccessToken)}catch{return null}}}Ms.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ms.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr extends $u{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ko._fromParams({providerId:Pr.PROVIDER_ID,signInMethod:Pr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Pr.credentialFromTaggedObject(e)}static credentialFromError(e){return Pr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return Pr.credential(t,i)}catch{return null}}}Pr.GOOGLE_SIGN_IN_METHOD="google.com";Pr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr extends $u{constructor(){super("github.com")}static credential(e){return ko._fromParams({providerId:Lr.PROVIDER_ID,signInMethod:Lr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Lr.credentialFromTaggedObject(e)}static credentialFromError(e){return Lr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Lr.credential(e.oauthAccessToken)}catch{return null}}}Lr.GITHUB_SIGN_IN_METHOD="github.com";Lr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks extends $u{constructor(){super("twitter.com")}static credential(e,t){return ko._fromParams({providerId:ks.PROVIDER_ID,signInMethod:ks.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ks.credentialFromTaggedObject(e)}static credentialFromError(e){return ks.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return ks.credential(t,i)}catch{return null}}}ks.TWITTER_SIGN_IN_METHOD="twitter.com";ks.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eL(n,e){return Yu(n,"POST","/v1/accounts:signUp",jr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,s=!1){const a=await Ri._fromIdTokenResponse(e,i,s),l=aw(i);return new Do({user:a,providerId:l,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const s=aw(i);return new Do({user:e,providerId:s,_tokenResponse:i,operationType:t})}}function aw(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uf extends Jr{constructor(e,t,i,s){super(t.code,t.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,uf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,s){return new uf(e,t,i,s)}}function ub(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?uf._fromErrorAndOperation(n,a,e,i):a})}async function tL(n,e,t=!1){const i=await Ja(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Do._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nL(n,e,t=!1){const{auth:i}=n;if(Zn(i.app))return Promise.reject(Or(i));const s="reauthenticate";try{const a=await Ja(n,ub(i,s,e,n),t);qe(a.idToken,i,"internal-error");const l=Mg(a.idToken);qe(l,i,"internal-error");const{sub:c}=l;return qe(n.uid===c,i,"user-mismatch"),Do._forOperation(n,s,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&yi(i,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cb(n,e,t=!1){if(Zn(n.app))return Promise.reject(Or(n));const i="signIn",s=await ub(n,i,e),a=await Do._fromIdTokenResponse(n,i,s);return t||await n._updateCurrentUser(a.user),a}async function iL(n,e){return cb(Wr(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function db(n){const e=Wr(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function rL(n,e,t){const i=Wr(n);await lf(i,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",J6)}async function sL(n,e,t){if(Zn(n.app))return Promise.reject(Or(n));const i=Wr(n),l=await lf(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",eL).catch(f=>{throw f.code==="auth/password-does-not-meet-requirements"&&db(n),f}),c=await Do._fromIdTokenResponse(i,"signIn",l);return await i._updateCurrentUser(c.user),c}function oL(n,e,t){return Zn(n.app)?Promise.reject(Or(n)):iL(vn(n),sl.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&db(n),i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aL(n,e){return pr(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lL(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const i=vn(n),a={idToken:await i.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},l=await Ja(i,aL(i.auth,a));i.displayName=l.displayName||null,i.photoURL=l.photoUrl||null;const c=i.providerData.find(({providerId:f})=>f==="password");c&&(c.displayName=i.displayName,c.photoURL=i.photoURL),await i._updateTokensIfNecessary(l)}function uL(n,e,t,i){return vn(n).onIdTokenChanged(e,t,i)}function cL(n,e,t){return vn(n).beforeAuthStateChanged(e,t)}function dL(n,e,t,i){return vn(n).onAuthStateChanged(e,t,i)}function fL(n){return vn(n).signOut()}const cf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fb{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(cf,"1"),this.storage.removeItem(cf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hL=1e3,pL=10;class hb extends fb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=rb(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),s=this.localCache[t];i!==s&&e(t,s,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((l,c,f)=>{this.notifyListeners(l,f)});return}const i=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const l=this.storage.getItem(i);!t&&this.localCache[i]===l||this.notifyListeners(i,l)},a=this.storage.getItem(i);x6()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,pL):s()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},hL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}hb.type="LOCAL";const mL=hb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pb extends fb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}pb.type="SESSION";const mb=pb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gL(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const i=new Pf(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:s,data:a}=t.data,l=this.handlersMap[s];if(!(l!=null&&l.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const c=Array.from(l).map(async h=>h(t.origin,a)),f=await gL(c);t.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:f})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Pf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ug(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yL{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,l;return new Promise((c,f)=>{const h=Ug("",20);s.port1.start();const y=setTimeout(()=>{f(new Error("unsupported_event"))},i);l={messageChannel:s,onMessage(E){const T=E;if(T.data.eventId===h)switch(T.data.status){case"ack":clearTimeout(y),a=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),c(T.data.response);break;default:clearTimeout(y),clearTimeout(a),f(new Error("invalid_response"));break}}},this.handlers.add(l),s.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:h,data:t},[s.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lr(){return window}function vL(n){lr().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gb(){return typeof lr().WorkerGlobalScope<"u"&&typeof lr().importScripts=="function"}async function _L(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function EL(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function TL(){return gb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yb="firebaseLocalStorageDb",wL=1,df="firebaseLocalStorage",vb="fbase_key";class Ku{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Lf(n,e){return n.transaction([df],e?"readwrite":"readonly").objectStore(df)}function SL(){const n=indexedDB.deleteDatabase(yb);return new Ku(n).toPromise()}function qm(){const n=indexedDB.open(yb,wL);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(df,{keyPath:vb})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(df)?e(i):(i.close(),await SL(),e(await qm()))})})}async function lw(n,e,t){const i=Lf(n,!0).put({[vb]:e,value:t});return new Ku(i).toPromise()}async function bL(n,e){const t=Lf(n,!1).get(e),i=await new Ku(t).toPromise();return i===void 0?null:i.value}function uw(n,e){const t=Lf(n,!0).delete(e);return new Ku(t).toPromise()}const AL=800,xL=3;class _b{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await qm(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>xL)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return gb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Pf._getInstance(TL()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,i;if(this.activeServiceWorker=await _L(),!this.activeServiceWorker)return;this.sender=new yL(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||EL()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await qm();return await lw(e,cf,"1"),await uw(e,cf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>lw(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>bL(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>uw(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const a=Lf(s,!1).getAll();return new Ku(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:s,value:a}of e)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),AL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}_b.type="LOCAL";const CL=_b;new qu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eb(n,e){return e?Vr(e):(qe(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vg extends Dg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ha(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ha(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ha(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function IL(n){return cb(n.auth,new Vg(n),n.bypassAuthState)}function RL(n){const{auth:e,user:t}=n;return qe(t,e,"internal-error"),nL(t,new Vg(n),n.bypassAuthState)}async function NL(n){const{auth:e,user:t}=n;return qe(t,e,"internal-error"),tL(t,new Vg(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tb{constructor(e,t,i,s,a=!1){this.auth=e,this.resolver=i,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:s,tenantId:a,error:l,type:c}=e;if(l){this.reject(l);return}const f={auth:this.auth,requestUri:t,sessionId:i,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(f))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return IL;case"linkViaPopup":case"linkViaRedirect":return NL;case"reauthViaPopup":case"reauthViaRedirect":return RL;default:yi(this.auth,"internal-error")}}resolve(e){Hr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Hr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ML=new qu(2e3,1e4);async function cw(n,e,t){if(Zn(n.app))return Promise.reject(Di(n,"operation-not-supported-in-this-environment"));const i=Wr(n);o6(n,e,Lg);const s=Eb(i,t);return new xo(i,"signInViaPopup",e,s).executeNotNull()}class xo extends Tb{constructor(e,t,i,s,a){super(e,t,s,a),this.provider=i,this.authWindow=null,this.pollId=null,xo.currentPopupAction&&xo.currentPopupAction.cancel(),xo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return qe(e,this.auth,"internal-error"),e}async onExecution(){Hr(this.filter.length===1,"Popup operations only handle one event");const e=Ug();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Di(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Di(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,xo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if((i=(t=this.authWindow)==null?void 0:t.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Di(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,ML.get())};e()}}xo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kL="pendingRedirect",Bd=new Map;class DL extends Tb{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Bd.get(this.auth._key());if(!e){try{const i=await PL(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Bd.set(this.auth._key(),e)}return this.bypassAuthState||Bd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function PL(n,e){const t=VL(e),i=UL(n);if(!await i._isAvailable())return!1;const s=await i._get(t)==="true";return await i._remove(t),s}function LL(n,e){Bd.set(n._key(),e)}function UL(n){return Vr(n._redirectPersistence)}function VL(n){return Fd(kL,n.config.apiKey,n.name)}async function OL(n,e,t=!1){if(Zn(n.app))return Promise.reject(Or(n));const i=Wr(n),s=Eb(i,e),l=await new DL(i,s,t).execute();return l&&!t&&(delete l.user._redirectEventId,await i._persistUserIfCurrent(l.user),await i._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zL=600*1e3;class FL{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!BL(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!wb(e)){const s=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";t.onError(Di(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=zL&&this.cachedEventUids.clear(),this.cachedEventUids.has(dw(e))}saveEventToCache(e){this.cachedEventUids.add(dw(e)),this.lastProcessedEventTime=Date.now()}}function dw(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function wb({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function BL(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return wb(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GL(n,e={}){return pr(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HL=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,qL=/^https?/;async function YL(n){if(n.config.emulator)return;const{authorizedDomains:e}=await GL(n);for(const t of e)try{if($L(t))return}catch{}yi(n,"unauthorized-domain")}function $L(n){const e=Gm(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const l=new URL(n);return l.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&l.hostname===i}if(!qL.test(t))return!1;if(HL.test(n))return i===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KL=new qu(3e4,6e4);function fw(){const n=lr().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function JL(n){return new Promise((e,t)=>{var s,a,l;function i(){fw(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{fw(),t(Di(n,"network-request-failed"))},timeout:KL.get()})}if((a=(s=lr().gapi)==null?void 0:s.iframes)!=null&&a.Iframe)e(gapi.iframes.getContext());else if((l=lr().gapi)!=null&&l.load)i();else{const c=L6("iframefcb");return lr()[c]=()=>{gapi.load?i():t(Di(n,"network-request-failed"))},ob(`${P6()}?onload=${c}`).catch(f=>t(f))}}).catch(e=>{throw Gd=null,e})}let Gd=null;function jL(n){return Gd=Gd||JL(n),Gd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WL=new qu(5e3,15e3),QL="__/auth/iframe",XL="emulator/auth/iframe",ZL={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},eU=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function tU(n){const e=n.config;qe(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Ng(e,XL):`https://${n.config.authDomain}/${QL}`,i={apiKey:e.apiKey,appName:n.name,v:rl},s=eU.get(n.config.apiHost);s&&(i.eid=s);const a=n._getFrameworks();return a.length&&(i.fw=a.join(",")),`${t}?${Hu(i).slice(1)}`}async function nU(n){const e=await jL(n),t=lr().gapi;return qe(t,n,"internal-error"),e.open({where:document.body,url:tU(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ZL,dontclear:!0},i=>new Promise(async(s,a)=>{await i.restyle({setHideOnLeave:!1});const l=Di(n,"network-request-failed"),c=lr().setTimeout(()=>{a(l)},WL.get());function f(){lr().clearTimeout(c),s(i)}i.ping(f).then(f,()=>{a(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iU={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},rU=500,sU=600,oU="_blank",aU="http://localhost";class hw{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function lU(n,e,t,i=rU,s=sU){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),l=Math.max((window.screen.availWidth-i)/2,0).toString();let c="";const f={...iU,width:i.toString(),height:s.toString(),top:a,left:l},h=Cn().toLowerCase();t&&(c=ZS(h)?oU:t),QS(h)&&(e=e||aU,f.scrollbars="yes");const y=Object.entries(f).reduce((T,[w,C])=>`${T}${w}=${C},`,"");if(A6(h)&&c!=="_self")return uU(e||"",c),new hw(null);const E=window.open(e||"",c,y);qe(E,n,"popup-blocked");try{E.focus()}catch{}return new hw(E)}function uU(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cU="__/auth/handler",dU="emulator/auth/handler",fU=encodeURIComponent("fac");async function pw(n,e,t,i,s,a){qe(n.config.authDomain,n,"auth-domain-config-required"),qe(n.config.apiKey,n,"invalid-api-key");const l={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:rl,eventId:s};if(e instanceof Lg){e.setDefaultLanguage(n.languageCode),l.providerId=e.providerId||"",$4(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,E]of Object.entries({}))l[y]=E}if(e instanceof $u){const y=e.getScopes().filter(E=>E!=="");y.length>0&&(l.scopes=y.join(","))}n.tenantId&&(l.tid=n.tenantId);const c=l;for(const y of Object.keys(c))c[y]===void 0&&delete c[y];const f=await n._getAppCheckToken(),h=f?`#${fU}=${encodeURIComponent(f)}`:"";return`${hU(n)}?${Hu(c).slice(1)}${h}`}function hU({config:n}){return n.emulator?Ng(n,dU):`https://${n.authDomain}/${cU}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fm="webStorageSupport";class pU{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=mb,this._completeRedirectFn=OL,this._overrideRedirectResult=LL}async _openPopup(e,t,i,s){var l;Hr((l=this.eventManagers[e._key()])==null?void 0:l.manager,"_initialize() not called before _openPopup()");const a=await pw(e,t,i,Gm(),s);return lU(e,a,Ug())}async _openRedirect(e,t,i,s){await this._originValidation(e);const a=await pw(e,t,i,Gm(),s);return vL(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:a}=this.eventManagers[t];return s?Promise.resolve(s):(Hr(a,"If manager is not set, promise should be"),a)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await nU(e),i=new FL(e);return t.register("authEvent",s=>(qe(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(fm,{type:fm},s=>{var l;const a=(l=s==null?void 0:s[0])==null?void 0:l[fm];a!==void 0&&t(!!a),yi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=YL(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return rb()||XS()||kg()}}const mU=pU;var mw="@firebase/auth",gw="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gU{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){qe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yU(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function vU(n){Ka(new Mo("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:l,authDomain:c}=i.options;qe(l&&!l.includes(":"),"invalid-api-key",{appName:i.name});const f={apiKey:l,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:sb(n)},h=new M6(i,s,a,f);return B6(h,t),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Ka(new Mo("auth-internal",e=>{const t=Wr(e.getProvider("auth").getImmediate());return(i=>new gU(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Vs(mw,gw,yU(n)),Vs(mw,gw,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _U=300,EU=LS("authIdTokenMaxAge")||_U;let yw=null;const TU=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>EU)return;const s=t==null?void 0:t.token;yw!==s&&(yw=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function wU(n=BS()){const e=Cg(n,"auth");if(e.isInitialized())return e.getImmediate();const t=F6(n,{popupRedirectResolver:mU,persistence:[CL,mL,mb]}),i=LS("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(i,location.origin);if(location.origin===a.origin){const l=TU(a.toString());cL(t,l,()=>l(t.currentUser)),uL(t,c=>l(c))}}const s=DS("auth");return s&&G6(t,`http://${s}`),t}function SU(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}k6({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=s=>{const a=Di("internal-error");a.customData=s,t(a)},i.type="text/javascript",i.charset="UTF-8",SU().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});vU("Browser");var vw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Os,Sb;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(L,V){function k(){}k.prototype=V.prototype,L.F=V.prototype,L.prototype=new k,L.prototype.constructor=L,L.D=function(H,K,U){for(var O=Array(arguments.length-2),D=2;D<arguments.length;D++)O[D-2]=arguments[D];return V.prototype[K].apply(H,O)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(L,V,k){k||(k=0);const H=Array(16);if(typeof V=="string")for(var K=0;K<16;++K)H[K]=V.charCodeAt(k++)|V.charCodeAt(k++)<<8|V.charCodeAt(k++)<<16|V.charCodeAt(k++)<<24;else for(K=0;K<16;++K)H[K]=V[k++]|V[k++]<<8|V[k++]<<16|V[k++]<<24;V=L.g[0],k=L.g[1],K=L.g[2];let U=L.g[3],O;O=V+(U^k&(K^U))+H[0]+3614090360&4294967295,V=k+(O<<7&4294967295|O>>>25),O=U+(K^V&(k^K))+H[1]+3905402710&4294967295,U=V+(O<<12&4294967295|O>>>20),O=K+(k^U&(V^k))+H[2]+606105819&4294967295,K=U+(O<<17&4294967295|O>>>15),O=k+(V^K&(U^V))+H[3]+3250441966&4294967295,k=K+(O<<22&4294967295|O>>>10),O=V+(U^k&(K^U))+H[4]+4118548399&4294967295,V=k+(O<<7&4294967295|O>>>25),O=U+(K^V&(k^K))+H[5]+1200080426&4294967295,U=V+(O<<12&4294967295|O>>>20),O=K+(k^U&(V^k))+H[6]+2821735955&4294967295,K=U+(O<<17&4294967295|O>>>15),O=k+(V^K&(U^V))+H[7]+4249261313&4294967295,k=K+(O<<22&4294967295|O>>>10),O=V+(U^k&(K^U))+H[8]+1770035416&4294967295,V=k+(O<<7&4294967295|O>>>25),O=U+(K^V&(k^K))+H[9]+2336552879&4294967295,U=V+(O<<12&4294967295|O>>>20),O=K+(k^U&(V^k))+H[10]+4294925233&4294967295,K=U+(O<<17&4294967295|O>>>15),O=k+(V^K&(U^V))+H[11]+2304563134&4294967295,k=K+(O<<22&4294967295|O>>>10),O=V+(U^k&(K^U))+H[12]+1804603682&4294967295,V=k+(O<<7&4294967295|O>>>25),O=U+(K^V&(k^K))+H[13]+4254626195&4294967295,U=V+(O<<12&4294967295|O>>>20),O=K+(k^U&(V^k))+H[14]+2792965006&4294967295,K=U+(O<<17&4294967295|O>>>15),O=k+(V^K&(U^V))+H[15]+1236535329&4294967295,k=K+(O<<22&4294967295|O>>>10),O=V+(K^U&(k^K))+H[1]+4129170786&4294967295,V=k+(O<<5&4294967295|O>>>27),O=U+(k^K&(V^k))+H[6]+3225465664&4294967295,U=V+(O<<9&4294967295|O>>>23),O=K+(V^k&(U^V))+H[11]+643717713&4294967295,K=U+(O<<14&4294967295|O>>>18),O=k+(U^V&(K^U))+H[0]+3921069994&4294967295,k=K+(O<<20&4294967295|O>>>12),O=V+(K^U&(k^K))+H[5]+3593408605&4294967295,V=k+(O<<5&4294967295|O>>>27),O=U+(k^K&(V^k))+H[10]+38016083&4294967295,U=V+(O<<9&4294967295|O>>>23),O=K+(V^k&(U^V))+H[15]+3634488961&4294967295,K=U+(O<<14&4294967295|O>>>18),O=k+(U^V&(K^U))+H[4]+3889429448&4294967295,k=K+(O<<20&4294967295|O>>>12),O=V+(K^U&(k^K))+H[9]+568446438&4294967295,V=k+(O<<5&4294967295|O>>>27),O=U+(k^K&(V^k))+H[14]+3275163606&4294967295,U=V+(O<<9&4294967295|O>>>23),O=K+(V^k&(U^V))+H[3]+4107603335&4294967295,K=U+(O<<14&4294967295|O>>>18),O=k+(U^V&(K^U))+H[8]+1163531501&4294967295,k=K+(O<<20&4294967295|O>>>12),O=V+(K^U&(k^K))+H[13]+2850285829&4294967295,V=k+(O<<5&4294967295|O>>>27),O=U+(k^K&(V^k))+H[2]+4243563512&4294967295,U=V+(O<<9&4294967295|O>>>23),O=K+(V^k&(U^V))+H[7]+1735328473&4294967295,K=U+(O<<14&4294967295|O>>>18),O=k+(U^V&(K^U))+H[12]+2368359562&4294967295,k=K+(O<<20&4294967295|O>>>12),O=V+(k^K^U)+H[5]+4294588738&4294967295,V=k+(O<<4&4294967295|O>>>28),O=U+(V^k^K)+H[8]+2272392833&4294967295,U=V+(O<<11&4294967295|O>>>21),O=K+(U^V^k)+H[11]+1839030562&4294967295,K=U+(O<<16&4294967295|O>>>16),O=k+(K^U^V)+H[14]+4259657740&4294967295,k=K+(O<<23&4294967295|O>>>9),O=V+(k^K^U)+H[1]+2763975236&4294967295,V=k+(O<<4&4294967295|O>>>28),O=U+(V^k^K)+H[4]+1272893353&4294967295,U=V+(O<<11&4294967295|O>>>21),O=K+(U^V^k)+H[7]+4139469664&4294967295,K=U+(O<<16&4294967295|O>>>16),O=k+(K^U^V)+H[10]+3200236656&4294967295,k=K+(O<<23&4294967295|O>>>9),O=V+(k^K^U)+H[13]+681279174&4294967295,V=k+(O<<4&4294967295|O>>>28),O=U+(V^k^K)+H[0]+3936430074&4294967295,U=V+(O<<11&4294967295|O>>>21),O=K+(U^V^k)+H[3]+3572445317&4294967295,K=U+(O<<16&4294967295|O>>>16),O=k+(K^U^V)+H[6]+76029189&4294967295,k=K+(O<<23&4294967295|O>>>9),O=V+(k^K^U)+H[9]+3654602809&4294967295,V=k+(O<<4&4294967295|O>>>28),O=U+(V^k^K)+H[12]+3873151461&4294967295,U=V+(O<<11&4294967295|O>>>21),O=K+(U^V^k)+H[15]+530742520&4294967295,K=U+(O<<16&4294967295|O>>>16),O=k+(K^U^V)+H[2]+3299628645&4294967295,k=K+(O<<23&4294967295|O>>>9),O=V+(K^(k|~U))+H[0]+4096336452&4294967295,V=k+(O<<6&4294967295|O>>>26),O=U+(k^(V|~K))+H[7]+1126891415&4294967295,U=V+(O<<10&4294967295|O>>>22),O=K+(V^(U|~k))+H[14]+2878612391&4294967295,K=U+(O<<15&4294967295|O>>>17),O=k+(U^(K|~V))+H[5]+4237533241&4294967295,k=K+(O<<21&4294967295|O>>>11),O=V+(K^(k|~U))+H[12]+1700485571&4294967295,V=k+(O<<6&4294967295|O>>>26),O=U+(k^(V|~K))+H[3]+2399980690&4294967295,U=V+(O<<10&4294967295|O>>>22),O=K+(V^(U|~k))+H[10]+4293915773&4294967295,K=U+(O<<15&4294967295|O>>>17),O=k+(U^(K|~V))+H[1]+2240044497&4294967295,k=K+(O<<21&4294967295|O>>>11),O=V+(K^(k|~U))+H[8]+1873313359&4294967295,V=k+(O<<6&4294967295|O>>>26),O=U+(k^(V|~K))+H[15]+4264355552&4294967295,U=V+(O<<10&4294967295|O>>>22),O=K+(V^(U|~k))+H[6]+2734768916&4294967295,K=U+(O<<15&4294967295|O>>>17),O=k+(U^(K|~V))+H[13]+1309151649&4294967295,k=K+(O<<21&4294967295|O>>>11),O=V+(K^(k|~U))+H[4]+4149444226&4294967295,V=k+(O<<6&4294967295|O>>>26),O=U+(k^(V|~K))+H[11]+3174756917&4294967295,U=V+(O<<10&4294967295|O>>>22),O=K+(V^(U|~k))+H[2]+718787259&4294967295,K=U+(O<<15&4294967295|O>>>17),O=k+(U^(K|~V))+H[9]+3951481745&4294967295,L.g[0]=L.g[0]+V&4294967295,L.g[1]=L.g[1]+(K+(O<<21&4294967295|O>>>11))&4294967295,L.g[2]=L.g[2]+K&4294967295,L.g[3]=L.g[3]+U&4294967295}i.prototype.v=function(L,V){V===void 0&&(V=L.length);const k=V-this.blockSize,H=this.C;let K=this.h,U=0;for(;U<V;){if(K==0)for(;U<=k;)s(this,L,U),U+=this.blockSize;if(typeof L=="string"){for(;U<V;)if(H[K++]=L.charCodeAt(U++),K==this.blockSize){s(this,H),K=0;break}}else for(;U<V;)if(H[K++]=L[U++],K==this.blockSize){s(this,H),K=0;break}}this.h=K,this.o+=V},i.prototype.A=function(){var L=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);L[0]=128;for(var V=1;V<L.length-8;++V)L[V]=0;V=this.o*8;for(var k=L.length-8;k<L.length;++k)L[k]=V&255,V/=256;for(this.v(L),L=Array(16),V=0,k=0;k<4;++k)for(let H=0;H<32;H+=8)L[V++]=this.g[k]>>>H&255;return L};function a(L,V){var k=c;return Object.prototype.hasOwnProperty.call(k,L)?k[L]:k[L]=V(L)}function l(L,V){this.h=V;const k=[];let H=!0;for(let K=L.length-1;K>=0;K--){const U=L[K]|0;H&&U==V||(k[K]=U,H=!1)}this.g=k}var c={};function f(L){return-128<=L&&L<128?a(L,function(V){return new l([V|0],V<0?-1:0)}):new l([L|0],L<0?-1:0)}function h(L){if(isNaN(L)||!isFinite(L))return E;if(L<0)return x(h(-L));const V=[];let k=1;for(let H=0;L>=k;H++)V[H]=L/k|0,k*=4294967296;return new l(V,0)}function y(L,V){if(L.length==0)throw Error("number format error: empty string");if(V=V||10,V<2||36<V)throw Error("radix out of range: "+V);if(L.charAt(0)=="-")return x(y(L.substring(1),V));if(L.indexOf("-")>=0)throw Error('number format error: interior "-" character');const k=h(Math.pow(V,8));let H=E;for(let U=0;U<L.length;U+=8){var K=Math.min(8,L.length-U);const O=parseInt(L.substring(U,U+K),V);K<8?(K=h(Math.pow(V,K)),H=H.j(K).add(h(O))):(H=H.j(k),H=H.add(h(O)))}return H}var E=f(0),T=f(1),w=f(16777216);n=l.prototype,n.m=function(){if(b(this))return-x(this).m();let L=0,V=1;for(let k=0;k<this.g.length;k++){const H=this.i(k);L+=(H>=0?H:4294967296+H)*V,V*=4294967296}return L},n.toString=function(L){if(L=L||10,L<2||36<L)throw Error("radix out of range: "+L);if(C(this))return"0";if(b(this))return"-"+x(this).toString(L);const V=h(Math.pow(L,6));var k=this;let H="";for(;;){const K=Y(k,V).g;k=N(k,K.j(V));let U=((k.g.length>0?k.g[0]:k.h)>>>0).toString(L);if(k=K,C(k))return U+H;for(;U.length<6;)U="0"+U;H=U+H}},n.i=function(L){return L<0?0:L<this.g.length?this.g[L]:this.h};function C(L){if(L.h!=0)return!1;for(let V=0;V<L.g.length;V++)if(L.g[V]!=0)return!1;return!0}function b(L){return L.h==-1}n.l=function(L){return L=N(this,L),b(L)?-1:C(L)?0:1};function x(L){const V=L.g.length,k=[];for(let H=0;H<V;H++)k[H]=~L.g[H];return new l(k,~L.h).add(T)}n.abs=function(){return b(this)?x(this):this},n.add=function(L){const V=Math.max(this.g.length,L.g.length),k=[];let H=0;for(let K=0;K<=V;K++){let U=H+(this.i(K)&65535)+(L.i(K)&65535),O=(U>>>16)+(this.i(K)>>>16)+(L.i(K)>>>16);H=O>>>16,U&=65535,O&=65535,k[K]=O<<16|U}return new l(k,k[k.length-1]&-2147483648?-1:0)};function N(L,V){return L.add(x(V))}n.j=function(L){if(C(this)||C(L))return E;if(b(this))return b(L)?x(this).j(x(L)):x(x(this).j(L));if(b(L))return x(this.j(x(L)));if(this.l(w)<0&&L.l(w)<0)return h(this.m()*L.m());const V=this.g.length+L.g.length,k=[];for(var H=0;H<2*V;H++)k[H]=0;for(H=0;H<this.g.length;H++)for(let K=0;K<L.g.length;K++){const U=this.i(H)>>>16,O=this.i(H)&65535,D=L.i(K)>>>16,he=L.i(K)&65535;k[2*H+2*K]+=O*he,z(k,2*H+2*K),k[2*H+2*K+1]+=U*he,z(k,2*H+2*K+1),k[2*H+2*K+1]+=O*D,z(k,2*H+2*K+1),k[2*H+2*K+2]+=U*D,z(k,2*H+2*K+2)}for(L=0;L<V;L++)k[L]=k[2*L+1]<<16|k[2*L];for(L=V;L<2*V;L++)k[L]=0;return new l(k,0)};function z(L,V){for(;(L[V]&65535)!=L[V];)L[V+1]+=L[V]>>>16,L[V]&=65535,V++}function B(L,V){this.g=L,this.h=V}function Y(L,V){if(C(V))throw Error("division by zero");if(C(L))return new B(E,E);if(b(L))return V=Y(x(L),V),new B(x(V.g),x(V.h));if(b(V))return V=Y(L,x(V)),new B(x(V.g),V.h);if(L.g.length>30){if(b(L)||b(V))throw Error("slowDivide_ only works with positive integers.");for(var k=T,H=V;H.l(L)<=0;)k=J(k),H=J(H);var K=$(k,1),U=$(H,1);for(H=$(H,2),k=$(k,2);!C(H);){var O=U.add(H);O.l(L)<=0&&(K=K.add(k),U=O),H=$(H,1),k=$(k,1)}return V=N(L,K.j(V)),new B(K,V)}for(K=E;L.l(V)>=0;){for(k=Math.max(1,Math.floor(L.m()/V.m())),H=Math.ceil(Math.log(k)/Math.LN2),H=H<=48?1:Math.pow(2,H-48),U=h(k),O=U.j(V);b(O)||O.l(L)>0;)k-=H,U=h(k),O=U.j(V);C(U)&&(U=T),K=K.add(U),L=N(L,O)}return new B(K,L)}n.B=function(L){return Y(this,L).h},n.and=function(L){const V=Math.max(this.g.length,L.g.length),k=[];for(let H=0;H<V;H++)k[H]=this.i(H)&L.i(H);return new l(k,this.h&L.h)},n.or=function(L){const V=Math.max(this.g.length,L.g.length),k=[];for(let H=0;H<V;H++)k[H]=this.i(H)|L.i(H);return new l(k,this.h|L.h)},n.xor=function(L){const V=Math.max(this.g.length,L.g.length),k=[];for(let H=0;H<V;H++)k[H]=this.i(H)^L.i(H);return new l(k,this.h^L.h)};function J(L){const V=L.g.length+1,k=[];for(let H=0;H<V;H++)k[H]=L.i(H)<<1|L.i(H-1)>>>31;return new l(k,L.h)}function $(L,V){const k=V>>5;V%=32;const H=L.g.length-k,K=[];for(let U=0;U<H;U++)K[U]=V>0?L.i(U+k)>>>V|L.i(U+k+1)<<32-V:L.i(U+k);return new l(K,L.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,Sb=i,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.B,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=h,l.fromString=y,Os=l}).apply(typeof vw<"u"?vw:typeof self<"u"?self:typeof window<"u"?window:{});var Nd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var bb,vu,Ab,Hd,Ym,xb,Cb,Ib;(function(){var n,e=Object.defineProperty;function t(g){g=[typeof globalThis=="object"&&globalThis,g,typeof window=="object"&&window,typeof self=="object"&&self,typeof Nd=="object"&&Nd];for(var S=0;S<g.length;++S){var I=g[S];if(I&&I.Math==Math)return I}throw Error("Cannot find global object")}var i=t(this);function s(g,S){if(S)e:{var I=i;g=g.split(".");for(var q=0;q<g.length-1;q++){var ae=g[q];if(!(ae in I))break e;I=I[ae]}g=g[g.length-1],q=I[g],S=S(q),S!=q&&S!=null&&e(I,g,{configurable:!0,writable:!0,value:S})}}s("Symbol.dispose",function(g){return g||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(g){return g||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(g){return g||function(S){var I=[],q;for(q in S)Object.prototype.hasOwnProperty.call(S,q)&&I.push([q,S[q]]);return I}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function c(g){var S=typeof g;return S=="object"&&g!=null||S=="function"}function f(g,S,I){return g.call.apply(g.bind,arguments)}function h(g,S,I){return h=f,h.apply(null,arguments)}function y(g,S){var I=Array.prototype.slice.call(arguments,1);return function(){var q=I.slice();return q.push.apply(q,arguments),g.apply(this,q)}}function E(g,S){function I(){}I.prototype=S.prototype,g.Z=S.prototype,g.prototype=new I,g.prototype.constructor=g,g.Ob=function(q,ae,fe){for(var Me=Array(arguments.length-2),et=2;et<arguments.length;et++)Me[et-2]=arguments[et];return S.prototype[ae].apply(q,Me)}}var T=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?g=>g&&AsyncContext.Snapshot.wrap(g):g=>g;function w(g){const S=g.length;if(S>0){const I=Array(S);for(let q=0;q<S;q++)I[q]=g[q];return I}return[]}function C(g,S){for(let q=1;q<arguments.length;q++){const ae=arguments[q];var I=typeof ae;if(I=I!="object"?I:ae?Array.isArray(ae)?"array":I:"null",I=="array"||I=="object"&&typeof ae.length=="number"){I=g.length||0;const fe=ae.length||0;g.length=I+fe;for(let Me=0;Me<fe;Me++)g[I+Me]=ae[Me]}else g.push(ae)}}class b{constructor(S,I){this.i=S,this.j=I,this.h=0,this.g=null}get(){let S;return this.h>0?(this.h--,S=this.g,this.g=S.next,S.next=null):S=this.i(),S}}function x(g){l.setTimeout(()=>{throw g},0)}function N(){var g=L;let S=null;return g.g&&(S=g.g,g.g=g.g.next,g.g||(g.h=null),S.next=null),S}class z{constructor(){this.h=this.g=null}add(S,I){const q=B.get();q.set(S,I),this.h?this.h.next=q:this.g=q,this.h=q}}var B=new b(()=>new Y,g=>g.reset());class Y{constructor(){this.next=this.g=this.h=null}set(S,I){this.h=S,this.g=I,this.next=null}reset(){this.next=this.g=this.h=null}}let J,$=!1,L=new z,V=()=>{const g=Promise.resolve(void 0);J=()=>{g.then(k)}};function k(){for(var g;g=N();){try{g.h.call(g.g)}catch(I){x(I)}var S=B;S.j(g),S.h<100&&(S.h++,g.next=S.g,S.g=g)}$=!1}function H(){this.u=this.u,this.C=this.C}H.prototype.u=!1,H.prototype.dispose=function(){this.u||(this.u=!0,this.N())},H.prototype[Symbol.dispose]=function(){this.dispose()},H.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function K(g,S){this.type=g,this.g=this.target=S,this.defaultPrevented=!1}K.prototype.h=function(){this.defaultPrevented=!0};var U=(function(){if(!l.addEventListener||!Object.defineProperty)return!1;var g=!1,S=Object.defineProperty({},"passive",{get:function(){g=!0}});try{const I=()=>{};l.addEventListener("test",I,S),l.removeEventListener("test",I,S)}catch{}return g})();function O(g){return/^[\s\xa0]*$/.test(g)}function D(g,S){K.call(this,g?g.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,g&&this.init(g,S)}E(D,K),D.prototype.init=function(g,S){const I=this.type=g.type,q=g.changedTouches&&g.changedTouches.length?g.changedTouches[0]:null;this.target=g.target||g.srcElement,this.g=S,S=g.relatedTarget,S||(I=="mouseover"?S=g.fromElement:I=="mouseout"&&(S=g.toElement)),this.relatedTarget=S,q?(this.clientX=q.clientX!==void 0?q.clientX:q.pageX,this.clientY=q.clientY!==void 0?q.clientY:q.pageY,this.screenX=q.screenX||0,this.screenY=q.screenY||0):(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0),this.button=g.button,this.key=g.key||"",this.ctrlKey=g.ctrlKey,this.altKey=g.altKey,this.shiftKey=g.shiftKey,this.metaKey=g.metaKey,this.pointerId=g.pointerId||0,this.pointerType=g.pointerType,this.state=g.state,this.i=g,g.defaultPrevented&&D.Z.h.call(this)},D.prototype.h=function(){D.Z.h.call(this);const g=this.i;g.preventDefault?g.preventDefault():g.returnValue=!1};var he="closure_listenable_"+(Math.random()*1e6|0),ie=0;function re(g,S,I,q,ae){this.listener=g,this.proxy=null,this.src=S,this.type=I,this.capture=!!q,this.ha=ae,this.key=++ie,this.da=this.fa=!1}function be(g){g.da=!0,g.listener=null,g.proxy=null,g.src=null,g.ha=null}function ne(g,S,I){for(const q in g)S.call(I,g[q],q,g)}function Te(g,S){for(const I in g)S.call(void 0,g[I],I,g)}function P(g){const S={};for(const I in g)S[I]=g[I];return S}const G="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function oe(g,S){let I,q;for(let ae=1;ae<arguments.length;ae++){q=arguments[ae];for(I in q)g[I]=q[I];for(let fe=0;fe<G.length;fe++)I=G[fe],Object.prototype.hasOwnProperty.call(q,I)&&(g[I]=q[I])}}function Q(g){this.src=g,this.g={},this.h=0}Q.prototype.add=function(g,S,I,q,ae){const fe=g.toString();g=this.g[fe],g||(g=this.g[fe]=[],this.h++);const Me=ge(g,S,q,ae);return Me>-1?(S=g[Me],I||(S.fa=!1)):(S=new re(S,this.src,fe,!!q,ae),S.fa=I,g.push(S)),S};function Z(g,S){const I=S.type;if(I in g.g){var q=g.g[I],ae=Array.prototype.indexOf.call(q,S,void 0),fe;(fe=ae>=0)&&Array.prototype.splice.call(q,ae,1),fe&&(be(S),g.g[I].length==0&&(delete g.g[I],g.h--))}}function ge(g,S,I,q){for(let ae=0;ae<g.length;++ae){const fe=g[ae];if(!fe.da&&fe.listener==S&&fe.capture==!!I&&fe.ha==q)return ae}return-1}var Ae="closure_lm_"+(Math.random()*1e6|0),Ne={};function De(g,S,I,q,ae){if(Array.isArray(S)){for(let fe=0;fe<S.length;fe++)De(g,S[fe],I,q,ae);return null}return I=j(I),g&&g[he]?g.J(S,I,c(q)?!!q.capture:!1,ae):je(g,S,I,!1,q,ae)}function je(g,S,I,q,ae,fe){if(!S)throw Error("Invalid event type");const Me=c(ae)?!!ae.capture:!!ae;let et=pe(g);if(et||(g[Ae]=et=new Q(g)),I=et.add(S,I,q,Me,fe),I.proxy)return I;if(q=$e(),I.proxy=q,q.src=g,q.listener=I,g.addEventListener)U||(ae=Me),ae===void 0&&(ae=!1),g.addEventListener(S.toString(),q,ae);else if(g.attachEvent)g.attachEvent(R(S.toString()),q);else if(g.addListener&&g.removeListener)g.addListener(q);else throw Error("addEventListener and attachEvent are unavailable.");return I}function $e(){function g(I){return S.call(g.src,g.listener,I)}const S=_e;return g}function Et(g,S,I,q,ae){if(Array.isArray(S))for(var fe=0;fe<S.length;fe++)Et(g,S[fe],I,q,ae);else q=c(q)?!!q.capture:!!q,I=j(I),g&&g[he]?(g=g.i,fe=String(S).toString(),fe in g.g&&(S=g.g[fe],I=ge(S,I,q,ae),I>-1&&(be(S[I]),Array.prototype.splice.call(S,I,1),S.length==0&&(delete g.g[fe],g.h--)))):g&&(g=pe(g))&&(S=g.g[S.toString()],g=-1,S&&(g=ge(S,I,q,ae)),(I=g>-1?S[g]:null)&&kt(I))}function kt(g){if(typeof g!="number"&&g&&!g.da){var S=g.src;if(S&&S[he])Z(S.i,g);else{var I=g.type,q=g.proxy;S.removeEventListener?S.removeEventListener(I,q,g.capture):S.detachEvent?S.detachEvent(R(I),q):S.addListener&&S.removeListener&&S.removeListener(q),(I=pe(S))?(Z(I,g),I.h==0&&(I.src=null,S[Ae]=null)):be(g)}}}function R(g){return g in Ne?Ne[g]:Ne[g]="on"+g}function _e(g,S){if(g.da)g=!0;else{S=new D(S,this);const I=g.listener,q=g.ha||g.src;g.fa&&kt(g),g=I.call(q,S)}return g}function pe(g){return g=g[Ae],g instanceof Q?g:null}var W="__closure_events_fn_"+(Math.random()*1e9>>>0);function j(g){return typeof g=="function"?g:(g[W]||(g[W]=function(S){return g.handleEvent(S)}),g[W])}function te(){H.call(this),this.i=new Q(this),this.M=this,this.G=null}E(te,H),te.prototype[he]=!0,te.prototype.removeEventListener=function(g,S,I,q){Et(this,g,S,I,q)};function ve(g,S){var I,q=g.G;if(q)for(I=[];q;q=q.G)I.push(q);if(g=g.M,q=S.type||S,typeof S=="string")S=new K(S,g);else if(S instanceof K)S.target=S.target||g;else{var ae=S;S=new K(q,g),oe(S,ae)}ae=!0;let fe,Me;if(I)for(Me=I.length-1;Me>=0;Me--)fe=S.g=I[Me],ae=Ce(fe,q,!0,S)&&ae;if(fe=S.g=g,ae=Ce(fe,q,!0,S)&&ae,ae=Ce(fe,q,!1,S)&&ae,I)for(Me=0;Me<I.length;Me++)fe=S.g=I[Me],ae=Ce(fe,q,!1,S)&&ae}te.prototype.N=function(){if(te.Z.N.call(this),this.i){var g=this.i;for(const S in g.g){const I=g.g[S];for(let q=0;q<I.length;q++)be(I[q]);delete g.g[S],g.h--}}this.G=null},te.prototype.J=function(g,S,I,q){return this.i.add(String(g),S,!1,I,q)},te.prototype.K=function(g,S,I,q){return this.i.add(String(g),S,!0,I,q)};function Ce(g,S,I,q){if(S=g.i.g[String(S)],!S)return!0;S=S.concat();let ae=!0;for(let fe=0;fe<S.length;++fe){const Me=S[fe];if(Me&&!Me.da&&Me.capture==I){const et=Me.listener,Gt=Me.ha||Me.src;Me.fa&&Z(g.i,Me),ae=et.call(Gt,q)!==!1&&ae}}return ae&&!q.defaultPrevented}function ce(g,S){if(typeof g!="function")if(g&&typeof g.handleEvent=="function")g=h(g.handleEvent,g);else throw Error("Invalid listener argument");return Number(S)>2147483647?-1:l.setTimeout(g,S||0)}function Ie(g){g.g=ce(()=>{g.g=null,g.i&&(g.i=!1,Ie(g))},g.l);const S=g.h;g.h=null,g.m.apply(null,S)}class ke extends H{constructor(S,I){super(),this.m=S,this.l=I,this.h=null,this.i=!1,this.g=null}j(S){this.h=arguments,this.g?this.i=!0:Ie(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Re(g){H.call(this),this.h=g,this.g={}}E(Re,H);var Fe=[];function ht(g){ne(g.g,function(S,I){this.g.hasOwnProperty(I)&&kt(S)},g),g.g={}}Re.prototype.N=function(){Re.Z.N.call(this),ht(this)},Re.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ze=l.JSON.stringify,En=l.JSON.parse,Oi=class{stringify(g){return l.JSON.stringify(g,void 0)}parse(g){return l.JSON.parse(g,void 0)}};function In(){}function zi(){}var ft={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function zt(){K.call(this,"d")}E(zt,K);function Tn(){K.call(this,"c")}E(Tn,K);var yt={},Js=null;function Qr(){return Js=Js||new te}yt.Ia="serverreachability";function Ho(g){K.call(this,yt.Ia,g)}E(Ho,K);function ei(g){const S=Qr();ve(S,new Ho(S))}yt.STAT_EVENT="statevent";function Fi(g,S){K.call(this,yt.STAT_EVENT,g),this.stat=S}E(Fi,K);function Nt(g){const S=Qr();ve(S,new Fi(S,g))}yt.Ja="timingevent";function Rn(g,S){K.call(this,yt.Ja,g),this.size=S}E(Rn,K);function Bi(g,S){if(typeof g!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){g()},S)}function vi(){this.g=!0}vi.prototype.ua=function(){this.g=!1};function Zf(g,S,I,q,ae,fe){g.info(function(){if(g.g)if(fe){var Me="",et=fe.split("&");for(let vt=0;vt<et.length;vt++){var Gt=et[vt].split("=");if(Gt.length>1){const Ut=Gt[0];Gt=Gt[1];const ri=Ut.split("_");Me=ri.length>=2&&ri[1]=="type"?Me+(Ut+"="+Gt+"&"):Me+(Ut+"=redacted&")}}}else Me=null;else Me=fe;return"XMLHTTP REQ ("+q+") [attempt "+ae+"]: "+S+`
`+I+`
`+Me})}function Zu(g,S,I,q,ae,fe,Me){g.info(function(){return"XMLHTTP RESP ("+q+") [ attempt "+ae+"]: "+S+`
`+I+`
`+fe+" "+Me})}function Gi(g,S,I,q){g.info(function(){return"XMLHTTP TEXT ("+S+"): "+eh(g,I)+(q?" "+q:"")})}function js(g,S){g.info(function(){return"TIMEOUT: "+S})}vi.prototype.info=function(){};function eh(g,S){if(!g.g)return S;if(!S)return null;try{const fe=JSON.parse(S);if(fe){for(g=0;g<fe.length;g++)if(Array.isArray(fe[g])){var I=fe[g];if(!(I.length<2)){var q=I[1];if(Array.isArray(q)&&!(q.length<1)){var ae=q[0];if(ae!="noop"&&ae!="stop"&&ae!="close")for(let Me=1;Me<q.length;Me++)q[Me]=""}}}}return Ze(fe)}catch{return S}}var Ws={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},dl={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},fl;function Qs(){}E(Qs,In),Qs.prototype.g=function(){return new XMLHttpRequest},fl=new Qs;function mr(g){return encodeURIComponent(String(g))}function ec(g){var S=1;g=g.split(":");const I=[];for(;S>0&&g.length;)I.push(g.shift()),S--;return g.length&&I.push(g.join(":")),I}function _i(g,S,I,q){this.j=g,this.i=S,this.l=I,this.S=q||1,this.V=new Re(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ei}function Ei(){this.i=null,this.g="",this.h=!1}var Kt={},on={};function Hi(g,S,I){g.M=1,g.A=Xs(jt(S)),g.u=I,g.R=!0,qo(g,null)}function qo(g,S){g.F=Date.now(),qi(g),g.B=jt(g.A);var I=g.B,q=g.S;Array.isArray(q)||(q=[String(q)]),Jo(I.i,"t",q),g.C=0,I=g.j.L,g.h=new Ei,g.g=mc(g.j,I?S:null,!g.u),g.P>0&&(g.O=new ke(h(g.Y,g,g.g),g.P)),S=g.V,I=g.g,q=g.ba;var ae="readystatechange";Array.isArray(ae)||(ae&&(Fe[0]=ae.toString()),ae=Fe);for(let fe=0;fe<ae.length;fe++){const Me=De(I,ae[fe],q||S.handleEvent,!1,S.h||S);if(!Me)break;S.g[Me.key]=Me}S=g.J?P(g.J):{},g.u?(g.v||(g.v="POST"),S["Content-Type"]="application/x-www-form-urlencoded",g.g.ea(g.B,g.v,g.u,S)):(g.v="GET",g.g.ea(g.B,g.v,null,S)),ei(),Zf(g.i,g.v,g.B,g.l,g.S,g.u)}_i.prototype.ba=function(g){g=g.target;const S=this.O;S&&Si(g)==3?S.j():this.Y(g)},_i.prototype.Y=function(g){try{if(g==this.g)e:{const et=Si(this.g),Gt=this.g.ya(),vt=this.g.ca();if(!(et<3)&&(et!=3||this.g&&(this.h.h||this.g.la()||dn(this.g)))){this.K||et!=4||Gt==7||(Gt==8||vt<=0?ei(3):ei(2)),Yi(this);var S=this.g.ca();this.X=S;var I=th(this);if(this.o=S==200,Zu(this.i,this.v,this.B,this.l,this.S,et,S),this.o){if(this.U&&!this.L){t:{if(this.g){var q,ae=this.g;if((q=ae.g?ae.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!O(q)){var fe=q;break t}}fe=null}if(g=fe)Gi(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,$i(this,g);else{this.o=!1,this.m=3,Nt(12),Hn(this),ti(this);break e}}if(this.R){g=!0;let Ut;for(;!this.K&&this.C<I.length;)if(Ut=nc(this,I),Ut==on){et==4&&(this.m=4,Nt(14),g=!1),Gi(this.i,this.l,null,"[Incomplete Response]");break}else if(Ut==Kt){this.m=4,Nt(15),Gi(this.i,this.l,I,"[Invalid Chunk]"),g=!1;break}else Gi(this.i,this.l,Ut,null),$i(this,Ut);if(tc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),et!=4||I.length!=0||this.h.h||(this.m=1,Nt(16),g=!1),this.o=this.o&&g,!g)Gi(this.i,this.l,I,"[Invalid Chunked Response]"),Hn(this),ti(this);else if(I.length>0&&!this.W){this.W=!0;var Me=this.j;Me.g==this&&Me.aa&&!Me.P&&(Me.j.info("Great, no buffering proxy detected. Bytes received: "+I.length),Cl(Me),Me.P=!0,Nt(11))}}else Gi(this.i,this.l,I,null),$i(this,I);et==4&&Hn(this),this.o&&!this.K&&(et==4?dc(this.j,this):(this.o=!1,qi(this)))}else yr(this.g),S==400&&I.indexOf("Unknown SID")>0?(this.m=3,Nt(12)):(this.m=0,Nt(13)),Hn(this),ti(this)}}}catch{}finally{}};function th(g){if(!tc(g))return g.g.la();const S=dn(g.g);if(S==="")return"";let I="";const q=S.length,ae=Si(g.g)==4;if(!g.h.i){if(typeof TextDecoder>"u")return Hn(g),ti(g),"";g.h.i=new l.TextDecoder}for(let fe=0;fe<q;fe++)g.h.h=!0,I+=g.h.i.decode(S[fe],{stream:!(ae&&fe==q-1)});return S.length=0,g.h.g+=I,g.C=0,g.h.g}function tc(g){return g.g?g.v=="GET"&&g.M!=2&&g.j.Aa:!1}function nc(g,S){var I=g.C,q=S.indexOf(`
`,I);return q==-1?on:(I=Number(S.substring(I,q)),isNaN(I)?Kt:(q+=1,q+I>S.length?on:(S=S.slice(q,q+I),g.C=q+I,S)))}_i.prototype.cancel=function(){this.K=!0,Hn(this)};function qi(g){g.T=Date.now()+g.H,Yo(g,g.H)}function Yo(g,S){if(g.D!=null)throw Error("WatchDog timer not null");g.D=Bi(h(g.aa,g),S)}function Yi(g){g.D&&(l.clearTimeout(g.D),g.D=null)}_i.prototype.aa=function(){this.D=null;const g=Date.now();g-this.T>=0?(js(this.i,this.B),this.M!=2&&(ei(),Nt(17)),Hn(this),this.m=2,ti(this)):Yo(this,this.T-g)};function ti(g){g.j.I==0||g.K||dc(g.j,g)}function Hn(g){Yi(g);var S=g.O;S&&typeof S.dispose=="function"&&S.dispose(),g.O=null,ht(g.V),g.g&&(S=g.g,g.g=null,S.abort(),S.dispose())}function $i(g,S){try{var I=g.j;if(I.I!=0&&(I.g==g||Ji(I.h,g))){if(!g.L&&Ji(I.h,g)&&I.I==3){try{var q=I.Ba.g.parse(S)}catch{q=null}if(Array.isArray(q)&&q.length==3){var ae=q;if(ae[0]==0){e:if(!I.v){if(I.g)if(I.g.F+3e3<g.F)Zo(I),ss(I);else break e;so(I),Nt(18)}}else I.xa=ae[1],0<I.xa-I.K&&ae[2]<37500&&I.F&&I.A==0&&!I.C&&(I.C=Bi(h(I.Va,I),6e3));Ki(I.h)<=1&&I.ta&&(I.ta=void 0)}else er(I,11)}else if((g.L||I.g==g)&&Zo(I),!O(S))for(ae=I.Ba.g.parse(S),S=0;S<ae.length;S++){let vt=ae[S];const Ut=vt[0];if(!(Ut<=I.K))if(I.K=Ut,vt=vt[1],I.I==2)if(vt[0]=="c"){I.M=vt[1],I.ba=vt[2];const ri=vt[3];ri!=null&&(I.ka=ri,I.j.info("VER="+I.ka));const tr=vt[4];tr!=null&&(I.za=tr,I.j.info("SVER="+I.za));const bi=vt[5];bi!=null&&typeof bi=="number"&&bi>0&&(q=1.5*bi,I.O=q,I.j.info("backChannelRequestTimeoutMs_="+q)),q=I;const Ai=g.g;if(Ai){const oo=Ai.g?Ai.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(oo){var fe=q.h;fe.g||oo.indexOf("spdy")==-1&&oo.indexOf("quic")==-1&&oo.indexOf("h2")==-1||(fe.j=fe.l,fe.g=new Set,fe.h&&(ml(fe,fe.h),fe.h=null))}if(q.G){const ea=Ai.g?Ai.g.getResponseHeader("X-HTTP-Session-Id"):null;ea&&(q.wa=ea,wt(q.J,q.G,ea))}}I.I=3,I.l&&I.l.ra(),I.aa&&(I.T=Date.now()-g.F,I.j.info("Handshake RTT: "+I.T+"ms")),q=I;var Me=g;if(q.na=pc(q,q.L?q.ba:null,q.W),Me.L){gl(q.h,Me);var et=Me,Gt=q.O;Gt&&(et.H=Gt),et.D&&(Yi(et),qi(et)),q.g=Me}else uc(q);I.i.length>0&&Zi(I)}else vt[0]!="stop"&&vt[0]!="close"||er(I,7);else I.I==3&&(vt[0]=="stop"||vt[0]=="close"?vt[0]=="stop"?er(I,7):Al(I):vt[0]!="noop"&&I.l&&I.l.qa(vt),I.A=0)}}ei(4)}catch{}}var Jt=class{constructor(g,S){this.g=g,this.map=S}};function hl(g){this.l=g||10,l.PerformanceNavigationTiming?(g=l.performance.getEntriesByType("navigation"),g=g.length>0&&(g[0].nextHopProtocol=="hq"||g[0].nextHopProtocol=="h2")):g=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=g?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function pl(g){return g.h?!0:g.g?g.g.size>=g.j:!1}function Ki(g){return g.h?1:g.g?g.g.size:0}function Ji(g,S){return g.h?g.h==S:g.g?g.g.has(S):!1}function ml(g,S){g.g?g.g.add(S):g.h=S}function gl(g,S){g.h&&g.h==S?g.h=null:g.g&&g.g.has(S)&&g.g.delete(S)}hl.prototype.cancel=function(){if(this.i=yl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const g of this.g.values())g.cancel();this.g.clear()}};function yl(g){if(g.h!=null)return g.i.concat(g.h.G);if(g.g!=null&&g.g.size!==0){let S=g.i;for(const I of g.g.values())S=S.concat(I.G);return S}return w(g.i)}var ic=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function $o(g,S){if(g){g=g.split("&");for(let I=0;I<g.length;I++){const q=g[I].indexOf("=");let ae,fe=null;q>=0?(ae=g[I].substring(0,q),fe=g[I].substring(q+1)):ae=g[I],S(ae,fe?decodeURIComponent(fe.replace(/\+/g," ")):"")}}}function qn(g){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let S;g instanceof qn?(this.l=g.l,an(this,g.j),this.o=g.o,this.g=g.g,Xr(this,g.u),this.h=g.h,vl(this,ac(g.i)),this.m=g.m):g&&(S=String(g).match(ic))?(this.l=!1,an(this,S[1]||"",!0),this.o=ji(S[2]||""),this.g=ji(S[3]||"",!0),Xr(this,S[4]),this.h=ji(S[5]||"",!0),vl(this,S[6]||"",!0),this.m=ji(S[7]||"")):(this.l=!1,this.i=new es(null,this.l))}qn.prototype.toString=function(){const g=[];var S=this.j;S&&g.push(Zs(S,Ko,!0),":");var I=this.g;return(I||S=="file")&&(g.push("//"),(S=this.o)&&g.push(Zs(S,Ko,!0),"@"),g.push(mr(I).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),I=this.u,I!=null&&g.push(":",String(I))),(I=this.h)&&(this.g&&I.charAt(0)!="/"&&g.push("/"),g.push(Zs(I,I.charAt(0)=="/"?_l:rc,!0))),(I=this.i.toString())&&g.push("?",I),(I=this.m)&&g.push("#",Zs(I,sc)),g.join("")},qn.prototype.resolve=function(g){const S=jt(this);let I=!!g.j;I?an(S,g.j):I=!!g.o,I?S.o=g.o:I=!!g.g,I?S.g=g.g:I=g.u!=null;var q=g.h;if(I)Xr(S,g.u);else if(I=!!g.h){if(q.charAt(0)!="/")if(this.g&&!this.h)q="/"+q;else{var ae=S.h.lastIndexOf("/");ae!=-1&&(q=S.h.slice(0,ae+1)+q)}if(ae=q,ae==".."||ae==".")q="";else if(ae.indexOf("./")!=-1||ae.indexOf("/.")!=-1){q=ae.lastIndexOf("/",0)==0,ae=ae.split("/");const fe=[];for(let Me=0;Me<ae.length;){const et=ae[Me++];et=="."?q&&Me==ae.length&&fe.push(""):et==".."?((fe.length>1||fe.length==1&&fe[0]!="")&&fe.pop(),q&&Me==ae.length&&fe.push("")):(fe.push(et),q=!0)}q=fe.join("/")}else q=ae}return I?S.h=q:I=g.i.toString()!=="",I?vl(S,ac(g.i)):I=!!g.m,I&&(S.m=g.m),S};function jt(g){return new qn(g)}function an(g,S,I){g.j=I?ji(S,!0):S,g.j&&(g.j=g.j.replace(/:$/,""))}function Xr(g,S){if(S){if(S=Number(S),isNaN(S)||S<0)throw Error("Bad port number "+S);g.u=S}else g.u=null}function vl(g,S,I){S instanceof es?(g.i=S,jo(g.i,g.l)):(I||(S=Zs(S,Zr)),g.i=new es(S,g.l))}function wt(g,S,I){g.i.set(S,I)}function Xs(g){return wt(g,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),g}function ji(g,S){return g?S?decodeURI(g.replace(/%25/g,"%2525")):decodeURIComponent(g):""}function Zs(g,S,I){return typeof g=="string"?(g=encodeURI(g).replace(S,Pn),I&&(g=g.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g):null}function Pn(g){return g=g.charCodeAt(0),"%"+(g>>4&15).toString(16)+(g&15).toString(16)}var Ko=/[#\/\?@]/g,rc=/[#\?:]/g,_l=/[#\?]/g,Zr=/[#\?@]/g,sc=/#/g;function es(g,S){this.h=this.g=null,this.i=g||null,this.j=!!S}function Ln(g){g.g||(g.g=new Map,g.h=0,g.i&&$o(g.i,function(S,I){g.add(decodeURIComponent(S.replace(/\+/g," ")),I)}))}n=es.prototype,n.add=function(g,S){Ln(this),this.i=null,g=ts(this,g);let I=this.g.get(g);return I||this.g.set(g,I=[]),I.push(S),this.h+=1,this};function oc(g,S){Ln(g),S=ts(g,S),g.g.has(S)&&(g.i=null,g.h-=g.g.get(S).length,g.g.delete(S))}function El(g,S){return Ln(g),S=ts(g,S),g.g.has(S)}n.forEach=function(g,S){Ln(this),this.g.forEach(function(I,q){I.forEach(function(ae){g.call(S,ae,q,this)},this)},this)};function Tl(g,S){Ln(g);let I=[];if(typeof S=="string")El(g,S)&&(I=I.concat(g.g.get(ts(g,S))));else for(g=Array.from(g.g.values()),S=0;S<g.length;S++)I=I.concat(g[S]);return I}n.set=function(g,S){return Ln(this),this.i=null,g=ts(this,g),El(this,g)&&(this.h-=this.g.get(g).length),this.g.set(g,[S]),this.h+=1,this},n.get=function(g,S){return g?(g=Tl(this,g),g.length>0?String(g[0]):S):S};function Jo(g,S,I){oc(g,S),I.length>0&&(g.i=null,g.g.set(ts(g,S),w(I)),g.h+=I.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const g=[],S=Array.from(this.g.keys());for(let q=0;q<S.length;q++){var I=S[q];const ae=mr(I);I=Tl(this,I);for(let fe=0;fe<I.length;fe++){let Me=ae;I[fe]!==""&&(Me+="="+mr(I[fe])),g.push(Me)}}return this.i=g.join("&")};function ac(g){const S=new es;return S.i=g.i,g.g&&(S.g=new Map(g.g),S.h=g.h),S}function ts(g,S){return S=String(S),g.j&&(S=S.toLowerCase()),S}function jo(g,S){S&&!g.j&&(Ln(g),g.i=null,g.g.forEach(function(I,q){const ae=q.toLowerCase();q!=ae&&(oc(this,q),Jo(this,ae,I))},g)),g.j=S}function Ti(g,S){const I=new vi;if(l.Image){const q=new Image;q.onload=y(ni,I,"TestLoadImage: loaded",!0,S,q),q.onerror=y(ni,I,"TestLoadImage: error",!1,S,q),q.onabort=y(ni,I,"TestLoadImage: abort",!1,S,q),q.ontimeout=y(ni,I,"TestLoadImage: timeout",!1,S,q),l.setTimeout(function(){q.ontimeout&&q.ontimeout()},1e4),q.src=g}else S(!1)}function wl(g,S){const I=new vi,q=new AbortController,ae=setTimeout(()=>{q.abort(),ni(I,"TestPingServer: timeout",!1,S)},1e4);fetch(g,{signal:q.signal}).then(fe=>{clearTimeout(ae),fe.ok?ni(I,"TestPingServer: ok",!0,S):ni(I,"TestPingServer: server error",!1,S)}).catch(()=>{clearTimeout(ae),ni(I,"TestPingServer: error",!1,S)})}function ni(g,S,I,q,ae){try{ae&&(ae.onload=null,ae.onerror=null,ae.onabort=null,ae.ontimeout=null),q(I)}catch{}}function ns(){this.g=new Oi}function Wi(g){this.i=g.Sb||null,this.h=g.ab||!1}E(Wi,In),Wi.prototype.g=function(){return new eo(this.i,this.h)};function eo(g,S){te.call(this),this.H=g,this.o=S,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(eo,te),n=eo.prototype,n.open=function(g,S){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=g,this.D=S,this.readyState=1,wi(this)},n.send=function(g){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const S={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};g&&(S.body=g),(this.H||l).fetch(new Request(this.D,S)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,is(this)),this.readyState=0},n.Pa=function(g){if(this.g&&(this.l=g,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=g.headers,this.readyState=2,wi(this)),this.g&&(this.readyState=3,wi(this),this.g)))if(this.responseType==="arraybuffer")g.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in g){if(this.j=g.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Wo(this)}else g.text().then(this.Oa.bind(this),this.ga.bind(this))};function Wo(g){g.j.read().then(g.Ma.bind(g)).catch(g.ga.bind(g))}n.Ma=function(g){if(this.g){if(this.o&&g.value)this.response.push(g.value);else if(!this.o){var S=g.value?g.value:new Uint8Array(0);(S=this.B.decode(S,{stream:!g.done}))&&(this.response=this.responseText+=S)}g.done?is(this):wi(this),this.readyState==3&&Wo(this)}},n.Oa=function(g){this.g&&(this.response=this.responseText=g,is(this))},n.Na=function(g){this.g&&(this.response=g,is(this))},n.ga=function(){this.g&&is(this)};function is(g){g.readyState=4,g.l=null,g.j=null,g.B=null,wi(g)}n.setRequestHeader=function(g,S){this.A.append(g,S)},n.getResponseHeader=function(g){return this.h&&this.h.get(g.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const g=[],S=this.h.entries();for(var I=S.next();!I.done;)I=I.value,g.push(I[0]+": "+I[1]),I=S.next();return g.join(`\r
`)};function wi(g){g.onreadystatechange&&g.onreadystatechange.call(g)}Object.defineProperty(eo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(g){this.m=g?"include":"same-origin"}});function ii(g){let S="";return ne(g,function(I,q){S+=q,S+=":",S+=I,S+=`\r
`}),S}function to(g,S,I){e:{for(q in I){var q=!1;break e}q=!0}q||(I=ii(I),typeof g=="string"?I!=null&&mr(I):wt(g,S,I))}function At(g){te.call(this),this.headers=new Map,this.L=g||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(At,te);var Qi=/^https?$/i,Sl=["POST","PUT"];n=At.prototype,n.Fa=function(g){this.H=g},n.ea=function(g,S,I,q){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+g);S=S?S.toUpperCase():"GET",this.D=g,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():fl.g(),this.g.onreadystatechange=T(h(this.Ca,this));try{this.B=!0,this.g.open(S,String(g),!0),this.B=!1}catch(fe){no(this,fe);return}if(g=I||"",I=new Map(this.headers),q)if(Object.getPrototypeOf(q)===Object.prototype)for(var ae in q)I.set(ae,q[ae]);else if(typeof q.keys=="function"&&typeof q.get=="function")for(const fe of q.keys())I.set(fe,q.get(fe));else throw Error("Unknown input type for opt_headers: "+String(q));q=Array.from(I.keys()).find(fe=>fe.toLowerCase()=="content-type"),ae=l.FormData&&g instanceof l.FormData,!(Array.prototype.indexOf.call(Sl,S,void 0)>=0)||q||ae||I.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[fe,Me]of I)this.g.setRequestHeader(fe,Me);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(g),this.v=!1}catch(fe){no(this,fe)}};function no(g,S){g.h=!1,g.g&&(g.j=!0,g.g.abort(),g.j=!1),g.l=S,g.o=5,bl(g),gr(g)}function bl(g){g.A||(g.A=!0,ve(g,"complete"),ve(g,"error"))}n.abort=function(g){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=g||7,ve(this,"complete"),ve(this,"abort"),gr(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),gr(this,!0)),At.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?io(this):this.Xa())},n.Xa=function(){io(this)};function io(g){if(g.h&&typeof a<"u"){if(g.v&&Si(g)==4)setTimeout(g.Ca.bind(g),0);else if(ve(g,"readystatechange"),Si(g)==4){g.h=!1;try{const fe=g.ca();e:switch(fe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var S=!0;break e;default:S=!1}var I;if(!(I=S)){var q;if(q=fe===0){let Me=String(g.D).match(ic)[1]||null;!Me&&l.self&&l.self.location&&(Me=l.self.location.protocol.slice(0,-1)),q=!Qi.test(Me?Me.toLowerCase():"")}I=q}if(I)ve(g,"complete"),ve(g,"success");else{g.o=6;try{var ae=Si(g)>2?g.g.statusText:""}catch{ae=""}g.l=ae+" ["+g.ca()+"]",bl(g)}}finally{gr(g)}}}}function gr(g,S){if(g.g){g.m&&(clearTimeout(g.m),g.m=null);const I=g.g;g.g=null,S||ve(g,"ready");try{I.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Si(g){return g.g?g.g.readyState:0}n.ca=function(){try{return Si(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(g){if(this.g){var S=this.g.responseText;return g&&S.indexOf(g)==0&&(S=S.substring(g.length)),En(S)}};function dn(g){try{if(!g.g)return null;if("response"in g.g)return g.g.response;switch(g.F){case"":case"text":return g.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in g.g)return g.g.mozResponseArrayBuffer}return null}catch{return null}}function yr(g){const S={};g=(g.g&&Si(g)>=2&&g.g.getAllResponseHeaders()||"").split(`\r
`);for(let q=0;q<g.length;q++){if(O(g[q]))continue;var I=ec(g[q]);const ae=I[0];if(I=I[1],typeof I!="string")continue;I=I.trim();const fe=S[ae]||[];S[ae]=fe,fe.push(I)}Te(S,function(q){return q.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Xi(g,S,I){return I&&I.internalChannelParams&&I.internalChannelParams[g]||S}function rs(g){this.za=0,this.i=[],this.j=new vi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Xi("failFast",!1,g),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Xi("baseRetryDelayMs",5e3,g),this.Za=Xi("retryDelaySeedMs",1e4,g),this.Ta=Xi("forwardChannelMaxRetries",2,g),this.va=Xi("forwardChannelRequestTimeoutMs",2e4,g),this.ma=g&&g.xmlHttpFactory||void 0,this.Ua=g&&g.Rb||void 0,this.Aa=g&&g.useFetchStreams||!1,this.O=void 0,this.L=g&&g.supportsCrossDomainXhr||!1,this.M="",this.h=new hl(g&&g.concurrentRequestLimit),this.Ba=new ns,this.S=g&&g.fastHandshake||!1,this.R=g&&g.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=g&&g.Pb||!1,g&&g.ua&&this.j.ua(),g&&g.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&g&&g.detectBufferingProxy||!1,this.ia=void 0,g&&g.longPollingTimeout&&g.longPollingTimeout>0&&(this.ia=g.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=rs.prototype,n.ka=8,n.I=1,n.connect=function(g,S,I,q){Nt(0),this.W=g,this.H=S||{},I&&q!==void 0&&(this.H.OSID=I,this.H.OAID=q),this.F=this.X,this.J=pc(this,null,this.W),Zi(this)};function Al(g){if(Qo(g),g.I==3){var S=g.V++,I=jt(g.J);if(wt(I,"SID",g.M),wt(I,"RID",S),wt(I,"TYPE","terminate"),ro(g,I),S=new _i(g,g.j,S),S.M=2,S.A=Xs(jt(I)),I=!1,l.navigator&&l.navigator.sendBeacon)try{I=l.navigator.sendBeacon(S.A.toString(),"")}catch{}!I&&l.Image&&(new Image().src=S.A,I=!0),I||(S.g=mc(S.j,null),S.g.ea(S.A)),S.F=Date.now(),qi(S)}hc(g)}function ss(g){g.g&&(Cl(g),g.g.cancel(),g.g=null)}function Qo(g){ss(g),g.v&&(l.clearTimeout(g.v),g.v=null),Zo(g),g.h.cancel(),g.m&&(typeof g.m=="number"&&l.clearTimeout(g.m),g.m=null)}function Zi(g){if(!pl(g.h)&&!g.m){g.m=!0;var S=g.Ea;J||V(),$||(J(),$=!0),L.add(S,g),g.D=0}}function Xo(g,S){return Ki(g.h)>=g.h.j-(g.m?1:0)?!1:g.m?(g.i=S.G.concat(g.i),!0):g.I==1||g.I==2||g.D>=(g.Sa?0:g.Ta)?!1:(g.m=Bi(h(g.Ea,g,S),fc(g,g.D)),g.D++,!0)}n.Ea=function(g){if(this.m)if(this.m=null,this.I==1){if(!g){this.V=Math.floor(Math.random()*1e5),g=this.V++;const ae=new _i(this,this.j,g);let fe=this.o;if(this.U&&(fe?(fe=P(fe),oe(fe,this.U)):fe=this.U),this.u!==null||this.R||(ae.J=fe,fe=null),this.S)e:{for(var S=0,I=0;I<this.i.length;I++){t:{var q=this.i[I];if("__data__"in q.map&&(q=q.map.__data__,typeof q=="string")){q=q.length;break t}q=void 0}if(q===void 0)break;if(S+=q,S>4096){S=I;break e}if(S===4096||I===this.i.length-1){S=I+1;break e}}S=1e3}else S=1e3;S=lc(this,ae,S),I=jt(this.J),wt(I,"RID",g),wt(I,"CVER",22),this.G&&wt(I,"X-HTTP-Session-Id",this.G),ro(this,I),fe&&(this.R?S="headers="+mr(ii(fe))+"&"+S:this.u&&to(I,this.u,fe)),ml(this.h,ae),this.Ra&&wt(I,"TYPE","init"),this.S?(wt(I,"$req",S),wt(I,"SID","null"),ae.U=!0,Hi(ae,I,null)):Hi(ae,I,S),this.I=2}}else this.I==3&&(g?xl(this,g):this.i.length==0||pl(this.h)||xl(this))};function xl(g,S){var I;S?I=S.l:I=g.V++;const q=jt(g.J);wt(q,"SID",g.M),wt(q,"RID",I),wt(q,"AID",g.K),ro(g,q),g.u&&g.o&&to(q,g.u,g.o),I=new _i(g,g.j,I,g.D+1),g.u===null&&(I.J=g.o),S&&(g.i=S.G.concat(g.i)),S=lc(g,I,1e3),I.H=Math.round(g.va*.5)+Math.round(g.va*.5*Math.random()),ml(g.h,I),Hi(I,q,S)}function ro(g,S){g.H&&ne(g.H,function(I,q){wt(S,q,I)}),g.l&&ne({},function(I,q){wt(S,q,I)})}function lc(g,S,I){I=Math.min(g.i.length,I);const q=g.l?h(g.l.Ka,g.l,g):null;e:{var ae=g.i;let et=-1;for(;;){const Gt=["count="+I];et==-1?I>0?(et=ae[0].g,Gt.push("ofs="+et)):et=0:Gt.push("ofs="+et);let vt=!0;for(let Ut=0;Ut<I;Ut++){var fe=ae[Ut].g;const ri=ae[Ut].map;if(fe-=et,fe<0)et=Math.max(0,ae[Ut].g-100),vt=!1;else try{fe="req"+fe+"_"||"";try{var Me=ri instanceof Map?ri:Object.entries(ri);for(const[tr,bi]of Me){let Ai=bi;c(bi)&&(Ai=Ze(bi)),Gt.push(fe+tr+"="+encodeURIComponent(Ai))}}catch(tr){throw Gt.push(fe+"type="+encodeURIComponent("_badmap")),tr}}catch{q&&q(ri)}}if(vt){Me=Gt.join("&");break e}}Me=void 0}return g=g.i.splice(0,I),S.G=g,Me}function uc(g){if(!g.g&&!g.v){g.Y=1;var S=g.Da;J||V(),$||(J(),$=!0),L.add(S,g),g.A=0}}function so(g){return g.g||g.v||g.A>=3?!1:(g.Y++,g.v=Bi(h(g.Da,g),fc(g,g.A)),g.A++,!0)}n.Da=function(){if(this.v=null,cc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var g=4*this.T;this.j.info("BP detection timer enabled: "+g),this.B=Bi(h(this.Wa,this),g)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Nt(10),ss(this),cc(this))};function Cl(g){g.B!=null&&(l.clearTimeout(g.B),g.B=null)}function cc(g){g.g=new _i(g,g.j,"rpc",g.Y),g.u===null&&(g.g.J=g.o),g.g.P=0;var S=jt(g.na);wt(S,"RID","rpc"),wt(S,"SID",g.M),wt(S,"AID",g.K),wt(S,"CI",g.F?"0":"1"),!g.F&&g.ia&&wt(S,"TO",g.ia),wt(S,"TYPE","xmlhttp"),ro(g,S),g.u&&g.o&&to(S,g.u,g.o),g.O&&(g.g.H=g.O);var I=g.g;g=g.ba,I.M=1,I.A=Xs(jt(S)),I.u=null,I.R=!0,qo(I,g)}n.Va=function(){this.C!=null&&(this.C=null,ss(this),so(this),Nt(19))};function Zo(g){g.C!=null&&(l.clearTimeout(g.C),g.C=null)}function dc(g,S){var I=null;if(g.g==S){Zo(g),Cl(g),g.g=null;var q=2}else if(Ji(g.h,S))I=S.G,gl(g.h,S),q=1;else return;if(g.I!=0){if(S.o)if(q==1){I=S.u?S.u.length:0,S=Date.now()-S.F;var ae=g.D;q=Qr(),ve(q,new Rn(q,I)),Zi(g)}else uc(g);else if(ae=S.m,ae==3||ae==0&&S.X>0||!(q==1&&Xo(g,S)||q==2&&so(g)))switch(I&&I.length>0&&(S=g.h,S.i=S.i.concat(I)),ae){case 1:er(g,5);break;case 4:er(g,10);break;case 3:er(g,6);break;default:er(g,2)}}}function fc(g,S){let I=g.Qa+Math.floor(Math.random()*g.Za);return g.isActive()||(I*=2),I*S}function er(g,S){if(g.j.info("Error code "+S),S==2){var I=h(g.bb,g),q=g.Ua;const ae=!q;q=new qn(q||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||an(q,"https"),Xs(q),ae?Ti(q.toString(),I):wl(q.toString(),I)}else Nt(2);g.I=0,g.l&&g.l.pa(S),hc(g),Qo(g)}n.bb=function(g){g?(this.j.info("Successfully pinged google.com"),Nt(2)):(this.j.info("Failed to ping google.com"),Nt(1))};function hc(g){if(g.I=0,g.ja=[],g.l){const S=yl(g.h);(S.length!=0||g.i.length!=0)&&(C(g.ja,S),C(g.ja,g.i),g.h.i.length=0,w(g.i),g.i.length=0),g.l.oa()}}function pc(g,S,I){var q=I instanceof qn?jt(I):new qn(I);if(q.g!="")S&&(q.g=S+"."+q.g),Xr(q,q.u);else{var ae=l.location;q=ae.protocol,S=S?S+"."+ae.hostname:ae.hostname,ae=+ae.port;const fe=new qn(null);q&&an(fe,q),S&&(fe.g=S),ae&&Xr(fe,ae),I&&(fe.h=I),q=fe}return I=g.G,S=g.wa,I&&S&&wt(q,I,S),wt(q,"VER",g.ka),ro(g,q),q}function mc(g,S,I){if(S&&!g.L)throw Error("Can't create secondary domain capable XhrIo object.");return S=g.Aa&&!g.ma?new At(new Wi({ab:I})):new At(g.ma),S.Fa(g.L),S}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function gc(){}n=gc.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function os(){}os.prototype.g=function(g,S){return new Nn(g,S)};function Nn(g,S){te.call(this),this.g=new rs(S),this.l=g,this.h=S&&S.messageUrlParams||null,g=S&&S.messageHeaders||null,S&&S.clientProtocolHeaderRequired&&(g?g["X-Client-Protocol"]="webchannel":g={"X-Client-Protocol":"webchannel"}),this.g.o=g,g=S&&S.initMessageHeaders||null,S&&S.messageContentType&&(g?g["X-WebChannel-Content-Type"]=S.messageContentType:g={"X-WebChannel-Content-Type":S.messageContentType}),S&&S.sa&&(g?g["X-WebChannel-Client-Profile"]=S.sa:g={"X-WebChannel-Client-Profile":S.sa}),this.g.U=g,(g=S&&S.Qb)&&!O(g)&&(this.g.u=g),this.A=S&&S.supportsCrossDomainXhr||!1,this.v=S&&S.sendRawJson||!1,(S=S&&S.httpSessionIdParam)&&!O(S)&&(this.g.G=S,g=this.h,g!==null&&S in g&&(g=this.h,S in g&&delete g[S])),this.j=new vr(this)}E(Nn,te),Nn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Nn.prototype.close=function(){Al(this.g)},Nn.prototype.o=function(g){var S=this.g;if(typeof g=="string"){var I={};I.__data__=g,g=I}else this.v&&(I={},I.__data__=Ze(g),g=I);S.i.push(new Jt(S.Ya++,g)),S.I==3&&Zi(S)},Nn.prototype.N=function(){this.g.l=null,delete this.j,Al(this.g),delete this.g,Nn.Z.N.call(this)};function yc(g){zt.call(this),g.__headers__&&(this.headers=g.__headers__,this.statusCode=g.__status__,delete g.__headers__,delete g.__status__);var S=g.__sm__;if(S){e:{for(const I in S){g=I;break e}g=void 0}(this.i=g)&&(g=this.i,S=S!==null&&g in S?S[g]:void 0),this.data=S}else this.data=g}E(yc,zt);function vc(){Tn.call(this),this.status=1}E(vc,Tn);function vr(g){this.g=g}E(vr,gc),vr.prototype.ra=function(){ve(this.g,"a")},vr.prototype.qa=function(g){ve(this.g,new yc(g))},vr.prototype.pa=function(g){ve(this.g,new vc)},vr.prototype.oa=function(){ve(this.g,"b")},os.prototype.createWebChannel=os.prototype.g,Nn.prototype.send=Nn.prototype.o,Nn.prototype.open=Nn.prototype.m,Nn.prototype.close=Nn.prototype.close,Ib=function(){return new os},Cb=function(){return Qr()},xb=yt,Ym={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ws.NO_ERROR=0,Ws.TIMEOUT=8,Ws.HTTP_ERROR=6,Hd=Ws,dl.COMPLETE="complete",Ab=dl,zi.EventType=ft,ft.OPEN="a",ft.CLOSE="b",ft.ERROR="c",ft.MESSAGE="d",te.prototype.listen=te.prototype.J,vu=zi,At.prototype.listenOnce=At.prototype.K,At.prototype.getLastError=At.prototype.Ha,At.prototype.getLastErrorCode=At.prototype.ya,At.prototype.getStatus=At.prototype.ca,At.prototype.getResponseJson=At.prototype.La,At.prototype.getResponseText=At.prototype.la,At.prototype.send=At.prototype.ea,At.prototype.setWithCredentials=At.prototype.Fa,bb=At}).apply(typeof Nd<"u"?Nd:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}bn.UNAUTHENTICATED=new bn(null),bn.GOOGLE_CREDENTIALS=new bn("google-credentials-uid"),bn.FIRST_PARTY=new bn("first-party-uid"),bn.MOCK_USER=new bn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ol="12.9.0";function bU(n){ol=n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Po=new Ag("@firebase/firestore");function Da(){return Po.logLevel}function Ue(n,...e){if(Po.logLevel<=at.DEBUG){const t=e.map(Og);Po.debug(`Firestore (${ol}): ${n}`,...t)}}function qr(n,...e){if(Po.logLevel<=at.ERROR){const t=e.map(Og);Po.error(`Firestore (${ol}): ${n}`,...t)}}function Lo(n,...e){if(Po.logLevel<=at.WARN){const t=e.map(Og);Po.warn(`Firestore (${ol}): ${n}`,...t)}}function Og(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ye(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,Rb(n,i,t)}function Rb(n,e,t){let i=`FIRESTORE (${ol}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw qr(i),new Error(i)}function Tt(n,e,t,i){let s="Unexpected state";typeof t=="string"?s=t:i=t,n||Rb(e,s,i)}function Qe(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const we={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Le extends Jr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nb{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class AU{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(bn.UNAUTHENTICATED)))}shutdown(){}}class xU{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class CU{constructor(e){this.t=e,this.currentUser=bn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Tt(this.o===void 0,42304);let i=this.i;const s=f=>this.i!==i?(i=this.i,t(f)):Promise.resolve();let a=new zr;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new zr,e.enqueueRetryable((()=>s(this.currentUser)))};const l=()=>{const f=a;e.enqueueRetryable((async()=>{await f.promise,await s(this.currentUser)}))},c=f=>{Ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit((f=>c(f))),setTimeout((()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?c(f):(Ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new zr)}}),0),l()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(Ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Tt(typeof i.accessToken=="string",31837,{l:i}),new Nb(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Tt(e===null||typeof e=="string",2055,{h:e}),new bn(e)}}class IU{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=bn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class RU{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new IU(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(bn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class _w{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class NU{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Zn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Tt(this.o===void 0,3512);const i=a=>{a.error!=null&&Ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.m;return this.m=a.token,Ue("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>i(a)))};const s=a=>{Ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>s(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?s(a):Ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new _w(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Tt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new _w(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MU(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const s=MU(40);for(let a=0;a<s.length;++a)i.length<20&&s[a]<t&&(i+=e.charAt(s[a]%62))}return i}}function lt(n,e){return n<e?-1:n>e?1:0}function $m(n,e){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++){const s=n.charAt(i),a=e.charAt(i);if(s!==a)return hm(s)===hm(a)?lt(s,a):hm(s)?1:-1}return lt(n.length,e.length)}const kU=55296,DU=57343;function hm(n){const e=n.charCodeAt(0);return e>=kU&&e<=DU}function ja(n,e,t){return n.length===e.length&&n.every(((i,s)=>t(i,e[s])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ew="__name__";class ar{constructor(e,t,i){t===void 0?t=0:t>e.length&&Ye(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&Ye(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return ar.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ar?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let s=0;s<i;s++){const a=ar.compareSegments(e.get(s),t.get(s));if(a!==0)return a}return lt(e.length,t.length)}static compareSegments(e,t){const i=ar.isNumericId(e),s=ar.isNumericId(t);return i&&!s?-1:!i&&s?1:i&&s?ar.extractNumericId(e).compare(ar.extractNumericId(t)):$m(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Os.fromString(e.substring(4,e.length-2))}}class Mt extends ar{construct(e,t,i){return new Mt(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new Le(we.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((s=>s.length>0)))}return new Mt(t)}static emptyPath(){return new Mt([])}}const PU=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class yn extends ar{construct(e,t,i){return new yn(e,t,i)}static isValidIdentifier(e){return PU.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),yn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Ew}static keyField(){return new yn([Ew])}static fromServerFormat(e){const t=[];let i="",s=0;const a=()=>{if(i.length===0)throw new Le(we.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let l=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new Le(we.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[s+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new Le(we.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=f,s+=2}else c==="`"?(l=!l,s++):c!=="."||l?(i+=c,s++):(a(),s++)}if(a(),l)throw new Le(we.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new yn(t)}static emptyPath(){return new yn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(e){this.path=e}static fromPath(e){return new Ge(Mt.fromString(e))}static fromName(e){return new Ge(Mt.fromString(e).popFirst(5))}static empty(){return new Ge(Mt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Mt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Mt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ge(new Mt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mb(n,e,t){if(!t)throw new Le(we.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function LU(n,e,t,i){if(e===!0&&i===!0)throw new Le(we.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Tw(n){if(!Ge.isDocumentKey(n))throw new Le(we.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function ww(n){if(Ge.isDocumentKey(n))throw new Le(we.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function kb(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Uf(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ye(12329,{type:typeof n})}function Pi(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Le(we.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Uf(n);throw new Le(we.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nn(n,e){const t={typeString:n};return e&&(t.value=e),t}function Ju(n,e){if(!kb(n))throw new Le(we.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const s=e[i].typeString,a="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const l=n[i];if(s&&typeof l!==s){t=`JSON field '${i}' must be a ${s}.`;break}if(a!==void 0&&l!==a.value){t=`Expected '${i}' field to equal '${a.value}'`;break}}if(t)throw new Le(we.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sw=-62135596800,bw=1e6;class Lt{static now(){return Lt.fromMillis(Date.now())}static fromDate(e){return Lt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*bw);return new Lt(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Le(we.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Le(we.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Sw)throw new Le(we.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Le(we.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/bw}_compareTo(e){return this.seconds===e.seconds?lt(this.nanoseconds,e.nanoseconds):lt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Lt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ju(e,Lt._jsonSchema))return new Lt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Sw;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Lt._jsonSchemaVersion="firestore/timestamp/1.0",Lt._jsonSchema={type:nn("string",Lt._jsonSchemaVersion),seconds:nn("number"),nanoseconds:nn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{static fromTimestamp(e){return new Je(e)}static min(){return new Je(new Lt(0,0))}static max(){return new Je(new Lt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pu=-1;function UU(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,s=Je.fromTimestamp(i===1e9?new Lt(t+1,0):new Lt(t,i));return new Fs(s,Ge.empty(),e)}function VU(n){return new Fs(n.readTime,n.key,Pu)}class Fs{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Fs(Je.min(),Ge.empty(),Pu)}static max(){return new Fs(Je.max(),Ge.empty(),Pu)}}function OU(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ge.comparator(n.documentKey,e.documentKey),t!==0?t:lt(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zU="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class FU{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function al(n){if(n.code!==we.FAILED_PRECONDITION||n.message!==zU)throw n;Ue("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ye(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new xe(((i,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(i,s)},this.catchCallback=a=>{this.wrapFailure(t,a).next(i,s)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof xe?t:xe.resolve(t)}catch(t){return xe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):xe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):xe.reject(t)}static resolve(e){return new xe(((t,i)=>{t(e)}))}static reject(e){return new xe(((t,i)=>{i(e)}))}static waitFor(e){return new xe(((t,i)=>{let s=0,a=0,l=!1;e.forEach((c=>{++s,c.next((()=>{++a,l&&a===s&&t()}),(f=>i(f)))})),l=!0,a===s&&t()}))}static or(e){let t=xe.resolve(!1);for(const i of e)t=t.next((s=>s?xe.resolve(s):i()));return t}static forEach(e,t){const i=[];return e.forEach(((s,a)=>{i.push(t.call(this,s,a))})),this.waitFor(i)}static mapArray(e,t){return new xe(((i,s)=>{const a=e.length,l=new Array(a);let c=0;for(let f=0;f<a;f++){const h=f;t(e[h]).next((y=>{l[h]=y,++c,c===a&&i(l)}),(y=>s(y)))}}))}static doWhile(e,t){return new xe(((i,s)=>{const a=()=>{e()===!0?t().next((()=>{a()}),s):i()};a()}))}}function BU(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function ll(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Vf.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fg=-1;function Of(n){return n==null}function ff(n){return n===0&&1/n==-1/0}function GU(n){return typeof n=="number"&&Number.isInteger(n)&&!ff(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Db="";function HU(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Aw(e)),e=qU(n.get(t),e);return Aw(e)}function qU(n,e){let t=e;const i=n.length;for(let s=0;s<i;s++){const a=n.charAt(s);switch(a){case"\0":t+="";break;case Db:t+="";break;default:t+=a}}return t}function Aw(n){return n+Db+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xw(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function zo(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Pb(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e,t){this.comparator=e,this.root=t||gn.EMPTY}insert(e,t){return new Ot(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,gn.BLACK,null,null))}remove(e){return new Ot(this.comparator,this.root.remove(e,this.comparator).copy(null,null,gn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(e,i.key);if(s===0)return t+i.left.size;s<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Md(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Md(this.root,e,this.comparator,!1)}getReverseIterator(){return new Md(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Md(this.root,e,this.comparator,!0)}}class Md{constructor(e,t,i,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?i(e.key,t):1,t&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class gn{constructor(e,t,i,s,a){this.key=e,this.value=t,this.color=i??gn.RED,this.left=s??gn.EMPTY,this.right=a??gn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,s,a){return new gn(e??this.key,t??this.value,i??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let s=this;const a=i(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,t,i),null):a===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return gn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return gn.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,gn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,gn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ye(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ye(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ye(27949);return e+(this.isRed()?0:1)}}gn.EMPTY=null,gn.RED=!0,gn.BLACK=!1;gn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ye(57766)}get value(){throw Ye(16141)}get color(){throw Ye(16727)}get left(){throw Ye(29726)}get right(){throw Ye(36894)}copy(e,t,i,s,a){return this}insert(e,t,i){return new gn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e){this.comparator=e,this.data=new Ot(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Cw(this.data.getIterator())}getIteratorFrom(e){return new Cw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof sn)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,a=i.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new sn(this.comparator);return t.data=e,t}}class Cw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(e){this.fields=e,e.sort(yn.comparator)}static empty(){return new Ni([])}unionWith(e){let t=new sn(yn.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Ni(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ja(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new Lb("Invalid base64 string: "+a):a}})(e);return new _n(t)}static fromUint8Array(e){const t=(function(s){let a="";for(let l=0;l<s.length;++l)a+=String.fromCharCode(s[l]);return a})(e);return new _n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let s=0;s<t.length;s++)i[s]=t.charCodeAt(s);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return lt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}_n.EMPTY_BYTE_STRING=new _n("");const YU=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Bs(n){if(Tt(!!n,39018),typeof n=="string"){let e=0;const t=YU.exec(n);if(Tt(!!t,46558,{timestamp:n}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Yt(n.seconds),nanos:Yt(n.nanos)}}function Yt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Gs(n){return typeof n=="string"?_n.fromBase64String(n):_n.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ub="server_timestamp",Vb="__type__",Ob="__previous_value__",zb="__local_write_time__";function Bg(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[Vb])==null?void 0:i.stringValue)===Ub}function zf(n){const e=n.mapValue.fields[Ob];return Bg(e)?zf(e):e}function Lu(n){const e=Bs(n.mapValue.fields[zb].timestampValue);return new Lt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $U{constructor(e,t,i,s,a,l,c,f,h,y,E){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=s,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=c,this.longPollingOptions=f,this.useFetchStreams=h,this.isUsingEmulator=y,this.apiKey=E}}const hf="(default)";class Uu{constructor(e,t){this.projectId=e,this.database=t||hf}static empty(){return new Uu("","")}get isDefaultDatabase(){return this.database===hf}isEqual(e){return e instanceof Uu&&e.projectId===this.projectId&&e.database===this.database}}function KU(n,e){if(!Object.prototype.hasOwnProperty.apply(n.options,["projectId"]))throw new Le(we.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Uu(n.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fb="__type__",JU="__max__",kd={mapValue:{}},Bb="__vector__",pf="value";function Hs(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Bg(n)?4:WU(n)?9007199254740991:jU(n)?10:11:Ye(28295,{value:n})}function hr(n,e){if(n===e)return!0;const t=Hs(n);if(t!==Hs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Lu(n).isEqual(Lu(e));case 3:return(function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const l=Bs(s.timestampValue),c=Bs(a.timestampValue);return l.seconds===c.seconds&&l.nanos===c.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(s,a){return Gs(s.bytesValue).isEqual(Gs(a.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(s,a){return Yt(s.geoPointValue.latitude)===Yt(a.geoPointValue.latitude)&&Yt(s.geoPointValue.longitude)===Yt(a.geoPointValue.longitude)})(n,e);case 2:return(function(s,a){if("integerValue"in s&&"integerValue"in a)return Yt(s.integerValue)===Yt(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const l=Yt(s.doubleValue),c=Yt(a.doubleValue);return l===c?ff(l)===ff(c):isNaN(l)&&isNaN(c)}return!1})(n,e);case 9:return ja(n.arrayValue.values||[],e.arrayValue.values||[],hr);case 10:case 11:return(function(s,a){const l=s.mapValue.fields||{},c=a.mapValue.fields||{};if(xw(l)!==xw(c))return!1;for(const f in l)if(l.hasOwnProperty(f)&&(c[f]===void 0||!hr(l[f],c[f])))return!1;return!0})(n,e);default:return Ye(52216,{left:n})}}function Vu(n,e){return(n.values||[]).find((t=>hr(t,e)))!==void 0}function Wa(n,e){if(n===e)return 0;const t=Hs(n),i=Hs(e);if(t!==i)return lt(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return lt(n.booleanValue,e.booleanValue);case 2:return(function(a,l){const c=Yt(a.integerValue||a.doubleValue),f=Yt(l.integerValue||l.doubleValue);return c<f?-1:c>f?1:c===f?0:isNaN(c)?isNaN(f)?0:-1:1})(n,e);case 3:return Iw(n.timestampValue,e.timestampValue);case 4:return Iw(Lu(n),Lu(e));case 5:return $m(n.stringValue,e.stringValue);case 6:return(function(a,l){const c=Gs(a),f=Gs(l);return c.compareTo(f)})(n.bytesValue,e.bytesValue);case 7:return(function(a,l){const c=a.split("/"),f=l.split("/");for(let h=0;h<c.length&&h<f.length;h++){const y=lt(c[h],f[h]);if(y!==0)return y}return lt(c.length,f.length)})(n.referenceValue,e.referenceValue);case 8:return(function(a,l){const c=lt(Yt(a.latitude),Yt(l.latitude));return c!==0?c:lt(Yt(a.longitude),Yt(l.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return Rw(n.arrayValue,e.arrayValue);case 10:return(function(a,l){var T,w,C,b;const c=a.fields||{},f=l.fields||{},h=(T=c[pf])==null?void 0:T.arrayValue,y=(w=f[pf])==null?void 0:w.arrayValue,E=lt(((C=h==null?void 0:h.values)==null?void 0:C.length)||0,((b=y==null?void 0:y.values)==null?void 0:b.length)||0);return E!==0?E:Rw(h,y)})(n.mapValue,e.mapValue);case 11:return(function(a,l){if(a===kd.mapValue&&l===kd.mapValue)return 0;if(a===kd.mapValue)return 1;if(l===kd.mapValue)return-1;const c=a.fields||{},f=Object.keys(c),h=l.fields||{},y=Object.keys(h);f.sort(),y.sort();for(let E=0;E<f.length&&E<y.length;++E){const T=$m(f[E],y[E]);if(T!==0)return T;const w=Wa(c[f[E]],h[y[E]]);if(w!==0)return w}return lt(f.length,y.length)})(n.mapValue,e.mapValue);default:throw Ye(23264,{he:t})}}function Iw(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return lt(n,e);const t=Bs(n),i=Bs(e),s=lt(t.seconds,i.seconds);return s!==0?s:lt(t.nanos,i.nanos)}function Rw(n,e){const t=n.values||[],i=e.values||[];for(let s=0;s<t.length&&s<i.length;++s){const a=Wa(t[s],i[s]);if(a)return a}return lt(t.length,i.length)}function Qa(n){return Km(n)}function Km(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=Bs(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Gs(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Ge.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",s=!0;for(const a of t.values||[])s?s=!1:i+=",",i+=Km(a);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let s="{",a=!0;for(const l of i)a?a=!1:s+=",",s+=`${l}:${Km(t.fields[l])}`;return s+"}"})(n.mapValue):Ye(61005,{value:n})}function qd(n){switch(Hs(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=zf(n);return e?16+qd(e):16;case 5:return 2*n.stringValue.length;case 6:return Gs(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((s,a)=>s+qd(a)),0)})(n.arrayValue);case 10:case 11:return(function(i){let s=0;return zo(i.fields,((a,l)=>{s+=a.length+qd(l)})),s})(n.mapValue);default:throw Ye(13486,{value:n})}}function Nw(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Jm(n){return!!n&&"integerValue"in n}function Gg(n){return!!n&&"arrayValue"in n}function Mw(n){return!!n&&"nullValue"in n}function kw(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Yd(n){return!!n&&"mapValue"in n}function jU(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[Fb])==null?void 0:i.stringValue)===Bb}function xu(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return zo(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=xu(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=xu(n.arrayValue.values[t]);return e}return{...n}}function WU(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===JU}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(e){this.value=e}static empty(){return new hi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Yd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=xu(t)}setAll(e){let t=yn.emptyPath(),i={},s=[];e.forEach(((l,c)=>{if(!t.isImmediateParentOf(c)){const f=this.getFieldsMap(t);this.applyChanges(f,i,s),i={},s=[],t=c.popLast()}l?i[c.lastSegment()]=xu(l):s.push(c.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,i,s)}delete(e){const t=this.field(e.popLast());Yd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return hr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let s=t.mapValue.fields[e.get(i)];Yd(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,i){zo(t,((s,a)=>e[s]=a));for(const s of i)delete e[s]}clone(){return new hi(xu(this.value))}}function Gb(n){const e=[];return zo(n.fields,((t,i)=>{const s=new yn([t]);if(Yd(i)){const a=Gb(i.mapValue).fields;if(a.length===0)e.push(s);else for(const l of a)e.push(s.child(l))}else e.push(s)})),new Ni(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e,t,i,s,a,l,c){this.key=e,this.documentType=t,this.version=i,this.readTime=s,this.createTime=a,this.data=l,this.documentState=c}static newInvalidDocument(e){return new An(e,0,Je.min(),Je.min(),Je.min(),hi.empty(),0)}static newFoundDocument(e,t,i,s){return new An(e,1,t,Je.min(),i,s,0)}static newNoDocument(e,t){return new An(e,2,t,Je.min(),Je.min(),hi.empty(),0)}static newUnknownDocument(e,t){return new An(e,3,t,Je.min(),Je.min(),hi.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Je.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=hi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=hi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Je.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof An&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new An(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mf{constructor(e,t){this.position=e,this.inclusive=t}}function Dw(n,e,t){let i=0;for(let s=0;s<n.position.length;s++){const a=e[s],l=n.position[s];if(a.field.isKeyField()?i=Ge.comparator(Ge.fromName(l.referenceValue),t.key):i=Wa(l,t.data.field(a.field)),a.dir==="desc"&&(i*=-1),i!==0)break}return i}function Pw(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!hr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ou{constructor(e,t="asc"){this.field=e,this.dir=t}}function QU(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hb{}class tn extends Hb{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new ZU(e,t,i):t==="array-contains"?new nV(e,i):t==="in"?new iV(e,i):t==="not-in"?new rV(e,i):t==="array-contains-any"?new sV(e,i):new tn(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new eV(e,i):new tV(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Wa(t,this.value)):t!==null&&Hs(this.value)===Hs(t)&&this.matchesComparison(Wa(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ye(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ui extends Hb{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Ui(e,t)}matches(e){return qb(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function qb(n){return n.op==="and"}function Yb(n){return XU(n)&&qb(n)}function XU(n){for(const e of n.filters)if(e instanceof Ui)return!1;return!0}function jm(n){if(n instanceof tn)return n.field.canonicalString()+n.op.toString()+Qa(n.value);if(Yb(n))return n.filters.map((e=>jm(e))).join(",");{const e=n.filters.map((t=>jm(t))).join(",");return`${n.op}(${e})`}}function $b(n,e){return n instanceof tn?(function(i,s){return s instanceof tn&&i.op===s.op&&i.field.isEqual(s.field)&&hr(i.value,s.value)})(n,e):n instanceof Ui?(function(i,s){return s instanceof Ui&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce(((a,l,c)=>a&&$b(l,s.filters[c])),!0):!1})(n,e):void Ye(19439)}function Kb(n){return n instanceof tn?(function(t){return`${t.field.canonicalString()} ${t.op} ${Qa(t.value)}`})(n):n instanceof Ui?(function(t){return t.op.toString()+" {"+t.getFilters().map(Kb).join(" ,")+"}"})(n):"Filter"}class ZU extends tn{constructor(e,t,i){super(e,t,i),this.key=Ge.fromName(i.referenceValue)}matches(e){const t=Ge.comparator(e.key,this.key);return this.matchesComparison(t)}}class eV extends tn{constructor(e,t){super(e,"in",t),this.keys=Jb("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class tV extends tn{constructor(e,t){super(e,"not-in",t),this.keys=Jb("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Jb(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((i=>Ge.fromName(i.referenceValue)))}class nV extends tn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Gg(t)&&Vu(t.arrayValue,this.value)}}class iV extends tn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Vu(this.value.arrayValue,t)}}class rV extends tn{constructor(e,t){super(e,"not-in",t)}matches(e){if(Vu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Vu(this.value.arrayValue,t)}}class sV extends tn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Gg(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>Vu(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oV{constructor(e,t=null,i=[],s=[],a=null,l=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=s,this.limit=a,this.startAt=l,this.endAt=c,this.Te=null}}function Lw(n,e=null,t=[],i=[],s=null,a=null,l=null){return new oV(n,e,t,i,s,a,l)}function Hg(n){const e=Qe(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>jm(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(a){return a.field.canonicalString()+a.dir})(i))).join(","),Of(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>Qa(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>Qa(i))).join(",")),e.Te=t}return e.Te}function qg(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!QU(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!$b(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Pw(n.startAt,e.startAt)&&Pw(n.endAt,e.endAt)}function Wm(n){return Ge.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul{constructor(e,t=null,i=[],s=[],a=null,l="F",c=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=s,this.limit=a,this.limitType=l,this.startAt=c,this.endAt=f,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function aV(n,e,t,i,s,a,l,c){return new ul(n,e,t,i,s,a,l,c)}function Ff(n){return new ul(n)}function Uw(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function lV(n){return Ge.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function jb(n){return n.collectionGroup!==null}function Cu(n){const e=Qe(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),t.add(a.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let c=new sn(yn.comparator);return l.filters.forEach((f=>{f.getFlattenedFilters().forEach((h=>{h.isInequality()&&(c=c.add(h.field))}))})),c})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new Ou(a,i))})),t.has(yn.keyField().canonicalString())||e.Ie.push(new Ou(yn.keyField(),i))}return e.Ie}function ur(n){const e=Qe(n);return e.Ee||(e.Ee=uV(e,Cu(n))),e.Ee}function uV(n,e){if(n.limitType==="F")return Lw(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((s=>{const a=s.dir==="desc"?"asc":"desc";return new Ou(s.field,a)}));const t=n.endAt?new mf(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new mf(n.startAt.position,n.startAt.inclusive):null;return Lw(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function Qm(n,e){const t=n.filters.concat([e]);return new ul(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function cV(n,e){const t=n.explicitOrderBy.concat([e]);return new ul(n.path,n.collectionGroup,t,n.filters.slice(),n.limit,n.limitType,n.startAt,n.endAt)}function Xm(n,e,t){return new ul(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Bf(n,e){return qg(ur(n),ur(e))&&n.limitType===e.limitType}function Wb(n){return`${Hg(ur(n))}|lt:${n.limitType}`}function Pa(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((s=>Kb(s))).join(", ")}]`),Of(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((s=>(function(l){return`${l.field.canonicalString()} (${l.dir})`})(s))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((s=>Qa(s))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((s=>Qa(s))).join(",")),`Target(${i})`})(ur(n))}; limitType=${n.limitType})`}function Gf(n,e){return e.isFoundDocument()&&(function(i,s){const a=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(a):Ge.isDocumentKey(i.path)?i.path.isEqual(a):i.path.isImmediateParentOf(a)})(n,e)&&(function(i,s){for(const a of Cu(i))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0})(n,e)&&(function(i,s){for(const a of i.filters)if(!a.matches(s))return!1;return!0})(n,e)&&(function(i,s){return!(i.startAt&&!(function(l,c,f){const h=Dw(l,c,f);return l.inclusive?h<=0:h<0})(i.startAt,Cu(i),s)||i.endAt&&!(function(l,c,f){const h=Dw(l,c,f);return l.inclusive?h>=0:h>0})(i.endAt,Cu(i),s))})(n,e)}function dV(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Qb(n){return(e,t)=>{let i=!1;for(const s of Cu(n)){const a=fV(s,e,t);if(a!==0)return a;i=i||s.field.isKeyField()}return 0}}function fV(n,e,t){const i=n.field.isKeyField()?Ge.comparator(e.key,t.key):(function(a,l,c){const f=l.data.field(a),h=c.data.field(a);return f!==null&&h!==null?Wa(f,h):Ye(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Ye(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[s,a]of i)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),s=this.inner[i];if(s===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return i.length===1?delete this.inner[t]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(e){zo(this.inner,((t,i)=>{for(const[s,a]of i)e(s,a)}))}isEmpty(){return Pb(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hV=new Ot(Ge.comparator);function Yr(){return hV}const Xb=new Ot(Ge.comparator);function _u(...n){let e=Xb;for(const t of n)e=e.insert(t.key,t);return e}function Zb(n){let e=Xb;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function Co(){return Iu()}function eA(){return Iu()}function Iu(){return new Fo((n=>n.toString()),((n,e)=>n.isEqual(e)))}const pV=new Ot(Ge.comparator),mV=new sn(Ge.comparator);function ut(...n){let e=mV;for(const t of n)e=e.add(t);return e}const gV=new sn(lt);function yV(){return gV}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yg(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ff(e)?"-0":e}}function tA(n){return{integerValue:""+n}}function vV(n,e){return GU(e)?tA(e):Yg(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hf{constructor(){this._=void 0}}function _V(n,e,t){return n instanceof zu?(function(s,a){const l={fields:{[Vb]:{stringValue:Ub},[zb]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&Bg(a)&&(a=zf(a)),a&&(l.fields[Ob]=a),{mapValue:l}})(t,e):n instanceof Fu?iA(n,e):n instanceof Bu?rA(n,e):(function(s,a){const l=nA(s,a),c=Vw(l)+Vw(s.Ae);return Jm(l)&&Jm(s.Ae)?tA(c):Yg(s.serializer,c)})(n,e)}function EV(n,e,t){return n instanceof Fu?iA(n,e):n instanceof Bu?rA(n,e):t}function nA(n,e){return n instanceof gf?(function(i){return Jm(i)||(function(a){return!!a&&"doubleValue"in a})(i)})(e)?e:{integerValue:0}:null}class zu extends Hf{}class Fu extends Hf{constructor(e){super(),this.elements=e}}function iA(n,e){const t=sA(e);for(const i of n.elements)t.some((s=>hr(s,i)))||t.push(i);return{arrayValue:{values:t}}}class Bu extends Hf{constructor(e){super(),this.elements=e}}function rA(n,e){let t=sA(e);for(const i of n.elements)t=t.filter((s=>!hr(s,i)));return{arrayValue:{values:t}}}class gf extends Hf{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Vw(n){return Yt(n.integerValue||n.doubleValue)}function sA(n){return Gg(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TV{constructor(e,t){this.field=e,this.transform=t}}function wV(n,e){return n.field.isEqual(e.field)&&(function(i,s){return i instanceof Fu&&s instanceof Fu||i instanceof Bu&&s instanceof Bu?ja(i.elements,s.elements,hr):i instanceof gf&&s instanceof gf?hr(i.Ae,s.Ae):i instanceof zu&&s instanceof zu})(n.transform,e.transform)}class SV{constructor(e,t){this.version=e,this.transformResults=t}}class cr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new cr}static exists(e){return new cr(void 0,e)}static updateTime(e){return new cr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function $d(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class qf{}function oA(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new $g(n.key,cr.none()):new ju(n.key,n.data,cr.none());{const t=n.data,i=hi.empty();let s=new sn(yn.comparator);for(let a of e.fields)if(!s.has(a)){let l=t.field(a);l===null&&a.length>1&&(a=a.popLast(),l=t.field(a)),l===null?i.delete(a):i.set(a,l),s=s.add(a)}return new Bo(n.key,i,new Ni(s.toArray()),cr.none())}}function bV(n,e,t){n instanceof ju?(function(s,a,l){const c=s.value.clone(),f=zw(s.fieldTransforms,a,l.transformResults);c.setAll(f),a.convertToFoundDocument(l.version,c).setHasCommittedMutations()})(n,e,t):n instanceof Bo?(function(s,a,l){if(!$d(s.precondition,a))return void a.convertToUnknownDocument(l.version);const c=zw(s.fieldTransforms,a,l.transformResults),f=a.data;f.setAll(aA(s)),f.setAll(c),a.convertToFoundDocument(l.version,f).setHasCommittedMutations()})(n,e,t):(function(s,a,l){a.convertToNoDocument(l.version).setHasCommittedMutations()})(0,e,t)}function Ru(n,e,t,i){return n instanceof ju?(function(a,l,c,f){if(!$d(a.precondition,l))return c;const h=a.value.clone(),y=Fw(a.fieldTransforms,f,l);return h.setAll(y),l.convertToFoundDocument(l.version,h).setHasLocalMutations(),null})(n,e,t,i):n instanceof Bo?(function(a,l,c,f){if(!$d(a.precondition,l))return c;const h=Fw(a.fieldTransforms,f,l),y=l.data;return y.setAll(aA(a)),y.setAll(h),l.convertToFoundDocument(l.version,y).setHasLocalMutations(),c===null?null:c.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((E=>E.field)))})(n,e,t,i):(function(a,l,c){return $d(a.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):c})(n,e,t)}function AV(n,e){let t=null;for(const i of n.fieldTransforms){const s=e.data.field(i.field),a=nA(i.transform,s||null);a!=null&&(t===null&&(t=hi.empty()),t.set(i.field,a))}return t||null}function Ow(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&ja(i,s,((a,l)=>wV(a,l)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class ju extends qf{constructor(e,t,i,s=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Bo extends qf{constructor(e,t,i,s,a=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function aA(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function zw(n,e,t){const i=new Map;Tt(n.length===t.length,32656,{Ve:t.length,de:n.length});for(let s=0;s<t.length;s++){const a=n[s],l=a.transform,c=e.data.field(a.field);i.set(a.field,EV(l,c,t[s]))}return i}function Fw(n,e,t){const i=new Map;for(const s of n){const a=s.transform,l=t.data.field(s.field);i.set(s.field,_V(a,l,e))}return i}class $g extends qf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class xV extends qf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CV{constructor(e,t,i,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&bV(a,e,i[s])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=Ru(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=Ru(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=eA();return this.mutations.forEach((s=>{const a=e.get(s.key),l=a.overlayedDocument;let c=this.applyToLocalView(l,a.mutatedFields);c=t.has(s.key)?null:c;const f=oA(l,c);f!==null&&i.set(s.key,f),l.isValidDocument()||l.convertToNoDocument(Je.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),ut())}isEqual(e){return this.batchId===e.batchId&&ja(this.mutations,e.mutations,((t,i)=>Ow(t,i)))&&ja(this.baseMutations,e.baseMutations,((t,i)=>Ow(t,i)))}}class Kg{constructor(e,t,i,s){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=s}static from(e,t,i){Tt(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let s=(function(){return pV})();const a=e.mutations;for(let l=0;l<a.length;l++)s=s.insert(a[l].key,i[l].version);return new Kg(e,t,i,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IV{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RV{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var en,dt;function NV(n){switch(n){case we.OK:return Ye(64938);case we.CANCELLED:case we.UNKNOWN:case we.DEADLINE_EXCEEDED:case we.RESOURCE_EXHAUSTED:case we.INTERNAL:case we.UNAVAILABLE:case we.UNAUTHENTICATED:return!1;case we.INVALID_ARGUMENT:case we.NOT_FOUND:case we.ALREADY_EXISTS:case we.PERMISSION_DENIED:case we.FAILED_PRECONDITION:case we.ABORTED:case we.OUT_OF_RANGE:case we.UNIMPLEMENTED:case we.DATA_LOSS:return!0;default:return Ye(15467,{code:n})}}function lA(n){if(n===void 0)return qr("GRPC error has no .code"),we.UNKNOWN;switch(n){case en.OK:return we.OK;case en.CANCELLED:return we.CANCELLED;case en.UNKNOWN:return we.UNKNOWN;case en.DEADLINE_EXCEEDED:return we.DEADLINE_EXCEEDED;case en.RESOURCE_EXHAUSTED:return we.RESOURCE_EXHAUSTED;case en.INTERNAL:return we.INTERNAL;case en.UNAVAILABLE:return we.UNAVAILABLE;case en.UNAUTHENTICATED:return we.UNAUTHENTICATED;case en.INVALID_ARGUMENT:return we.INVALID_ARGUMENT;case en.NOT_FOUND:return we.NOT_FOUND;case en.ALREADY_EXISTS:return we.ALREADY_EXISTS;case en.PERMISSION_DENIED:return we.PERMISSION_DENIED;case en.FAILED_PRECONDITION:return we.FAILED_PRECONDITION;case en.ABORTED:return we.ABORTED;case en.OUT_OF_RANGE:return we.OUT_OF_RANGE;case en.UNIMPLEMENTED:return we.UNIMPLEMENTED;case en.DATA_LOSS:return we.DATA_LOSS;default:return Ye(39323,{code:n})}}(dt=en||(en={}))[dt.OK=0]="OK",dt[dt.CANCELLED=1]="CANCELLED",dt[dt.UNKNOWN=2]="UNKNOWN",dt[dt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",dt[dt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",dt[dt.NOT_FOUND=5]="NOT_FOUND",dt[dt.ALREADY_EXISTS=6]="ALREADY_EXISTS",dt[dt.PERMISSION_DENIED=7]="PERMISSION_DENIED",dt[dt.UNAUTHENTICATED=16]="UNAUTHENTICATED",dt[dt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",dt[dt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",dt[dt.ABORTED=10]="ABORTED",dt[dt.OUT_OF_RANGE=11]="OUT_OF_RANGE",dt[dt.UNIMPLEMENTED=12]="UNIMPLEMENTED",dt[dt.INTERNAL=13]="INTERNAL",dt[dt.UNAVAILABLE=14]="UNAVAILABLE",dt[dt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MV(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kV=new Os([4294967295,4294967295],0);function Bw(n){const e=MV().encode(n),t=new Sb;return t.update(e),new Uint8Array(t.digest())}function Gw(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Os([t,i],0),new Os([s,a],0)]}class Jg{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Eu(`Invalid padding: ${t}`);if(i<0)throw new Eu(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Eu(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Eu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Os.fromNumber(this.ge)}ye(e,t,i){let s=e.add(t.multiply(Os.fromNumber(i)));return s.compare(kV)===1&&(s=new Os([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=Bw(e),[i,s]=Gw(t);for(let a=0;a<this.hashCount;a++){const l=this.ye(i,s,a);if(!this.we(l))return!1}return!0}static create(e,t,i){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),l=new Jg(a,s,t);return i.forEach((c=>l.insert(c))),l}insert(e){if(this.ge===0)return;const t=Bw(e),[i,s]=Gw(t);for(let a=0;a<this.hashCount;a++){const l=this.ye(i,s,a);this.be(l)}}be(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Eu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yf{constructor(e,t,i,s,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const s=new Map;return s.set(e,Wu.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Yf(Je.min(),s,new Ot(lt),Yr(),ut())}}class Wu{constructor(e,t,i,s,a){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Wu(i,t,ut(),ut(),ut())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd{constructor(e,t,i,s){this.Se=e,this.removedTargetIds=t,this.key=i,this.De=s}}class uA{constructor(e,t){this.targetId=e,this.Ce=t}}class cA{constructor(e,t,i=_n.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=s}}class Hw{constructor(){this.ve=0,this.Fe=qw(),this.Me=_n.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ut(),t=ut(),i=ut();return this.Fe.forEach(((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:i=i.add(s);break;default:Ye(38017,{changeType:a})}})),new Wu(this.Me,this.xe,e,t,i)}Ke(){this.Oe=!1,this.Fe=qw()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,Tt(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class DV{constructor(e){this.Ge=e,this.ze=new Map,this.je=Yr(),this.He=Dd(),this.Je=Dd(),this.Ze=new Ot(lt)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.We(),i.Ne||i.Ke(),i.Le(e.resumeToken);break;case 2:i.We(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.Qe(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:Ye(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,s)=>{this.rt(s)&&t(s)}))}st(e){const t=e.targetId,i=e.Ce.count,s=this.ot(t);if(s){const a=s.target;if(Wm(a))if(i===0){const l=new Ge(a.path);this.et(t,l,An.newNoDocument(l,Je.min()))}else Tt(i===1,20013,{expectedCount:i});else{const l=this._t(t);if(l!==i){const c=this.ut(e),f=c?this.ct(c,e,l):1;if(f!==0){this.it(t);const h=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,h)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:a=0}=t;let l,c;try{l=Gs(i).toUint8Array()}catch(f){if(f instanceof Lb)return Lo("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{c=new Jg(l,s,a)}catch(f){return Lo(f instanceof Eu?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return c.ge===0?null:c}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let s=0;return i.forEach((a=>{const l=this.Ge.ht(),c=`projects/${l.projectId}/databases/${l.database}/documents/${a.path.canonicalString()}`;e.mightContain(c)||(this.et(t,a,null),s++)})),s}Tt(e){const t=new Map;this.ze.forEach(((a,l)=>{const c=this.ot(l);if(c){if(a.current&&Wm(c.target)){const f=new Ge(c.target.path);this.It(f).has(l)||this.Et(l,f)||this.et(l,f,An.newNoDocument(f,e))}a.Be&&(t.set(l,a.ke()),a.Ke())}}));let i=ut();this.Je.forEach(((a,l)=>{let c=!0;l.forEachWhile((f=>{const h=this.ot(f);return!h||h.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)})),c&&(i=i.add(a))})),this.je.forEach(((a,l)=>l.setReadTime(e)));const s=new Yf(e,t,this.Ze,this.je,i);return this.je=Yr(),this.He=Dd(),this.Je=Dd(),this.Ze=new Ot(lt),s}Ye(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,i),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,t)?s.qe(t,1):s.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new Hw,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new sn(lt),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new sn(lt),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Ue("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Hw),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Dd(){return new Ot(Ge.comparator)}function qw(){return new Ot(Ge.comparator)}const PV={asc:"ASCENDING",desc:"DESCENDING"},LV={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},UV={and:"AND",or:"OR"};class VV{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Zm(n,e){return n.useProto3Json||Of(e)?e:{value:e}}function yf(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function dA(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function OV(n,e){return yf(n,e.toTimestamp())}function dr(n){return Tt(!!n,49232),Je.fromTimestamp((function(t){const i=Bs(t);return new Lt(i.seconds,i.nanos)})(n))}function jg(n,e){return eg(n,e).canonicalString()}function eg(n,e){const t=(function(s){return new Mt(["projects",s.projectId,"databases",s.database])})(n).child("documents");return e===void 0?t:t.child(e)}function fA(n){const e=Mt.fromString(n);return Tt(yA(e),10190,{key:e.toString()}),e}function tg(n,e){return jg(n.databaseId,e.path)}function pm(n,e){const t=fA(e);if(t.get(1)!==n.databaseId.projectId)throw new Le(we.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Le(we.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ge(pA(t))}function hA(n,e){return jg(n.databaseId,e)}function zV(n){const e=fA(n);return e.length===4?Mt.emptyPath():pA(e)}function ng(n){return new Mt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function pA(n){return Tt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Yw(n,e,t){return{name:tg(n,e),fields:t.value.mapValue.fields}}function FV(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Ye(39313,{state:h})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=(function(h,y){return h.useProto3Json?(Tt(y===void 0||typeof y=="string",58123),_n.fromBase64String(y||"")):(Tt(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),_n.fromUint8Array(y||new Uint8Array))})(n,e.targetChange.resumeToken),l=e.targetChange.cause,c=l&&(function(h){const y=h.code===void 0?we.UNKNOWN:lA(h.code);return new Le(y,h.message||"")})(l);t=new cA(i,s,a,c||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const s=pm(n,i.document.name),a=dr(i.document.updateTime),l=i.document.createTime?dr(i.document.createTime):Je.min(),c=new hi({mapValue:{fields:i.document.fields}}),f=An.newFoundDocument(s,a,l,c),h=i.targetIds||[],y=i.removedTargetIds||[];t=new Kd(h,y,f.key,f)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const s=pm(n,i.document),a=i.readTime?dr(i.readTime):Je.min(),l=An.newNoDocument(s,a),c=i.removedTargetIds||[];t=new Kd([],c,l.key,l)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const s=pm(n,i.document),a=i.removedTargetIds||[];t=new Kd([],a,s,null)}else{if(!("filter"in e))return Ye(11601,{Vt:e});{e.filter;const i=e.filter;i.targetId;const{count:s=0,unchangedNames:a}=i,l=new RV(s,a),c=i.targetId;t=new uA(c,l)}}return t}function BV(n,e){let t;if(e instanceof ju)t={update:Yw(n,e.key,e.value)};else if(e instanceof $g)t={delete:tg(n,e.key)};else if(e instanceof Bo)t={update:Yw(n,e.key,e.data),updateMask:WV(e.fieldMask)};else{if(!(e instanceof xV))return Ye(16599,{dt:e.type});t={verify:tg(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(a,l){const c=l.transform;if(c instanceof zu)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Fu)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Bu)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof gf)return{fieldPath:l.field.canonicalString(),increment:c.Ae};throw Ye(20930,{transform:l.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(s,a){return a.updateTime!==void 0?{updateTime:OV(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Ye(27497)})(n,e.precondition)),t}function GV(n,e){return n&&n.length>0?(Tt(e!==void 0,14353),n.map((t=>(function(s,a){let l=s.updateTime?dr(s.updateTime):dr(a);return l.isEqual(Je.min())&&(l=dr(a)),new SV(l,s.transformResults||[])})(t,e)))):[]}function HV(n,e){return{documents:[hA(n,e.path)]}}function qV(n,e){const t={structuredQuery:{}},i=e.path;let s;e.collectionGroup!==null?(s=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=hA(n,s);const a=(function(h){if(h.length!==0)return gA(Ui.create(h,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const l=(function(h){if(h.length!==0)return h.map((y=>(function(T){return{field:La(T.field),direction:KV(T.dir)}})(y)))})(e.orderBy);l&&(t.structuredQuery.orderBy=l);const c=Zm(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{ft:t,parent:s}}function YV(n){let e=zV(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let s=null;if(i>0){Tt(i===1,65062);const y=t.from[0];y.allDescendants?s=y.collectionId:e=e.child(y.collectionId)}let a=[];t.where&&(a=(function(E){const T=mA(E);return T instanceof Ui&&Yb(T)?T.getFilters():[T]})(t.where));let l=[];t.orderBy&&(l=(function(E){return E.map((T=>(function(C){return new Ou(Ua(C.field),(function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(C.direction))})(T)))})(t.orderBy));let c=null;t.limit&&(c=(function(E){let T;return T=typeof E=="object"?E.value:E,Of(T)?null:T})(t.limit));let f=null;t.startAt&&(f=(function(E){const T=!!E.before,w=E.values||[];return new mf(w,T)})(t.startAt));let h=null;return t.endAt&&(h=(function(E){const T=!E.before,w=E.values||[];return new mf(w,T)})(t.endAt)),aV(e,s,l,a,c,"F",f,h)}function $V(n,e){const t=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ye(28987,{purpose:s})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function mA(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Ua(t.unaryFilter.field);return tn.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=Ua(t.unaryFilter.field);return tn.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Ua(t.unaryFilter.field);return tn.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=Ua(t.unaryFilter.field);return tn.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ye(61313);default:return Ye(60726)}})(n):n.fieldFilter!==void 0?(function(t){return tn.create(Ua(t.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ye(58110);default:return Ye(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Ui.create(t.compositeFilter.filters.map((i=>mA(i))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Ye(1026)}})(t.compositeFilter.op))})(n):Ye(30097,{filter:n})}function KV(n){return PV[n]}function JV(n){return LV[n]}function jV(n){return UV[n]}function La(n){return{fieldPath:n.canonicalString()}}function Ua(n){return yn.fromServerFormat(n.fieldPath)}function gA(n){return n instanceof tn?(function(t){if(t.op==="=="){if(kw(t.value))return{unaryFilter:{field:La(t.field),op:"IS_NAN"}};if(Mw(t.value))return{unaryFilter:{field:La(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(kw(t.value))return{unaryFilter:{field:La(t.field),op:"IS_NOT_NAN"}};if(Mw(t.value))return{unaryFilter:{field:La(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:La(t.field),op:JV(t.op),value:t.value}}})(n):n instanceof Ui?(function(t){const i=t.getFilters().map((s=>gA(s)));return i.length===1?i[0]:{compositeFilter:{op:jV(t.op),filters:i}}})(n):Ye(54877,{filter:n})}function WV(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function yA(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}function vA(n){return!!n&&typeof n._toProto=="function"&&n._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps{constructor(e,t,i,s,a=Je.min(),l=Je.min(),c=_n.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=c,this.expectedCount=f}withSequenceNumber(e){return new Ps(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ps(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ps(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ps(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QV{constructor(e){this.yt=e}}function XV(n){const e=YV({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Xm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZV{constructor(){this.Sn=new eO}addToCollectionParentIndex(e,t){return this.Sn.add(t),xe.resolve()}getCollectionParents(e,t){return xe.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return xe.resolve()}deleteFieldIndex(e,t){return xe.resolve()}deleteAllFieldIndexes(e){return xe.resolve()}createTargetIndexes(e,t){return xe.resolve()}getDocumentsMatchingTarget(e,t){return xe.resolve(null)}getIndexType(e,t){return xe.resolve(0)}getFieldIndexes(e,t){return xe.resolve([])}getNextCollectionGroupToUpdate(e){return xe.resolve(null)}getMinOffset(e,t){return xe.resolve(Fs.min())}getMinOffsetFromCollectionGroup(e,t){return xe.resolve(Fs.min())}updateCollectionGroup(e,t,i){return xe.resolve()}updateIndexEntries(e,t){return xe.resolve()}}class eO{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),s=this.index[t]||new sn(Mt.comparator),a=!s.has(i);return this.index[t]=s.add(i),a}has(e){const t=e.lastSegment(),i=e.popLast(),s=this.index[t];return s&&s.has(i)}getEntries(e){return(this.index[e]||new sn(Mt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $w={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},_A=41943040;class Bn{static withCacheSize(e){return new Bn(e,Bn.DEFAULT_COLLECTION_PERCENTILE,Bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Bn.DEFAULT_COLLECTION_PERCENTILE=10,Bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Bn.DEFAULT=new Bn(_A,Bn.DEFAULT_COLLECTION_PERCENTILE,Bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Bn.DISABLED=new Bn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Xa(0)}static ar(){return new Xa(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kw="LruGarbageCollector",tO=1048576;function Jw([n,e],[t,i]){const s=lt(n,t);return s===0?lt(e,i):s}class nO{constructor(e){this.Pr=e,this.buffer=new sn(Jw),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();Jw(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class iO{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){Ue(Kw,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){ll(t)?Ue(Kw,"Ignoring IndexedDB error during garbage collection: ",t):await al(t)}await this.Ar(3e5)}))}}class rO{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return xe.resolve(Vf.ce);const i=new nO(t);return this.Vr.forEachTarget(e,(s=>i.Er(s.sequenceNumber))).next((()=>this.Vr.mr(e,(s=>i.Er(s))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.Vr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Ue("LruGarbageCollector","Garbage collection skipped; disabled"),xe.resolve($w)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(Ue("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),$w):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let i,s,a,l,c,f,h;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(Ue("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),s=this.params.maximumSequenceNumbersToCollect):s=E,l=Date.now(),this.nthSequenceNumber(e,s)))).next((E=>(i=E,c=Date.now(),this.removeTargets(e,i,t)))).next((E=>(a=E,f=Date.now(),this.removeOrphanedDocuments(e,i)))).next((E=>(h=Date.now(),Da()<=at.DEBUG&&Ue("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-y}ms
	Determined least recently used ${s} in `+(c-l)+`ms
	Removed ${a} targets in `+(f-c)+`ms
	Removed ${E} documents in `+(h-f)+`ms
Total Duration: ${h-y}ms`),xe.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:a,documentsRemoved:E}))))}}function sO(n,e){return new rO(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oO{constructor(){this.changes=new Fo((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,An.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?xe.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aO{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lO{constructor(e,t,i,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=s}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((s=>(i=s,this.remoteDocumentCache.getEntry(e,t)))).next((s=>(i!==null&&Ru(i.mutation,s,Ni.empty(),Lt.now()),s)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,ut()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=ut()){const s=Co();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,i).next((a=>{let l=_u();return a.forEach(((c,f)=>{l=l.insert(c,f.overlayedDocument)})),l}))))}getOverlayedDocuments(e,t){const i=Co();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,ut())))}populateOverlays(e,t,i){const s=[];return i.forEach((a=>{t.has(a)||s.push(a)})),this.documentOverlayCache.getOverlays(e,s).next((a=>{a.forEach(((l,c)=>{t.set(l,c)}))}))}computeViews(e,t,i,s){let a=Yr();const l=Iu(),c=(function(){return Iu()})();return t.forEach(((f,h)=>{const y=i.get(h.key);s.has(h.key)&&(y===void 0||y.mutation instanceof Bo)?a=a.insert(h.key,h):y!==void 0?(l.set(h.key,y.mutation.getFieldMask()),Ru(y.mutation,h,y.mutation.getFieldMask(),Lt.now())):l.set(h.key,Ni.empty())})),this.recalculateAndSaveOverlays(e,a).next((f=>(f.forEach(((h,y)=>l.set(h,y))),t.forEach(((h,y)=>c.set(h,new aO(y,l.get(h)??null)))),c)))}recalculateAndSaveOverlays(e,t){const i=Iu();let s=new Ot(((l,c)=>l-c)),a=ut();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((l=>{for(const c of l)c.keys().forEach((f=>{const h=t.get(f);if(h===null)return;let y=i.get(f)||Ni.empty();y=c.applyToLocalView(h,y),i.set(f,y);const E=(s.get(c.batchId)||ut()).add(f);s=s.insert(c.batchId,E)}))})).next((()=>{const l=[],c=s.getReverseIterator();for(;c.hasNext();){const f=c.getNext(),h=f.key,y=f.value,E=eA();y.forEach((T=>{if(!a.has(T)){const w=oA(t.get(T),i.get(T));w!==null&&E.set(T,w),a=a.add(T)}})),l.push(this.documentOverlayCache.saveOverlays(e,h,E))}return xe.waitFor(l)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,s){return lV(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):jb(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,s):this.getDocumentsMatchingCollectionQuery(e,t,i,s)}getNextDocuments(e,t,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,s).next((a=>{const l=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,s-a.size):xe.resolve(Co());let c=Pu,f=a;return l.next((h=>xe.forEach(h,((y,E)=>(c<E.largestBatchId&&(c=E.largestBatchId),a.get(y)?xe.resolve():this.remoteDocumentCache.getEntry(e,y).next((T=>{f=f.insert(y,T)}))))).next((()=>this.populateOverlays(e,h,a))).next((()=>this.computeViews(e,f,h,ut()))).next((y=>({batchId:c,changes:Zb(y)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ge(t)).next((i=>{let s=_u();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,s){const a=t.collectionGroup;let l=_u();return this.indexManager.getCollectionParents(e,a).next((c=>xe.forEach(c,(f=>{const h=(function(E,T){return new ul(T,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,f.child(a));return this.getDocumentsMatchingCollectionQuery(e,h,i,s).next((y=>{y.forEach(((E,T)=>{l=l.insert(E,T)}))}))})).next((()=>l))))}getDocumentsMatchingCollectionQuery(e,t,i,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((l=>(a=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,a,s)))).next((l=>{a.forEach(((f,h)=>{const y=h.getKey();l.get(y)===null&&(l=l.insert(y,An.newInvalidDocument(y)))}));let c=_u();return l.forEach(((f,h)=>{const y=a.get(f);y!==void 0&&Ru(y.mutation,h,Ni.empty(),Lt.now()),Gf(t,h)&&(c=c.insert(f,h))})),c}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uO{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return xe.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(s){return{id:s.id,version:s.version,createTime:dr(s.createTime)}})(t)),xe.resolve()}getNamedQuery(e,t){return xe.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(s){return{name:s.name,query:XV(s.bundledQuery),readTime:dr(s.readTime)}})(t)),xe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cO{constructor(){this.overlays=new Ot(Ge.comparator),this.Lr=new Map}getOverlay(e,t){return xe.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Co();return xe.forEach(t,(s=>this.getOverlay(e,s).next((a=>{a!==null&&i.set(s,a)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((s,a)=>{this.bt(e,t,a)})),xe.resolve()}removeOverlaysForBatchId(e,t,i){const s=this.Lr.get(i);return s!==void 0&&(s.forEach((a=>this.overlays=this.overlays.remove(a))),this.Lr.delete(i)),xe.resolve()}getOverlaysForCollection(e,t,i){const s=Co(),a=t.length+1,l=new Ge(t.child("")),c=this.overlays.getIteratorFrom(l);for(;c.hasNext();){const f=c.getNext().value,h=f.getKey();if(!t.isPrefixOf(h.path))break;h.path.length===a&&f.largestBatchId>i&&s.set(f.getKey(),f)}return xe.resolve(s)}getOverlaysForCollectionGroup(e,t,i,s){let a=new Ot(((h,y)=>h-y));const l=this.overlays.getIterator();for(;l.hasNext();){const h=l.getNext().value;if(h.getKey().getCollectionGroup()===t&&h.largestBatchId>i){let y=a.get(h.largestBatchId);y===null&&(y=Co(),a=a.insert(h.largestBatchId,y)),y.set(h.getKey(),h)}}const c=Co(),f=a.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach(((h,y)=>c.set(h,y))),!(c.size()>=s)););return xe.resolve(c)}bt(e,t,i){const s=this.overlays.get(i.key);if(s!==null){const l=this.Lr.get(s.largestBatchId).delete(i.key);this.Lr.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(i.key,new IV(t,i));let a=this.Lr.get(t);a===void 0&&(a=ut(),this.Lr.set(t,a)),this.Lr.set(t,a.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dO{constructor(){this.sessionToken=_n.EMPTY_BYTE_STRING}getSessionToken(e){return xe.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,xe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wg{constructor(){this.kr=new sn(un.Kr),this.qr=new sn(un.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const i=new un(e,t);this.kr=this.kr.add(i),this.qr=this.qr.add(i)}$r(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Wr(new un(e,t))}Qr(e,t){e.forEach((i=>this.removeReference(i,t)))}Gr(e){const t=new Ge(new Mt([])),i=new un(t,e),s=new un(t,e+1),a=[];return this.qr.forEachInRange([i,s],(l=>{this.Wr(l),a.push(l.key)})),a}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new Ge(new Mt([])),i=new un(t,e),s=new un(t,e+1);let a=ut();return this.qr.forEachInRange([i,s],(l=>{a=a.add(l.key)})),a}containsKey(e){const t=new un(e,0),i=this.kr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class un{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return Ge.comparator(e.key,t.key)||lt(e.Hr,t.Hr)}static Ur(e,t){return lt(e.Hr,t.Hr)||Ge.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fO{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new sn(un.Kr)}checkEmpty(e){return xe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,s){const a=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new CV(a,t,i,s);this.mutationQueue.push(l);for(const c of s)this.Jr=this.Jr.add(new un(c.key,a)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return xe.resolve(l)}lookupMutationBatch(e,t){return xe.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,s=this.Xr(i),a=s<0?0:s;return xe.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return xe.resolve(this.mutationQueue.length===0?Fg:this.Yn-1)}getAllMutationBatches(e){return xe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new un(t,0),s=new un(t,Number.POSITIVE_INFINITY),a=[];return this.Jr.forEachInRange([i,s],(l=>{const c=this.Zr(l.Hr);a.push(c)})),xe.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new sn(lt);return t.forEach((s=>{const a=new un(s,0),l=new un(s,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([a,l],(c=>{i=i.add(c.Hr)}))})),xe.resolve(this.Yr(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,s=i.length+1;let a=i;Ge.isDocumentKey(a)||(a=a.child(""));const l=new un(new Ge(a),0);let c=new sn(lt);return this.Jr.forEachWhile((f=>{const h=f.key.path;return!!i.isPrefixOf(h)&&(h.length===s&&(c=c.add(f.Hr)),!0)}),l),xe.resolve(this.Yr(c))}Yr(e){const t=[];return e.forEach((i=>{const s=this.Zr(i);s!==null&&t.push(s)})),t}removeMutationBatch(e,t){Tt(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Jr;return xe.forEach(t.mutations,(s=>{const a=new un(s.key,t.batchId);return i=i.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Jr=i}))}nr(e){}containsKey(e,t){const i=new un(t,0),s=this.Jr.firstAfterOrEqual(i);return xe.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,xe.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hO{constructor(e){this.ti=e,this.docs=(function(){return new Ot(Ge.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,s=this.docs.get(i),a=s?s.size:0,l=this.ti(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return xe.resolve(i?i.document.mutableCopy():An.newInvalidDocument(t))}getEntries(e,t){let i=Yr();return t.forEach((s=>{const a=this.docs.get(s);i=i.insert(s,a?a.document.mutableCopy():An.newInvalidDocument(s))})),xe.resolve(i)}getDocumentsMatchingQuery(e,t,i,s){let a=Yr();const l=t.path,c=new Ge(l.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(c);for(;f.hasNext();){const{key:h,value:{document:y}}=f.getNext();if(!l.isPrefixOf(h.path))break;h.path.length>l.length+1||OU(VU(y),i)<=0||(s.has(y.key)||Gf(t,y))&&(a=a.insert(y.key,y.mutableCopy()))}return xe.resolve(a)}getAllFromCollectionGroup(e,t,i,s){Ye(9500)}ni(e,t){return xe.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new pO(this)}getSize(e){return xe.resolve(this.size)}}class pO extends oO{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,s)=>{s.isValidDocument()?t.push(this.Mr.addEntry(e,s)):this.Mr.removeEntry(i)})),xe.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mO{constructor(e){this.persistence=e,this.ri=new Fo((t=>Hg(t)),qg),this.lastRemoteSnapshotVersion=Je.min(),this.highestTargetId=0,this.ii=0,this.si=new Wg,this.targetCount=0,this.oi=Xa._r()}forEachTarget(e,t){return this.ri.forEach(((i,s)=>t(s))),xe.resolve()}getLastRemoteSnapshotVersion(e){return xe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return xe.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),xe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.ii&&(this.ii=t),xe.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new Xa(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,xe.resolve()}updateTargetData(e,t){return this.lr(t),xe.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,xe.resolve()}removeTargets(e,t,i){let s=0;const a=[];return this.ri.forEach(((l,c)=>{c.sequenceNumber<=t&&i.get(c.targetId)===null&&(this.ri.delete(l),a.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)})),xe.waitFor(a).next((()=>s))}getTargetCount(e){return xe.resolve(this.targetCount)}getTargetData(e,t){const i=this.ri.get(t)||null;return xe.resolve(i)}addMatchingKeys(e,t,i){return this.si.$r(t,i),xe.resolve()}removeMatchingKeys(e,t,i){this.si.Qr(t,i);const s=this.persistence.referenceDelegate,a=[];return s&&t.forEach((l=>{a.push(s.markPotentiallyOrphaned(e,l))})),xe.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),xe.resolve()}getMatchingKeysForTargetId(e,t){const i=this.si.jr(t);return xe.resolve(i)}containsKey(e,t){return xe.resolve(this.si.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA{constructor(e,t){this._i={},this.overlays={},this.ai=new Vf(0),this.ui=!1,this.ui=!0,this.ci=new dO,this.referenceDelegate=e(this),this.li=new mO(this),this.indexManager=new ZV,this.remoteDocumentCache=(function(s){return new hO(s)})((i=>this.referenceDelegate.hi(i))),this.serializer=new QV(t),this.Pi=new uO(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new cO,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this._i[e.toKey()];return i||(i=new fO(t,this.referenceDelegate),this._i[e.toKey()]=i),i}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,i){Ue("MemoryPersistence","Starting transaction:",e);const s=new gO(this.ai.next());return this.referenceDelegate.Ti(),i(s).next((a=>this.referenceDelegate.Ii(s).next((()=>a)))).toPromise().then((a=>(s.raiseOnCommittedEvent(),a)))}Ei(e,t){return xe.or(Object.values(this._i).map((i=>()=>i.containsKey(e,t))))}}class gO extends FU{constructor(e){super(),this.currentSequenceNumber=e}}class Qg{constructor(e){this.persistence=e,this.Ri=new Wg,this.Ai=null}static Vi(e){return new Qg(e)}get di(){if(this.Ai)return this.Ai;throw Ye(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.di.delete(i.toString()),xe.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.di.add(i.toString()),xe.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),xe.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((s=>this.di.add(s.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((s=>{s.forEach((a=>this.di.add(a.toString())))})).next((()=>i.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return xe.forEach(this.di,(i=>{const s=Ge.fromPath(i);return this.mi(e,s).next((a=>{a||t.removeEntry(s,Je.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((i=>{i?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return xe.or([()=>xe.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class vf{constructor(e,t){this.persistence=e,this.fi=new Fo((i=>HU(i.path)),((i,s)=>i.isEqual(s))),this.garbageCollector=sO(this,t)}static Vi(e,t){return new vf(e,t)}Ti(){}Ii(e){return xe.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((s=>i+s))))}pr(e){let t=0;return this.mr(e,(i=>{t++})).next((()=>t))}mr(e,t){return xe.forEach(this.fi,((i,s)=>this.wr(e,i,s).next((a=>a?xe.resolve():t(s)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const s=this.persistence.getRemoteDocumentCache(),a=s.newChangeBuffer();return s.ni(e,(l=>this.wr(e,l,t).next((c=>{c||(i++,a.removeEntry(l,Je.min()))})))).next((()=>a.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),xe.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.fi.set(i,e.currentSequenceNumber),xe.resolve()}removeReference(e,t,i){return this.fi.set(i,e.currentSequenceNumber),xe.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),xe.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=qd(e.data.value)),t}wr(e,t,i){return xe.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.fi.get(t);return xe.resolve(s!==void 0&&s>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xg{constructor(e,t,i,s){this.targetId=e,this.fromCache=t,this.Ts=i,this.Is=s}static Es(e,t){let i=ut(),s=ut();for(const a of t.docChanges)switch(a.type){case 0:i=i.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new Xg(e,t.fromCache,i,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yO{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vO{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return F4()?8:BU(Cn())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,s){const a={result:null};return this.gs(e,t).next((l=>{a.result=l})).next((()=>{if(!a.result)return this.ps(e,t,s,i).next((l=>{a.result=l}))})).next((()=>{if(a.result)return;const l=new yO;return this.ys(e,t,l).next((c=>{if(a.result=c,this.As)return this.ws(e,t,l,c.size)}))})).next((()=>a.result))}ws(e,t,i,s){return i.documentReadCount<this.Vs?(Da()<=at.DEBUG&&Ue("QueryEngine","SDK will not create cache indexes for query:",Pa(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),xe.resolve()):(Da()<=at.DEBUG&&Ue("QueryEngine","Query:",Pa(t),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.ds*s?(Da()<=at.DEBUG&&Ue("QueryEngine","The SDK decides to create cache indexes for query:",Pa(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ur(t))):xe.resolve())}gs(e,t){if(Uw(t))return xe.resolve(null);let i=ur(t);return this.indexManager.getIndexType(e,i).next((s=>s===0?null:(t.limit!==null&&s===1&&(t=Xm(t,null,"F"),i=ur(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((a=>{const l=ut(...a);return this.fs.getDocuments(e,l).next((c=>this.indexManager.getMinOffset(e,i).next((f=>{const h=this.bs(t,c);return this.Ss(t,h,l,f.readTime)?this.gs(e,Xm(t,null,"F")):this.Ds(e,h,t,f)}))))})))))}ps(e,t,i,s){return Uw(t)||s.isEqual(Je.min())?xe.resolve(null):this.fs.getDocuments(e,i).next((a=>{const l=this.bs(t,a);return this.Ss(t,l,i,s)?xe.resolve(null):(Da()<=at.DEBUG&&Ue("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Pa(t)),this.Ds(e,l,t,UU(s,Pu)).next((c=>c)))}))}bs(e,t){let i=new sn(Qb(e));return t.forEach(((s,a)=>{Gf(e,a)&&(i=i.add(a))})),i}Ss(e,t,i,s){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}ys(e,t,i){return Da()<=at.DEBUG&&Ue("QueryEngine","Using full collection scan to execute query:",Pa(t)),this.fs.getDocumentsMatchingQuery(e,t,Fs.min(),i)}Ds(e,t,i,s){return this.fs.getDocumentsMatchingQuery(e,i,s).next((a=>(t.forEach((l=>{a=a.insert(l.key,l)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zg="LocalStore",_O=3e8;class EO{constructor(e,t,i,s){this.persistence=e,this.Cs=t,this.serializer=s,this.vs=new Ot(lt),this.Fs=new Fo((a=>Hg(a)),qg),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(i)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new lO(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function TO(n,e,t,i){return new EO(n,e,t,i)}async function TA(n,e){const t=Qe(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let s;return t.mutationQueue.getAllMutationBatches(i).next((a=>(s=a,t.Os(e),t.mutationQueue.getAllMutationBatches(i)))).next((a=>{const l=[],c=[];let f=ut();for(const h of s){l.push(h.batchId);for(const y of h.mutations)f=f.add(y.key)}for(const h of a){c.push(h.batchId);for(const y of h.mutations)f=f.add(y.key)}return t.localDocuments.getDocuments(i,f).next((h=>({Ns:h,removedBatchIds:l,addedBatchIds:c})))}))}))}function wO(n,e){const t=Qe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const s=e.batch.keys(),a=t.xs.newChangeBuffer({trackRemovals:!0});return(function(c,f,h,y){const E=h.batch,T=E.keys();let w=xe.resolve();return T.forEach((C=>{w=w.next((()=>y.getEntry(f,C))).next((b=>{const x=h.docVersions.get(C);Tt(x!==null,48541),b.version.compareTo(x)<0&&(E.applyToRemoteDocument(b,h),b.isValidDocument()&&(b.setReadTime(h.commitVersion),y.addEntry(b)))}))})),w.next((()=>c.mutationQueue.removeMutationBatch(f,E)))})(t,i,e,a).next((()=>a.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,s,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(c){let f=ut();for(let h=0;h<c.mutationResults.length;++h)c.mutationResults[h].transformResults.length>0&&(f=f.add(c.batch.mutations[h].key));return f})(e)))).next((()=>t.localDocuments.getDocuments(i,s)))}))}function wA(n){const e=Qe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function SO(n,e){const t=Qe(n),i=e.snapshotVersion;let s=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const l=t.xs.newChangeBuffer({trackRemovals:!0});s=t.vs;const c=[];e.targetChanges.forEach(((y,E)=>{const T=s.get(E);if(!T)return;c.push(t.li.removeMatchingKeys(a,y.removedDocuments,E).next((()=>t.li.addMatchingKeys(a,y.addedDocuments,E))));let w=T.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(E)!==null?w=w.withResumeToken(_n.EMPTY_BYTE_STRING,Je.min()).withLastLimboFreeSnapshotVersion(Je.min()):y.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(y.resumeToken,i)),s=s.insert(E,w),(function(b,x,N){return b.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=_O?!0:N.addedDocuments.size+N.modifiedDocuments.size+N.removedDocuments.size>0})(T,w,y)&&c.push(t.li.updateTargetData(a,w))}));let f=Yr(),h=ut();if(e.documentUpdates.forEach((y=>{e.resolvedLimboDocuments.has(y)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(a,y))})),c.push(bO(a,l,e.documentUpdates).next((y=>{f=y.Bs,h=y.Ls}))),!i.isEqual(Je.min())){const y=t.li.getLastRemoteSnapshotVersion(a).next((E=>t.li.setTargetsMetadata(a,a.currentSequenceNumber,i)));c.push(y)}return xe.waitFor(c).next((()=>l.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,f,h))).next((()=>f))})).then((a=>(t.vs=s,a)))}function bO(n,e,t){let i=ut(),s=ut();return t.forEach((a=>i=i.add(a))),e.getEntries(n,i).next((a=>{let l=Yr();return t.forEach(((c,f)=>{const h=a.get(c);f.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(c)),f.isNoDocument()&&f.version.isEqual(Je.min())?(e.removeEntry(c,f.readTime),l=l.insert(c,f)):!h.isValidDocument()||f.version.compareTo(h.version)>0||f.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(f),l=l.insert(c,f)):Ue(Zg,"Ignoring outdated watch update for ",c,". Current version:",h.version," Watch version:",f.version)})),{Bs:l,Ls:s}}))}function AO(n,e){const t=Qe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=Fg),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function xO(n,e){const t=Qe(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let s;return t.li.getTargetData(i,e).next((a=>a?(s=a,xe.resolve(s)):t.li.allocateTargetId(i).next((l=>(s=new Ps(e,l,"TargetPurposeListen",i.currentSequenceNumber),t.li.addTargetData(i,s).next((()=>s)))))))})).then((i=>{const s=t.vs.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.vs=t.vs.insert(i.targetId,i),t.Fs.set(e,i.targetId)),i}))}async function ig(n,e,t){const i=Qe(n),s=i.vs.get(e),a=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",a,(l=>i.persistence.referenceDelegate.removeTarget(l,s)))}catch(l){if(!ll(l))throw l;Ue(Zg,`Failed to update sequence numbers for target ${e}: ${l}`)}i.vs=i.vs.remove(e),i.Fs.delete(s.target)}function jw(n,e,t){const i=Qe(n);let s=Je.min(),a=ut();return i.persistence.runTransaction("Execute query","readwrite",(l=>(function(f,h,y){const E=Qe(f),T=E.Fs.get(y);return T!==void 0?xe.resolve(E.vs.get(T)):E.li.getTargetData(h,y)})(i,l,ur(e)).next((c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,i.li.getMatchingKeysForTargetId(l,c.targetId).next((f=>{a=f}))})).next((()=>i.Cs.getDocumentsMatchingQuery(l,e,t?s:Je.min(),t?a:ut()))).next((c=>(CO(i,dV(e),c),{documents:c,ks:a})))))}function CO(n,e,t){let i=n.Ms.get(e)||Je.min();t.forEach(((s,a)=>{a.readTime.compareTo(i)>0&&(i=a.readTime)})),n.Ms.set(e,i)}class Ww{constructor(){this.activeTargetIds=yV()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class IO{constructor(){this.vo=new Ww,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,i){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Ww,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RO{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qw="ConnectivityMonitor";class Xw{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){Ue(Qw,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){Ue(Qw,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pd=null;function rg(){return Pd===null?Pd=(function(){return 268435456+Math.round(2147483648*Math.random())})():Pd++,"0x"+Pd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mm="RestConnection",NO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class MO{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${i}/databases/${s}`,this.$o=this.databaseId.database===hf?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Wo(e,t,i,s,a){const l=rg(),c=this.Qo(e,t.toUriEncodedString());Ue(mm,`Sending RPC '${e}' ${l}:`,c,i);const f={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(f,s,a);const{host:h}=new URL(c),y=il(h);return this.zo(e,c,f,i,y).then((E=>(Ue(mm,`Received RPC '${e}' ${l}: `,E),E)),(E=>{throw Lo(mm,`RPC '${e}' ${l} failed with error: `,E,"url: ",c,"request:",i),E}))}jo(e,t,i,s,a,l){return this.Wo(e,t,i,s,a)}Go(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ol})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((s,a)=>e[a]=s)),i&&i.headers.forEach(((s,a)=>e[a]=s))}Qo(e,t){const i=NO[e];let s=`${this.qo}/v1/${t}:${i}`;return this.databaseInfo.apiKey&&(s=`${s}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),s}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kO{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sn="WebChannelConnection",pu=(n,e,t)=>{n.listen(e,(i=>{try{t(i)}catch(s){setTimeout((()=>{throw s}),0)}}))};class qa extends MO{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!qa.c_){const e=Cb();pu(e,xb.STAT_EVENT,(t=>{t.stat===Ym.PROXY?Ue(Sn,"STAT_EVENT: detected buffering proxy"):t.stat===Ym.NOPROXY&&Ue(Sn,"STAT_EVENT: detected no buffering proxy")})),qa.c_=!0}}zo(e,t,i,s,a){const l=rg();return new Promise(((c,f)=>{const h=new bb;h.setWithCredentials(!0),h.listenOnce(Ab.COMPLETE,(()=>{try{switch(h.getLastErrorCode()){case Hd.NO_ERROR:const E=h.getResponseJson();Ue(Sn,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(E)),c(E);break;case Hd.TIMEOUT:Ue(Sn,`RPC '${e}' ${l} timed out`),f(new Le(we.DEADLINE_EXCEEDED,"Request time out"));break;case Hd.HTTP_ERROR:const T=h.getStatus();if(Ue(Sn,`RPC '${e}' ${l} failed with status:`,T,"response text:",h.getResponseText()),T>0){let w=h.getResponseJson();Array.isArray(w)&&(w=w[0]);const C=w==null?void 0:w.error;if(C&&C.status&&C.message){const b=(function(N){const z=N.toLowerCase().replace(/_/g,"-");return Object.values(we).indexOf(z)>=0?z:we.UNKNOWN})(C.status);f(new Le(b,C.message))}else f(new Le(we.UNKNOWN,"Server responded with status "+h.getStatus()))}else f(new Le(we.UNAVAILABLE,"Connection failed."));break;default:Ye(9055,{l_:e,streamId:l,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{Ue(Sn,`RPC '${e}' ${l} completed.`)}}));const y=JSON.stringify(s);Ue(Sn,`RPC '${e}' ${l} sending request:`,s),h.send(t,"POST",y,i,15)}))}T_(e,t,i){const s=rg(),a=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=this.createWebChannelTransport(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(c.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Go(c.initMessageHeaders,t,i),c.encodeInitMessageHeaders=!0;const h=a.join("");Ue(Sn,`Creating RPC '${e}' stream ${s}: ${h}`,c);const y=l.createWebChannel(h,c);this.I_(y);let E=!1,T=!1;const w=new kO({Ho:C=>{T?Ue(Sn,`Not sending because RPC '${e}' stream ${s} is closed:`,C):(E||(Ue(Sn,`Opening RPC '${e}' stream ${s} transport.`),y.open(),E=!0),Ue(Sn,`RPC '${e}' stream ${s} sending:`,C),y.send(C))},Jo:()=>y.close()});return pu(y,vu.EventType.OPEN,(()=>{T||(Ue(Sn,`RPC '${e}' stream ${s} transport opened.`),w.i_())})),pu(y,vu.EventType.CLOSE,(()=>{T||(T=!0,Ue(Sn,`RPC '${e}' stream ${s} transport closed`),w.o_(),this.E_(y))})),pu(y,vu.EventType.ERROR,(C=>{T||(T=!0,Lo(Sn,`RPC '${e}' stream ${s} transport errored. Name:`,C.name,"Message:",C.message),w.o_(new Le(we.UNAVAILABLE,"The operation could not be completed")))})),pu(y,vu.EventType.MESSAGE,(C=>{var b;if(!T){const x=C.data[0];Tt(!!x,16349);const N=x,z=(N==null?void 0:N.error)||((b=N[0])==null?void 0:b.error);if(z){Ue(Sn,`RPC '${e}' stream ${s} received error:`,z);const B=z.status;let Y=(function(L){const V=en[L];if(V!==void 0)return lA(V)})(B),J=z.message;B==="NOT_FOUND"&&J.includes("database")&&J.includes("does not exist")&&J.includes(this.databaseId.database)&&Lo(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),Y===void 0&&(Y=we.INTERNAL,J="Unknown error status: "+B+" with message "+z.message),T=!0,w.o_(new Le(Y,J)),y.close()}else Ue(Sn,`RPC '${e}' stream ${s} received:`,x),w.__(x)}})),qa.u_(),setTimeout((()=>{w.s_()}),0),w}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,i){super.Go(e,t,i),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return Ib()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DO(n){return new qa(n)}function gm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $f(n){return new VV(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */qa.c_=!1;class SA{constructor(e,t,i=1e3,s=1.5,a=6e4){this.Ci=e,this.timerId=t,this.R_=i,this.A_=s,this.V_=a,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),i=Math.max(0,Date.now()-this.f_),s=Math.max(0,t-i);s>0&&Ue("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zw="PersistentStream";class bA{constructor(e,t,i,s,a,l,c,f){this.Ci=e,this.b_=i,this.S_=s,this.connection=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=c,this.listener=f,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new SA(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===we.RESOURCE_EXHAUSTED?(qr(t.toString()),qr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===we.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,s])=>{this.D_===t&&this.G_(i,s)}),(i=>{e((()=>{const s=new Le(we.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(s)}))}))}G_(e,t){const i=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.Yo((()=>{i((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((s=>{i((()=>this.z_(s)))})),this.stream.onMessage((s=>{i((()=>++this.F_==1?this.H_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Ue(Zw,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(Ue(Zw,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class PO extends bA{constructor(e,t,i,s,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,s,l),this.serializer=a}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=FV(this.serializer,e),i=(function(a){if(!("targetChange"in a))return Je.min();const l=a.targetChange;return l.targetIds&&l.targetIds.length?Je.min():l.readTime?dr(l.readTime):Je.min()})(e);return this.listener.J_(t,i)}Z_(e){const t={};t.database=ng(this.serializer),t.addTarget=(function(a,l){let c;const f=l.target;if(c=Wm(f)?{documents:HV(a,f)}:{query:qV(a,f).ft},c.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){c.resumeToken=dA(a,l.resumeToken);const h=Zm(a,l.expectedCount);h!==null&&(c.expectedCount=h)}else if(l.snapshotVersion.compareTo(Je.min())>0){c.readTime=yf(a,l.snapshotVersion.toTimestamp());const h=Zm(a,l.expectedCount);h!==null&&(c.expectedCount=h)}return c})(this.serializer,e);const i=$V(this.serializer,e);i&&(t.labels=i),this.K_(t)}X_(e){const t={};t.database=ng(this.serializer),t.removeTarget=e,this.K_(t)}}class LO extends bA{constructor(e,t,i,s,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,s,l),this.serializer=a}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return Tt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Tt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Tt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=GV(e.writeResults,e.commitTime),i=dr(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=ng(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>BV(this.serializer,i)))};this.K_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UO{}class VO extends UO{constructor(e,t,i,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new Le(we.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,l])=>this.connection.Wo(e,eg(t,i),s,a,l))).catch((a=>{throw a.name==="FirebaseError"?(a.code===we.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Le(we.UNKNOWN,a.toString())}))}jo(e,t,i,s,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.jo(e,eg(t,i),s,l,c,a))).catch((l=>{throw l.name==="FirebaseError"?(l.code===we.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Le(we.UNKNOWN,l.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function OO(n,e,t,i){return new VO(n,e,t,i)}class zO{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(qr(t),this.aa=!1):Ue("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uo="RemoteStore";class FO{constructor(e,t,i,s,a){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=a,this.Aa.Mo((l=>{i.enqueueAndForget((async()=>{Go(this)&&(Ue(Uo,"Restarting streams for network reachability change."),await(async function(f){const h=Qe(f);h.Ea.add(4),await Qu(h),h.Va.set("Unknown"),h.Ea.delete(4),await Kf(h)})(this))}))})),this.Va=new zO(i,s)}}async function Kf(n){if(Go(n))for(const e of n.Ra)await e(!0)}async function Qu(n){for(const e of n.Ra)await e(!1)}function AA(n,e){const t=Qe(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),i0(t)?n0(t):cl(t).O_()&&t0(t,e))}function e0(n,e){const t=Qe(n),i=cl(t);t.Ia.delete(e),i.O_()&&xA(t,e),t.Ia.size===0&&(i.O_()?i.L_():Go(t)&&t.Va.set("Unknown"))}function t0(n,e){if(n.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Je.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}cl(n).Z_(e)}function xA(n,e){n.da.$e(e),cl(n).X_(e)}function n0(n){n.da=new DV({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),cl(n).start(),n.Va.ua()}function i0(n){return Go(n)&&!cl(n).x_()&&n.Ia.size>0}function Go(n){return Qe(n).Ea.size===0}function CA(n){n.da=void 0}async function BO(n){n.Va.set("Online")}async function GO(n){n.Ia.forEach(((e,t)=>{t0(n,e)}))}async function HO(n,e){CA(n),i0(n)?(n.Va.ha(e),n0(n)):n.Va.set("Unknown")}async function qO(n,e,t){if(n.Va.set("Online"),e instanceof cA&&e.state===2&&e.cause)try{await(async function(s,a){const l=a.cause;for(const c of a.targetIds)s.Ia.has(c)&&(await s.remoteSyncer.rejectListen(c,l),s.Ia.delete(c),s.da.removeTarget(c))})(n,e)}catch(i){Ue(Uo,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await _f(n,i)}else if(e instanceof Kd?n.da.Xe(e):e instanceof uA?n.da.st(e):n.da.tt(e),!t.isEqual(Je.min()))try{const i=await wA(n.localStore);t.compareTo(i)>=0&&await(function(a,l){const c=a.da.Tt(l);return c.targetChanges.forEach(((f,h)=>{if(f.resumeToken.approximateByteSize()>0){const y=a.Ia.get(h);y&&a.Ia.set(h,y.withResumeToken(f.resumeToken,l))}})),c.targetMismatches.forEach(((f,h)=>{const y=a.Ia.get(f);if(!y)return;a.Ia.set(f,y.withResumeToken(_n.EMPTY_BYTE_STRING,y.snapshotVersion)),xA(a,f);const E=new Ps(y.target,f,h,y.sequenceNumber);t0(a,E)})),a.remoteSyncer.applyRemoteEvent(c)})(n,t)}catch(i){Ue(Uo,"Failed to raise snapshot:",i),await _f(n,i)}}async function _f(n,e,t){if(!ll(e))throw e;n.Ea.add(1),await Qu(n),n.Va.set("Offline"),t||(t=()=>wA(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{Ue(Uo,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Kf(n)}))}function IA(n,e){return e().catch((t=>_f(n,t,e)))}async function Jf(n){const e=Qe(n),t=qs(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Fg;for(;YO(e);)try{const s=await AO(e.localStore,i);if(s===null){e.Ta.length===0&&t.L_();break}i=s.batchId,$O(e,s)}catch(s){await _f(e,s)}RA(e)&&NA(e)}function YO(n){return Go(n)&&n.Ta.length<10}function $O(n,e){n.Ta.push(e);const t=qs(n);t.O_()&&t.Y_&&t.ea(e.mutations)}function RA(n){return Go(n)&&!qs(n).x_()&&n.Ta.length>0}function NA(n){qs(n).start()}async function KO(n){qs(n).ra()}async function JO(n){const e=qs(n);for(const t of n.Ta)e.ea(t.mutations)}async function jO(n,e,t){const i=n.Ta.shift(),s=Kg.from(i,e,t);await IA(n,(()=>n.remoteSyncer.applySuccessfulWrite(s))),await Jf(n)}async function WO(n,e){e&&qs(n).Y_&&await(async function(i,s){if((function(l){return NV(l)&&l!==we.ABORTED})(s.code)){const a=i.Ta.shift();qs(i).B_(),await IA(i,(()=>i.remoteSyncer.rejectFailedWrite(a.batchId,s))),await Jf(i)}})(n,e),RA(n)&&NA(n)}async function e1(n,e){const t=Qe(n);t.asyncQueue.verifyOperationInProgress(),Ue(Uo,"RemoteStore received new credentials");const i=Go(t);t.Ea.add(3),await Qu(t),i&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Kf(t)}async function QO(n,e){const t=Qe(n);e?(t.Ea.delete(2),await Kf(t)):e||(t.Ea.add(2),await Qu(t),t.Va.set("Unknown"))}function cl(n){return n.ma||(n.ma=(function(t,i,s){const a=Qe(t);return a.sa(),new PO(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)})(n.datastore,n.asyncQueue,{Zo:BO.bind(null,n),Yo:GO.bind(null,n),t_:HO.bind(null,n),J_:qO.bind(null,n)}),n.Ra.push((async e=>{e?(n.ma.B_(),i0(n)?n0(n):n.Va.set("Unknown")):(await n.ma.stop(),CA(n))}))),n.ma}function qs(n){return n.fa||(n.fa=(function(t,i,s){const a=Qe(t);return a.sa(),new LO(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),Yo:KO.bind(null,n),t_:WO.bind(null,n),ta:JO.bind(null,n),na:jO.bind(null,n)}),n.Ra.push((async e=>{e?(n.fa.B_(),await Jf(n)):(await n.fa.stop(),n.Ta.length>0&&(Ue(Uo,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r0{constructor(e,t,i,s,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=s,this.removalCallback=a,this.deferred=new zr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((l=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,s,a){const l=Date.now()+i,c=new r0(e,t,l,s,a);return c.start(i),c}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Le(we.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function s0(n,e){if(qr("AsyncQueue",`${e}: ${n}`),ll(n))return new Le(we.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{static emptySet(e){return new Ya(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||Ge.comparator(t.key,i.key):(t,i)=>Ge.comparator(t.key,i.key),this.keyedMap=_u(),this.sortedSet=new Ot(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ya)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,a=i.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Ya;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t1{constructor(){this.ga=new Ot(Ge.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ye(63341,{Vt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class Za{constructor(e,t,i,s,a,l,c,f,h){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=c,this.excludesMetadataChanges=f,this.hasCachedResults=h}static fromInitialDocuments(e,t,i,s,a){const l=[];return t.forEach((c=>{l.push({type:0,doc:c})})),new Za(e,t,Ya.emptySet(t),l,i,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Bf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==i[s].type||!t[s].doc.isEqual(i[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XO{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class ZO{constructor(){this.queries=n1(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const s=Qe(t),a=s.queries;s.queries=n1(),a.forEach(((l,c)=>{for(const f of c.ba)f.onError(i)}))})(this,new Le(we.ABORTED,"Firestore shutting down"))}}function n1(){return new Fo((n=>Wb(n)),Bf)}async function o0(n,e){const t=Qe(n);let i=3;const s=e.query;let a=t.queries.get(s);a?!a.Sa()&&e.Da()&&(i=2):(a=new XO,i=e.Da()?0:1);try{switch(i){case 0:a.wa=await t.onListen(s,!0);break;case 1:a.wa=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(l){const c=s0(l,`Initialization of query '${Pa(e.query)}' failed`);return void e.onError(c)}t.queries.set(s,a),a.ba.push(e),e.va(t.onlineState),a.wa&&e.Fa(a.wa)&&l0(t)}async function a0(n,e){const t=Qe(n),i=e.query;let s=3;const a=t.queries.get(i);if(a){const l=a.ba.indexOf(e);l>=0&&(a.ba.splice(l,1),a.ba.length===0?s=e.Da()?0:1:!a.Sa()&&e.Da()&&(s=2))}switch(s){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function ez(n,e){const t=Qe(n);let i=!1;for(const s of e){const a=s.query,l=t.queries.get(a);if(l){for(const c of l.ba)c.Fa(s)&&(i=!0);l.wa=s}}i&&l0(t)}function tz(n,e,t){const i=Qe(n),s=i.queries.get(e);if(s)for(const a of s.ba)a.onError(t);i.queries.delete(e)}function l0(n){n.Ca.forEach((e=>{e.next()}))}var sg,i1;(i1=sg||(sg={})).Ma="default",i1.Cache="cache";class u0{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const s of e.docChanges)s.type!==3&&i.push(s);e=new Za(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.Ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Za.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==sg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MA{constructor(e){this.key=e}}class kA{constructor(e){this.key=e}}class nz{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=ut(),this.mutatedKeys=ut(),this.eu=Qb(e),this.tu=new Ya(this.eu)}get nu(){return this.Za}ru(e,t){const i=t?t.iu:new t1,s=t?t.tu:this.tu;let a=t?t.mutatedKeys:this.mutatedKeys,l=s,c=!1;const f=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((y,E)=>{const T=s.get(y),w=Gf(this.query,E)?E:null,C=!!T&&this.mutatedKeys.has(T.key),b=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let x=!1;T&&w?T.data.isEqual(w.data)?C!==b&&(i.track({type:3,doc:w}),x=!0):this.su(T,w)||(i.track({type:2,doc:w}),x=!0,(f&&this.eu(w,f)>0||h&&this.eu(w,h)<0)&&(c=!0)):!T&&w?(i.track({type:0,doc:w}),x=!0):T&&!w&&(i.track({type:1,doc:T}),x=!0,(f||h)&&(c=!0)),x&&(w?(l=l.add(w),a=b?a.add(y):a.delete(y)):(l=l.delete(y),a=a.delete(y)))})),this.query.limit!==null)for(;l.size>this.query.limit;){const y=this.query.limitType==="F"?l.last():l.first();l=l.delete(y.key),a=a.delete(y.key),i.track({type:1,doc:y})}return{tu:l,iu:i,Ss:c,mutatedKeys:a}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,s){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const l=e.iu.ya();l.sort(((y,E)=>(function(w,C){const b=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ye(20277,{Vt:x})}};return b(w)-b(C)})(y.type,E.type)||this.eu(y.doc,E.doc))),this.ou(i),s=s??!1;const c=t&&!s?this._u():[],f=this.Ya.size===0&&this.current&&!s?1:0,h=f!==this.Xa;return this.Xa=f,l.length!==0||h?{snapshot:new Za(this.query,e.tu,a,l,e.mutatedKeys,f===0,h,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new t1,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=ut(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Ya=this.Ya.add(i.key))}));const t=[];return e.forEach((i=>{this.Ya.has(i)||t.push(new kA(i))})),this.Ya.forEach((i=>{e.has(i)||t.push(new MA(i))})),t}cu(e){this.Za=e.ks,this.Ya=ut();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Za.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const c0="SyncEngine";class iz{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class rz{constructor(e){this.key=e,this.hu=!1}}class sz{constructor(e,t,i,s,a,l){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.Pu={},this.Tu=new Fo((c=>Wb(c)),Bf),this.Iu=new Map,this.Eu=new Set,this.Ru=new Ot(Ge.comparator),this.Au=new Map,this.Vu=new Wg,this.du={},this.mu=new Map,this.fu=Xa.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function oz(n,e,t=!0){const i=OA(n);let s;const a=i.Tu.get(e);return a?(i.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.lu()):s=await DA(i,e,t,!0),s}async function az(n,e){const t=OA(n);await DA(t,e,!0,!1)}async function DA(n,e,t,i){const s=await xO(n.localStore,ur(e)),a=s.targetId,l=n.sharedClientState.addLocalQueryTarget(a,t);let c;return i&&(c=await lz(n,e,a,l==="current",s.resumeToken)),n.isPrimaryClient&&t&&AA(n.remoteStore,s),c}async function lz(n,e,t,i,s){n.pu=(E,T,w)=>(async function(b,x,N,z){let B=x.view.ru(N);B.Ss&&(B=await jw(b.localStore,x.query,!1).then((({documents:L})=>x.view.ru(L,B))));const Y=z&&z.targetChanges.get(x.targetId),J=z&&z.targetMismatches.get(x.targetId)!=null,$=x.view.applyChanges(B,b.isPrimaryClient,Y,J);return s1(b,x.targetId,$.au),$.snapshot})(n,E,T,w);const a=await jw(n.localStore,e,!0),l=new nz(e,a.ks),c=l.ru(a.documents),f=Wu.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",s),h=l.applyChanges(c,n.isPrimaryClient,f);s1(n,t,h.au);const y=new iz(e,t,l);return n.Tu.set(e,y),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),h.snapshot}async function uz(n,e,t){const i=Qe(n),s=i.Tu.get(e),a=i.Iu.get(s.targetId);if(a.length>1)return i.Iu.set(s.targetId,a.filter((l=>!Bf(l,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await ig(i.localStore,s.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(s.targetId),t&&e0(i.remoteStore,s.targetId),og(i,s.targetId)})).catch(al)):(og(i,s.targetId),await ig(i.localStore,s.targetId,!0))}async function cz(n,e){const t=Qe(n),i=t.Tu.get(e),s=t.Iu.get(i.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),e0(t.remoteStore,i.targetId))}async function dz(n,e,t){const i=vz(n);try{const s=await(function(l,c){const f=Qe(l),h=Lt.now(),y=c.reduce(((w,C)=>w.add(C.key)),ut());let E,T;return f.persistence.runTransaction("Locally write mutations","readwrite",(w=>{let C=Yr(),b=ut();return f.xs.getEntries(w,y).next((x=>{C=x,C.forEach(((N,z)=>{z.isValidDocument()||(b=b.add(N))}))})).next((()=>f.localDocuments.getOverlayedDocuments(w,C))).next((x=>{E=x;const N=[];for(const z of c){const B=AV(z,E.get(z.key).overlayedDocument);B!=null&&N.push(new Bo(z.key,B,Gb(B.value.mapValue),cr.exists(!0)))}return f.mutationQueue.addMutationBatch(w,h,N,c)})).next((x=>{T=x;const N=x.applyToLocalDocumentSet(E,b);return f.documentOverlayCache.saveOverlays(w,x.batchId,N)}))})).then((()=>({batchId:T.batchId,changes:Zb(E)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(s.batchId),(function(l,c,f){let h=l.du[l.currentUser.toKey()];h||(h=new Ot(lt)),h=h.insert(c,f),l.du[l.currentUser.toKey()]=h})(i,s.batchId,t),await Xu(i,s.changes),await Jf(i.remoteStore)}catch(s){const a=s0(s,"Failed to persist write");t.reject(a)}}async function PA(n,e){const t=Qe(n);try{const i=await SO(t.localStore,e);e.targetChanges.forEach(((s,a)=>{const l=t.Au.get(a);l&&(Tt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?l.hu=!0:s.modifiedDocuments.size>0?Tt(l.hu,14607):s.removedDocuments.size>0&&(Tt(l.hu,42227),l.hu=!1))})),await Xu(t,i,e)}catch(i){await al(i)}}function r1(n,e,t){const i=Qe(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const s=[];i.Tu.forEach(((a,l)=>{const c=l.view.va(e);c.snapshot&&s.push(c.snapshot)})),(function(l,c){const f=Qe(l);f.onlineState=c;let h=!1;f.queries.forEach(((y,E)=>{for(const T of E.ba)T.va(c)&&(h=!0)})),h&&l0(f)})(i.eventManager,e),s.length&&i.Pu.J_(s),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function fz(n,e,t){const i=Qe(n);i.sharedClientState.updateQueryState(e,"rejected",t);const s=i.Au.get(e),a=s&&s.key;if(a){let l=new Ot(Ge.comparator);l=l.insert(a,An.newNoDocument(a,Je.min()));const c=ut().add(a),f=new Yf(Je.min(),new Map,new Ot(lt),l,c);await PA(i,f),i.Ru=i.Ru.remove(a),i.Au.delete(e),d0(i)}else await ig(i.localStore,e,!1).then((()=>og(i,e,t))).catch(al)}async function hz(n,e){const t=Qe(n),i=e.batch.batchId;try{const s=await wO(t.localStore,e);UA(t,i,null),LA(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Xu(t,s)}catch(s){await al(s)}}async function pz(n,e,t){const i=Qe(n);try{const s=await(function(l,c){const f=Qe(l);return f.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let y;return f.mutationQueue.lookupMutationBatch(h,c).next((E=>(Tt(E!==null,37113),y=E.keys(),f.mutationQueue.removeMutationBatch(h,E)))).next((()=>f.mutationQueue.performConsistencyCheck(h))).next((()=>f.documentOverlayCache.removeOverlaysForBatchId(h,y,c))).next((()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,y))).next((()=>f.localDocuments.getDocuments(h,y)))}))})(i.localStore,e);UA(i,e,t),LA(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Xu(i,s)}catch(s){await al(s)}}function LA(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function UA(n,e,t){const i=Qe(n);let s=i.du[i.currentUser.toKey()];if(s){const a=s.get(e);a&&(t?a.reject(t):a.resolve(),s=s.remove(e)),i.du[i.currentUser.toKey()]=s}}function og(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Iu.get(e))n.Tu.delete(i),t&&n.Pu.yu(i,t);n.Iu.delete(e),n.isPrimaryClient&&n.Vu.Gr(e).forEach((i=>{n.Vu.containsKey(i)||VA(n,i)}))}function VA(n,e){n.Eu.delete(e.path.canonicalString());const t=n.Ru.get(e);t!==null&&(e0(n.remoteStore,t),n.Ru=n.Ru.remove(e),n.Au.delete(t),d0(n))}function s1(n,e,t){for(const i of t)i instanceof MA?(n.Vu.addReference(i.key,e),mz(n,i)):i instanceof kA?(Ue(c0,"Document no longer in limbo: "+i.key),n.Vu.removeReference(i.key,e),n.Vu.containsKey(i.key)||VA(n,i.key)):Ye(19791,{wu:i})}function mz(n,e){const t=e.key,i=t.path.canonicalString();n.Ru.get(t)||n.Eu.has(i)||(Ue(c0,"New document in limbo: "+t),n.Eu.add(i),d0(n))}function d0(n){for(;n.Eu.size>0&&n.Ru.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Ge(Mt.fromString(e)),i=n.fu.next();n.Au.set(i,new rz(t)),n.Ru=n.Ru.insert(t,i),AA(n.remoteStore,new Ps(ur(Ff(t.path)),i,"TargetPurposeLimboResolution",Vf.ce))}}async function Xu(n,e,t){const i=Qe(n),s=[],a=[],l=[];i.Tu.isEmpty()||(i.Tu.forEach(((c,f)=>{l.push(i.pu(f,e,t).then((h=>{var y;if((h||t)&&i.isPrimaryClient){const E=h?!h.fromCache:(y=t==null?void 0:t.targetChanges.get(f.targetId))==null?void 0:y.current;i.sharedClientState.updateQueryState(f.targetId,E?"current":"not-current")}if(h){s.push(h);const E=Xg.Es(f.targetId,h);a.push(E)}})))})),await Promise.all(l),i.Pu.J_(s),await(async function(f,h){const y=Qe(f);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>xe.forEach(h,(T=>xe.forEach(T.Ts,(w=>y.persistence.referenceDelegate.addReference(E,T.targetId,w))).next((()=>xe.forEach(T.Is,(w=>y.persistence.referenceDelegate.removeReference(E,T.targetId,w)))))))))}catch(E){if(!ll(E))throw E;Ue(Zg,"Failed to update sequence numbers: "+E)}for(const E of h){const T=E.targetId;if(!E.fromCache){const w=y.vs.get(T),C=w.snapshotVersion,b=w.withLastLimboFreeSnapshotVersion(C);y.vs=y.vs.insert(T,b)}}})(i.localStore,a))}async function gz(n,e){const t=Qe(n);if(!t.currentUser.isEqual(e)){Ue(c0,"User change. New user:",e.toKey());const i=await TA(t.localStore,e);t.currentUser=e,(function(a,l){a.mu.forEach((c=>{c.forEach((f=>{f.reject(new Le(we.CANCELLED,l))}))})),a.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Xu(t,i.Ns)}}function yz(n,e){const t=Qe(n),i=t.Au.get(e);if(i&&i.hu)return ut().add(i.key);{let s=ut();const a=t.Iu.get(e);if(!a)return s;for(const l of a){const c=t.Tu.get(l);s=s.unionWith(c.view.nu)}return s}}function OA(n){const e=Qe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=PA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=yz.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=fz.bind(null,e),e.Pu.J_=ez.bind(null,e.eventManager),e.Pu.yu=tz.bind(null,e.eventManager),e}function vz(n){const e=Qe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=hz.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=pz.bind(null,e),e}class Ef{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=$f(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return TO(this.persistence,new vO,e.initialUser,this.serializer)}Cu(e){return new EA(Qg.Vi,this.serializer)}Du(e){return new IO}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ef.provider={build:()=>new Ef};class _z extends Ef{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Tt(this.persistence.referenceDelegate instanceof vf,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new iO(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Bn.withCacheSize(this.cacheSizeBytes):Bn.DEFAULT;return new EA((i=>vf.Vi(i,t)),this.serializer)}}class ag{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>r1(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=gz.bind(null,this.syncEngine),await QO(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new ZO})()}createDatastore(e){const t=$f(e.databaseInfo.databaseId),i=DO(e.databaseInfo);return OO(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,s,a,l,c){return new FO(i,s,a,l,c)})(this.localStore,this.datastore,e.asyncQueue,(t=>r1(this.syncEngine,t,0)),(function(){return Xw.v()?new Xw:new RO})())}createSyncEngine(e,t){return(function(s,a,l,c,f,h,y){const E=new sz(s,a,l,c,f,h);return y&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(s){const a=Qe(s);Ue(Uo,"RemoteStore shutting down."),a.Ea.add(5),await Qu(a),a.Aa.shutdown(),a.Va.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}ag.provider={build:()=>new ag};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f0{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):qr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ys="FirestoreClient";class Ez{constructor(e,t,i,s,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this._databaseInfo=s,this.user=bn.UNAUTHENTICATED,this.clientId=zg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(i,(async l=>{Ue(Ys,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l})),this.appCheckCredentials.start(i,(l=>(Ue(Ys,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new zr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=s0(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function ym(n,e){n.asyncQueue.verifyOperationInProgress(),Ue(Ys,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async s=>{i.isEqual(s)||(await TA(e.localStore,s),i=s)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function o1(n,e){n.asyncQueue.verifyOperationInProgress();const t=await Tz(n);Ue(Ys,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>e1(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,s)=>e1(e.remoteStore,s))),n._onlineComponents=e}async function Tz(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Ue(Ys,"Using user provided OfflineComponentProvider");try{await ym(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(s){return s.name==="FirebaseError"?s.code===we.FAILED_PRECONDITION||s.code===we.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(t))throw t;Lo("Error using user provided cache. Falling back to memory cache: "+t),await ym(n,new Ef)}}else Ue(Ys,"Using default OfflineComponentProvider"),await ym(n,new _z(void 0));return n._offlineComponents}async function zA(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Ue(Ys,"Using user provided OnlineComponentProvider"),await o1(n,n._uninitializedComponentsProvider._online)):(Ue(Ys,"Using default OnlineComponentProvider"),await o1(n,new ag))),n._onlineComponents}function wz(n){return zA(n).then((e=>e.syncEngine))}async function Tf(n){const e=await zA(n),t=e.eventManager;return t.onListen=oz.bind(null,e.syncEngine),t.onUnlisten=uz.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=az.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=cz.bind(null,e.syncEngine),t}function Sz(n,e,t,i){const s=new f0(i),a=new u0(e,s,t);return n.asyncQueue.enqueueAndForget((async()=>o0(await Tf(n),a))),()=>{s.Nu(),n.asyncQueue.enqueueAndForget((async()=>a0(await Tf(n),a)))}}function bz(n,e,t={}){const i=new zr;return n.asyncQueue.enqueueAndForget((async()=>(function(a,l,c,f,h){const y=new f0({next:T=>{y.Nu(),l.enqueueAndForget((()=>a0(a,E)));const w=T.docs.has(c);!w&&T.fromCache?h.reject(new Le(we.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&T.fromCache&&f&&f.source==="server"?h.reject(new Le(we.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(T)},error:T=>h.reject(T)}),E=new u0(Ff(c.path),y,{includeMetadataChanges:!0,Ka:!0});return o0(a,E)})(await Tf(n),n.asyncQueue,e,t,i))),i.promise}function Az(n,e,t={}){const i=new zr;return n.asyncQueue.enqueueAndForget((async()=>(function(a,l,c,f,h){const y=new f0({next:T=>{y.Nu(),l.enqueueAndForget((()=>a0(a,E))),T.fromCache&&f.source==="server"?h.reject(new Le(we.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(T)},error:T=>h.reject(T)}),E=new u0(c,y,{includeMetadataChanges:!0,Ka:!0});return o0(a,E)})(await Tf(n),n.asyncQueue,e,t,i))),i.promise}function xz(n,e){const t=new zr;return n.asyncQueue.enqueueAndForget((async()=>dz(await wz(n),e,t))),t.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FA(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cz="ComponentProvider",a1=new Map;function Iz(n,e,t,i,s){return new $U(n,e,t,s.host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,FA(s.experimentalLongPollingOptions),s.useFetchStreams,s.isUsingEmulator,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BA="firestore.googleapis.com",l1=!0;class u1{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Le(we.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=BA,this.ssl=l1}else this.host=e.host,this.ssl=e.ssl??l1;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=_A;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<tO)throw new Le(we.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}LU("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=FA(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Le(we.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Le(we.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Le(we.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,s){return i.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class jf{constructor(e,t,i,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new u1({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Le(we.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Le(we.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new u1(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new AU;switch(i.type){case"firstParty":return new RU(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Le(we.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=a1.get(t);i&&(Ue(Cz,"Removing Datastore"),a1.delete(t),i.terminate())})(this),Promise.resolve()}}function Rz(n,e,t,i={}){var h;n=Pi(n,jf);const s=il(e),a=n._getSettings(),l={...a,emulatorOptions:n._getEmulatorOptions()},c=`${e}:${t}`;s&&(US(`https://${c}`),VS("Firestore",!0)),a.host!==BA&&a.host!==c&&Lo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f={...a,host:c,ssl:s,emulatorOptions:i};if(!No(f,l)&&(n._setSettings(f),i.mockUserToken)){let y,E;if(typeof i.mockUserToken=="string")y=i.mockUserToken,E=bn.MOCK_USER;else{y=M4(i.mockUserToken,(h=n._app)==null?void 0:h.options.projectId);const T=i.mockUserToken.sub||i.mockUserToken.user_id;if(!T)throw new Le(we.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new bn(T)}n._authCredentials=new xU(new Nb(y,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Ks(this.firestore,e,this._query)}}class $t{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new zs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new $t(this.firestore,e,this._key)}toJSON(){return{type:$t._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Ju(t,$t._jsonSchema))return new $t(e,i||null,new Ge(Mt.fromString(t.referencePath)))}}$t._jsonSchemaVersion="firestore/documentReference/1.0",$t._jsonSchema={type:nn("string",$t._jsonSchemaVersion),referencePath:nn("string")};class zs extends Ks{constructor(e,t,i){super(e,t,Ff(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new $t(this.firestore,null,new Ge(e))}withConverter(e){return new zs(this.firestore,e,this._path)}}function Nz(n,e,...t){if(n=vn(n),Mb("collection","path",e),n instanceof jf){const i=Mt.fromString(e,...t);return ww(i),new zs(n,null,i)}{if(!(n instanceof $t||n instanceof zs))throw new Le(we.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Mt.fromString(e,...t));return ww(i),new zs(n.firestore,null,i)}}function Nu(n,e,...t){if(n=vn(n),arguments.length===1&&(e=zg.newId()),Mb("doc","path",e),n instanceof jf){const i=Mt.fromString(e,...t);return Tw(i),new $t(n,null,new Ge(i))}{if(!(n instanceof $t||n instanceof zs))throw new Le(we.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Mt.fromString(e,...t));return Tw(i),new $t(n.firestore,n instanceof zs?n.converter:null,new Ge(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c1="AsyncQueue";class d1{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new SA(this,"async_queue_retry"),this._c=()=>{const i=gm();i&&Ue(c1,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=gm();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=gm();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new zr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!ll(e))throw e;Ue(c1,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,qr("INTERNAL UNHANDLED ERROR: ",f1(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const s=r0.createAndSchedule(this,e,t,i,(a=>this.hc(a)));return this.tc.push(s),s}uc(){this.nc&&Ye(47125,{Pc:f1(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function f1(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Vo extends jf{constructor(e,t,i,s){super(e,t,i,s),this.type="firestore",this._queue=new d1,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new d1(e),this._firestoreClient=void 0,await e}}}function Mz(n,e){const t=typeof n=="object"?n:BS(),i=typeof n=="string"?n:hf,s=Cg(t,"firestore").getImmediate({identifier:i});if(!s._initialized){const a=R4("firestore");a&&Rz(s,...a)}return s}function Wf(n){if(n._terminated)throw new Le(we.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||kz(n),n._firestoreClient}function kz(n){var i,s,a,l;const e=n._freezeSettings(),t=Iz(n._databaseId,((i=n._app)==null?void 0:i.options.appId)||"",n._persistenceKey,(s=n._app)==null?void 0:s.options.apiKey,e);n._componentsProvider||(a=e.localCache)!=null&&a._offlineComponentProvider&&((l=e.localCache)!=null&&l._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new Ez(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(f){const h=f==null?void 0:f._online.build();return{_offline:f==null?void 0:f._offline.build(h),_online:h}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new pi(_n.fromBase64String(e))}catch(t){throw new Le(we.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new pi(_n.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:pi._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ju(e,pi._jsonSchema))return pi.fromBase64String(e.bytes)}}pi._jsonSchemaVersion="firestore/bytes/1.0",pi._jsonSchema={type:nn("string",pi._jsonSchemaVersion),bytes:nn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GA{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Le(we.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new yn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h0{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Le(we.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Le(we.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return lt(this._lat,e._lat)||lt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:fr._jsonSchemaVersion}}static fromJSON(e){if(Ju(e,fr._jsonSchema))return new fr(e.latitude,e.longitude)}}fr._jsonSchemaVersion="firestore/geoPoint/1.0",fr._jsonSchema={type:nn("string",fr._jsonSchemaVersion),latitude:nn("number"),longitude:nn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,s){if(i.length!==s.length)return!1;for(let a=0;a<i.length;++a)if(i[a]!==s[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Li._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ju(e,Li._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Li(e.vectorValues);throw new Le(we.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Li._jsonSchemaVersion="firestore/vectorValue/1.0",Li._jsonSchema={type:nn("string",Li._jsonSchemaVersion),vectorValues:nn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dz=/^__.*__$/;class Pz{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Bo(e,this.data,this.fieldMask,t,this.fieldTransforms):new ju(e,this.data,t,this.fieldTransforms)}}function HA(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ye(40011,{dataSource:n})}}class p0{constructor(e,t,i,s,a,l){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=s,a===void 0&&this.validatePath(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new p0({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var s;const t=(s=this.path)==null?void 0:s.child(e),i=this.contextWith({path:t,arrayElement:!1});return i.validatePathSegment(e),i}childContextForFieldPath(e){var s;const t=(s=this.path)==null?void 0:s.child(e),i=this.contextWith({path:t,arrayElement:!1});return i.validatePath(),i}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return wf(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(HA(this.dataSource)&&Dz.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class Lz{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||$f(e)}createContext(e,t,i,s=!1){return new p0({dataSource:e,methodName:t,targetDoc:i,path:yn.emptyPath(),arrayElement:!1,hasConverter:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function qA(n){const e=n._freezeSettings(),t=$f(n._databaseId);return new Lz(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Uz(n,e,t,i,s,a={}){const l=n.createContext(a.merge||a.mergeFields?2:0,e,t,s);KA("Data must be an object, but it was:",l,i);const c=YA(i,l);let f,h;if(a.merge)f=new Ni(l.fieldMask),h=l.fieldTransforms;else if(a.mergeFields){const y=[];for(const E of a.mergeFields){const T=Qf(e,E,t);if(!l.contains(T))throw new Le(we.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);Fz(y,T)||y.push(T)}f=new Ni(y),h=l.fieldTransforms.filter((E=>f.covers(E.field)))}else f=null,h=l.fieldTransforms;return new Pz(new hi(c),f,h)}class m0 extends h0{_toFieldTransform(e){return new TV(e.path,new zu)}isEqual(e){return e instanceof m0}}function Vz(n,e,t,i=!1){return g0(t,n.createContext(i?4:3,e))}function g0(n,e){if($A(n=vn(n)))return KA("Unsupported field value:",e,n),YA(n,e);if(n instanceof h0)return(function(i,s){if(!HA(s.dataSource))throw s.createError(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.createError(`${i._methodName}() is not currently supported inside arrays`);const a=i._toFieldTransform(s);a&&s.fieldTransforms.push(a)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(i,s){const a=[];let l=0;for(const c of i){let f=g0(c,s.childContextForArray(l));f==null&&(f={nullValue:"NULL_VALUE"}),a.push(f),l++}return{arrayValue:{values:a}}})(n,e)}return(function(i,s){if((i=vn(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return vV(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const a=Lt.fromDate(i);return{timestampValue:yf(s.serializer,a)}}if(i instanceof Lt){const a=new Lt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:yf(s.serializer,a)}}if(i instanceof fr)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof pi)return{bytesValue:dA(s.serializer,i._byteString)};if(i instanceof $t){const a=s.databaseId,l=i.firestore._databaseId;if(!l.isEqual(a))throw s.createError(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:jg(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof Li)return(function(l,c){const f=l instanceof Li?l.toArray():l;return{mapValue:{fields:{[Fb]:{stringValue:Bb},[pf]:{arrayValue:{values:f.map((y=>{if(typeof y!="number")throw c.createError("VectorValues must only contain numeric values.");return Yg(c.serializer,y)}))}}}}}})(i,s);if(vA(i))return i._toProto(s.serializer);throw s.createError(`Unsupported field value: ${Uf(i)}`)})(n,e)}function YA(n,e){const t={};return Pb(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):zo(n,((i,s)=>{const a=g0(s,e.childContextForField(i));a!=null&&(t[i]=a)})),{mapValue:{fields:t}}}function $A(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Lt||n instanceof fr||n instanceof pi||n instanceof $t||n instanceof h0||n instanceof Li||vA(n))}function KA(n,e,t){if(!$A(t)||!kb(t)){const i=Uf(t);throw i==="an object"?e.createError(n+" a custom object"):e.createError(n+" "+i)}}function Qf(n,e,t){if((e=vn(e))instanceof GA)return e._internalPath;if(typeof e=="string")return zz(n,e);throw wf("Field path arguments must be of type string or ",n,!1,void 0,t)}const Oz=new RegExp("[~\\*/\\[\\]]");function zz(n,e,t){if(e.search(Oz)>=0)throw wf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new GA(...e.split("."))._internalPath}catch{throw wf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function wf(n,e,t,i,s){const a=i&&!i.isEmpty(),l=s!==void 0;let c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let f="";return(a||l)&&(f+=" (found",a&&(f+=` in field ${i}`),l&&(f+=` in document ${s}`),f+=")"),new Le(we.INVALID_ARGUMENT,c+n+f)}function Fz(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bz{convertValue(e,t="none"){switch(Hs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Yt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Gs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ye(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return zo(e,((s,a)=>{i[s]=this.convertValue(a,t)})),i}convertVectorValue(e){var i,s,a;const t=(a=(s=(i=e.fields)==null?void 0:i[pf].arrayValue)==null?void 0:s.values)==null?void 0:a.map((l=>Yt(l.doubleValue)));return new Li(t)}convertGeoPoint(e){return new fr(Yt(e.latitude),Yt(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=zf(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Lu(e));default:return null}}convertTimestamp(e){const t=Bs(e);return new Lt(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Mt.fromString(e);Tt(yA(i),9688,{name:e});const s=new Uu(i.get(1),i.get(3)),a=new Ge(i.popFirst(5));return s.isEqual(t)||qr(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y0 extends Bz{constructor(e){super(),this.firestore=e}convertBytes(e){return new pi(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new $t(this.firestore,null,t)}}function vm(){return new m0("serverTimestamp")}const h1="@firebase/firestore",p1="4.11.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m1(n){return(function(t,i){if(typeof t!="object"||t===null)return!1;const s=t;for(const a of i)if(a in s&&typeof s[a]=="function")return!0;return!1})(n,["next","error","complete"])}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JA{constructor(e,t,i,s,a){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new $t(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Gz(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const t=this._document.data.field(Qf("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class Gz extends JA{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jA(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Le(we.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class v0{}class WA extends v0{}function g1(n,e,...t){let i=[];e instanceof v0&&i.push(e),i=i.concat(t),(function(a){const l=a.filter((f=>f instanceof E0)).length,c=a.filter((f=>f instanceof _0)).length;if(l>1||l>0&&c>0)throw new Le(we.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const s of i)n=s._apply(n);return n}class _0 extends WA{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new _0(e,t,i)}_apply(e){const t=this._parse(e);return QA(e._query,t),new Ks(e.firestore,e.converter,Qm(e._query,t))}_parse(e){const t=qA(e.firestore);return(function(a,l,c,f,h,y,E){let T;if(h.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new Le(we.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){_1(E,y);const C=[];for(const b of E)C.push(v1(f,a,b));T={arrayValue:{values:C}}}else T=v1(f,a,E)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||_1(E,y),T=Vz(c,l,E,y==="in"||y==="not-in");return tn.create(h,y,T)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class E0 extends v0{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new E0(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:Ui.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(s,a){let l=s;const c=a.getFlattenedFilters();for(const f of c)QA(l,f),l=Qm(l,f)})(e._query,t),new Ks(e.firestore,e.converter,Qm(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class T0 extends WA{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new T0(e,t)}_apply(e){const t=(function(s,a,l){if(s.startAt!==null)throw new Le(we.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new Le(we.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ou(a,l)})(e._query,this._field,this._direction);return new Ks(e.firestore,e.converter,cV(e._query,t))}}function y1(n,e="asc"){const t=e,i=Qf("orderBy",n);return T0._create(i,t)}function v1(n,e,t){if(typeof(t=vn(t))=="string"){if(t==="")throw new Le(we.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!jb(e)&&t.indexOf("/")!==-1)throw new Le(we.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(Mt.fromString(t));if(!Ge.isDocumentKey(i))throw new Le(we.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Nw(n,new Ge(i))}if(t instanceof $t)return Nw(n,t._key);throw new Le(we.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Uf(t)}.`)}function _1(n,e){if(!Array.isArray(n)||n.length===0)throw new Le(we.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function QA(n,e){const t=(function(s,a){for(const l of s)for(const c of l.getFlattenedFilters())if(a.indexOf(c.op)>=0)return c.op;return null})(n.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new Le(we.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Le(we.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function Hz(n,e,t){let i;return i=n?n.toFirestore(e):e,i}class Tu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Io extends JA{constructor(e,t,i,s,a,l){super(e,t,i,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Jd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(Qf("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Le(we.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Io._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Io._jsonSchemaVersion="firestore/documentSnapshot/1.0",Io._jsonSchema={type:nn("string",Io._jsonSchemaVersion),bundleSource:nn("string","DocumentSnapshot"),bundleName:nn("string"),bundle:nn("string")};class Jd extends Io{data(e={}){return super.data(e)}}class Ro{constructor(e,t,i,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Tu(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new Jd(this._firestore,this._userDataWriter,i.key,i,new Tu(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Le(we.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(s,a){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map((c=>{const f=new Jd(s._firestore,s._userDataWriter,c.doc.key,c.doc,new Tu(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:f,oldIndex:-1,newIndex:l++}}))}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((c=>a||c.type!==3)).map((c=>{const f=new Jd(s._firestore,s._userDataWriter,c.doc.key,c.doc,new Tu(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,y=-1;return c.type!==0&&(h=l.indexOf(c.doc.key),l=l.delete(c.doc.key)),c.type!==1&&(l=l.add(c.doc),y=l.indexOf(c.doc.key)),{type:qz(c.type),doc:f,oldIndex:h,newIndex:y}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Le(we.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ro._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=zg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],s=[];return this.docs.forEach((a=>{a._document!==null&&(t.push(a._document),i.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),s.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function qz(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ye(61501,{type:n})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ro._jsonSchemaVersion="firestore/querySnapshot/1.0",Ro._jsonSchema={type:nn("string",Ro._jsonSchemaVersion),bundleSource:nn("string","QuerySnapshot"),bundleName:nn("string"),bundle:nn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E1(n){n=Pi(n,$t);const e=Pi(n.firestore,Vo),t=Wf(e);return bz(t,n._key).then((i=>ZA(e,n,i)))}function Yz(n){n=Pi(n,Ks);const e=Pi(n.firestore,Vo),t=Wf(e),i=new y0(e);return jA(n._query),Az(t,n._query).then((s=>new Ro(e,i,n,s)))}function jd(n,e,t){n=Pi(n,$t);const i=Pi(n.firestore,Vo),s=Hz(n.converter,e),a=qA(i);return XA(i,[Uz(a,"setDoc",n._key,s,n.converter!==null,t).toMutation(n._key,cr.none())])}function $z(n){return XA(Pi(n.firestore,Vo),[new $g(n._key,cr.none())])}function Kz(n,...e){var h,y,E;n=vn(n);let t={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||m1(e[i])||(t=e[i++]);const s={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(m1(e[i])){const T=e[i];e[i]=(h=T.next)==null?void 0:h.bind(T),e[i+1]=(y=T.error)==null?void 0:y.bind(T),e[i+2]=(E=T.complete)==null?void 0:E.bind(T)}let a,l,c;if(n instanceof $t)l=Pi(n.firestore,Vo),c=Ff(n._key.path),a={next:T=>{e[i]&&e[i](ZA(l,n,T))},error:e[i+1],complete:e[i+2]};else{const T=Pi(n,Ks);l=Pi(T.firestore,Vo),c=T._query;const w=new y0(l);a={next:C=>{e[i]&&e[i](new Ro(l,w,T,C))},error:e[i+1],complete:e[i+2]},jA(n._query)}const f=Wf(l);return Sz(f,c,s,a)}function XA(n,e){const t=Wf(n);return xz(t,e)}function ZA(n,e,t){const i=t.docs.get(e._key),s=new y0(n);return new Io(n,s,e._key,i,new Tu(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){bU(rl),Ka(new Mo("firestore",((i,{instanceIdentifier:s,options:a})=>{const l=i.getProvider("app").getImmediate(),c=new Vo(new CU(i.getProvider("auth-internal")),new NU(l,i.getProvider("app-check-internal")),KU(l,s),l);return a={useFetchStreams:t,...a},c._setSettings(a),c}),"PUBLIC").setMultipleInstances(!0)),Vs(h1,p1,e),Vs(h1,p1,"esm2020")})();var Jz="firebase",jz="12.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Vs(Jz,jz,"app");const Wz={apiKey:"AIzaSyDQVGg4QjP2AFroCatQRhGwNMwekY7F3d0",authDomain:"cursor-for-ui.firebaseapp.com",projectId:"cursor-for-ui",storageBucket:"cursor-for-ui.firebasestorage.app",messagingSenderId:"161291780663",appId:"1:161291780663:web:ee6ae9ef59f68bbb0f35b2",measurementId:"G-TZPKD4XMG7"},ex=FS(Wz),Ns=wU(ex),$a=Mz(ex);function Na(n){var e;return{id:n.uid,email:n.email||"",name:n.displayName||((e=n.email)==null?void 0:e.split("@")[0])||"User"}}const Qz=new Pr,Xz=new Lr,Ao={async login(n,e){const t=await oL(Ns,n,e);return Na(t.user)},async signup(n,e,t){const i=await sL(Ns,n,e);return await lL(i.user,{displayName:t}),await jd(Nu($a,"users",i.user.uid),{email:n,name:t,plan:"free",createdAt:vm()}),Na(i.user)},async loginWithGoogle(){const n=await cw(Ns,Qz),e=Nu($a,"users",n.user.uid);return(await E1(e)).exists()||await jd(e,{email:n.user.email,name:n.user.displayName||"",plan:"free",createdAt:vm()}),Na(n.user)},async loginWithGithub(){const n=await cw(Ns,Xz),e=Nu($a,"users",n.user.uid);return(await E1(e)).exists()||await jd(e,{email:n.user.email,name:n.user.displayName||"",plan:"free",createdAt:vm()}),Na(n.user)},async resetPassword(n){await rL(Ns,n)},logout(){return fL(Ns)},getCurrentUser(){const n=Ns.currentUser;return n?Na(n):null},onAuthChanged(n){return dL(Ns,e=>{n(e?Na(e):null)})}},Zz=({onLogin:n})=>{const[e,t]=Ve.useState(!0),[i,s]=Ve.useState(""),[a,l]=Ve.useState(""),[c,f]=Ve.useState(""),[h,y]=Ve.useState(!1),[E,T]=Ve.useState(!1),[w,C]=Ve.useState(null),[b,x]=Ve.useState(""),[N,z]=Ve.useState(!1),B=async $=>{$.preventDefault(),x(""),z(!1),T(!0);try{if(e){const L=await Ao.login(i,a);n(L)}else{if(!c.trim())throw new Error("Name is required");if(a.length<6)throw new Error("Password must be at least 6 characters");const L=await Ao.signup(i,a,c);n(L)}}catch(L){const V=(L==null?void 0:L.code)||"";x(V==="auth/user-not-found"?"No account found with this email.":V==="auth/wrong-password"||V==="auth/invalid-credential"?"Invalid email or password.":V==="auth/email-already-in-use"?"This email is already registered.":V==="auth/weak-password"?"Password must be at least 6 characters.":V==="auth/invalid-email"?"Please enter a valid email address.":V==="auth/too-many-requests"?"Too many attempts. Please try again later.":L.message||"An error occurred")}finally{T(!1)}},Y=async $=>{x(""),C($);try{const L=$==="google"?await Ao.loginWithGoogle():await Ao.loginWithGithub();n(L)}catch(L){const V=(L==null?void 0:L.code)||"";x(V==="auth/popup-closed-by-user"?"Sign-in popup was closed.":V==="auth/account-exists-with-different-credential"?"An account already exists with this email using a different sign-in method.":L.message||"OAuth sign-in failed")}finally{C(null)}},J=async()=>{if(!i.trim()){x('Enter your email first, then click "Forgot password?"');return}try{await Ao.resetPassword(i),z(!0),x("")}catch{x("Could not send reset email. Check the address and try again.")}};return M.jsxs("div",{className:"min-h-screen w-full flex flex-col lg:flex-row bg-[#050505] text-white font-sans overflow-hidden selection:bg-indigo-500/30 selection:text-indigo-200 relative",children:[M.jsxs("div",{className:"absolute inset-0 z-0",children:[M.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-[linear-gradient(to_right,#ffffff05_1px,transparent_1px),linear-gradient(to_bottom,#ffffff05_1px,transparent_1px)] bg-[size:40px_40px] [mask-image:radial-gradient(ellipse_80%_50%_at_50%_0%,#000_70%,transparent_100%)]"}),M.jsx("div",{className:"absolute top-[-20%] left-[20%] w-[500px] h-[500px] bg-indigo-600/10 rounded-full blur-[128px] animate-pulse-slow"}),M.jsx("div",{className:"absolute bottom-[-20%] right-[10%] w-[600px] h-[600px] bg-purple-600/5 rounded-full blur-[128px]"})]}),M.jsxs("div",{className:"flex-1 flex flex-col justify-center px-8 lg:px-20 py-12 relative z-10",children:[M.jsxs("div",{className:"flex items-center gap-3 mb-16 animate-in fade-in slide-in-from-top-4 duration-700",children:[M.jsx("div",{className:"w-10 h-10 rounded-xl bg-white/5 border border-white/10 flex items-center justify-center backdrop-blur-md",children:M.jsx(ZI,{className:"w-5 h-5 text-white"})}),M.jsxs("span",{className:"text-sm font-bold tracking-widest uppercase opacity-70",children:["Cursor UI ",M.jsx("span",{className:"text-indigo-500",children:"2026"})]})]}),M.jsxs("div",{className:"max-w-2xl space-y-6 mb-16",children:[M.jsxs("h1",{className:"text-6xl lg:text-7xl font-bold tracking-tighter leading-[1.1] animate-in fade-in slide-in-from-bottom-8 duration-700 delay-100",children:["The End of ",M.jsx("br",{}),M.jsx("span",{className:"font-serif italic text-transparent bg-clip-text bg-gradient-to-r from-indigo-300 via-white to-indigo-300 animate-gradient bg-[length:200%_auto]",children:"Generic"})," Interfaces."]}),M.jsx("p",{className:"text-lg text-zinc-400 font-light leading-relaxed max-w-lg animate-in fade-in slide-in-from-bottom-8 duration-700 delay-200",children:'Stop building "AI Slop". Generate spatial, depth-aware, and consistent design systems with the speed of thought.'})]}),M.jsxs("div",{className:"grid grid-cols-2 gap-4 max-w-lg animate-in fade-in slide-in-from-bottom-8 duration-700 delay-300",children:[M.jsxs("div",{className:"bg-white/5 border border-white/5 p-5 rounded-2xl backdrop-blur-sm hover:bg-white/10 transition-colors group",children:[M.jsx(P1,{className:"w-6 h-6 text-indigo-400 mb-3 group-hover:scale-110 transition-transform duration-500"}),M.jsx("h3",{className:"text-sm font-semibold text-white mb-1",children:"Consistency Engine"}),M.jsx("p",{className:"text-[11px] text-zinc-500 leading-normal",children:'The "3 Laws" ensure nav bars and buttons never vanish or morph unexpectedly.'})]}),M.jsxs("div",{className:"bg-white/5 border border-white/5 p-5 rounded-2xl backdrop-blur-sm hover:bg-white/10 transition-colors group",children:[M.jsx(x2,{className:"w-6 h-6 text-amber-400 mb-3 group-hover:scale-110 transition-transform duration-500"}),M.jsx("h3",{className:"text-sm font-semibold text-white mb-1",children:"Gemini 3 Flash"}),M.jsx("p",{className:"text-[11px] text-zinc-500 leading-normal",children:"Generate complex Bento Grids and Glassmorphism in milliseconds."})]}),M.jsxs("div",{className:"col-span-2 bg-gradient-to-r from-indigo-900/20 to-purple-900/20 border border-white/5 p-5 rounded-2xl flex items-center justify-between group cursor-default",children:[M.jsxs("div",{children:[M.jsx("h3",{className:"text-sm font-semibold text-white mb-1",children:"Production Ready"}),M.jsx("p",{className:"text-[11px] text-zinc-500",children:"Export clean Tailwind + React code."})]}),M.jsx("div",{className:"w-10 h-10 rounded-full bg-white/10 flex items-center justify-center group-hover:rotate-12 transition-transform duration-500",children:M.jsx(pI,{className:"w-4 h-4 text-white"})})]})]})]}),M.jsxs("div",{className:"flex-1 relative flex items-center justify-center p-8 lg:p-0 z-20 overflow-hidden",children:[M.jsx("div",{className:"absolute inset-0 pointer-events-none flex items-center justify-center opacity-30 lg:opacity-100",children:M.jsxs("div",{className:"relative w-[400px] h-[600px] [transform:rotateX(20deg)_rotateY(-20deg)_rotateZ(10deg)] [transform-style:preserve-3d]",children:[M.jsx("div",{className:"absolute inset-0 bg-zinc-900/80 border border-white/10 rounded-[3rem] shadow-2xl [transform:translateZ(-50px)] backdrop-blur-xl"}),M.jsxs("div",{className:"absolute inset-0 bg-zinc-800/80 border border-white/10 rounded-[3rem] shadow-2xl [transform:translateZ(0px)] backdrop-blur-xl flex flex-col p-6",children:[M.jsx("div",{className:"w-full h-32 bg-white/5 rounded-2xl mb-4 animate-pulse"}),M.jsx("div",{className:"w-2/3 h-4 bg-white/5 rounded-full mb-2"}),M.jsx("div",{className:"w-1/2 h-4 bg-white/5 rounded-full"})]}),M.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-indigo-500/10 to-purple-500/10 border border-white/20 rounded-[3rem] shadow-[0_0_100px_rgba(99,102,241,0.2)] [transform:translateZ(60px)] backdrop-blur-sm animate-[float_6s_ease-in-out_infinite] flex items-center justify-center",children:M.jsx("div",{className:"px-6 py-3 bg-black/50 backdrop-blur-md rounded-full border border-white/10 text-xs font-mono text-indigo-300 shadow-xl",children:"Generating UI..."})})]})}),M.jsxs("div",{className:"relative w-full max-w-[380px] bg-black/40 backdrop-blur-2xl border border-white/10 p-8 rounded-3xl shadow-2xl ring-1 ring-white/5 animate-in fade-in zoom-in-95 duration-500 delay-200",children:[M.jsxs("div",{className:"mb-6 text-center",children:[M.jsx("h2",{className:"text-2xl font-serif font-semibold text-white mb-2",children:e?"Welcome Back":"Join the Future"}),M.jsx("p",{className:"text-xs text-zinc-400 uppercase tracking-widest font-medium",children:e?"Access your dashboard":"Start designing today"})]}),M.jsxs("div",{className:"flex gap-3 mb-5",children:[M.jsxs("button",{type:"button",onClick:()=>Y("google"),disabled:!!w,className:"flex-1 py-3 bg-white/5 hover:bg-white/10 border border-white/10 rounded-xl text-sm font-medium transition-all flex items-center justify-center gap-2 active:scale-[0.97] disabled:opacity-50",children:[w==="google"?M.jsx(wu,{className:"w-4 h-4 animate-spin"}):M.jsxs("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",children:[M.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92a5.06 5.06 0 01-2.2 3.32v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.1z",fill:"#4285F4"}),M.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),M.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),M.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),M.jsx("span",{children:"Google"})]}),M.jsxs("button",{type:"button",onClick:()=>Y("github"),disabled:!!w,className:"flex-1 py-3 bg-white/5 hover:bg-white/10 border border-white/10 rounded-xl text-sm font-medium transition-all flex items-center justify-center gap-2 active:scale-[0.97] disabled:opacity-50",children:[w==="github"?M.jsx(wu,{className:"w-4 h-4 animate-spin"}):M.jsx(NI,{className:"w-4 h-4"}),M.jsx("span",{children:"GitHub"})]})]}),M.jsxs("div",{className:"flex items-center gap-3 mb-5",children:[M.jsx("div",{className:"flex-1 h-px bg-white/10"}),M.jsx("span",{className:"text-[10px] text-zinc-500 uppercase tracking-widest",children:"or continue with email"}),M.jsx("div",{className:"flex-1 h-px bg-white/10"})]}),M.jsxs("form",{onSubmit:B,className:"space-y-3.5",children:[!e&&M.jsx("div",{className:"group",children:M.jsxs("div",{className:"relative",children:[M.jsx(T2,{className:"absolute left-3.5 top-1/2 -translate-y-1/2 w-4 h-4 text-zinc-500"}),M.jsx("input",{type:"text",value:c,onChange:$=>f($.target.value),className:"w-full bg-zinc-900/50 border border-white/10 rounded-xl py-3.5 pl-10 pr-4 text-sm text-white placeholder:text-zinc-600 focus:outline-none focus:border-indigo-500/50 focus:bg-zinc-900 transition-all",placeholder:"Designer Name"})]})}),M.jsx("div",{className:"group",children:M.jsxs("div",{className:"relative",children:[M.jsx(nE,{className:"absolute left-3.5 top-1/2 -translate-y-1/2 w-4 h-4 text-zinc-500"}),M.jsx("input",{type:"email",value:i,onChange:$=>s($.target.value),className:"w-full bg-zinc-900/50 border border-white/10 rounded-xl py-3.5 pl-10 pr-4 text-sm text-white placeholder:text-zinc-600 focus:outline-none focus:border-indigo-500/50 focus:bg-zinc-900 transition-all",placeholder:"email@studio.com",required:!0})]})}),M.jsx("div",{className:"group",children:M.jsxs("div",{className:"relative",children:[M.jsx(FI,{className:"absolute left-3.5 top-1/2 -translate-y-1/2 w-4 h-4 text-zinc-500"}),M.jsx("input",{type:h?"text":"password",value:a,onChange:$=>l($.target.value),className:"w-full bg-zinc-900/50 border border-white/10 rounded-xl py-3.5 pl-10 pr-11 text-sm text-white placeholder:text-zinc-600 focus:outline-none focus:border-indigo-500/50 focus:bg-zinc-900 transition-all",placeholder:e?"Password":"Create password (min 6 chars)",required:!0,minLength:6}),M.jsx("button",{type:"button",onClick:()=>y(!h),className:"absolute right-3.5 top-1/2 -translate-y-1/2 text-zinc-500 hover:text-zinc-300 transition-colors",children:h?M.jsx(bI,{className:"w-4 h-4"}):M.jsx(xI,{className:"w-4 h-4"})})]})}),e&&M.jsx("div",{className:"text-right",children:M.jsx("button",{type:"button",onClick:J,className:"text-[11px] text-indigo-400 hover:text-indigo-300 transition-colors",children:"Forgot password?"})}),b&&M.jsxs("div",{className:"p-3 bg-red-500/10 border border-red-500/20 rounded-lg flex items-center gap-2 text-xs text-red-400",children:[M.jsx(cI,{className:"w-3.5 h-3.5 shrink-0"}),M.jsx("span",{children:b})]}),N&&M.jsxs("div",{className:"p-3 bg-green-500/10 border border-green-500/20 rounded-lg flex items-center gap-2 text-xs text-green-400",children:[M.jsx(nE,{className:"w-3.5 h-3.5 shrink-0"}),M.jsx("span",{children:"Password reset email sent! Check your inbox."})]}),M.jsx("button",{type:"submit",disabled:E,className:"w-full py-3.5 bg-white text-black rounded-xl font-bold text-sm hover:bg-zinc-200 transition-all shadow-[0_0_20px_rgba(255,255,255,0.1)] active:scale-[0.98] flex items-center justify-center gap-2 mt-1",children:E?M.jsx(wu,{className:"w-4 h-4 animate-spin"}):M.jsxs(M.Fragment,{children:[M.jsx("span",{children:e?"Enter Studio":"Create Account"}),M.jsx(D1,{className:"w-4 h-4"})]})})]}),M.jsx("div",{className:"mt-5 text-center",children:M.jsx("button",{onClick:()=>{t(!e),x(""),z(!1),l("")},className:"text-xs text-zinc-500 hover:text-white transition-colors border-b border-transparent hover:border-zinc-500 pb-0.5",children:e?"New here? Create an account":"Have an account? Sign in"})})]})]}),M.jsx("style",{children:`
        @keyframes float {
          0%, 100% { transform: translateZ(60px) translateY(0px); }
          50% { transform: translateZ(60px) translateY(-20px); }
        }
      `})]})},T1=n=>Nz($a,"users",n,"projects"),Ma={subscribeProjects(n,e){const t=g1(T1(n),y1("lastModified","desc"));return Kz(t,i=>{const s=i.docs.map(a=>({...a.data(),id:a.id}));e(s)})},async saveProject(n,e){const t=Nu($a,"users",n,"projects",e.id);await jd(t,{...e,lastModified:Date.now()})},async saveAllProjects(n,e){const t=e.map(i=>this.saveProject(n,i));await Promise.all(t)},async deleteProject(n,e){await $z(Nu($a,"users",n,"projects",e))},async loadProjects(n){const e=g1(T1(n),y1("lastModified","desc"));return(await Yz(e)).docs.map(i=>({...i.data(),id:i.id}))}};function e8(n,e){if(n.match(/^[a-z]+:\/\//i))return n;if(n.match(/^\/\//))return window.location.protocol+n;if(n.match(/^[a-z]+:/i))return n;const t=document.implementation.createHTMLDocument(),i=t.createElement("base"),s=t.createElement("a");return t.head.appendChild(i),t.body.appendChild(s),e&&(i.href=e),s.href=n,s.href}const t8=(()=>{let n=0;const e=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(n+=1,`u${e()}${n}`)})();function Fr(n){const e=[];for(let t=0,i=n.length;t<i;t++)e.push(n[t]);return e}function Sf(n,e){const i=(n.ownerDocument.defaultView||window).getComputedStyle(n).getPropertyValue(e);return i?parseFloat(i.replace("px","")):0}function n8(n){const e=Sf(n,"border-left-width"),t=Sf(n,"border-right-width");return n.clientWidth+e+t}function i8(n){const e=Sf(n,"border-top-width"),t=Sf(n,"border-bottom-width");return n.clientHeight+e+t}function tx(n,e={}){const t=e.width||n8(n),i=e.height||i8(n);return{width:t,height:i}}function r8(){let n,e;try{e=process}catch{}const t=e&&e.env?e.env.devicePixelRatio:null;return t&&(n=parseInt(t,10),Number.isNaN(n)&&(n=1)),n||window.devicePixelRatio||1}const Xn=16384;function s8(n){(n.width>Xn||n.height>Xn)&&(n.width>Xn&&n.height>Xn?n.width>n.height?(n.height*=Xn/n.width,n.width=Xn):(n.width*=Xn/n.height,n.height=Xn):n.width>Xn?(n.height*=Xn/n.width,n.width=Xn):(n.width*=Xn/n.height,n.height=Xn))}function bf(n){return new Promise((e,t)=>{const i=new Image;i.decode=()=>e(i),i.onload=()=>e(i),i.onerror=t,i.crossOrigin="anonymous",i.decoding="async",i.src=n})}async function o8(n){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(n)).then(encodeURIComponent).then(e=>`data:image/svg+xml;charset=utf-8,${e}`)}async function a8(n,e,t){const i="http://www.w3.org/2000/svg",s=document.createElementNS(i,"svg"),a=document.createElementNS(i,"foreignObject");return s.setAttribute("width",`${e}`),s.setAttribute("height",`${t}`),s.setAttribute("viewBox",`0 0 ${e} ${t}`),a.setAttribute("width","100%"),a.setAttribute("height","100%"),a.setAttribute("x","0"),a.setAttribute("y","0"),a.setAttribute("externalResourcesRequired","true"),s.appendChild(a),a.appendChild(n),o8(s)}const Gn=(n,e)=>{if(n instanceof e)return!0;const t=Object.getPrototypeOf(n);return t===null?!1:t.constructor.name===e.name||Gn(t,e)};function l8(n){const e=n.getPropertyValue("content");return`${n.cssText} content: '${e.replace(/'|"/g,"")}';`}function u8(n){return Fr(n).map(e=>{const t=n.getPropertyValue(e),i=n.getPropertyPriority(e);return`${e}: ${t}${i?" !important":""};`}).join(" ")}function c8(n,e,t){const i=`.${n}:${e}`,s=t.cssText?l8(t):u8(t);return document.createTextNode(`${i}{${s}}`)}function w1(n,e,t){const i=window.getComputedStyle(n,t),s=i.getPropertyValue("content");if(s===""||s==="none")return;const a=t8();try{e.className=`${e.className} ${a}`}catch{return}const l=document.createElement("style");l.appendChild(c8(a,t,i)),e.appendChild(l)}function d8(n,e){w1(n,e,":before"),w1(n,e,":after")}const S1="application/font-woff",b1="image/jpeg",f8={woff:S1,woff2:S1,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:b1,jpeg:b1,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function h8(n){const e=/\.([^./]*?)$/g.exec(n);return e?e[1]:""}function w0(n){const e=h8(n).toLowerCase();return f8[e]||""}function p8(n){return n.split(/,/)[1]}function lg(n){return n.search(/^(data:)/)!==-1}function m8(n,e){return`data:${e};base64,${n}`}async function nx(n,e,t){const i=await fetch(n,e);if(i.status===404)throw new Error(`Resource "${i.url}" not found`);const s=await i.blob();return new Promise((a,l)=>{const c=new FileReader;c.onerror=l,c.onloadend=()=>{try{a(t({res:i,result:c.result}))}catch(f){l(f)}},c.readAsDataURL(s)})}const _m={};function g8(n,e,t){let i=n.replace(/\?.*/,"");return t&&(i=n),/ttf|otf|eot|woff2?/i.test(i)&&(i=i.replace(/.*\//,"")),e?`[${e}]${i}`:i}async function S0(n,e,t){const i=g8(n,e,t.includeQueryParams);if(_m[i]!=null)return _m[i];t.cacheBust&&(n+=(/\?/.test(n)?"&":"?")+new Date().getTime());let s;try{const a=await nx(n,t.fetchRequestInit,({res:l,result:c})=>(e||(e=l.headers.get("Content-Type")||""),p8(c)));s=m8(a,e)}catch(a){s=t.imagePlaceholder||"";let l=`Failed to fetch resource: ${n}`;a&&(l=typeof a=="string"?a:a.message),l&&console.warn(l)}return _m[i]=s,s}async function y8(n){const e=n.toDataURL();return e==="data:,"?n.cloneNode(!1):bf(e)}async function v8(n,e){if(n.currentSrc){const a=document.createElement("canvas"),l=a.getContext("2d");a.width=n.clientWidth,a.height=n.clientHeight,l==null||l.drawImage(n,0,0,a.width,a.height);const c=a.toDataURL();return bf(c)}const t=n.poster,i=w0(t),s=await S0(t,i,e);return bf(s)}async function _8(n){var e;try{if(!((e=n==null?void 0:n.contentDocument)===null||e===void 0)&&e.body)return await Xf(n.contentDocument.body,{},!0)}catch{}return n.cloneNode(!1)}async function E8(n,e){return Gn(n,HTMLCanvasElement)?y8(n):Gn(n,HTMLVideoElement)?v8(n,e):Gn(n,HTMLIFrameElement)?_8(n):n.cloneNode(!1)}const T8=n=>n.tagName!=null&&n.tagName.toUpperCase()==="SLOT";async function w8(n,e,t){var i,s;let a=[];return T8(n)&&n.assignedNodes?a=Fr(n.assignedNodes()):Gn(n,HTMLIFrameElement)&&(!((i=n.contentDocument)===null||i===void 0)&&i.body)?a=Fr(n.contentDocument.body.childNodes):a=Fr(((s=n.shadowRoot)!==null&&s!==void 0?s:n).childNodes),a.length===0||Gn(n,HTMLVideoElement)||await a.reduce((l,c)=>l.then(()=>Xf(c,t)).then(f=>{f&&e.appendChild(f)}),Promise.resolve()),e}function S8(n,e){const t=e.style;if(!t)return;const i=window.getComputedStyle(n);i.cssText?(t.cssText=i.cssText,t.transformOrigin=i.transformOrigin):Fr(i).forEach(s=>{let a=i.getPropertyValue(s);s==="font-size"&&a.endsWith("px")&&(a=`${Math.floor(parseFloat(a.substring(0,a.length-2)))-.1}px`),Gn(n,HTMLIFrameElement)&&s==="display"&&a==="inline"&&(a="block"),s==="d"&&e.getAttribute("d")&&(a=`path(${e.getAttribute("d")})`),t.setProperty(s,a,i.getPropertyPriority(s))})}function b8(n,e){Gn(n,HTMLTextAreaElement)&&(e.innerHTML=n.value),Gn(n,HTMLInputElement)&&e.setAttribute("value",n.value)}function A8(n,e){if(Gn(n,HTMLSelectElement)){const i=Array.from(e.children).find(s=>n.value===s.getAttribute("value"));i&&i.setAttribute("selected","")}}function x8(n,e){return Gn(e,Element)&&(S8(n,e),d8(n,e),b8(n,e),A8(n,e)),e}async function C8(n,e){const t=n.querySelectorAll?n.querySelectorAll("use"):[];if(t.length===0)return n;const i={};for(let a=0;a<t.length;a++){const c=t[a].getAttribute("xlink:href");if(c){const f=n.querySelector(c),h=document.querySelector(c);!f&&h&&!i[c]&&(i[c]=await Xf(h,e,!0))}}const s=Object.values(i);if(s.length){const a="http://www.w3.org/1999/xhtml",l=document.createElementNS(a,"svg");l.setAttribute("xmlns",a),l.style.position="absolute",l.style.width="0",l.style.height="0",l.style.overflow="hidden",l.style.display="none";const c=document.createElementNS(a,"defs");l.appendChild(c);for(let f=0;f<s.length;f++)c.appendChild(s[f]);n.appendChild(l)}return n}async function Xf(n,e,t){return!t&&e.filter&&!e.filter(n)?null:Promise.resolve(n).then(i=>E8(i,e)).then(i=>w8(n,i,e)).then(i=>x8(n,i)).then(i=>C8(i,e))}const ix=/url\((['"]?)([^'"]+?)\1\)/g,I8=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,R8=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function N8(n){const e=n.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${e})(['"]?\\))`,"g")}function M8(n){const e=[];return n.replace(ix,(t,i,s)=>(e.push(s),t)),e.filter(t=>!lg(t))}async function k8(n,e,t,i,s){try{const a=t?e8(e,t):e,l=w0(e);let c;return s||(c=await S0(a,l,i)),n.replace(N8(e),`$1${c}$3`)}catch{}return n}function D8(n,{preferredFontFormat:e}){return e?n.replace(R8,t=>{for(;;){const[i,,s]=I8.exec(t)||[];if(!s)return"";if(s===e)return`src: ${i};`}}):n}function rx(n){return n.search(ix)!==-1}async function sx(n,e,t){if(!rx(n))return n;const i=D8(n,t);return M8(i).reduce((a,l)=>a.then(c=>k8(c,l,e,t)),Promise.resolve(i))}async function Ld(n,e,t){var i;const s=(i=e.style)===null||i===void 0?void 0:i.getPropertyValue(n);if(s){const a=await sx(s,null,t);return e.style.setProperty(n,a,e.style.getPropertyPriority(n)),!0}return!1}async function P8(n,e){await Ld("background",n,e)||await Ld("background-image",n,e),await Ld("mask",n,e)||await Ld("mask-image",n,e)}async function L8(n,e){const t=Gn(n,HTMLImageElement);if(!(t&&!lg(n.src))&&!(Gn(n,SVGImageElement)&&!lg(n.href.baseVal)))return;const i=t?n.src:n.href.baseVal,s=await S0(i,w0(i),e);await new Promise((a,l)=>{n.onload=a,n.onerror=l;const c=n;c.decode&&(c.decode=a),c.loading==="lazy"&&(c.loading="eager"),t?(n.srcset="",n.src=s):n.href.baseVal=s})}async function U8(n,e){const i=Fr(n.childNodes).map(s=>ox(s,e));await Promise.all(i).then(()=>n)}async function ox(n,e){Gn(n,Element)&&(await P8(n,e),await L8(n,e),await U8(n,e))}function V8(n,e){const{style:t}=n;e.backgroundColor&&(t.backgroundColor=e.backgroundColor),e.width&&(t.width=`${e.width}px`),e.height&&(t.height=`${e.height}px`);const i=e.style;return i!=null&&Object.keys(i).forEach(s=>{t[s]=i[s]}),n}const A1={};async function x1(n){let e=A1[n];if(e!=null)return e;const i=await(await fetch(n)).text();return e={url:n,cssText:i},A1[n]=e,e}async function C1(n,e){let t=n.cssText;const i=/url\(["']?([^"')]+)["']?\)/g,a=(t.match(/url\([^)]+\)/g)||[]).map(async l=>{let c=l.replace(i,"$1");return c.startsWith("https://")||(c=new URL(c,n.url).href),nx(c,e.fetchRequestInit,({result:f})=>(t=t.replace(l,`url(${f})`),[l,f]))});return Promise.all(a).then(()=>t)}function I1(n){if(n==null)return[];const e=[],t=/(\/\*[\s\S]*?\*\/)/gi;let i=n.replace(t,"");const s=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const f=s.exec(i);if(f===null)break;e.push(f[0])}i=i.replace(s,"");const a=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,l="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",c=new RegExp(l,"gi");for(;;){let f=a.exec(i);if(f===null){if(f=c.exec(i),f===null)break;a.lastIndex=c.lastIndex}else c.lastIndex=a.lastIndex;e.push(f[0])}return e}async function O8(n,e){const t=[],i=[];return n.forEach(s=>{if("cssRules"in s)try{Fr(s.cssRules||[]).forEach((a,l)=>{if(a.type===CSSRule.IMPORT_RULE){let c=l+1;const f=a.href,h=x1(f).then(y=>C1(y,e)).then(y=>I1(y).forEach(E=>{try{s.insertRule(E,E.startsWith("@import")?c+=1:s.cssRules.length)}catch(T){console.error("Error inserting rule from remote css",{rule:E,error:T})}})).catch(y=>{console.error("Error loading remote css",y.toString())});i.push(h)}})}catch(a){const l=n.find(c=>c.href==null)||document.styleSheets[0];s.href!=null&&i.push(x1(s.href).then(c=>C1(c,e)).then(c=>I1(c).forEach(f=>{l.insertRule(f,s.cssRules.length)})).catch(c=>{console.error("Error loading remote stylesheet",c)})),console.error("Error inlining remote css file",a)}}),Promise.all(i).then(()=>(n.forEach(s=>{if("cssRules"in s)try{Fr(s.cssRules||[]).forEach(a=>{t.push(a)})}catch(a){console.error(`Error while reading CSS rules from ${s.href}`,a)}}),t))}function z8(n){return n.filter(e=>e.type===CSSRule.FONT_FACE_RULE).filter(e=>rx(e.style.getPropertyValue("src")))}async function F8(n,e){if(n.ownerDocument==null)throw new Error("Provided element is not within a Document");const t=Fr(n.ownerDocument.styleSheets),i=await O8(t,e);return z8(i)}async function B8(n,e){const t=await F8(n,e);return(await Promise.all(t.map(s=>{const a=s.parentStyleSheet?s.parentStyleSheet.href:null;return sx(s.cssText,a,e)}))).join(`
`)}async function G8(n,e){const t=e.fontEmbedCSS!=null?e.fontEmbedCSS:e.skipFonts?null:await B8(n,e);if(t){const i=document.createElement("style"),s=document.createTextNode(t);i.appendChild(s),n.firstChild?n.insertBefore(i,n.firstChild):n.appendChild(i)}}async function ax(n,e={}){const{width:t,height:i}=tx(n,e),s=await Xf(n,e,!0);return await G8(s,e),await ox(s,e),V8(s,e),await a8(s,t,i)}async function H8(n,e={}){const{width:t,height:i}=tx(n,e),s=await ax(n,e),a=await bf(s),l=document.createElement("canvas"),c=l.getContext("2d"),f=e.pixelRatio||r8(),h=e.canvasWidth||t,y=e.canvasHeight||i;return l.width=h*f,l.height=y*f,e.skipAutoScale||s8(l),l.style.width=`${h}`,l.style.height=`${y}`,e.backgroundColor&&(c.fillStyle=e.backgroundColor,c.fillRect(0,0,l.width,l.height)),c.drawImage(a,0,0,l.width,l.height),l}async function R1(n,e={}){return(await H8(n,e)).toDataURL()}function Ud(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Em={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/var N1;function q8(){return N1||(N1=1,(function(n,e){(function(t){n.exports=t()})(function(){return(function t(i,s,a){function l(h,y){if(!s[h]){if(!i[h]){var E=typeof Ud=="function"&&Ud;if(!y&&E)return E(h,!0);if(c)return c(h,!0);var T=new Error("Cannot find module '"+h+"'");throw T.code="MODULE_NOT_FOUND",T}var w=s[h]={exports:{}};i[h][0].call(w.exports,function(C){var b=i[h][1][C];return l(b||C)},w,w.exports,t,i,s,a)}return s[h].exports}for(var c=typeof Ud=="function"&&Ud,f=0;f<a.length;f++)l(a[f]);return l})({1:[function(t,i,s){var a=t("./utils"),l=t("./support"),c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";s.encode=function(f){for(var h,y,E,T,w,C,b,x=[],N=0,z=f.length,B=z,Y=a.getTypeOf(f)!=="string";N<f.length;)B=z-N,E=Y?(h=f[N++],y=N<z?f[N++]:0,N<z?f[N++]:0):(h=f.charCodeAt(N++),y=N<z?f.charCodeAt(N++):0,N<z?f.charCodeAt(N++):0),T=h>>2,w=(3&h)<<4|y>>4,C=1<B?(15&y)<<2|E>>6:64,b=2<B?63&E:64,x.push(c.charAt(T)+c.charAt(w)+c.charAt(C)+c.charAt(b));return x.join("")},s.decode=function(f){var h,y,E,T,w,C,b=0,x=0,N="data:";if(f.substr(0,N.length)===N)throw new Error("Invalid base64 input, it looks like a data url.");var z,B=3*(f=f.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(f.charAt(f.length-1)===c.charAt(64)&&B--,f.charAt(f.length-2)===c.charAt(64)&&B--,B%1!=0)throw new Error("Invalid base64 input, bad content length.");for(z=l.uint8array?new Uint8Array(0|B):new Array(0|B);b<f.length;)h=c.indexOf(f.charAt(b++))<<2|(T=c.indexOf(f.charAt(b++)))>>4,y=(15&T)<<4|(w=c.indexOf(f.charAt(b++)))>>2,E=(3&w)<<6|(C=c.indexOf(f.charAt(b++))),z[x++]=h,w!==64&&(z[x++]=y),C!==64&&(z[x++]=E);return z}},{"./support":30,"./utils":32}],2:[function(t,i,s){var a=t("./external"),l=t("./stream/DataWorker"),c=t("./stream/Crc32Probe"),f=t("./stream/DataLengthProbe");function h(y,E,T,w,C){this.compressedSize=y,this.uncompressedSize=E,this.crc32=T,this.compression=w,this.compressedContent=C}h.prototype={getContentWorker:function(){var y=new l(a.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new f("data_length")),E=this;return y.on("end",function(){if(this.streamInfo.data_length!==E.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),y},getCompressedWorker:function(){return new l(a.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},h.createWorkerFrom=function(y,E,T){return y.pipe(new c).pipe(new f("uncompressedSize")).pipe(E.compressWorker(T)).pipe(new f("compressedSize")).withStreamInfo("compression",E)},i.exports=h},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,i,s){var a=t("./stream/GenericWorker");s.STORE={magic:"\0\0",compressWorker:function(){return new a("STORE compression")},uncompressWorker:function(){return new a("STORE decompression")}},s.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,i,s){var a=t("./utils"),l=(function(){for(var c,f=[],h=0;h<256;h++){c=h;for(var y=0;y<8;y++)c=1&c?3988292384^c>>>1:c>>>1;f[h]=c}return f})();i.exports=function(c,f){return c!==void 0&&c.length?a.getTypeOf(c)!=="string"?(function(h,y,E,T){var w=l,C=T+E;h^=-1;for(var b=T;b<C;b++)h=h>>>8^w[255&(h^y[b])];return-1^h})(0|f,c,c.length,0):(function(h,y,E,T){var w=l,C=T+E;h^=-1;for(var b=T;b<C;b++)h=h>>>8^w[255&(h^y.charCodeAt(b))];return-1^h})(0|f,c,c.length,0):0}},{"./utils":32}],5:[function(t,i,s){s.base64=!1,s.binary=!1,s.dir=!1,s.createFolders=!0,s.date=null,s.compression=null,s.compressionOptions=null,s.comment=null,s.unixPermissions=null,s.dosPermissions=null},{}],6:[function(t,i,s){var a=null;a=typeof Promise<"u"?Promise:t("lie"),i.exports={Promise:a}},{lie:37}],7:[function(t,i,s){var a=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",l=t("pako"),c=t("./utils"),f=t("./stream/GenericWorker"),h=a?"uint8array":"array";function y(E,T){f.call(this,"FlateWorker/"+E),this._pako=null,this._pakoAction=E,this._pakoOptions=T,this.meta={}}s.magic="\b\0",c.inherits(y,f),y.prototype.processChunk=function(E){this.meta=E.meta,this._pako===null&&this._createPako(),this._pako.push(c.transformTo(h,E.data),!1)},y.prototype.flush=function(){f.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},y.prototype.cleanUp=function(){f.prototype.cleanUp.call(this),this._pako=null},y.prototype._createPako=function(){this._pako=new l[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var E=this;this._pako.onData=function(T){E.push({data:T,meta:E.meta})}},s.compressWorker=function(E){return new y("Deflate",E)},s.uncompressWorker=function(){return new y("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,i,s){function a(w,C){var b,x="";for(b=0;b<C;b++)x+=String.fromCharCode(255&w),w>>>=8;return x}function l(w,C,b,x,N,z){var B,Y,J=w.file,$=w.compression,L=z!==h.utf8encode,V=c.transformTo("string",z(J.name)),k=c.transformTo("string",h.utf8encode(J.name)),H=J.comment,K=c.transformTo("string",z(H)),U=c.transformTo("string",h.utf8encode(H)),O=k.length!==J.name.length,D=U.length!==H.length,he="",ie="",re="",be=J.dir,ne=J.date,Te={crc32:0,compressedSize:0,uncompressedSize:0};C&&!b||(Te.crc32=w.crc32,Te.compressedSize=w.compressedSize,Te.uncompressedSize=w.uncompressedSize);var P=0;C&&(P|=8),L||!O&&!D||(P|=2048);var G=0,oe=0;be&&(G|=16),N==="UNIX"?(oe=798,G|=(function(Z,ge){var Ae=Z;return Z||(Ae=ge?16893:33204),(65535&Ae)<<16})(J.unixPermissions,be)):(oe=20,G|=(function(Z){return 63&(Z||0)})(J.dosPermissions)),B=ne.getUTCHours(),B<<=6,B|=ne.getUTCMinutes(),B<<=5,B|=ne.getUTCSeconds()/2,Y=ne.getUTCFullYear()-1980,Y<<=4,Y|=ne.getUTCMonth()+1,Y<<=5,Y|=ne.getUTCDate(),O&&(ie=a(1,1)+a(y(V),4)+k,he+="up"+a(ie.length,2)+ie),D&&(re=a(1,1)+a(y(K),4)+U,he+="uc"+a(re.length,2)+re);var Q="";return Q+=`
\0`,Q+=a(P,2),Q+=$.magic,Q+=a(B,2),Q+=a(Y,2),Q+=a(Te.crc32,4),Q+=a(Te.compressedSize,4),Q+=a(Te.uncompressedSize,4),Q+=a(V.length,2),Q+=a(he.length,2),{fileRecord:E.LOCAL_FILE_HEADER+Q+V+he,dirRecord:E.CENTRAL_FILE_HEADER+a(oe,2)+Q+a(K.length,2)+"\0\0\0\0"+a(G,4)+a(x,4)+V+he+K}}var c=t("../utils"),f=t("../stream/GenericWorker"),h=t("../utf8"),y=t("../crc32"),E=t("../signature");function T(w,C,b,x){f.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=C,this.zipPlatform=b,this.encodeFileName=x,this.streamFiles=w,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}c.inherits(T,f),T.prototype.push=function(w){var C=w.meta.percent||0,b=this.entriesCount,x=this._sources.length;this.accumulate?this.contentBuffer.push(w):(this.bytesWritten+=w.data.length,f.prototype.push.call(this,{data:w.data,meta:{currentFile:this.currentFile,percent:b?(C+100*(b-x-1))/b:100}}))},T.prototype.openedSource=function(w){this.currentSourceOffset=this.bytesWritten,this.currentFile=w.file.name;var C=this.streamFiles&&!w.file.dir;if(C){var b=l(w,C,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:b.fileRecord,meta:{percent:0}})}else this.accumulate=!0},T.prototype.closedSource=function(w){this.accumulate=!1;var C=this.streamFiles&&!w.file.dir,b=l(w,C,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(b.dirRecord),C)this.push({data:(function(x){return E.DATA_DESCRIPTOR+a(x.crc32,4)+a(x.compressedSize,4)+a(x.uncompressedSize,4)})(w),meta:{percent:100}});else for(this.push({data:b.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},T.prototype.flush=function(){for(var w=this.bytesWritten,C=0;C<this.dirRecords.length;C++)this.push({data:this.dirRecords[C],meta:{percent:100}});var b=this.bytesWritten-w,x=(function(N,z,B,Y,J){var $=c.transformTo("string",J(Y));return E.CENTRAL_DIRECTORY_END+"\0\0\0\0"+a(N,2)+a(N,2)+a(z,4)+a(B,4)+a($.length,2)+$})(this.dirRecords.length,b,w,this.zipComment,this.encodeFileName);this.push({data:x,meta:{percent:100}})},T.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},T.prototype.registerPrevious=function(w){this._sources.push(w);var C=this;return w.on("data",function(b){C.processChunk(b)}),w.on("end",function(){C.closedSource(C.previous.streamInfo),C._sources.length?C.prepareNextSource():C.end()}),w.on("error",function(b){C.error(b)}),this},T.prototype.resume=function(){return!!f.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},T.prototype.error=function(w){var C=this._sources;if(!f.prototype.error.call(this,w))return!1;for(var b=0;b<C.length;b++)try{C[b].error(w)}catch{}return!0},T.prototype.lock=function(){f.prototype.lock.call(this);for(var w=this._sources,C=0;C<w.length;C++)w[C].lock()},i.exports=T},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,i,s){var a=t("../compressions"),l=t("./ZipFileWorker");s.generateWorker=function(c,f,h){var y=new l(f.streamFiles,h,f.platform,f.encodeFileName),E=0;try{c.forEach(function(T,w){E++;var C=(function(z,B){var Y=z||B,J=a[Y];if(!J)throw new Error(Y+" is not a valid compression method !");return J})(w.options.compression,f.compression),b=w.options.compressionOptions||f.compressionOptions||{},x=w.dir,N=w.date;w._compressWorker(C,b).withStreamInfo("file",{name:T,dir:x,date:N,comment:w.comment||"",unixPermissions:w.unixPermissions,dosPermissions:w.dosPermissions}).pipe(y)}),y.entriesCount=E}catch(T){y.error(T)}return y}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,i,s){function a(){if(!(this instanceof a))return new a;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var l=new a;for(var c in this)typeof this[c]!="function"&&(l[c]=this[c]);return l}}(a.prototype=t("./object")).loadAsync=t("./load"),a.support=t("./support"),a.defaults=t("./defaults"),a.version="3.10.1",a.loadAsync=function(l,c){return new a().loadAsync(l,c)},a.external=t("./external"),i.exports=a},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,i,s){var a=t("./utils"),l=t("./external"),c=t("./utf8"),f=t("./zipEntries"),h=t("./stream/Crc32Probe"),y=t("./nodejsUtils");function E(T){return new l.Promise(function(w,C){var b=T.decompressed.getContentWorker().pipe(new h);b.on("error",function(x){C(x)}).on("end",function(){b.streamInfo.crc32!==T.decompressed.crc32?C(new Error("Corrupted zip : CRC32 mismatch")):w()}).resume()})}i.exports=function(T,w){var C=this;return w=a.extend(w||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:c.utf8decode}),y.isNode&&y.isStream(T)?l.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):a.prepareContent("the loaded zip file",T,!0,w.optimizedBinaryString,w.base64).then(function(b){var x=new f(w);return x.load(b),x}).then(function(b){var x=[l.Promise.resolve(b)],N=b.files;if(w.checkCRC32)for(var z=0;z<N.length;z++)x.push(E(N[z]));return l.Promise.all(x)}).then(function(b){for(var x=b.shift(),N=x.files,z=0;z<N.length;z++){var B=N[z],Y=B.fileNameStr,J=a.resolve(B.fileNameStr);C.file(J,B.decompressed,{binary:!0,optimizedBinaryString:!0,date:B.date,dir:B.dir,comment:B.fileCommentStr.length?B.fileCommentStr:null,unixPermissions:B.unixPermissions,dosPermissions:B.dosPermissions,createFolders:w.createFolders}),B.dir||(C.file(J).unsafeOriginalName=Y)}return x.zipComment.length&&(C.comment=x.zipComment),C})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,i,s){var a=t("../utils"),l=t("../stream/GenericWorker");function c(f,h){l.call(this,"Nodejs stream input adapter for "+f),this._upstreamEnded=!1,this._bindStream(h)}a.inherits(c,l),c.prototype._bindStream=function(f){var h=this;(this._stream=f).pause(),f.on("data",function(y){h.push({data:y,meta:{percent:0}})}).on("error",function(y){h.isPaused?this.generatedError=y:h.error(y)}).on("end",function(){h.isPaused?h._upstreamEnded=!0:h.end()})},c.prototype.pause=function(){return!!l.prototype.pause.call(this)&&(this._stream.pause(),!0)},c.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},i.exports=c},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,i,s){var a=t("readable-stream").Readable;function l(c,f,h){a.call(this,f),this._helper=c;var y=this;c.on("data",function(E,T){y.push(E)||y._helper.pause(),h&&h(T)}).on("error",function(E){y.emit("error",E)}).on("end",function(){y.push(null)})}t("../utils").inherits(l,a),l.prototype._read=function(){this._helper.resume()},i.exports=l},{"../utils":32,"readable-stream":16}],14:[function(t,i,s){i.exports={isNode:typeof Buffer<"u",newBufferFrom:function(a,l){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(a,l);if(typeof a=="number")throw new Error('The "data" argument must not be a number');return new Buffer(a,l)},allocBuffer:function(a){if(Buffer.alloc)return Buffer.alloc(a);var l=new Buffer(a);return l.fill(0),l},isBuffer:function(a){return Buffer.isBuffer(a)},isStream:function(a){return a&&typeof a.on=="function"&&typeof a.pause=="function"&&typeof a.resume=="function"}}},{}],15:[function(t,i,s){function a(J,$,L){var V,k=c.getTypeOf($),H=c.extend(L||{},y);H.date=H.date||new Date,H.compression!==null&&(H.compression=H.compression.toUpperCase()),typeof H.unixPermissions=="string"&&(H.unixPermissions=parseInt(H.unixPermissions,8)),H.unixPermissions&&16384&H.unixPermissions&&(H.dir=!0),H.dosPermissions&&16&H.dosPermissions&&(H.dir=!0),H.dir&&(J=N(J)),H.createFolders&&(V=x(J))&&z.call(this,V,!0);var K=k==="string"&&H.binary===!1&&H.base64===!1;L&&L.binary!==void 0||(H.binary=!K),($ instanceof E&&$.uncompressedSize===0||H.dir||!$||$.length===0)&&(H.base64=!1,H.binary=!0,$="",H.compression="STORE",k="string");var U=null;U=$ instanceof E||$ instanceof f?$:C.isNode&&C.isStream($)?new b(J,$):c.prepareContent(J,$,H.binary,H.optimizedBinaryString,H.base64);var O=new T(J,U,H);this.files[J]=O}var l=t("./utf8"),c=t("./utils"),f=t("./stream/GenericWorker"),h=t("./stream/StreamHelper"),y=t("./defaults"),E=t("./compressedObject"),T=t("./zipObject"),w=t("./generate"),C=t("./nodejsUtils"),b=t("./nodejs/NodejsStreamInputAdapter"),x=function(J){J.slice(-1)==="/"&&(J=J.substring(0,J.length-1));var $=J.lastIndexOf("/");return 0<$?J.substring(0,$):""},N=function(J){return J.slice(-1)!=="/"&&(J+="/"),J},z=function(J,$){return $=$!==void 0?$:y.createFolders,J=N(J),this.files[J]||a.call(this,J,null,{dir:!0,createFolders:$}),this.files[J]};function B(J){return Object.prototype.toString.call(J)==="[object RegExp]"}var Y={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(J){var $,L,V;for($ in this.files)V=this.files[$],(L=$.slice(this.root.length,$.length))&&$.slice(0,this.root.length)===this.root&&J(L,V)},filter:function(J){var $=[];return this.forEach(function(L,V){J(L,V)&&$.push(V)}),$},file:function(J,$,L){if(arguments.length!==1)return J=this.root+J,a.call(this,J,$,L),this;if(B(J)){var V=J;return this.filter(function(H,K){return!K.dir&&V.test(H)})}var k=this.files[this.root+J];return k&&!k.dir?k:null},folder:function(J){if(!J)return this;if(B(J))return this.filter(function(k,H){return H.dir&&J.test(k)});var $=this.root+J,L=z.call(this,$),V=this.clone();return V.root=L.name,V},remove:function(J){J=this.root+J;var $=this.files[J];if($||(J.slice(-1)!=="/"&&(J+="/"),$=this.files[J]),$&&!$.dir)delete this.files[J];else for(var L=this.filter(function(k,H){return H.name.slice(0,J.length)===J}),V=0;V<L.length;V++)delete this.files[L[V].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(J){var $,L={};try{if((L=c.extend(J||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:l.utf8encode})).type=L.type.toLowerCase(),L.compression=L.compression.toUpperCase(),L.type==="binarystring"&&(L.type="string"),!L.type)throw new Error("No output type specified.");c.checkSupport(L.type),L.platform!=="darwin"&&L.platform!=="freebsd"&&L.platform!=="linux"&&L.platform!=="sunos"||(L.platform="UNIX"),L.platform==="win32"&&(L.platform="DOS");var V=L.comment||this.comment||"";$=w.generateWorker(this,L,V)}catch(k){($=new f("error")).error(k)}return new h($,L.type||"string",L.mimeType)},generateAsync:function(J,$){return this.generateInternalStream(J).accumulate($)},generateNodeStream:function(J,$){return(J=J||{}).type||(J.type="nodebuffer"),this.generateInternalStream(J).toNodejsStream($)}};i.exports=Y},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,i,s){i.exports=t("stream")},{stream:void 0}],17:[function(t,i,s){var a=t("./DataReader");function l(c){a.call(this,c);for(var f=0;f<this.data.length;f++)c[f]=255&c[f]}t("../utils").inherits(l,a),l.prototype.byteAt=function(c){return this.data[this.zero+c]},l.prototype.lastIndexOfSignature=function(c){for(var f=c.charCodeAt(0),h=c.charCodeAt(1),y=c.charCodeAt(2),E=c.charCodeAt(3),T=this.length-4;0<=T;--T)if(this.data[T]===f&&this.data[T+1]===h&&this.data[T+2]===y&&this.data[T+3]===E)return T-this.zero;return-1},l.prototype.readAndCheckSignature=function(c){var f=c.charCodeAt(0),h=c.charCodeAt(1),y=c.charCodeAt(2),E=c.charCodeAt(3),T=this.readData(4);return f===T[0]&&h===T[1]&&y===T[2]&&E===T[3]},l.prototype.readData=function(c){if(this.checkOffset(c),c===0)return[];var f=this.data.slice(this.zero+this.index,this.zero+this.index+c);return this.index+=c,f},i.exports=l},{"../utils":32,"./DataReader":18}],18:[function(t,i,s){var a=t("../utils");function l(c){this.data=c,this.length=c.length,this.index=0,this.zero=0}l.prototype={checkOffset:function(c){this.checkIndex(this.index+c)},checkIndex:function(c){if(this.length<this.zero+c||c<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+c+"). Corrupted zip ?")},setIndex:function(c){this.checkIndex(c),this.index=c},skip:function(c){this.setIndex(this.index+c)},byteAt:function(){},readInt:function(c){var f,h=0;for(this.checkOffset(c),f=this.index+c-1;f>=this.index;f--)h=(h<<8)+this.byteAt(f);return this.index+=c,h},readString:function(c){return a.transformTo("string",this.readData(c))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var c=this.readInt(4);return new Date(Date.UTC(1980+(c>>25&127),(c>>21&15)-1,c>>16&31,c>>11&31,c>>5&63,(31&c)<<1))}},i.exports=l},{"../utils":32}],19:[function(t,i,s){var a=t("./Uint8ArrayReader");function l(c){a.call(this,c)}t("../utils").inherits(l,a),l.prototype.readData=function(c){this.checkOffset(c);var f=this.data.slice(this.zero+this.index,this.zero+this.index+c);return this.index+=c,f},i.exports=l},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,i,s){var a=t("./DataReader");function l(c){a.call(this,c)}t("../utils").inherits(l,a),l.prototype.byteAt=function(c){return this.data.charCodeAt(this.zero+c)},l.prototype.lastIndexOfSignature=function(c){return this.data.lastIndexOf(c)-this.zero},l.prototype.readAndCheckSignature=function(c){return c===this.readData(4)},l.prototype.readData=function(c){this.checkOffset(c);var f=this.data.slice(this.zero+this.index,this.zero+this.index+c);return this.index+=c,f},i.exports=l},{"../utils":32,"./DataReader":18}],21:[function(t,i,s){var a=t("./ArrayReader");function l(c){a.call(this,c)}t("../utils").inherits(l,a),l.prototype.readData=function(c){if(this.checkOffset(c),c===0)return new Uint8Array(0);var f=this.data.subarray(this.zero+this.index,this.zero+this.index+c);return this.index+=c,f},i.exports=l},{"../utils":32,"./ArrayReader":17}],22:[function(t,i,s){var a=t("../utils"),l=t("../support"),c=t("./ArrayReader"),f=t("./StringReader"),h=t("./NodeBufferReader"),y=t("./Uint8ArrayReader");i.exports=function(E){var T=a.getTypeOf(E);return a.checkSupport(T),T!=="string"||l.uint8array?T==="nodebuffer"?new h(E):l.uint8array?new y(a.transformTo("uint8array",E)):new c(a.transformTo("array",E)):new f(E)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,i,s){s.LOCAL_FILE_HEADER="PK",s.CENTRAL_FILE_HEADER="PK",s.CENTRAL_DIRECTORY_END="PK",s.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",s.ZIP64_CENTRAL_DIRECTORY_END="PK",s.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(t,i,s){var a=t("./GenericWorker"),l=t("../utils");function c(f){a.call(this,"ConvertWorker to "+f),this.destType=f}l.inherits(c,a),c.prototype.processChunk=function(f){this.push({data:l.transformTo(this.destType,f.data),meta:f.meta})},i.exports=c},{"../utils":32,"./GenericWorker":28}],25:[function(t,i,s){var a=t("./GenericWorker"),l=t("../crc32");function c(){a.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(c,a),c.prototype.processChunk=function(f){this.streamInfo.crc32=l(f.data,this.streamInfo.crc32||0),this.push(f)},i.exports=c},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,i,s){var a=t("../utils"),l=t("./GenericWorker");function c(f){l.call(this,"DataLengthProbe for "+f),this.propName=f,this.withStreamInfo(f,0)}a.inherits(c,l),c.prototype.processChunk=function(f){if(f){var h=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=h+f.data.length}l.prototype.processChunk.call(this,f)},i.exports=c},{"../utils":32,"./GenericWorker":28}],27:[function(t,i,s){var a=t("../utils"),l=t("./GenericWorker");function c(f){l.call(this,"DataWorker");var h=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,f.then(function(y){h.dataIsReady=!0,h.data=y,h.max=y&&y.length||0,h.type=a.getTypeOf(y),h.isPaused||h._tickAndRepeat()},function(y){h.error(y)})}a.inherits(c,l),c.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this.data=null},c.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,a.delay(this._tickAndRepeat,[],this)),!0)},c.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(a.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},c.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var f=null,h=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":f=this.data.substring(this.index,h);break;case"uint8array":f=this.data.subarray(this.index,h);break;case"array":case"nodebuffer":f=this.data.slice(this.index,h)}return this.index=h,this.push({data:f,meta:{percent:this.max?this.index/this.max*100:0}})},i.exports=c},{"../utils":32,"./GenericWorker":28}],28:[function(t,i,s){function a(l){this.name=l||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}a.prototype={push:function(l){this.emit("data",l)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(l){this.emit("error",l)}return!0},error:function(l){return!this.isFinished&&(this.isPaused?this.generatedError=l:(this.isFinished=!0,this.emit("error",l),this.previous&&this.previous.error(l),this.cleanUp()),!0)},on:function(l,c){return this._listeners[l].push(c),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(l,c){if(this._listeners[l])for(var f=0;f<this._listeners[l].length;f++)this._listeners[l][f].call(this,c)},pipe:function(l){return l.registerPrevious(this)},registerPrevious:function(l){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=l.streamInfo,this.mergeStreamInfo(),this.previous=l;var c=this;return l.on("data",function(f){c.processChunk(f)}),l.on("end",function(){c.end()}),l.on("error",function(f){c.error(f)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var l=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),l=!0),this.previous&&this.previous.resume(),!l},flush:function(){},processChunk:function(l){this.push(l)},withStreamInfo:function(l,c){return this.extraStreamInfo[l]=c,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var l in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,l)&&(this.streamInfo[l]=this.extraStreamInfo[l])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var l="Worker "+this.name;return this.previous?this.previous+" -> "+l:l}},i.exports=a},{}],29:[function(t,i,s){var a=t("../utils"),l=t("./ConvertWorker"),c=t("./GenericWorker"),f=t("../base64"),h=t("../support"),y=t("../external"),E=null;if(h.nodestream)try{E=t("../nodejs/NodejsStreamOutputAdapter")}catch{}function T(C,b){return new y.Promise(function(x,N){var z=[],B=C._internalType,Y=C._outputType,J=C._mimeType;C.on("data",function($,L){z.push($),b&&b(L)}).on("error",function($){z=[],N($)}).on("end",function(){try{var $=(function(L,V,k){switch(L){case"blob":return a.newBlob(a.transformTo("arraybuffer",V),k);case"base64":return f.encode(V);default:return a.transformTo(L,V)}})(Y,(function(L,V){var k,H=0,K=null,U=0;for(k=0;k<V.length;k++)U+=V[k].length;switch(L){case"string":return V.join("");case"array":return Array.prototype.concat.apply([],V);case"uint8array":for(K=new Uint8Array(U),k=0;k<V.length;k++)K.set(V[k],H),H+=V[k].length;return K;case"nodebuffer":return Buffer.concat(V);default:throw new Error("concat : unsupported type '"+L+"'")}})(B,z),J);x($)}catch(L){N(L)}z=[]}).resume()})}function w(C,b,x){var N=b;switch(b){case"blob":case"arraybuffer":N="uint8array";break;case"base64":N="string"}try{this._internalType=N,this._outputType=b,this._mimeType=x,a.checkSupport(N),this._worker=C.pipe(new l(N)),C.lock()}catch(z){this._worker=new c("error"),this._worker.error(z)}}w.prototype={accumulate:function(C){return T(this,C)},on:function(C,b){var x=this;return C==="data"?this._worker.on(C,function(N){b.call(x,N.data,N.meta)}):this._worker.on(C,function(){a.delay(b,arguments,x)}),this},resume:function(){return a.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(C){if(a.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new E(this,{objectMode:this._outputType!=="nodebuffer"},C)}},i.exports=w},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,i,s){if(s.base64=!0,s.array=!0,s.string=!0,s.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",s.nodebuffer=typeof Buffer<"u",s.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")s.blob=!1;else{var a=new ArrayBuffer(0);try{s.blob=new Blob([a],{type:"application/zip"}).size===0}catch{try{var l=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);l.append(a),s.blob=l.getBlob("application/zip").size===0}catch{s.blob=!1}}}try{s.nodestream=!!t("readable-stream").Readable}catch{s.nodestream=!1}},{"readable-stream":16}],31:[function(t,i,s){for(var a=t("./utils"),l=t("./support"),c=t("./nodejsUtils"),f=t("./stream/GenericWorker"),h=new Array(256),y=0;y<256;y++)h[y]=252<=y?6:248<=y?5:240<=y?4:224<=y?3:192<=y?2:1;h[254]=h[254]=1;function E(){f.call(this,"utf-8 decode"),this.leftOver=null}function T(){f.call(this,"utf-8 encode")}s.utf8encode=function(w){return l.nodebuffer?c.newBufferFrom(w,"utf-8"):(function(C){var b,x,N,z,B,Y=C.length,J=0;for(z=0;z<Y;z++)(64512&(x=C.charCodeAt(z)))==55296&&z+1<Y&&(64512&(N=C.charCodeAt(z+1)))==56320&&(x=65536+(x-55296<<10)+(N-56320),z++),J+=x<128?1:x<2048?2:x<65536?3:4;for(b=l.uint8array?new Uint8Array(J):new Array(J),z=B=0;B<J;z++)(64512&(x=C.charCodeAt(z)))==55296&&z+1<Y&&(64512&(N=C.charCodeAt(z+1)))==56320&&(x=65536+(x-55296<<10)+(N-56320),z++),x<128?b[B++]=x:(x<2048?b[B++]=192|x>>>6:(x<65536?b[B++]=224|x>>>12:(b[B++]=240|x>>>18,b[B++]=128|x>>>12&63),b[B++]=128|x>>>6&63),b[B++]=128|63&x);return b})(w)},s.utf8decode=function(w){return l.nodebuffer?a.transformTo("nodebuffer",w).toString("utf-8"):(function(C){var b,x,N,z,B=C.length,Y=new Array(2*B);for(b=x=0;b<B;)if((N=C[b++])<128)Y[x++]=N;else if(4<(z=h[N]))Y[x++]=65533,b+=z-1;else{for(N&=z===2?31:z===3?15:7;1<z&&b<B;)N=N<<6|63&C[b++],z--;1<z?Y[x++]=65533:N<65536?Y[x++]=N:(N-=65536,Y[x++]=55296|N>>10&1023,Y[x++]=56320|1023&N)}return Y.length!==x&&(Y.subarray?Y=Y.subarray(0,x):Y.length=x),a.applyFromCharCode(Y)})(w=a.transformTo(l.uint8array?"uint8array":"array",w))},a.inherits(E,f),E.prototype.processChunk=function(w){var C=a.transformTo(l.uint8array?"uint8array":"array",w.data);if(this.leftOver&&this.leftOver.length){if(l.uint8array){var b=C;(C=new Uint8Array(b.length+this.leftOver.length)).set(this.leftOver,0),C.set(b,this.leftOver.length)}else C=this.leftOver.concat(C);this.leftOver=null}var x=(function(z,B){var Y;for((B=B||z.length)>z.length&&(B=z.length),Y=B-1;0<=Y&&(192&z[Y])==128;)Y--;return Y<0||Y===0?B:Y+h[z[Y]]>B?Y:B})(C),N=C;x!==C.length&&(l.uint8array?(N=C.subarray(0,x),this.leftOver=C.subarray(x,C.length)):(N=C.slice(0,x),this.leftOver=C.slice(x,C.length))),this.push({data:s.utf8decode(N),meta:w.meta})},E.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:s.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},s.Utf8DecodeWorker=E,a.inherits(T,f),T.prototype.processChunk=function(w){this.push({data:s.utf8encode(w.data),meta:w.meta})},s.Utf8EncodeWorker=T},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,i,s){var a=t("./support"),l=t("./base64"),c=t("./nodejsUtils"),f=t("./external");function h(b){return b}function y(b,x){for(var N=0;N<b.length;++N)x[N]=255&b.charCodeAt(N);return x}t("setimmediate"),s.newBlob=function(b,x){s.checkSupport("blob");try{return new Blob([b],{type:x})}catch{try{var N=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return N.append(b),N.getBlob(x)}catch{throw new Error("Bug : can't construct the Blob.")}}};var E={stringifyByChunk:function(b,x,N){var z=[],B=0,Y=b.length;if(Y<=N)return String.fromCharCode.apply(null,b);for(;B<Y;)x==="array"||x==="nodebuffer"?z.push(String.fromCharCode.apply(null,b.slice(B,Math.min(B+N,Y)))):z.push(String.fromCharCode.apply(null,b.subarray(B,Math.min(B+N,Y)))),B+=N;return z.join("")},stringifyByChar:function(b){for(var x="",N=0;N<b.length;N++)x+=String.fromCharCode(b[N]);return x},applyCanBeUsed:{uint8array:(function(){try{return a.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}})(),nodebuffer:(function(){try{return a.nodebuffer&&String.fromCharCode.apply(null,c.allocBuffer(1)).length===1}catch{return!1}})()}};function T(b){var x=65536,N=s.getTypeOf(b),z=!0;if(N==="uint8array"?z=E.applyCanBeUsed.uint8array:N==="nodebuffer"&&(z=E.applyCanBeUsed.nodebuffer),z)for(;1<x;)try{return E.stringifyByChunk(b,N,x)}catch{x=Math.floor(x/2)}return E.stringifyByChar(b)}function w(b,x){for(var N=0;N<b.length;N++)x[N]=b[N];return x}s.applyFromCharCode=T;var C={};C.string={string:h,array:function(b){return y(b,new Array(b.length))},arraybuffer:function(b){return C.string.uint8array(b).buffer},uint8array:function(b){return y(b,new Uint8Array(b.length))},nodebuffer:function(b){return y(b,c.allocBuffer(b.length))}},C.array={string:T,array:h,arraybuffer:function(b){return new Uint8Array(b).buffer},uint8array:function(b){return new Uint8Array(b)},nodebuffer:function(b){return c.newBufferFrom(b)}},C.arraybuffer={string:function(b){return T(new Uint8Array(b))},array:function(b){return w(new Uint8Array(b),new Array(b.byteLength))},arraybuffer:h,uint8array:function(b){return new Uint8Array(b)},nodebuffer:function(b){return c.newBufferFrom(new Uint8Array(b))}},C.uint8array={string:T,array:function(b){return w(b,new Array(b.length))},arraybuffer:function(b){return b.buffer},uint8array:h,nodebuffer:function(b){return c.newBufferFrom(b)}},C.nodebuffer={string:T,array:function(b){return w(b,new Array(b.length))},arraybuffer:function(b){return C.nodebuffer.uint8array(b).buffer},uint8array:function(b){return w(b,new Uint8Array(b.length))},nodebuffer:h},s.transformTo=function(b,x){if(x=x||"",!b)return x;s.checkSupport(b);var N=s.getTypeOf(x);return C[N][b](x)},s.resolve=function(b){for(var x=b.split("/"),N=[],z=0;z<x.length;z++){var B=x[z];B==="."||B===""&&z!==0&&z!==x.length-1||(B===".."?N.pop():N.push(B))}return N.join("/")},s.getTypeOf=function(b){return typeof b=="string"?"string":Object.prototype.toString.call(b)==="[object Array]"?"array":a.nodebuffer&&c.isBuffer(b)?"nodebuffer":a.uint8array&&b instanceof Uint8Array?"uint8array":a.arraybuffer&&b instanceof ArrayBuffer?"arraybuffer":void 0},s.checkSupport=function(b){if(!a[b.toLowerCase()])throw new Error(b+" is not supported by this platform")},s.MAX_VALUE_16BITS=65535,s.MAX_VALUE_32BITS=-1,s.pretty=function(b){var x,N,z="";for(N=0;N<(b||"").length;N++)z+="\\x"+((x=b.charCodeAt(N))<16?"0":"")+x.toString(16).toUpperCase();return z},s.delay=function(b,x,N){setImmediate(function(){b.apply(N||null,x||[])})},s.inherits=function(b,x){function N(){}N.prototype=x.prototype,b.prototype=new N},s.extend=function(){var b,x,N={};for(b=0;b<arguments.length;b++)for(x in arguments[b])Object.prototype.hasOwnProperty.call(arguments[b],x)&&N[x]===void 0&&(N[x]=arguments[b][x]);return N},s.prepareContent=function(b,x,N,z,B){return f.Promise.resolve(x).then(function(Y){return a.blob&&(Y instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(Y))!==-1)&&typeof FileReader<"u"?new f.Promise(function(J,$){var L=new FileReader;L.onload=function(V){J(V.target.result)},L.onerror=function(V){$(V.target.error)},L.readAsArrayBuffer(Y)}):Y}).then(function(Y){var J=s.getTypeOf(Y);return J?(J==="arraybuffer"?Y=s.transformTo("uint8array",Y):J==="string"&&(B?Y=l.decode(Y):N&&z!==!0&&(Y=(function($){return y($,a.uint8array?new Uint8Array($.length):new Array($.length))})(Y))),Y):f.Promise.reject(new Error("Can't read the data of '"+b+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(t,i,s){var a=t("./reader/readerFor"),l=t("./utils"),c=t("./signature"),f=t("./zipEntry"),h=t("./support");function y(E){this.files=[],this.loadOptions=E}y.prototype={checkSignature:function(E){if(!this.reader.readAndCheckSignature(E)){this.reader.index-=4;var T=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+l.pretty(T)+", expected "+l.pretty(E)+")")}},isSignature:function(E,T){var w=this.reader.index;this.reader.setIndex(E);var C=this.reader.readString(4)===T;return this.reader.setIndex(w),C},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var E=this.reader.readData(this.zipCommentLength),T=h.uint8array?"uint8array":"array",w=l.transformTo(T,E);this.zipComment=this.loadOptions.decodeFileName(w)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var E,T,w,C=this.zip64EndOfCentralSize-44;0<C;)E=this.reader.readInt(2),T=this.reader.readInt(4),w=this.reader.readData(T),this.zip64ExtensibleData[E]={id:E,length:T,value:w}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var E,T;for(E=0;E<this.files.length;E++)T=this.files[E],this.reader.setIndex(T.localHeaderOffset),this.checkSignature(c.LOCAL_FILE_HEADER),T.readLocalPart(this.reader),T.handleUTF8(),T.processAttributes()},readCentralDir:function(){var E;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(c.CENTRAL_FILE_HEADER);)(E=new f({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(E);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var E=this.reader.lastIndexOfSignature(c.CENTRAL_DIRECTORY_END);if(E<0)throw this.isSignature(0,c.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(E);var T=E;if(this.checkSignature(c.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===l.MAX_VALUE_16BITS||this.diskWithCentralDirStart===l.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===l.MAX_VALUE_16BITS||this.centralDirRecords===l.MAX_VALUE_16BITS||this.centralDirSize===l.MAX_VALUE_32BITS||this.centralDirOffset===l.MAX_VALUE_32BITS){if(this.zip64=!0,(E=this.reader.lastIndexOfSignature(c.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(E),this.checkSignature(c.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,c.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(c.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(c.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var w=this.centralDirOffset+this.centralDirSize;this.zip64&&(w+=20,w+=12+this.zip64EndOfCentralSize);var C=T-w;if(0<C)this.isSignature(T,c.CENTRAL_FILE_HEADER)||(this.reader.zero=C);else if(C<0)throw new Error("Corrupted zip: missing "+Math.abs(C)+" bytes.")},prepareReader:function(E){this.reader=a(E)},load:function(E){this.prepareReader(E),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},i.exports=y},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(t,i,s){var a=t("./reader/readerFor"),l=t("./utils"),c=t("./compressedObject"),f=t("./crc32"),h=t("./utf8"),y=t("./compressions"),E=t("./support");function T(w,C){this.options=w,this.loadOptions=C}T.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(w){var C,b;if(w.skip(22),this.fileNameLength=w.readInt(2),b=w.readInt(2),this.fileName=w.readData(this.fileNameLength),w.skip(b),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((C=(function(x){for(var N in y)if(Object.prototype.hasOwnProperty.call(y,N)&&y[N].magic===x)return y[N];return null})(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+l.pretty(this.compressionMethod)+" unknown (inner file : "+l.transformTo("string",this.fileName)+")");this.decompressed=new c(this.compressedSize,this.uncompressedSize,this.crc32,C,w.readData(this.compressedSize))},readCentralPart:function(w){this.versionMadeBy=w.readInt(2),w.skip(2),this.bitFlag=w.readInt(2),this.compressionMethod=w.readString(2),this.date=w.readDate(),this.crc32=w.readInt(4),this.compressedSize=w.readInt(4),this.uncompressedSize=w.readInt(4);var C=w.readInt(2);if(this.extraFieldsLength=w.readInt(2),this.fileCommentLength=w.readInt(2),this.diskNumberStart=w.readInt(2),this.internalFileAttributes=w.readInt(2),this.externalFileAttributes=w.readInt(4),this.localHeaderOffset=w.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");w.skip(C),this.readExtraFields(w),this.parseZIP64ExtraField(w),this.fileComment=w.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var w=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),w==0&&(this.dosPermissions=63&this.externalFileAttributes),w==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var w=a(this.extraFields[1].value);this.uncompressedSize===l.MAX_VALUE_32BITS&&(this.uncompressedSize=w.readInt(8)),this.compressedSize===l.MAX_VALUE_32BITS&&(this.compressedSize=w.readInt(8)),this.localHeaderOffset===l.MAX_VALUE_32BITS&&(this.localHeaderOffset=w.readInt(8)),this.diskNumberStart===l.MAX_VALUE_32BITS&&(this.diskNumberStart=w.readInt(4))}},readExtraFields:function(w){var C,b,x,N=w.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});w.index+4<N;)C=w.readInt(2),b=w.readInt(2),x=w.readData(b),this.extraFields[C]={id:C,length:b,value:x};w.setIndex(N)},handleUTF8:function(){var w=E.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=h.utf8decode(this.fileName),this.fileCommentStr=h.utf8decode(this.fileComment);else{var C=this.findExtraFieldUnicodePath();if(C!==null)this.fileNameStr=C;else{var b=l.transformTo(w,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(b)}var x=this.findExtraFieldUnicodeComment();if(x!==null)this.fileCommentStr=x;else{var N=l.transformTo(w,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(N)}}},findExtraFieldUnicodePath:function(){var w=this.extraFields[28789];if(w){var C=a(w.value);return C.readInt(1)!==1||f(this.fileName)!==C.readInt(4)?null:h.utf8decode(C.readData(w.length-5))}return null},findExtraFieldUnicodeComment:function(){var w=this.extraFields[25461];if(w){var C=a(w.value);return C.readInt(1)!==1||f(this.fileComment)!==C.readInt(4)?null:h.utf8decode(C.readData(w.length-5))}return null}},i.exports=T},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,i,s){function a(C,b,x){this.name=C,this.dir=x.dir,this.date=x.date,this.comment=x.comment,this.unixPermissions=x.unixPermissions,this.dosPermissions=x.dosPermissions,this._data=b,this._dataBinary=x.binary,this.options={compression:x.compression,compressionOptions:x.compressionOptions}}var l=t("./stream/StreamHelper"),c=t("./stream/DataWorker"),f=t("./utf8"),h=t("./compressedObject"),y=t("./stream/GenericWorker");a.prototype={internalStream:function(C){var b=null,x="string";try{if(!C)throw new Error("No output type specified.");var N=(x=C.toLowerCase())==="string"||x==="text";x!=="binarystring"&&x!=="text"||(x="string"),b=this._decompressWorker();var z=!this._dataBinary;z&&!N&&(b=b.pipe(new f.Utf8EncodeWorker)),!z&&N&&(b=b.pipe(new f.Utf8DecodeWorker))}catch(B){(b=new y("error")).error(B)}return new l(b,x,"")},async:function(C,b){return this.internalStream(C).accumulate(b)},nodeStream:function(C,b){return this.internalStream(C||"nodebuffer").toNodejsStream(b)},_compressWorker:function(C,b){if(this._data instanceof h&&this._data.compression.magic===C.magic)return this._data.getCompressedWorker();var x=this._decompressWorker();return this._dataBinary||(x=x.pipe(new f.Utf8EncodeWorker)),h.createWorkerFrom(x,C,b)},_decompressWorker:function(){return this._data instanceof h?this._data.getContentWorker():this._data instanceof y?this._data:new c(this._data)}};for(var E=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],T=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},w=0;w<E.length;w++)a.prototype[E[w]]=T;i.exports=a},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,i,s){(function(a){var l,c,f=a.MutationObserver||a.WebKitMutationObserver;if(f){var h=0,y=new f(C),E=a.document.createTextNode("");y.observe(E,{characterData:!0}),l=function(){E.data=h=++h%2}}else if(a.setImmediate||a.MessageChannel===void 0)l="document"in a&&"onreadystatechange"in a.document.createElement("script")?function(){var b=a.document.createElement("script");b.onreadystatechange=function(){C(),b.onreadystatechange=null,b.parentNode.removeChild(b),b=null},a.document.documentElement.appendChild(b)}:function(){setTimeout(C,0)};else{var T=new a.MessageChannel;T.port1.onmessage=C,l=function(){T.port2.postMessage(0)}}var w=[];function C(){var b,x;c=!0;for(var N=w.length;N;){for(x=w,w=[],b=-1;++b<N;)x[b]();N=w.length}c=!1}i.exports=function(b){w.push(b)!==1||c||l()}}).call(this,typeof wd<"u"?wd:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(t,i,s){var a=t("immediate");function l(){}var c={},f=["REJECTED"],h=["FULFILLED"],y=["PENDING"];function E(N){if(typeof N!="function")throw new TypeError("resolver must be a function");this.state=y,this.queue=[],this.outcome=void 0,N!==l&&b(this,N)}function T(N,z,B){this.promise=N,typeof z=="function"&&(this.onFulfilled=z,this.callFulfilled=this.otherCallFulfilled),typeof B=="function"&&(this.onRejected=B,this.callRejected=this.otherCallRejected)}function w(N,z,B){a(function(){var Y;try{Y=z(B)}catch(J){return c.reject(N,J)}Y===N?c.reject(N,new TypeError("Cannot resolve promise with itself")):c.resolve(N,Y)})}function C(N){var z=N&&N.then;if(N&&(typeof N=="object"||typeof N=="function")&&typeof z=="function")return function(){z.apply(N,arguments)}}function b(N,z){var B=!1;function Y(L){B||(B=!0,c.reject(N,L))}function J(L){B||(B=!0,c.resolve(N,L))}var $=x(function(){z(J,Y)});$.status==="error"&&Y($.value)}function x(N,z){var B={};try{B.value=N(z),B.status="success"}catch(Y){B.status="error",B.value=Y}return B}(i.exports=E).prototype.finally=function(N){if(typeof N!="function")return this;var z=this.constructor;return this.then(function(B){return z.resolve(N()).then(function(){return B})},function(B){return z.resolve(N()).then(function(){throw B})})},E.prototype.catch=function(N){return this.then(null,N)},E.prototype.then=function(N,z){if(typeof N!="function"&&this.state===h||typeof z!="function"&&this.state===f)return this;var B=new this.constructor(l);return this.state!==y?w(B,this.state===h?N:z,this.outcome):this.queue.push(new T(B,N,z)),B},T.prototype.callFulfilled=function(N){c.resolve(this.promise,N)},T.prototype.otherCallFulfilled=function(N){w(this.promise,this.onFulfilled,N)},T.prototype.callRejected=function(N){c.reject(this.promise,N)},T.prototype.otherCallRejected=function(N){w(this.promise,this.onRejected,N)},c.resolve=function(N,z){var B=x(C,z);if(B.status==="error")return c.reject(N,B.value);var Y=B.value;if(Y)b(N,Y);else{N.state=h,N.outcome=z;for(var J=-1,$=N.queue.length;++J<$;)N.queue[J].callFulfilled(z)}return N},c.reject=function(N,z){N.state=f,N.outcome=z;for(var B=-1,Y=N.queue.length;++B<Y;)N.queue[B].callRejected(z);return N},E.resolve=function(N){return N instanceof this?N:c.resolve(new this(l),N)},E.reject=function(N){var z=new this(l);return c.reject(z,N)},E.all=function(N){var z=this;if(Object.prototype.toString.call(N)!=="[object Array]")return this.reject(new TypeError("must be an array"));var B=N.length,Y=!1;if(!B)return this.resolve([]);for(var J=new Array(B),$=0,L=-1,V=new this(l);++L<B;)k(N[L],L);return V;function k(H,K){z.resolve(H).then(function(U){J[K]=U,++$!==B||Y||(Y=!0,c.resolve(V,J))},function(U){Y||(Y=!0,c.reject(V,U))})}},E.race=function(N){var z=this;if(Object.prototype.toString.call(N)!=="[object Array]")return this.reject(new TypeError("must be an array"));var B=N.length,Y=!1;if(!B)return this.resolve([]);for(var J=-1,$=new this(l);++J<B;)L=N[J],z.resolve(L).then(function(V){Y||(Y=!0,c.resolve($,V))},function(V){Y||(Y=!0,c.reject($,V))});var L;return $}},{immediate:36}],38:[function(t,i,s){var a={};(0,t("./lib/utils/common").assign)(a,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),i.exports=a},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,i,s){var a=t("./zlib/deflate"),l=t("./utils/common"),c=t("./utils/strings"),f=t("./zlib/messages"),h=t("./zlib/zstream"),y=Object.prototype.toString,E=0,T=-1,w=0,C=8;function b(N){if(!(this instanceof b))return new b(N);this.options=l.assign({level:T,method:C,chunkSize:16384,windowBits:15,memLevel:8,strategy:w,to:""},N||{});var z=this.options;z.raw&&0<z.windowBits?z.windowBits=-z.windowBits:z.gzip&&0<z.windowBits&&z.windowBits<16&&(z.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new h,this.strm.avail_out=0;var B=a.deflateInit2(this.strm,z.level,z.method,z.windowBits,z.memLevel,z.strategy);if(B!==E)throw new Error(f[B]);if(z.header&&a.deflateSetHeader(this.strm,z.header),z.dictionary){var Y;if(Y=typeof z.dictionary=="string"?c.string2buf(z.dictionary):y.call(z.dictionary)==="[object ArrayBuffer]"?new Uint8Array(z.dictionary):z.dictionary,(B=a.deflateSetDictionary(this.strm,Y))!==E)throw new Error(f[B]);this._dict_set=!0}}function x(N,z){var B=new b(z);if(B.push(N,!0),B.err)throw B.msg||f[B.err];return B.result}b.prototype.push=function(N,z){var B,Y,J=this.strm,$=this.options.chunkSize;if(this.ended)return!1;Y=z===~~z?z:z===!0?4:0,typeof N=="string"?J.input=c.string2buf(N):y.call(N)==="[object ArrayBuffer]"?J.input=new Uint8Array(N):J.input=N,J.next_in=0,J.avail_in=J.input.length;do{if(J.avail_out===0&&(J.output=new l.Buf8($),J.next_out=0,J.avail_out=$),(B=a.deflate(J,Y))!==1&&B!==E)return this.onEnd(B),!(this.ended=!0);J.avail_out!==0&&(J.avail_in!==0||Y!==4&&Y!==2)||(this.options.to==="string"?this.onData(c.buf2binstring(l.shrinkBuf(J.output,J.next_out))):this.onData(l.shrinkBuf(J.output,J.next_out)))}while((0<J.avail_in||J.avail_out===0)&&B!==1);return Y===4?(B=a.deflateEnd(this.strm),this.onEnd(B),this.ended=!0,B===E):Y!==2||(this.onEnd(E),!(J.avail_out=0))},b.prototype.onData=function(N){this.chunks.push(N)},b.prototype.onEnd=function(N){N===E&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=l.flattenChunks(this.chunks)),this.chunks=[],this.err=N,this.msg=this.strm.msg},s.Deflate=b,s.deflate=x,s.deflateRaw=function(N,z){return(z=z||{}).raw=!0,x(N,z)},s.gzip=function(N,z){return(z=z||{}).gzip=!0,x(N,z)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,i,s){var a=t("./zlib/inflate"),l=t("./utils/common"),c=t("./utils/strings"),f=t("./zlib/constants"),h=t("./zlib/messages"),y=t("./zlib/zstream"),E=t("./zlib/gzheader"),T=Object.prototype.toString;function w(b){if(!(this instanceof w))return new w(b);this.options=l.assign({chunkSize:16384,windowBits:0,to:""},b||{});var x=this.options;x.raw&&0<=x.windowBits&&x.windowBits<16&&(x.windowBits=-x.windowBits,x.windowBits===0&&(x.windowBits=-15)),!(0<=x.windowBits&&x.windowBits<16)||b&&b.windowBits||(x.windowBits+=32),15<x.windowBits&&x.windowBits<48&&(15&x.windowBits)==0&&(x.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new y,this.strm.avail_out=0;var N=a.inflateInit2(this.strm,x.windowBits);if(N!==f.Z_OK)throw new Error(h[N]);this.header=new E,a.inflateGetHeader(this.strm,this.header)}function C(b,x){var N=new w(x);if(N.push(b,!0),N.err)throw N.msg||h[N.err];return N.result}w.prototype.push=function(b,x){var N,z,B,Y,J,$,L=this.strm,V=this.options.chunkSize,k=this.options.dictionary,H=!1;if(this.ended)return!1;z=x===~~x?x:x===!0?f.Z_FINISH:f.Z_NO_FLUSH,typeof b=="string"?L.input=c.binstring2buf(b):T.call(b)==="[object ArrayBuffer]"?L.input=new Uint8Array(b):L.input=b,L.next_in=0,L.avail_in=L.input.length;do{if(L.avail_out===0&&(L.output=new l.Buf8(V),L.next_out=0,L.avail_out=V),(N=a.inflate(L,f.Z_NO_FLUSH))===f.Z_NEED_DICT&&k&&($=typeof k=="string"?c.string2buf(k):T.call(k)==="[object ArrayBuffer]"?new Uint8Array(k):k,N=a.inflateSetDictionary(this.strm,$)),N===f.Z_BUF_ERROR&&H===!0&&(N=f.Z_OK,H=!1),N!==f.Z_STREAM_END&&N!==f.Z_OK)return this.onEnd(N),!(this.ended=!0);L.next_out&&(L.avail_out!==0&&N!==f.Z_STREAM_END&&(L.avail_in!==0||z!==f.Z_FINISH&&z!==f.Z_SYNC_FLUSH)||(this.options.to==="string"?(B=c.utf8border(L.output,L.next_out),Y=L.next_out-B,J=c.buf2string(L.output,B),L.next_out=Y,L.avail_out=V-Y,Y&&l.arraySet(L.output,L.output,B,Y,0),this.onData(J)):this.onData(l.shrinkBuf(L.output,L.next_out)))),L.avail_in===0&&L.avail_out===0&&(H=!0)}while((0<L.avail_in||L.avail_out===0)&&N!==f.Z_STREAM_END);return N===f.Z_STREAM_END&&(z=f.Z_FINISH),z===f.Z_FINISH?(N=a.inflateEnd(this.strm),this.onEnd(N),this.ended=!0,N===f.Z_OK):z!==f.Z_SYNC_FLUSH||(this.onEnd(f.Z_OK),!(L.avail_out=0))},w.prototype.onData=function(b){this.chunks.push(b)},w.prototype.onEnd=function(b){b===f.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=l.flattenChunks(this.chunks)),this.chunks=[],this.err=b,this.msg=this.strm.msg},s.Inflate=w,s.inflate=C,s.inflateRaw=function(b,x){return(x=x||{}).raw=!0,C(b,x)},s.ungzip=C},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,i,s){var a=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";s.assign=function(f){for(var h=Array.prototype.slice.call(arguments,1);h.length;){var y=h.shift();if(y){if(typeof y!="object")throw new TypeError(y+"must be non-object");for(var E in y)y.hasOwnProperty(E)&&(f[E]=y[E])}}return f},s.shrinkBuf=function(f,h){return f.length===h?f:f.subarray?f.subarray(0,h):(f.length=h,f)};var l={arraySet:function(f,h,y,E,T){if(h.subarray&&f.subarray)f.set(h.subarray(y,y+E),T);else for(var w=0;w<E;w++)f[T+w]=h[y+w]},flattenChunks:function(f){var h,y,E,T,w,C;for(h=E=0,y=f.length;h<y;h++)E+=f[h].length;for(C=new Uint8Array(E),h=T=0,y=f.length;h<y;h++)w=f[h],C.set(w,T),T+=w.length;return C}},c={arraySet:function(f,h,y,E,T){for(var w=0;w<E;w++)f[T+w]=h[y+w]},flattenChunks:function(f){return[].concat.apply([],f)}};s.setTyped=function(f){f?(s.Buf8=Uint8Array,s.Buf16=Uint16Array,s.Buf32=Int32Array,s.assign(s,l)):(s.Buf8=Array,s.Buf16=Array,s.Buf32=Array,s.assign(s,c))},s.setTyped(a)},{}],42:[function(t,i,s){var a=t("./common"),l=!0,c=!0;try{String.fromCharCode.apply(null,[0])}catch{l=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{c=!1}for(var f=new a.Buf8(256),h=0;h<256;h++)f[h]=252<=h?6:248<=h?5:240<=h?4:224<=h?3:192<=h?2:1;function y(E,T){if(T<65537&&(E.subarray&&c||!E.subarray&&l))return String.fromCharCode.apply(null,a.shrinkBuf(E,T));for(var w="",C=0;C<T;C++)w+=String.fromCharCode(E[C]);return w}f[254]=f[254]=1,s.string2buf=function(E){var T,w,C,b,x,N=E.length,z=0;for(b=0;b<N;b++)(64512&(w=E.charCodeAt(b)))==55296&&b+1<N&&(64512&(C=E.charCodeAt(b+1)))==56320&&(w=65536+(w-55296<<10)+(C-56320),b++),z+=w<128?1:w<2048?2:w<65536?3:4;for(T=new a.Buf8(z),b=x=0;x<z;b++)(64512&(w=E.charCodeAt(b)))==55296&&b+1<N&&(64512&(C=E.charCodeAt(b+1)))==56320&&(w=65536+(w-55296<<10)+(C-56320),b++),w<128?T[x++]=w:(w<2048?T[x++]=192|w>>>6:(w<65536?T[x++]=224|w>>>12:(T[x++]=240|w>>>18,T[x++]=128|w>>>12&63),T[x++]=128|w>>>6&63),T[x++]=128|63&w);return T},s.buf2binstring=function(E){return y(E,E.length)},s.binstring2buf=function(E){for(var T=new a.Buf8(E.length),w=0,C=T.length;w<C;w++)T[w]=E.charCodeAt(w);return T},s.buf2string=function(E,T){var w,C,b,x,N=T||E.length,z=new Array(2*N);for(w=C=0;w<N;)if((b=E[w++])<128)z[C++]=b;else if(4<(x=f[b]))z[C++]=65533,w+=x-1;else{for(b&=x===2?31:x===3?15:7;1<x&&w<N;)b=b<<6|63&E[w++],x--;1<x?z[C++]=65533:b<65536?z[C++]=b:(b-=65536,z[C++]=55296|b>>10&1023,z[C++]=56320|1023&b)}return y(z,C)},s.utf8border=function(E,T){var w;for((T=T||E.length)>E.length&&(T=E.length),w=T-1;0<=w&&(192&E[w])==128;)w--;return w<0||w===0?T:w+f[E[w]]>T?w:T}},{"./common":41}],43:[function(t,i,s){i.exports=function(a,l,c,f){for(var h=65535&a|0,y=a>>>16&65535|0,E=0;c!==0;){for(c-=E=2e3<c?2e3:c;y=y+(h=h+l[f++]|0)|0,--E;);h%=65521,y%=65521}return h|y<<16|0}},{}],44:[function(t,i,s){i.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,i,s){var a=(function(){for(var l,c=[],f=0;f<256;f++){l=f;for(var h=0;h<8;h++)l=1&l?3988292384^l>>>1:l>>>1;c[f]=l}return c})();i.exports=function(l,c,f,h){var y=a,E=h+f;l^=-1;for(var T=h;T<E;T++)l=l>>>8^y[255&(l^c[T])];return-1^l}},{}],46:[function(t,i,s){var a,l=t("../utils/common"),c=t("./trees"),f=t("./adler32"),h=t("./crc32"),y=t("./messages"),E=0,T=4,w=0,C=-2,b=-1,x=4,N=2,z=8,B=9,Y=286,J=30,$=19,L=2*Y+1,V=15,k=3,H=258,K=H+k+1,U=42,O=113,D=1,he=2,ie=3,re=4;function be(R,_e){return R.msg=y[_e],_e}function ne(R){return(R<<1)-(4<R?9:0)}function Te(R){for(var _e=R.length;0<=--_e;)R[_e]=0}function P(R){var _e=R.state,pe=_e.pending;pe>R.avail_out&&(pe=R.avail_out),pe!==0&&(l.arraySet(R.output,_e.pending_buf,_e.pending_out,pe,R.next_out),R.next_out+=pe,_e.pending_out+=pe,R.total_out+=pe,R.avail_out-=pe,_e.pending-=pe,_e.pending===0&&(_e.pending_out=0))}function G(R,_e){c._tr_flush_block(R,0<=R.block_start?R.block_start:-1,R.strstart-R.block_start,_e),R.block_start=R.strstart,P(R.strm)}function oe(R,_e){R.pending_buf[R.pending++]=_e}function Q(R,_e){R.pending_buf[R.pending++]=_e>>>8&255,R.pending_buf[R.pending++]=255&_e}function Z(R,_e){var pe,W,j=R.max_chain_length,te=R.strstart,ve=R.prev_length,Ce=R.nice_match,ce=R.strstart>R.w_size-K?R.strstart-(R.w_size-K):0,Ie=R.window,ke=R.w_mask,Re=R.prev,Fe=R.strstart+H,ht=Ie[te+ve-1],Ze=Ie[te+ve];R.prev_length>=R.good_match&&(j>>=2),Ce>R.lookahead&&(Ce=R.lookahead);do if(Ie[(pe=_e)+ve]===Ze&&Ie[pe+ve-1]===ht&&Ie[pe]===Ie[te]&&Ie[++pe]===Ie[te+1]){te+=2,pe++;do;while(Ie[++te]===Ie[++pe]&&Ie[++te]===Ie[++pe]&&Ie[++te]===Ie[++pe]&&Ie[++te]===Ie[++pe]&&Ie[++te]===Ie[++pe]&&Ie[++te]===Ie[++pe]&&Ie[++te]===Ie[++pe]&&Ie[++te]===Ie[++pe]&&te<Fe);if(W=H-(Fe-te),te=Fe-H,ve<W){if(R.match_start=_e,Ce<=(ve=W))break;ht=Ie[te+ve-1],Ze=Ie[te+ve]}}while((_e=Re[_e&ke])>ce&&--j!=0);return ve<=R.lookahead?ve:R.lookahead}function ge(R){var _e,pe,W,j,te,ve,Ce,ce,Ie,ke,Re=R.w_size;do{if(j=R.window_size-R.lookahead-R.strstart,R.strstart>=Re+(Re-K)){for(l.arraySet(R.window,R.window,Re,Re,0),R.match_start-=Re,R.strstart-=Re,R.block_start-=Re,_e=pe=R.hash_size;W=R.head[--_e],R.head[_e]=Re<=W?W-Re:0,--pe;);for(_e=pe=Re;W=R.prev[--_e],R.prev[_e]=Re<=W?W-Re:0,--pe;);j+=Re}if(R.strm.avail_in===0)break;if(ve=R.strm,Ce=R.window,ce=R.strstart+R.lookahead,Ie=j,ke=void 0,ke=ve.avail_in,Ie<ke&&(ke=Ie),pe=ke===0?0:(ve.avail_in-=ke,l.arraySet(Ce,ve.input,ve.next_in,ke,ce),ve.state.wrap===1?ve.adler=f(ve.adler,Ce,ke,ce):ve.state.wrap===2&&(ve.adler=h(ve.adler,Ce,ke,ce)),ve.next_in+=ke,ve.total_in+=ke,ke),R.lookahead+=pe,R.lookahead+R.insert>=k)for(te=R.strstart-R.insert,R.ins_h=R.window[te],R.ins_h=(R.ins_h<<R.hash_shift^R.window[te+1])&R.hash_mask;R.insert&&(R.ins_h=(R.ins_h<<R.hash_shift^R.window[te+k-1])&R.hash_mask,R.prev[te&R.w_mask]=R.head[R.ins_h],R.head[R.ins_h]=te,te++,R.insert--,!(R.lookahead+R.insert<k)););}while(R.lookahead<K&&R.strm.avail_in!==0)}function Ae(R,_e){for(var pe,W;;){if(R.lookahead<K){if(ge(R),R.lookahead<K&&_e===E)return D;if(R.lookahead===0)break}if(pe=0,R.lookahead>=k&&(R.ins_h=(R.ins_h<<R.hash_shift^R.window[R.strstart+k-1])&R.hash_mask,pe=R.prev[R.strstart&R.w_mask]=R.head[R.ins_h],R.head[R.ins_h]=R.strstart),pe!==0&&R.strstart-pe<=R.w_size-K&&(R.match_length=Z(R,pe)),R.match_length>=k)if(W=c._tr_tally(R,R.strstart-R.match_start,R.match_length-k),R.lookahead-=R.match_length,R.match_length<=R.max_lazy_match&&R.lookahead>=k){for(R.match_length--;R.strstart++,R.ins_h=(R.ins_h<<R.hash_shift^R.window[R.strstart+k-1])&R.hash_mask,pe=R.prev[R.strstart&R.w_mask]=R.head[R.ins_h],R.head[R.ins_h]=R.strstart,--R.match_length!=0;);R.strstart++}else R.strstart+=R.match_length,R.match_length=0,R.ins_h=R.window[R.strstart],R.ins_h=(R.ins_h<<R.hash_shift^R.window[R.strstart+1])&R.hash_mask;else W=c._tr_tally(R,0,R.window[R.strstart]),R.lookahead--,R.strstart++;if(W&&(G(R,!1),R.strm.avail_out===0))return D}return R.insert=R.strstart<k-1?R.strstart:k-1,_e===T?(G(R,!0),R.strm.avail_out===0?ie:re):R.last_lit&&(G(R,!1),R.strm.avail_out===0)?D:he}function Ne(R,_e){for(var pe,W,j;;){if(R.lookahead<K){if(ge(R),R.lookahead<K&&_e===E)return D;if(R.lookahead===0)break}if(pe=0,R.lookahead>=k&&(R.ins_h=(R.ins_h<<R.hash_shift^R.window[R.strstart+k-1])&R.hash_mask,pe=R.prev[R.strstart&R.w_mask]=R.head[R.ins_h],R.head[R.ins_h]=R.strstart),R.prev_length=R.match_length,R.prev_match=R.match_start,R.match_length=k-1,pe!==0&&R.prev_length<R.max_lazy_match&&R.strstart-pe<=R.w_size-K&&(R.match_length=Z(R,pe),R.match_length<=5&&(R.strategy===1||R.match_length===k&&4096<R.strstart-R.match_start)&&(R.match_length=k-1)),R.prev_length>=k&&R.match_length<=R.prev_length){for(j=R.strstart+R.lookahead-k,W=c._tr_tally(R,R.strstart-1-R.prev_match,R.prev_length-k),R.lookahead-=R.prev_length-1,R.prev_length-=2;++R.strstart<=j&&(R.ins_h=(R.ins_h<<R.hash_shift^R.window[R.strstart+k-1])&R.hash_mask,pe=R.prev[R.strstart&R.w_mask]=R.head[R.ins_h],R.head[R.ins_h]=R.strstart),--R.prev_length!=0;);if(R.match_available=0,R.match_length=k-1,R.strstart++,W&&(G(R,!1),R.strm.avail_out===0))return D}else if(R.match_available){if((W=c._tr_tally(R,0,R.window[R.strstart-1]))&&G(R,!1),R.strstart++,R.lookahead--,R.strm.avail_out===0)return D}else R.match_available=1,R.strstart++,R.lookahead--}return R.match_available&&(W=c._tr_tally(R,0,R.window[R.strstart-1]),R.match_available=0),R.insert=R.strstart<k-1?R.strstart:k-1,_e===T?(G(R,!0),R.strm.avail_out===0?ie:re):R.last_lit&&(G(R,!1),R.strm.avail_out===0)?D:he}function De(R,_e,pe,W,j){this.good_length=R,this.max_lazy=_e,this.nice_length=pe,this.max_chain=W,this.func=j}function je(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=z,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new l.Buf16(2*L),this.dyn_dtree=new l.Buf16(2*(2*J+1)),this.bl_tree=new l.Buf16(2*(2*$+1)),Te(this.dyn_ltree),Te(this.dyn_dtree),Te(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new l.Buf16(V+1),this.heap=new l.Buf16(2*Y+1),Te(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new l.Buf16(2*Y+1),Te(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function $e(R){var _e;return R&&R.state?(R.total_in=R.total_out=0,R.data_type=N,(_e=R.state).pending=0,_e.pending_out=0,_e.wrap<0&&(_e.wrap=-_e.wrap),_e.status=_e.wrap?U:O,R.adler=_e.wrap===2?0:1,_e.last_flush=E,c._tr_init(_e),w):be(R,C)}function Et(R){var _e=$e(R);return _e===w&&(function(pe){pe.window_size=2*pe.w_size,Te(pe.head),pe.max_lazy_match=a[pe.level].max_lazy,pe.good_match=a[pe.level].good_length,pe.nice_match=a[pe.level].nice_length,pe.max_chain_length=a[pe.level].max_chain,pe.strstart=0,pe.block_start=0,pe.lookahead=0,pe.insert=0,pe.match_length=pe.prev_length=k-1,pe.match_available=0,pe.ins_h=0})(R.state),_e}function kt(R,_e,pe,W,j,te){if(!R)return C;var ve=1;if(_e===b&&(_e=6),W<0?(ve=0,W=-W):15<W&&(ve=2,W-=16),j<1||B<j||pe!==z||W<8||15<W||_e<0||9<_e||te<0||x<te)return be(R,C);W===8&&(W=9);var Ce=new je;return(R.state=Ce).strm=R,Ce.wrap=ve,Ce.gzhead=null,Ce.w_bits=W,Ce.w_size=1<<Ce.w_bits,Ce.w_mask=Ce.w_size-1,Ce.hash_bits=j+7,Ce.hash_size=1<<Ce.hash_bits,Ce.hash_mask=Ce.hash_size-1,Ce.hash_shift=~~((Ce.hash_bits+k-1)/k),Ce.window=new l.Buf8(2*Ce.w_size),Ce.head=new l.Buf16(Ce.hash_size),Ce.prev=new l.Buf16(Ce.w_size),Ce.lit_bufsize=1<<j+6,Ce.pending_buf_size=4*Ce.lit_bufsize,Ce.pending_buf=new l.Buf8(Ce.pending_buf_size),Ce.d_buf=1*Ce.lit_bufsize,Ce.l_buf=3*Ce.lit_bufsize,Ce.level=_e,Ce.strategy=te,Ce.method=pe,Et(R)}a=[new De(0,0,0,0,function(R,_e){var pe=65535;for(pe>R.pending_buf_size-5&&(pe=R.pending_buf_size-5);;){if(R.lookahead<=1){if(ge(R),R.lookahead===0&&_e===E)return D;if(R.lookahead===0)break}R.strstart+=R.lookahead,R.lookahead=0;var W=R.block_start+pe;if((R.strstart===0||R.strstart>=W)&&(R.lookahead=R.strstart-W,R.strstart=W,G(R,!1),R.strm.avail_out===0)||R.strstart-R.block_start>=R.w_size-K&&(G(R,!1),R.strm.avail_out===0))return D}return R.insert=0,_e===T?(G(R,!0),R.strm.avail_out===0?ie:re):(R.strstart>R.block_start&&(G(R,!1),R.strm.avail_out),D)}),new De(4,4,8,4,Ae),new De(4,5,16,8,Ae),new De(4,6,32,32,Ae),new De(4,4,16,16,Ne),new De(8,16,32,32,Ne),new De(8,16,128,128,Ne),new De(8,32,128,256,Ne),new De(32,128,258,1024,Ne),new De(32,258,258,4096,Ne)],s.deflateInit=function(R,_e){return kt(R,_e,z,15,8,0)},s.deflateInit2=kt,s.deflateReset=Et,s.deflateResetKeep=$e,s.deflateSetHeader=function(R,_e){return R&&R.state?R.state.wrap!==2?C:(R.state.gzhead=_e,w):C},s.deflate=function(R,_e){var pe,W,j,te;if(!R||!R.state||5<_e||_e<0)return R?be(R,C):C;if(W=R.state,!R.output||!R.input&&R.avail_in!==0||W.status===666&&_e!==T)return be(R,R.avail_out===0?-5:C);if(W.strm=R,pe=W.last_flush,W.last_flush=_e,W.status===U)if(W.wrap===2)R.adler=0,oe(W,31),oe(W,139),oe(W,8),W.gzhead?(oe(W,(W.gzhead.text?1:0)+(W.gzhead.hcrc?2:0)+(W.gzhead.extra?4:0)+(W.gzhead.name?8:0)+(W.gzhead.comment?16:0)),oe(W,255&W.gzhead.time),oe(W,W.gzhead.time>>8&255),oe(W,W.gzhead.time>>16&255),oe(W,W.gzhead.time>>24&255),oe(W,W.level===9?2:2<=W.strategy||W.level<2?4:0),oe(W,255&W.gzhead.os),W.gzhead.extra&&W.gzhead.extra.length&&(oe(W,255&W.gzhead.extra.length),oe(W,W.gzhead.extra.length>>8&255)),W.gzhead.hcrc&&(R.adler=h(R.adler,W.pending_buf,W.pending,0)),W.gzindex=0,W.status=69):(oe(W,0),oe(W,0),oe(W,0),oe(W,0),oe(W,0),oe(W,W.level===9?2:2<=W.strategy||W.level<2?4:0),oe(W,3),W.status=O);else{var ve=z+(W.w_bits-8<<4)<<8;ve|=(2<=W.strategy||W.level<2?0:W.level<6?1:W.level===6?2:3)<<6,W.strstart!==0&&(ve|=32),ve+=31-ve%31,W.status=O,Q(W,ve),W.strstart!==0&&(Q(W,R.adler>>>16),Q(W,65535&R.adler)),R.adler=1}if(W.status===69)if(W.gzhead.extra){for(j=W.pending;W.gzindex<(65535&W.gzhead.extra.length)&&(W.pending!==W.pending_buf_size||(W.gzhead.hcrc&&W.pending>j&&(R.adler=h(R.adler,W.pending_buf,W.pending-j,j)),P(R),j=W.pending,W.pending!==W.pending_buf_size));)oe(W,255&W.gzhead.extra[W.gzindex]),W.gzindex++;W.gzhead.hcrc&&W.pending>j&&(R.adler=h(R.adler,W.pending_buf,W.pending-j,j)),W.gzindex===W.gzhead.extra.length&&(W.gzindex=0,W.status=73)}else W.status=73;if(W.status===73)if(W.gzhead.name){j=W.pending;do{if(W.pending===W.pending_buf_size&&(W.gzhead.hcrc&&W.pending>j&&(R.adler=h(R.adler,W.pending_buf,W.pending-j,j)),P(R),j=W.pending,W.pending===W.pending_buf_size)){te=1;break}te=W.gzindex<W.gzhead.name.length?255&W.gzhead.name.charCodeAt(W.gzindex++):0,oe(W,te)}while(te!==0);W.gzhead.hcrc&&W.pending>j&&(R.adler=h(R.adler,W.pending_buf,W.pending-j,j)),te===0&&(W.gzindex=0,W.status=91)}else W.status=91;if(W.status===91)if(W.gzhead.comment){j=W.pending;do{if(W.pending===W.pending_buf_size&&(W.gzhead.hcrc&&W.pending>j&&(R.adler=h(R.adler,W.pending_buf,W.pending-j,j)),P(R),j=W.pending,W.pending===W.pending_buf_size)){te=1;break}te=W.gzindex<W.gzhead.comment.length?255&W.gzhead.comment.charCodeAt(W.gzindex++):0,oe(W,te)}while(te!==0);W.gzhead.hcrc&&W.pending>j&&(R.adler=h(R.adler,W.pending_buf,W.pending-j,j)),te===0&&(W.status=103)}else W.status=103;if(W.status===103&&(W.gzhead.hcrc?(W.pending+2>W.pending_buf_size&&P(R),W.pending+2<=W.pending_buf_size&&(oe(W,255&R.adler),oe(W,R.adler>>8&255),R.adler=0,W.status=O)):W.status=O),W.pending!==0){if(P(R),R.avail_out===0)return W.last_flush=-1,w}else if(R.avail_in===0&&ne(_e)<=ne(pe)&&_e!==T)return be(R,-5);if(W.status===666&&R.avail_in!==0)return be(R,-5);if(R.avail_in!==0||W.lookahead!==0||_e!==E&&W.status!==666){var Ce=W.strategy===2?(function(ce,Ie){for(var ke;;){if(ce.lookahead===0&&(ge(ce),ce.lookahead===0)){if(Ie===E)return D;break}if(ce.match_length=0,ke=c._tr_tally(ce,0,ce.window[ce.strstart]),ce.lookahead--,ce.strstart++,ke&&(G(ce,!1),ce.strm.avail_out===0))return D}return ce.insert=0,Ie===T?(G(ce,!0),ce.strm.avail_out===0?ie:re):ce.last_lit&&(G(ce,!1),ce.strm.avail_out===0)?D:he})(W,_e):W.strategy===3?(function(ce,Ie){for(var ke,Re,Fe,ht,Ze=ce.window;;){if(ce.lookahead<=H){if(ge(ce),ce.lookahead<=H&&Ie===E)return D;if(ce.lookahead===0)break}if(ce.match_length=0,ce.lookahead>=k&&0<ce.strstart&&(Re=Ze[Fe=ce.strstart-1])===Ze[++Fe]&&Re===Ze[++Fe]&&Re===Ze[++Fe]){ht=ce.strstart+H;do;while(Re===Ze[++Fe]&&Re===Ze[++Fe]&&Re===Ze[++Fe]&&Re===Ze[++Fe]&&Re===Ze[++Fe]&&Re===Ze[++Fe]&&Re===Ze[++Fe]&&Re===Ze[++Fe]&&Fe<ht);ce.match_length=H-(ht-Fe),ce.match_length>ce.lookahead&&(ce.match_length=ce.lookahead)}if(ce.match_length>=k?(ke=c._tr_tally(ce,1,ce.match_length-k),ce.lookahead-=ce.match_length,ce.strstart+=ce.match_length,ce.match_length=0):(ke=c._tr_tally(ce,0,ce.window[ce.strstart]),ce.lookahead--,ce.strstart++),ke&&(G(ce,!1),ce.strm.avail_out===0))return D}return ce.insert=0,Ie===T?(G(ce,!0),ce.strm.avail_out===0?ie:re):ce.last_lit&&(G(ce,!1),ce.strm.avail_out===0)?D:he})(W,_e):a[W.level].func(W,_e);if(Ce!==ie&&Ce!==re||(W.status=666),Ce===D||Ce===ie)return R.avail_out===0&&(W.last_flush=-1),w;if(Ce===he&&(_e===1?c._tr_align(W):_e!==5&&(c._tr_stored_block(W,0,0,!1),_e===3&&(Te(W.head),W.lookahead===0&&(W.strstart=0,W.block_start=0,W.insert=0))),P(R),R.avail_out===0))return W.last_flush=-1,w}return _e!==T?w:W.wrap<=0?1:(W.wrap===2?(oe(W,255&R.adler),oe(W,R.adler>>8&255),oe(W,R.adler>>16&255),oe(W,R.adler>>24&255),oe(W,255&R.total_in),oe(W,R.total_in>>8&255),oe(W,R.total_in>>16&255),oe(W,R.total_in>>24&255)):(Q(W,R.adler>>>16),Q(W,65535&R.adler)),P(R),0<W.wrap&&(W.wrap=-W.wrap),W.pending!==0?w:1)},s.deflateEnd=function(R){var _e;return R&&R.state?(_e=R.state.status)!==U&&_e!==69&&_e!==73&&_e!==91&&_e!==103&&_e!==O&&_e!==666?be(R,C):(R.state=null,_e===O?be(R,-3):w):C},s.deflateSetDictionary=function(R,_e){var pe,W,j,te,ve,Ce,ce,Ie,ke=_e.length;if(!R||!R.state||(te=(pe=R.state).wrap)===2||te===1&&pe.status!==U||pe.lookahead)return C;for(te===1&&(R.adler=f(R.adler,_e,ke,0)),pe.wrap=0,ke>=pe.w_size&&(te===0&&(Te(pe.head),pe.strstart=0,pe.block_start=0,pe.insert=0),Ie=new l.Buf8(pe.w_size),l.arraySet(Ie,_e,ke-pe.w_size,pe.w_size,0),_e=Ie,ke=pe.w_size),ve=R.avail_in,Ce=R.next_in,ce=R.input,R.avail_in=ke,R.next_in=0,R.input=_e,ge(pe);pe.lookahead>=k;){for(W=pe.strstart,j=pe.lookahead-(k-1);pe.ins_h=(pe.ins_h<<pe.hash_shift^pe.window[W+k-1])&pe.hash_mask,pe.prev[W&pe.w_mask]=pe.head[pe.ins_h],pe.head[pe.ins_h]=W,W++,--j;);pe.strstart=W,pe.lookahead=k-1,ge(pe)}return pe.strstart+=pe.lookahead,pe.block_start=pe.strstart,pe.insert=pe.lookahead,pe.lookahead=0,pe.match_length=pe.prev_length=k-1,pe.match_available=0,R.next_in=Ce,R.input=ce,R.avail_in=ve,pe.wrap=te,w},s.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,i,s){i.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,i,s){i.exports=function(a,l){var c,f,h,y,E,T,w,C,b,x,N,z,B,Y,J,$,L,V,k,H,K,U,O,D,he;c=a.state,f=a.next_in,D=a.input,h=f+(a.avail_in-5),y=a.next_out,he=a.output,E=y-(l-a.avail_out),T=y+(a.avail_out-257),w=c.dmax,C=c.wsize,b=c.whave,x=c.wnext,N=c.window,z=c.hold,B=c.bits,Y=c.lencode,J=c.distcode,$=(1<<c.lenbits)-1,L=(1<<c.distbits)-1;e:do{B<15&&(z+=D[f++]<<B,B+=8,z+=D[f++]<<B,B+=8),V=Y[z&$];t:for(;;){if(z>>>=k=V>>>24,B-=k,(k=V>>>16&255)===0)he[y++]=65535&V;else{if(!(16&k)){if((64&k)==0){V=Y[(65535&V)+(z&(1<<k)-1)];continue t}if(32&k){c.mode=12;break e}a.msg="invalid literal/length code",c.mode=30;break e}H=65535&V,(k&=15)&&(B<k&&(z+=D[f++]<<B,B+=8),H+=z&(1<<k)-1,z>>>=k,B-=k),B<15&&(z+=D[f++]<<B,B+=8,z+=D[f++]<<B,B+=8),V=J[z&L];n:for(;;){if(z>>>=k=V>>>24,B-=k,!(16&(k=V>>>16&255))){if((64&k)==0){V=J[(65535&V)+(z&(1<<k)-1)];continue n}a.msg="invalid distance code",c.mode=30;break e}if(K=65535&V,B<(k&=15)&&(z+=D[f++]<<B,(B+=8)<k&&(z+=D[f++]<<B,B+=8)),w<(K+=z&(1<<k)-1)){a.msg="invalid distance too far back",c.mode=30;break e}if(z>>>=k,B-=k,(k=y-E)<K){if(b<(k=K-k)&&c.sane){a.msg="invalid distance too far back",c.mode=30;break e}if(O=N,(U=0)===x){if(U+=C-k,k<H){for(H-=k;he[y++]=N[U++],--k;);U=y-K,O=he}}else if(x<k){if(U+=C+x-k,(k-=x)<H){for(H-=k;he[y++]=N[U++],--k;);if(U=0,x<H){for(H-=k=x;he[y++]=N[U++],--k;);U=y-K,O=he}}}else if(U+=x-k,k<H){for(H-=k;he[y++]=N[U++],--k;);U=y-K,O=he}for(;2<H;)he[y++]=O[U++],he[y++]=O[U++],he[y++]=O[U++],H-=3;H&&(he[y++]=O[U++],1<H&&(he[y++]=O[U++]))}else{for(U=y-K;he[y++]=he[U++],he[y++]=he[U++],he[y++]=he[U++],2<(H-=3););H&&(he[y++]=he[U++],1<H&&(he[y++]=he[U++]))}break}}break}}while(f<h&&y<T);f-=H=B>>3,z&=(1<<(B-=H<<3))-1,a.next_in=f,a.next_out=y,a.avail_in=f<h?h-f+5:5-(f-h),a.avail_out=y<T?T-y+257:257-(y-T),c.hold=z,c.bits=B}},{}],49:[function(t,i,s){var a=t("../utils/common"),l=t("./adler32"),c=t("./crc32"),f=t("./inffast"),h=t("./inftrees"),y=1,E=2,T=0,w=-2,C=1,b=852,x=592;function N(U){return(U>>>24&255)+(U>>>8&65280)+((65280&U)<<8)+((255&U)<<24)}function z(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new a.Buf16(320),this.work=new a.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function B(U){var O;return U&&U.state?(O=U.state,U.total_in=U.total_out=O.total=0,U.msg="",O.wrap&&(U.adler=1&O.wrap),O.mode=C,O.last=0,O.havedict=0,O.dmax=32768,O.head=null,O.hold=0,O.bits=0,O.lencode=O.lendyn=new a.Buf32(b),O.distcode=O.distdyn=new a.Buf32(x),O.sane=1,O.back=-1,T):w}function Y(U){var O;return U&&U.state?((O=U.state).wsize=0,O.whave=0,O.wnext=0,B(U)):w}function J(U,O){var D,he;return U&&U.state?(he=U.state,O<0?(D=0,O=-O):(D=1+(O>>4),O<48&&(O&=15)),O&&(O<8||15<O)?w:(he.window!==null&&he.wbits!==O&&(he.window=null),he.wrap=D,he.wbits=O,Y(U))):w}function $(U,O){var D,he;return U?(he=new z,(U.state=he).window=null,(D=J(U,O))!==T&&(U.state=null),D):w}var L,V,k=!0;function H(U){if(k){var O;for(L=new a.Buf32(512),V=new a.Buf32(32),O=0;O<144;)U.lens[O++]=8;for(;O<256;)U.lens[O++]=9;for(;O<280;)U.lens[O++]=7;for(;O<288;)U.lens[O++]=8;for(h(y,U.lens,0,288,L,0,U.work,{bits:9}),O=0;O<32;)U.lens[O++]=5;h(E,U.lens,0,32,V,0,U.work,{bits:5}),k=!1}U.lencode=L,U.lenbits=9,U.distcode=V,U.distbits=5}function K(U,O,D,he){var ie,re=U.state;return re.window===null&&(re.wsize=1<<re.wbits,re.wnext=0,re.whave=0,re.window=new a.Buf8(re.wsize)),he>=re.wsize?(a.arraySet(re.window,O,D-re.wsize,re.wsize,0),re.wnext=0,re.whave=re.wsize):(he<(ie=re.wsize-re.wnext)&&(ie=he),a.arraySet(re.window,O,D-he,ie,re.wnext),(he-=ie)?(a.arraySet(re.window,O,D-he,he,0),re.wnext=he,re.whave=re.wsize):(re.wnext+=ie,re.wnext===re.wsize&&(re.wnext=0),re.whave<re.wsize&&(re.whave+=ie))),0}s.inflateReset=Y,s.inflateReset2=J,s.inflateResetKeep=B,s.inflateInit=function(U){return $(U,15)},s.inflateInit2=$,s.inflate=function(U,O){var D,he,ie,re,be,ne,Te,P,G,oe,Q,Z,ge,Ae,Ne,De,je,$e,Et,kt,R,_e,pe,W,j=0,te=new a.Buf8(4),ve=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!U||!U.state||!U.output||!U.input&&U.avail_in!==0)return w;(D=U.state).mode===12&&(D.mode=13),be=U.next_out,ie=U.output,Te=U.avail_out,re=U.next_in,he=U.input,ne=U.avail_in,P=D.hold,G=D.bits,oe=ne,Q=Te,_e=T;e:for(;;)switch(D.mode){case C:if(D.wrap===0){D.mode=13;break}for(;G<16;){if(ne===0)break e;ne--,P+=he[re++]<<G,G+=8}if(2&D.wrap&&P===35615){te[D.check=0]=255&P,te[1]=P>>>8&255,D.check=c(D.check,te,2,0),G=P=0,D.mode=2;break}if(D.flags=0,D.head&&(D.head.done=!1),!(1&D.wrap)||(((255&P)<<8)+(P>>8))%31){U.msg="incorrect header check",D.mode=30;break}if((15&P)!=8){U.msg="unknown compression method",D.mode=30;break}if(G-=4,R=8+(15&(P>>>=4)),D.wbits===0)D.wbits=R;else if(R>D.wbits){U.msg="invalid window size",D.mode=30;break}D.dmax=1<<R,U.adler=D.check=1,D.mode=512&P?10:12,G=P=0;break;case 2:for(;G<16;){if(ne===0)break e;ne--,P+=he[re++]<<G,G+=8}if(D.flags=P,(255&D.flags)!=8){U.msg="unknown compression method",D.mode=30;break}if(57344&D.flags){U.msg="unknown header flags set",D.mode=30;break}D.head&&(D.head.text=P>>8&1),512&D.flags&&(te[0]=255&P,te[1]=P>>>8&255,D.check=c(D.check,te,2,0)),G=P=0,D.mode=3;case 3:for(;G<32;){if(ne===0)break e;ne--,P+=he[re++]<<G,G+=8}D.head&&(D.head.time=P),512&D.flags&&(te[0]=255&P,te[1]=P>>>8&255,te[2]=P>>>16&255,te[3]=P>>>24&255,D.check=c(D.check,te,4,0)),G=P=0,D.mode=4;case 4:for(;G<16;){if(ne===0)break e;ne--,P+=he[re++]<<G,G+=8}D.head&&(D.head.xflags=255&P,D.head.os=P>>8),512&D.flags&&(te[0]=255&P,te[1]=P>>>8&255,D.check=c(D.check,te,2,0)),G=P=0,D.mode=5;case 5:if(1024&D.flags){for(;G<16;){if(ne===0)break e;ne--,P+=he[re++]<<G,G+=8}D.length=P,D.head&&(D.head.extra_len=P),512&D.flags&&(te[0]=255&P,te[1]=P>>>8&255,D.check=c(D.check,te,2,0)),G=P=0}else D.head&&(D.head.extra=null);D.mode=6;case 6:if(1024&D.flags&&(ne<(Z=D.length)&&(Z=ne),Z&&(D.head&&(R=D.head.extra_len-D.length,D.head.extra||(D.head.extra=new Array(D.head.extra_len)),a.arraySet(D.head.extra,he,re,Z,R)),512&D.flags&&(D.check=c(D.check,he,Z,re)),ne-=Z,re+=Z,D.length-=Z),D.length))break e;D.length=0,D.mode=7;case 7:if(2048&D.flags){if(ne===0)break e;for(Z=0;R=he[re+Z++],D.head&&R&&D.length<65536&&(D.head.name+=String.fromCharCode(R)),R&&Z<ne;);if(512&D.flags&&(D.check=c(D.check,he,Z,re)),ne-=Z,re+=Z,R)break e}else D.head&&(D.head.name=null);D.length=0,D.mode=8;case 8:if(4096&D.flags){if(ne===0)break e;for(Z=0;R=he[re+Z++],D.head&&R&&D.length<65536&&(D.head.comment+=String.fromCharCode(R)),R&&Z<ne;);if(512&D.flags&&(D.check=c(D.check,he,Z,re)),ne-=Z,re+=Z,R)break e}else D.head&&(D.head.comment=null);D.mode=9;case 9:if(512&D.flags){for(;G<16;){if(ne===0)break e;ne--,P+=he[re++]<<G,G+=8}if(P!==(65535&D.check)){U.msg="header crc mismatch",D.mode=30;break}G=P=0}D.head&&(D.head.hcrc=D.flags>>9&1,D.head.done=!0),U.adler=D.check=0,D.mode=12;break;case 10:for(;G<32;){if(ne===0)break e;ne--,P+=he[re++]<<G,G+=8}U.adler=D.check=N(P),G=P=0,D.mode=11;case 11:if(D.havedict===0)return U.next_out=be,U.avail_out=Te,U.next_in=re,U.avail_in=ne,D.hold=P,D.bits=G,2;U.adler=D.check=1,D.mode=12;case 12:if(O===5||O===6)break e;case 13:if(D.last){P>>>=7&G,G-=7&G,D.mode=27;break}for(;G<3;){if(ne===0)break e;ne--,P+=he[re++]<<G,G+=8}switch(D.last=1&P,G-=1,3&(P>>>=1)){case 0:D.mode=14;break;case 1:if(H(D),D.mode=20,O!==6)break;P>>>=2,G-=2;break e;case 2:D.mode=17;break;case 3:U.msg="invalid block type",D.mode=30}P>>>=2,G-=2;break;case 14:for(P>>>=7&G,G-=7&G;G<32;){if(ne===0)break e;ne--,P+=he[re++]<<G,G+=8}if((65535&P)!=(P>>>16^65535)){U.msg="invalid stored block lengths",D.mode=30;break}if(D.length=65535&P,G=P=0,D.mode=15,O===6)break e;case 15:D.mode=16;case 16:if(Z=D.length){if(ne<Z&&(Z=ne),Te<Z&&(Z=Te),Z===0)break e;a.arraySet(ie,he,re,Z,be),ne-=Z,re+=Z,Te-=Z,be+=Z,D.length-=Z;break}D.mode=12;break;case 17:for(;G<14;){if(ne===0)break e;ne--,P+=he[re++]<<G,G+=8}if(D.nlen=257+(31&P),P>>>=5,G-=5,D.ndist=1+(31&P),P>>>=5,G-=5,D.ncode=4+(15&P),P>>>=4,G-=4,286<D.nlen||30<D.ndist){U.msg="too many length or distance symbols",D.mode=30;break}D.have=0,D.mode=18;case 18:for(;D.have<D.ncode;){for(;G<3;){if(ne===0)break e;ne--,P+=he[re++]<<G,G+=8}D.lens[ve[D.have++]]=7&P,P>>>=3,G-=3}for(;D.have<19;)D.lens[ve[D.have++]]=0;if(D.lencode=D.lendyn,D.lenbits=7,pe={bits:D.lenbits},_e=h(0,D.lens,0,19,D.lencode,0,D.work,pe),D.lenbits=pe.bits,_e){U.msg="invalid code lengths set",D.mode=30;break}D.have=0,D.mode=19;case 19:for(;D.have<D.nlen+D.ndist;){for(;De=(j=D.lencode[P&(1<<D.lenbits)-1])>>>16&255,je=65535&j,!((Ne=j>>>24)<=G);){if(ne===0)break e;ne--,P+=he[re++]<<G,G+=8}if(je<16)P>>>=Ne,G-=Ne,D.lens[D.have++]=je;else{if(je===16){for(W=Ne+2;G<W;){if(ne===0)break e;ne--,P+=he[re++]<<G,G+=8}if(P>>>=Ne,G-=Ne,D.have===0){U.msg="invalid bit length repeat",D.mode=30;break}R=D.lens[D.have-1],Z=3+(3&P),P>>>=2,G-=2}else if(je===17){for(W=Ne+3;G<W;){if(ne===0)break e;ne--,P+=he[re++]<<G,G+=8}G-=Ne,R=0,Z=3+(7&(P>>>=Ne)),P>>>=3,G-=3}else{for(W=Ne+7;G<W;){if(ne===0)break e;ne--,P+=he[re++]<<G,G+=8}G-=Ne,R=0,Z=11+(127&(P>>>=Ne)),P>>>=7,G-=7}if(D.have+Z>D.nlen+D.ndist){U.msg="invalid bit length repeat",D.mode=30;break}for(;Z--;)D.lens[D.have++]=R}}if(D.mode===30)break;if(D.lens[256]===0){U.msg="invalid code -- missing end-of-block",D.mode=30;break}if(D.lenbits=9,pe={bits:D.lenbits},_e=h(y,D.lens,0,D.nlen,D.lencode,0,D.work,pe),D.lenbits=pe.bits,_e){U.msg="invalid literal/lengths set",D.mode=30;break}if(D.distbits=6,D.distcode=D.distdyn,pe={bits:D.distbits},_e=h(E,D.lens,D.nlen,D.ndist,D.distcode,0,D.work,pe),D.distbits=pe.bits,_e){U.msg="invalid distances set",D.mode=30;break}if(D.mode=20,O===6)break e;case 20:D.mode=21;case 21:if(6<=ne&&258<=Te){U.next_out=be,U.avail_out=Te,U.next_in=re,U.avail_in=ne,D.hold=P,D.bits=G,f(U,Q),be=U.next_out,ie=U.output,Te=U.avail_out,re=U.next_in,he=U.input,ne=U.avail_in,P=D.hold,G=D.bits,D.mode===12&&(D.back=-1);break}for(D.back=0;De=(j=D.lencode[P&(1<<D.lenbits)-1])>>>16&255,je=65535&j,!((Ne=j>>>24)<=G);){if(ne===0)break e;ne--,P+=he[re++]<<G,G+=8}if(De&&(240&De)==0){for($e=Ne,Et=De,kt=je;De=(j=D.lencode[kt+((P&(1<<$e+Et)-1)>>$e)])>>>16&255,je=65535&j,!($e+(Ne=j>>>24)<=G);){if(ne===0)break e;ne--,P+=he[re++]<<G,G+=8}P>>>=$e,G-=$e,D.back+=$e}if(P>>>=Ne,G-=Ne,D.back+=Ne,D.length=je,De===0){D.mode=26;break}if(32&De){D.back=-1,D.mode=12;break}if(64&De){U.msg="invalid literal/length code",D.mode=30;break}D.extra=15&De,D.mode=22;case 22:if(D.extra){for(W=D.extra;G<W;){if(ne===0)break e;ne--,P+=he[re++]<<G,G+=8}D.length+=P&(1<<D.extra)-1,P>>>=D.extra,G-=D.extra,D.back+=D.extra}D.was=D.length,D.mode=23;case 23:for(;De=(j=D.distcode[P&(1<<D.distbits)-1])>>>16&255,je=65535&j,!((Ne=j>>>24)<=G);){if(ne===0)break e;ne--,P+=he[re++]<<G,G+=8}if((240&De)==0){for($e=Ne,Et=De,kt=je;De=(j=D.distcode[kt+((P&(1<<$e+Et)-1)>>$e)])>>>16&255,je=65535&j,!($e+(Ne=j>>>24)<=G);){if(ne===0)break e;ne--,P+=he[re++]<<G,G+=8}P>>>=$e,G-=$e,D.back+=$e}if(P>>>=Ne,G-=Ne,D.back+=Ne,64&De){U.msg="invalid distance code",D.mode=30;break}D.offset=je,D.extra=15&De,D.mode=24;case 24:if(D.extra){for(W=D.extra;G<W;){if(ne===0)break e;ne--,P+=he[re++]<<G,G+=8}D.offset+=P&(1<<D.extra)-1,P>>>=D.extra,G-=D.extra,D.back+=D.extra}if(D.offset>D.dmax){U.msg="invalid distance too far back",D.mode=30;break}D.mode=25;case 25:if(Te===0)break e;if(Z=Q-Te,D.offset>Z){if((Z=D.offset-Z)>D.whave&&D.sane){U.msg="invalid distance too far back",D.mode=30;break}ge=Z>D.wnext?(Z-=D.wnext,D.wsize-Z):D.wnext-Z,Z>D.length&&(Z=D.length),Ae=D.window}else Ae=ie,ge=be-D.offset,Z=D.length;for(Te<Z&&(Z=Te),Te-=Z,D.length-=Z;ie[be++]=Ae[ge++],--Z;);D.length===0&&(D.mode=21);break;case 26:if(Te===0)break e;ie[be++]=D.length,Te--,D.mode=21;break;case 27:if(D.wrap){for(;G<32;){if(ne===0)break e;ne--,P|=he[re++]<<G,G+=8}if(Q-=Te,U.total_out+=Q,D.total+=Q,Q&&(U.adler=D.check=D.flags?c(D.check,ie,Q,be-Q):l(D.check,ie,Q,be-Q)),Q=Te,(D.flags?P:N(P))!==D.check){U.msg="incorrect data check",D.mode=30;break}G=P=0}D.mode=28;case 28:if(D.wrap&&D.flags){for(;G<32;){if(ne===0)break e;ne--,P+=he[re++]<<G,G+=8}if(P!==(4294967295&D.total)){U.msg="incorrect length check",D.mode=30;break}G=P=0}D.mode=29;case 29:_e=1;break e;case 30:_e=-3;break e;case 31:return-4;case 32:default:return w}return U.next_out=be,U.avail_out=Te,U.next_in=re,U.avail_in=ne,D.hold=P,D.bits=G,(D.wsize||Q!==U.avail_out&&D.mode<30&&(D.mode<27||O!==4))&&K(U,U.output,U.next_out,Q-U.avail_out)?(D.mode=31,-4):(oe-=U.avail_in,Q-=U.avail_out,U.total_in+=oe,U.total_out+=Q,D.total+=Q,D.wrap&&Q&&(U.adler=D.check=D.flags?c(D.check,ie,Q,U.next_out-Q):l(D.check,ie,Q,U.next_out-Q)),U.data_type=D.bits+(D.last?64:0)+(D.mode===12?128:0)+(D.mode===20||D.mode===15?256:0),(oe==0&&Q===0||O===4)&&_e===T&&(_e=-5),_e)},s.inflateEnd=function(U){if(!U||!U.state)return w;var O=U.state;return O.window&&(O.window=null),U.state=null,T},s.inflateGetHeader=function(U,O){var D;return U&&U.state?(2&(D=U.state).wrap)==0?w:((D.head=O).done=!1,T):w},s.inflateSetDictionary=function(U,O){var D,he=O.length;return U&&U.state?(D=U.state).wrap!==0&&D.mode!==11?w:D.mode===11&&l(1,O,he,0)!==D.check?-3:K(U,O,he,he)?(D.mode=31,-4):(D.havedict=1,T):w},s.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,i,s){var a=t("../utils/common"),l=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],c=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],f=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],h=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];i.exports=function(y,E,T,w,C,b,x,N){var z,B,Y,J,$,L,V,k,H,K=N.bits,U=0,O=0,D=0,he=0,ie=0,re=0,be=0,ne=0,Te=0,P=0,G=null,oe=0,Q=new a.Buf16(16),Z=new a.Buf16(16),ge=null,Ae=0;for(U=0;U<=15;U++)Q[U]=0;for(O=0;O<w;O++)Q[E[T+O]]++;for(ie=K,he=15;1<=he&&Q[he]===0;he--);if(he<ie&&(ie=he),he===0)return C[b++]=20971520,C[b++]=20971520,N.bits=1,0;for(D=1;D<he&&Q[D]===0;D++);for(ie<D&&(ie=D),U=ne=1;U<=15;U++)if(ne<<=1,(ne-=Q[U])<0)return-1;if(0<ne&&(y===0||he!==1))return-1;for(Z[1]=0,U=1;U<15;U++)Z[U+1]=Z[U]+Q[U];for(O=0;O<w;O++)E[T+O]!==0&&(x[Z[E[T+O]]++]=O);if(L=y===0?(G=ge=x,19):y===1?(G=l,oe-=257,ge=c,Ae-=257,256):(G=f,ge=h,-1),U=D,$=b,be=O=P=0,Y=-1,J=(Te=1<<(re=ie))-1,y===1&&852<Te||y===2&&592<Te)return 1;for(;;){for(V=U-be,H=x[O]<L?(k=0,x[O]):x[O]>L?(k=ge[Ae+x[O]],G[oe+x[O]]):(k=96,0),z=1<<U-be,D=B=1<<re;C[$+(P>>be)+(B-=z)]=V<<24|k<<16|H|0,B!==0;);for(z=1<<U-1;P&z;)z>>=1;if(z!==0?(P&=z-1,P+=z):P=0,O++,--Q[U]==0){if(U===he)break;U=E[T+x[O]]}if(ie<U&&(P&J)!==Y){for(be===0&&(be=ie),$+=D,ne=1<<(re=U-be);re+be<he&&!((ne-=Q[re+be])<=0);)re++,ne<<=1;if(Te+=1<<re,y===1&&852<Te||y===2&&592<Te)return 1;C[Y=P&J]=ie<<24|re<<16|$-b|0}}return P!==0&&(C[$+P]=U-be<<24|64<<16|0),N.bits=ie,0}},{"../utils/common":41}],51:[function(t,i,s){i.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,i,s){var a=t("../utils/common"),l=0,c=1;function f(j){for(var te=j.length;0<=--te;)j[te]=0}var h=0,y=29,E=256,T=E+1+y,w=30,C=19,b=2*T+1,x=15,N=16,z=7,B=256,Y=16,J=17,$=18,L=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],V=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],k=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],H=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],K=new Array(2*(T+2));f(K);var U=new Array(2*w);f(U);var O=new Array(512);f(O);var D=new Array(256);f(D);var he=new Array(y);f(he);var ie,re,be,ne=new Array(w);function Te(j,te,ve,Ce,ce){this.static_tree=j,this.extra_bits=te,this.extra_base=ve,this.elems=Ce,this.max_length=ce,this.has_stree=j&&j.length}function P(j,te){this.dyn_tree=j,this.max_code=0,this.stat_desc=te}function G(j){return j<256?O[j]:O[256+(j>>>7)]}function oe(j,te){j.pending_buf[j.pending++]=255&te,j.pending_buf[j.pending++]=te>>>8&255}function Q(j,te,ve){j.bi_valid>N-ve?(j.bi_buf|=te<<j.bi_valid&65535,oe(j,j.bi_buf),j.bi_buf=te>>N-j.bi_valid,j.bi_valid+=ve-N):(j.bi_buf|=te<<j.bi_valid&65535,j.bi_valid+=ve)}function Z(j,te,ve){Q(j,ve[2*te],ve[2*te+1])}function ge(j,te){for(var ve=0;ve|=1&j,j>>>=1,ve<<=1,0<--te;);return ve>>>1}function Ae(j,te,ve){var Ce,ce,Ie=new Array(x+1),ke=0;for(Ce=1;Ce<=x;Ce++)Ie[Ce]=ke=ke+ve[Ce-1]<<1;for(ce=0;ce<=te;ce++){var Re=j[2*ce+1];Re!==0&&(j[2*ce]=ge(Ie[Re]++,Re))}}function Ne(j){var te;for(te=0;te<T;te++)j.dyn_ltree[2*te]=0;for(te=0;te<w;te++)j.dyn_dtree[2*te]=0;for(te=0;te<C;te++)j.bl_tree[2*te]=0;j.dyn_ltree[2*B]=1,j.opt_len=j.static_len=0,j.last_lit=j.matches=0}function De(j){8<j.bi_valid?oe(j,j.bi_buf):0<j.bi_valid&&(j.pending_buf[j.pending++]=j.bi_buf),j.bi_buf=0,j.bi_valid=0}function je(j,te,ve,Ce){var ce=2*te,Ie=2*ve;return j[ce]<j[Ie]||j[ce]===j[Ie]&&Ce[te]<=Ce[ve]}function $e(j,te,ve){for(var Ce=j.heap[ve],ce=ve<<1;ce<=j.heap_len&&(ce<j.heap_len&&je(te,j.heap[ce+1],j.heap[ce],j.depth)&&ce++,!je(te,Ce,j.heap[ce],j.depth));)j.heap[ve]=j.heap[ce],ve=ce,ce<<=1;j.heap[ve]=Ce}function Et(j,te,ve){var Ce,ce,Ie,ke,Re=0;if(j.last_lit!==0)for(;Ce=j.pending_buf[j.d_buf+2*Re]<<8|j.pending_buf[j.d_buf+2*Re+1],ce=j.pending_buf[j.l_buf+Re],Re++,Ce===0?Z(j,ce,te):(Z(j,(Ie=D[ce])+E+1,te),(ke=L[Ie])!==0&&Q(j,ce-=he[Ie],ke),Z(j,Ie=G(--Ce),ve),(ke=V[Ie])!==0&&Q(j,Ce-=ne[Ie],ke)),Re<j.last_lit;);Z(j,B,te)}function kt(j,te){var ve,Ce,ce,Ie=te.dyn_tree,ke=te.stat_desc.static_tree,Re=te.stat_desc.has_stree,Fe=te.stat_desc.elems,ht=-1;for(j.heap_len=0,j.heap_max=b,ve=0;ve<Fe;ve++)Ie[2*ve]!==0?(j.heap[++j.heap_len]=ht=ve,j.depth[ve]=0):Ie[2*ve+1]=0;for(;j.heap_len<2;)Ie[2*(ce=j.heap[++j.heap_len]=ht<2?++ht:0)]=1,j.depth[ce]=0,j.opt_len--,Re&&(j.static_len-=ke[2*ce+1]);for(te.max_code=ht,ve=j.heap_len>>1;1<=ve;ve--)$e(j,Ie,ve);for(ce=Fe;ve=j.heap[1],j.heap[1]=j.heap[j.heap_len--],$e(j,Ie,1),Ce=j.heap[1],j.heap[--j.heap_max]=ve,j.heap[--j.heap_max]=Ce,Ie[2*ce]=Ie[2*ve]+Ie[2*Ce],j.depth[ce]=(j.depth[ve]>=j.depth[Ce]?j.depth[ve]:j.depth[Ce])+1,Ie[2*ve+1]=Ie[2*Ce+1]=ce,j.heap[1]=ce++,$e(j,Ie,1),2<=j.heap_len;);j.heap[--j.heap_max]=j.heap[1],(function(Ze,En){var Oi,In,zi,ft,zt,Tn,yt=En.dyn_tree,Js=En.max_code,Qr=En.stat_desc.static_tree,Ho=En.stat_desc.has_stree,ei=En.stat_desc.extra_bits,Fi=En.stat_desc.extra_base,Nt=En.stat_desc.max_length,Rn=0;for(ft=0;ft<=x;ft++)Ze.bl_count[ft]=0;for(yt[2*Ze.heap[Ze.heap_max]+1]=0,Oi=Ze.heap_max+1;Oi<b;Oi++)Nt<(ft=yt[2*yt[2*(In=Ze.heap[Oi])+1]+1]+1)&&(ft=Nt,Rn++),yt[2*In+1]=ft,Js<In||(Ze.bl_count[ft]++,zt=0,Fi<=In&&(zt=ei[In-Fi]),Tn=yt[2*In],Ze.opt_len+=Tn*(ft+zt),Ho&&(Ze.static_len+=Tn*(Qr[2*In+1]+zt)));if(Rn!==0){do{for(ft=Nt-1;Ze.bl_count[ft]===0;)ft--;Ze.bl_count[ft]--,Ze.bl_count[ft+1]+=2,Ze.bl_count[Nt]--,Rn-=2}while(0<Rn);for(ft=Nt;ft!==0;ft--)for(In=Ze.bl_count[ft];In!==0;)Js<(zi=Ze.heap[--Oi])||(yt[2*zi+1]!==ft&&(Ze.opt_len+=(ft-yt[2*zi+1])*yt[2*zi],yt[2*zi+1]=ft),In--)}})(j,te),Ae(Ie,ht,j.bl_count)}function R(j,te,ve){var Ce,ce,Ie=-1,ke=te[1],Re=0,Fe=7,ht=4;for(ke===0&&(Fe=138,ht=3),te[2*(ve+1)+1]=65535,Ce=0;Ce<=ve;Ce++)ce=ke,ke=te[2*(Ce+1)+1],++Re<Fe&&ce===ke||(Re<ht?j.bl_tree[2*ce]+=Re:ce!==0?(ce!==Ie&&j.bl_tree[2*ce]++,j.bl_tree[2*Y]++):Re<=10?j.bl_tree[2*J]++:j.bl_tree[2*$]++,Ie=ce,ht=(Re=0)===ke?(Fe=138,3):ce===ke?(Fe=6,3):(Fe=7,4))}function _e(j,te,ve){var Ce,ce,Ie=-1,ke=te[1],Re=0,Fe=7,ht=4;for(ke===0&&(Fe=138,ht=3),Ce=0;Ce<=ve;Ce++)if(ce=ke,ke=te[2*(Ce+1)+1],!(++Re<Fe&&ce===ke)){if(Re<ht)for(;Z(j,ce,j.bl_tree),--Re!=0;);else ce!==0?(ce!==Ie&&(Z(j,ce,j.bl_tree),Re--),Z(j,Y,j.bl_tree),Q(j,Re-3,2)):Re<=10?(Z(j,J,j.bl_tree),Q(j,Re-3,3)):(Z(j,$,j.bl_tree),Q(j,Re-11,7));Ie=ce,ht=(Re=0)===ke?(Fe=138,3):ce===ke?(Fe=6,3):(Fe=7,4)}}f(ne);var pe=!1;function W(j,te,ve,Ce){Q(j,(h<<1)+(Ce?1:0),3),(function(ce,Ie,ke,Re){De(ce),oe(ce,ke),oe(ce,~ke),a.arraySet(ce.pending_buf,ce.window,Ie,ke,ce.pending),ce.pending+=ke})(j,te,ve)}s._tr_init=function(j){pe||((function(){var te,ve,Ce,ce,Ie,ke=new Array(x+1);for(ce=Ce=0;ce<y-1;ce++)for(he[ce]=Ce,te=0;te<1<<L[ce];te++)D[Ce++]=ce;for(D[Ce-1]=ce,ce=Ie=0;ce<16;ce++)for(ne[ce]=Ie,te=0;te<1<<V[ce];te++)O[Ie++]=ce;for(Ie>>=7;ce<w;ce++)for(ne[ce]=Ie<<7,te=0;te<1<<V[ce]-7;te++)O[256+Ie++]=ce;for(ve=0;ve<=x;ve++)ke[ve]=0;for(te=0;te<=143;)K[2*te+1]=8,te++,ke[8]++;for(;te<=255;)K[2*te+1]=9,te++,ke[9]++;for(;te<=279;)K[2*te+1]=7,te++,ke[7]++;for(;te<=287;)K[2*te+1]=8,te++,ke[8]++;for(Ae(K,T+1,ke),te=0;te<w;te++)U[2*te+1]=5,U[2*te]=ge(te,5);ie=new Te(K,L,E+1,T,x),re=new Te(U,V,0,w,x),be=new Te(new Array(0),k,0,C,z)})(),pe=!0),j.l_desc=new P(j.dyn_ltree,ie),j.d_desc=new P(j.dyn_dtree,re),j.bl_desc=new P(j.bl_tree,be),j.bi_buf=0,j.bi_valid=0,Ne(j)},s._tr_stored_block=W,s._tr_flush_block=function(j,te,ve,Ce){var ce,Ie,ke=0;0<j.level?(j.strm.data_type===2&&(j.strm.data_type=(function(Re){var Fe,ht=4093624447;for(Fe=0;Fe<=31;Fe++,ht>>>=1)if(1&ht&&Re.dyn_ltree[2*Fe]!==0)return l;if(Re.dyn_ltree[18]!==0||Re.dyn_ltree[20]!==0||Re.dyn_ltree[26]!==0)return c;for(Fe=32;Fe<E;Fe++)if(Re.dyn_ltree[2*Fe]!==0)return c;return l})(j)),kt(j,j.l_desc),kt(j,j.d_desc),ke=(function(Re){var Fe;for(R(Re,Re.dyn_ltree,Re.l_desc.max_code),R(Re,Re.dyn_dtree,Re.d_desc.max_code),kt(Re,Re.bl_desc),Fe=C-1;3<=Fe&&Re.bl_tree[2*H[Fe]+1]===0;Fe--);return Re.opt_len+=3*(Fe+1)+5+5+4,Fe})(j),ce=j.opt_len+3+7>>>3,(Ie=j.static_len+3+7>>>3)<=ce&&(ce=Ie)):ce=Ie=ve+5,ve+4<=ce&&te!==-1?W(j,te,ve,Ce):j.strategy===4||Ie===ce?(Q(j,2+(Ce?1:0),3),Et(j,K,U)):(Q(j,4+(Ce?1:0),3),(function(Re,Fe,ht,Ze){var En;for(Q(Re,Fe-257,5),Q(Re,ht-1,5),Q(Re,Ze-4,4),En=0;En<Ze;En++)Q(Re,Re.bl_tree[2*H[En]+1],3);_e(Re,Re.dyn_ltree,Fe-1),_e(Re,Re.dyn_dtree,ht-1)})(j,j.l_desc.max_code+1,j.d_desc.max_code+1,ke+1),Et(j,j.dyn_ltree,j.dyn_dtree)),Ne(j),Ce&&De(j)},s._tr_tally=function(j,te,ve){return j.pending_buf[j.d_buf+2*j.last_lit]=te>>>8&255,j.pending_buf[j.d_buf+2*j.last_lit+1]=255&te,j.pending_buf[j.l_buf+j.last_lit]=255&ve,j.last_lit++,te===0?j.dyn_ltree[2*ve]++:(j.matches++,te--,j.dyn_ltree[2*(D[ve]+E+1)]++,j.dyn_dtree[2*G(te)]++),j.last_lit===j.lit_bufsize-1},s._tr_align=function(j){Q(j,2,3),Z(j,B,K),(function(te){te.bi_valid===16?(oe(te,te.bi_buf),te.bi_buf=0,te.bi_valid=0):8<=te.bi_valid&&(te.pending_buf[te.pending++]=255&te.bi_buf,te.bi_buf>>=8,te.bi_valid-=8)})(j)}},{"../utils/common":41}],53:[function(t,i,s){i.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,i,s){(function(a){(function(l,c){if(!l.setImmediate){var f,h,y,E,T=1,w={},C=!1,b=l.document,x=Object.getPrototypeOf&&Object.getPrototypeOf(l);x=x&&x.setTimeout?x:l,f={}.toString.call(l.process)==="[object process]"?function(Y){process.nextTick(function(){z(Y)})}:(function(){if(l.postMessage&&!l.importScripts){var Y=!0,J=l.onmessage;return l.onmessage=function(){Y=!1},l.postMessage("","*"),l.onmessage=J,Y}})()?(E="setImmediate$"+Math.random()+"$",l.addEventListener?l.addEventListener("message",B,!1):l.attachEvent("onmessage",B),function(Y){l.postMessage(E+Y,"*")}):l.MessageChannel?((y=new MessageChannel).port1.onmessage=function(Y){z(Y.data)},function(Y){y.port2.postMessage(Y)}):b&&"onreadystatechange"in b.createElement("script")?(h=b.documentElement,function(Y){var J=b.createElement("script");J.onreadystatechange=function(){z(Y),J.onreadystatechange=null,h.removeChild(J),J=null},h.appendChild(J)}):function(Y){setTimeout(z,0,Y)},x.setImmediate=function(Y){typeof Y!="function"&&(Y=new Function(""+Y));for(var J=new Array(arguments.length-1),$=0;$<J.length;$++)J[$]=arguments[$+1];var L={callback:Y,args:J};return w[T]=L,f(T),T++},x.clearImmediate=N}function N(Y){delete w[Y]}function z(Y){if(C)setTimeout(z,0,Y);else{var J=w[Y];if(J){C=!0;try{(function($){var L=$.callback,V=$.args;switch(V.length){case 0:L();break;case 1:L(V[0]);break;case 2:L(V[0],V[1]);break;case 3:L(V[0],V[1],V[2]);break;default:L.apply(c,V)}})(J)}finally{N(Y),C=!1}}}}function B(Y){Y.source===l&&typeof Y.data=="string"&&Y.data.indexOf(E)===0&&z(+Y.data.slice(E.length))}})(typeof self>"u"?a===void 0?this:a:self)}).call(this,typeof wd<"u"?wd:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Em)),Em.exports}var Y8=q8();const $8=ug(Y8),K8=()=>{const[n,e]=Ve.useState(null),[t,i]=Ve.useState([]),[s,a]=Ve.useState(null),[l,c]=Ve.useState(null),[f,h]=Ve.useState(!1),[y,E]=Ve.useState([]),[T,w]=Ve.useState(0),[C,b]=Ve.useState(!1),x=Ve.useRef(null),N=1,z=3,[B,Y]=Ve.useState(!0);Ve.useEffect(()=>Ao.onAuthChanged(G=>{e(G),Y(!1)}),[]),Ve.useEffect(()=>{if(!n){i([]),a(null);return}return Ma.subscribeProjects(n.id,G=>{if(G.length===0){const oe={id:"demo-project",name:"Demo Project",description:"A sample project to show capabilities.",createdAt:Date.now(),lastModified:Date.now(),screens:[r4]};Ma.saveProject(n.id,oe)}else i(G)})},[n]);const J=t.find(P=>P.id===s),$=(J==null?void 0:J.screens)||[];Ve.useEffect(()=>{s&&$.length>0&&!$.find(P=>P.id===l)&&c($[0].id)},[s,$,l]);const L=P=>{var Z,ge,Ae;const G=(P==null?void 0:P.status)||((Z=P==null?void 0:P.error)==null?void 0:Z.status),oe=(P==null?void 0:P.code)||((ge=P==null?void 0:P.error)==null?void 0:ge.code),Q=(P==null?void 0:P.message)||((Ae=P==null?void 0:P.error)==null?void 0:Ae.message);return oe===429||G==="RESOURCE_EXHAUSTED"||typeof Q=="string"&&(Q.includes("429")||Q.includes("quota"))},V=P=>{!s||!n||i(G=>G.map(Q=>{if(Q.id===s){const Z=P(Q);return Ma.saveProject(n.id,Z).catch(console.error),Z}return Q}))},k=P=>{e(P)},H=async()=>{await Ao.logout(),e(null)},K=P=>{if(t.length>=N){b(!0);return}const G={id:`proj-${Date.now()}`,name:P,description:"New project",createdAt:Date.now(),lastModified:Date.now(),screens:[]};i(oe=>[G,...oe]),a(G.id),E([]),n&&Ma.saveProject(n.id,G).catch(console.error)},U=P=>{if(t.length>=N){b(!0);return}const G=P.screens.map(Q=>({...Q,id:`${P.id}-screen-${Date.now()}-${Math.random().toString(36).substr(2,5)}`})),oe={id:`proj-${Date.now()}`,name:P.name,description:`Started from ${P.name} template.`,createdAt:Date.now(),lastModified:Date.now(),screens:G};i(Q=>[oe,...Q]),a(oe.id),c(G[0].id),E([]),n&&Ma.saveProject(n.id,oe).catch(console.error)},O=P=>{confirm("Are you sure you want to delete this project?")&&(i(G=>G.filter(oe=>oe.id!==P)),s===P&&a(null),n&&Ma.deleteProject(n.id,P).catch(console.error))},D=()=>{x.current&&(x.current.abort(),x.current=null),h(!1),V(P=>({...P,screens:P.screens.map(G=>G.isGenerating?{...G,isGenerating:!1}:G)})),E(P=>[...P,{id:Date.now().toString(),role:"assistant",content:"Generation stopped by user.",timestamp:Date.now()}])},he=async P=>{if(!s)return;if(T>=z){b(!0);return}w(Q=>Q+1),h(!0),x.current=new AbortController;const G={id:Date.now().toString(),role:"user",content:P.description,timestamp:Date.now()};E(Q=>[...Q,G]);const oe=Array.from({length:P.screenCount}).map((Q,Z)=>({id:`placeholder-${Date.now()}-${Z}`,name:`Preparing Screen ${Z+1}`,description:"AI is constructing this interface...",code:"",isGenerating:!0}));V(Q=>({...Q,screens:oe,description:P.description.slice(0,100)+(P.description.length>100?"...":""),lastModified:Date.now()})),oe.length>0&&c(oe[0].id);try{await l4(P,(Z,ge,Ae)=>{i(Ne=>Ne.map(De=>{if(De.id!==s)return De;const je=[...De.screens];if(ge<je.length){const $e=je[ge];je[ge]={...$e,name:Z.name||$e.name,description:Z.description||$e.description,code:Z.code||$e.code,isGenerating:!Ae}}else Z.name&&je.push({id:`gen-extra-${Date.now()}-${ge}`,name:Z.name,description:Z.description||"",code:Z.code||"",isGenerating:!Ae});return{...De,screens:je,lastModified:Date.now()}}))},x.current.signal),V(Z=>({...Z,screens:Z.screens.map(ge=>ge.isGenerating&&ge.code.length>10?{...ge,isGenerating:!1}:ge.isGenerating&&ge.code.length===0?{...ge,isGenerating:!1,code:'<div class="flex items-center justify-center h-full text-zinc-500">Generation incomplete</div>'}:ge)}));const Q={id:(Date.now()+1).toString(),role:"assistant",content:"I've generated the screens for your application. You can now refine them or ask for changes.",timestamp:Date.now()};E(Z=>[...Z,Q])}catch(Q){if(Q.message==="Aborted"){console.log("Generation aborted");return}console.error("Failed to generate screens:",Q);let Z="Sorry, I encountered an error while generating. Please try again.";L(Q)&&(Z="You have exceeded the API rate limit. Please wait a moment before trying again."),E(ge=>[...ge,{id:Date.now().toString(),role:"assistant",content:Z,timestamp:Date.now()}]),V(ge=>({...ge,screens:ge.screens.filter(Ae=>Ae.code.length>0)}))}finally{h(!1),x.current=null}},ie=async(P,G="current")=>{if(!s)return;if(T>=z){b(!0);return}w(Z=>Z+1);let oe=[];if(G==="all")oe=[...$];else{if(!l)return;const Z=$.find(ge=>ge.id===l);Z&&(oe=[Z])}if(oe.length===0)return;E(Z=>[...Z,{id:Date.now().toString(),role:"user",content:P,timestamp:Date.now()}]),V(Z=>({...Z,screens:Z.screens.map(ge=>oe.find(Ae=>Ae.id===ge.id)?{...ge,isGenerating:!0}:ge)})),h(!0);let Q=0;try{for(const Z of oe)try{const ge=await u4(Z,P);V(Ae=>({...Ae,lastModified:Date.now(),screens:Ae.screens.map(Ne=>Ne.id===Z.id?{...ge,id:Z.id,isGenerating:!1}:Ne)})),Q++}catch(ge){console.error(`Failed to refine screen ${Z.name}`,ge),V(Ae=>({...Ae,screens:Ae.screens.map(Ne=>Ne.id===Z.id?{...Ne,isGenerating:!1}:Ne)}))}Q>0?E(Z=>[...Z,{id:Date.now().toString(),role:"assistant",content:G==="all"?`Updated ${Q} screens.`:"Updated screen.",timestamp:Date.now()}]):E(Z=>[...Z,{id:Date.now().toString(),role:"assistant",content:"Failed to apply changes.",timestamp:Date.now()}])}catch(Z){console.error("Refinement failed:",Z);let ge="Sorry, I couldn't apply that change.";L(Z)&&(ge="Rate limit exceeded."),E(Ae=>[...Ae,{id:Date.now().toString(),role:"assistant",content:ge,timestamp:Date.now()}])}finally{h(!1)}},re=async P=>{if(P==="json"){const G=JSON.stringify(J,null,2),oe=new Blob([G],{type:"application/json"}),Q=URL.createObjectURL(oe),Z=document.createElement("a");Z.href=Q,Z.download=`${(J==null?void 0:J.name)||"project"}-export.json`,Z.click(),URL.revokeObjectURL(Q)}else if(P==="zip"){const G=new $8,oe=G.folder("screens"),Q={quality:1,pixelRatio:2,style:{transform:"none"}};G.file("project.json",JSON.stringify(J,null,2));const Z=$.map(async(De,je)=>{const $e=`screen-preview-${De.id}`,Et=document.getElementById($e);if(Et)try{const R=(await R1(Et,Q)).split(",")[1],_e=De.name.replace(/[^a-z0-9]/gi,"_").toLowerCase();oe==null||oe.file(`${je+1}_${_e}.png`,R,{base64:!0})}catch(kt){console.error(`Failed export ${De.name}`,kt)}});await Promise.all(Z);const ge=await G.generateAsync({type:"blob"}),Ae=URL.createObjectURL(ge),Ne=document.createElement("a");Ne.href=Ae,Ne.download=`${(J==null?void 0:J.name)||"mockups"}.zip`,Ne.click(),URL.revokeObjectURL(Ae)}else{if(!l)return;const G=$.find(Z=>Z.id===l);if(!G)return;const oe=`screen-preview-${l}`,Q=document.getElementById(oe);if(!Q)return;try{const Z={quality:1,pixelRatio:2,style:{transform:"none"}},ge=P==="png"?await R1(Q,Z):await ax(Q,Z),Ae=document.createElement("a");Ae.download=`${G.name.replace(/\s+/g,"-")}.${P}`,Ae.href=ge,Ae.click()}catch(Z){console.error("Export failed:",Z)}}},be=P=>{V(G=>{const oe=G.screens.filter(Q=>Q.id!==P);return l===P&&c(oe.length>0?oe[0].id:null),{...G,screens:oe,lastModified:Date.now()}})},ne=()=>{const P={id:`custom-${Date.now()}`,name:"New Screen",description:"Empty custom screen",code:'<div class="h-full w-full bg-white flex items-center justify-center text-slate-400">Empty Screen</div>'};V(G=>({...G,screens:[...G.screens,P],lastModified:Date.now()})),c(P.id)},Te=(P,G)=>{V(oe=>({...oe,screens:oe.screens.map(Q=>Q.id===P?{...Q,code:G}:Q),lastModified:Date.now()}))};return B?M.jsx("div",{className:"min-h-screen bg-[#050505] flex items-center justify-center",children:M.jsxs("div",{className:"flex flex-col items-center gap-4",children:[M.jsx("div",{className:"w-10 h-10 border-2 border-indigo-500 border-t-transparent rounded-full animate-spin"}),M.jsx("span",{className:"text-zinc-500 text-sm tracking-widest uppercase",children:"Loading..."})]})}):n?s?M.jsxs("div",{className:"flex h-screen w-full bg-zinc-950 text-zinc-200 font-sans overflow-hidden selection:bg-indigo-500/30 selection:text-indigo-200",children:[C&&M.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center bg-black/70 backdrop-blur-sm animate-in fade-in duration-200",children:M.jsxs("div",{className:"bg-zinc-900 border border-white/10 rounded-3xl p-8 max-w-md w-full mx-4 shadow-2xl text-center animate-in zoom-in-95 duration-300",children:[M.jsx("div",{className:"w-16 h-16 rounded-2xl bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center mx-auto mb-5",children:M.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:M.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),M.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:"Free Tier Limit Reached"}),M.jsxs("p",{className:"text-zinc-400 text-sm leading-relaxed mb-6",children:["You've used all your free generations. Our ",M.jsx("span",{className:"text-indigo-400 font-semibold",children:"Pro subscription"})," is coming soon with unlimited projects, unlimited prompts, priority AI models, and more."]}),M.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-xl p-4 mb-6",children:[M.jsx("p",{className:"text-xs text-zinc-500 uppercase tracking-widest mb-2",children:"Your usage"}),M.jsxs("div",{className:"flex justify-around",children:[M.jsxs("div",{children:[M.jsxs("p",{className:"text-2xl font-bold text-white",children:[t.length,"/",N]}),M.jsx("p",{className:"text-[11px] text-zinc-500",children:"Projects"})]}),M.jsx("div",{className:"w-px bg-white/10"}),M.jsxs("div",{children:[M.jsxs("p",{className:"text-2xl font-bold text-white",children:[T,"/",z]}),M.jsx("p",{className:"text-[11px] text-zinc-500",children:"Prompts"})]})]})]}),M.jsx("button",{onClick:()=>b(!1),className:"w-full py-3 bg-white text-black rounded-xl font-bold text-sm hover:bg-zinc-200 transition-all active:scale-[0.98]",children:"Got it  I'll wait!"}),M.jsx("p",{className:"text-[11px] text-zinc-600 mt-3",children:"Stay tuned. Big things are coming."})]})}),M.jsx(v4,{screens:$,activeScreenId:l,onSelectScreen:c,onDeleteScreen:be,onAddScreen:ne,onBackToDashboard:()=>a(null)}),M.jsx(m4,{screens:$,activeScreenId:l,onSelectScreen:c,onDeleteScreen:be,onUpdateScreen:Te,isGenerating:f}),M.jsx(y4,{onGenerate:he,onRefine:ie,onExport:re,onStop:D,isProcessing:f,hasScreens:$.length>0,messages:y,screens:$})]}):M.jsx(E4,{projects:t,user:n,onCreateProject:K,onCreateFromTemplate:U,onSelectProject:P=>{a(P),E([])},onDeleteProject:O,onLogout:H}):M.jsx(Zz,{onLogin:k})},lx=document.getElementById("root");if(!lx)throw new Error("Could not find root element to mount to");const J8=jC.createRoot(lx);J8.render(M.jsx(M1.StrictMode,{children:M.jsx(K8,{})}));
