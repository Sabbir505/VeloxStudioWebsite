(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function t(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(o){if(o.ep)return;o.ep=!0;const a=t(o);fetch(o.href,a)}})();function US(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Vp={exports:{}},jl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T_;function PI(){if(T_)return jl;T_=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,o,a){var u=null;if(a!==void 0&&(u=""+a),o.key!==void 0&&(u=""+o.key),"key"in o){a={};for(var f in o)f!=="key"&&(a[f]=o[f])}else a=o;return o=a.ref,{$$typeof:n,type:i,key:u,ref:o!==void 0?o:null,props:a}}return jl.Fragment=e,jl.jsx=t,jl.jsxs=t,jl}var E_;function LI(){return E_||(E_=1,Vp.exports=PI()),Vp.exports}var A=LI(),Up={exports:{}},Ne={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S_;function VI(){if(S_)return Ne;S_=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),u=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),S=Symbol.iterator;function I(G){return G===null||typeof G!="object"?null:(G=S&&G[S]||G["@@iterator"],typeof G=="function"?G:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},O=Object.assign,P={};function $(G,ne,ce){this.props=G,this.context=ne,this.refs=P,this.updater=ce||k}$.prototype.isReactComponent={},$.prototype.setState=function(G,ne){if(typeof G!="object"&&typeof G!="function"&&G!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,G,ne,"setState")},$.prototype.forceUpdate=function(G){this.updater.enqueueForceUpdate(this,G,"forceUpdate")};function ee(){}ee.prototype=$.prototype;function X(G,ne,ce){this.props=G,this.context=ne,this.refs=P,this.updater=ce||k}var re=X.prototype=new ee;re.constructor=X,O(re,$.prototype),re.isPureReactComponent=!0;var ae=Array.isArray;function j(){}var R={H:null,A:null,T:null,S:null},M=Object.prototype.hasOwnProperty;function D(G,ne,ce){var ye=ce.ref;return{$$typeof:n,type:G,key:ne,ref:ye!==void 0?ye:null,props:ce}}function U(G,ne){return D(G.type,ne,G.props)}function L(G){return typeof G=="object"&&G!==null&&G.$$typeof===n}function B(G){var ne={"=":"=0",":":"=2"};return"$"+G.replace(/[=:]/g,function(ce){return ne[ce]})}var N=/\/+/g;function ge(G,ne){return typeof G=="object"&&G!==null&&G.key!=null?B(""+G.key):ne.toString(36)}function fe(G){switch(G.status){case"fulfilled":return G.value;case"rejected":throw G.reason;default:switch(typeof G.status=="string"?G.then(j,j):(G.status="pending",G.then(function(ne){G.status==="pending"&&(G.status="fulfilled",G.value=ne)},function(ne){G.status==="pending"&&(G.status="rejected",G.reason=ne)})),G.status){case"fulfilled":return G.value;case"rejected":throw G.reason}}throw G}function Y(G,ne,ce,ye,xe){var Le=typeof G;(Le==="undefined"||Le==="boolean")&&(G=null);var Ye=!1;if(G===null)Ye=!0;else switch(Le){case"bigint":case"string":case"number":Ye=!0;break;case"object":switch(G.$$typeof){case n:case e:Ye=!0;break;case v:return Ye=G._init,Y(Ye(G._payload),ne,ce,ye,xe)}}if(Ye)return xe=xe(G),Ye=ye===""?"."+ge(G,0):ye,ae(xe)?(ce="",Ye!=null&&(ce=Ye.replace(N,"$&/")+"/"),Y(xe,ne,ce,"",function(wr){return wr})):xe!=null&&(L(xe)&&(xe=U(xe,ce+(xe.key==null||G&&G.key===xe.key?"":(""+xe.key).replace(N,"$&/")+"/")+Ye)),ne.push(xe)),1;Ye=0;var Lt=ye===""?".":ye+":";if(ae(G))for(var dt=0;dt<G.length;dt++)ye=G[dt],Le=Lt+ge(ye,dt),Ye+=Y(ye,ne,ce,Le,xe);else if(dt=I(G),typeof dt=="function")for(G=dt.call(G),dt=0;!(ye=G.next()).done;)ye=ye.value,Le=Lt+ge(ye,dt++),Ye+=Y(ye,ne,ce,Le,xe);else if(Le==="object"){if(typeof G.then=="function")return Y(fe(G),ne,ce,ye,xe);throw ne=String(G),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(G).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.")}return Ye}function ue(G,ne,ce){if(G==null)return G;var ye=[],xe=0;return Y(G,ye,"","",function(Le){return ne.call(ce,Le,xe++)}),ye}function pe(G){if(G._status===-1){var ne=G._result;ne=ne(),ne.then(function(ce){(G._status===0||G._status===-1)&&(G._status=1,G._result=ce)},function(ce){(G._status===0||G._status===-1)&&(G._status=2,G._result=ce)}),G._status===-1&&(G._status=0,G._result=ne)}if(G._status===1)return G._result.default;throw G._result}var ke=typeof reportError=="function"?reportError:function(G){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ne=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof G=="object"&&G!==null&&typeof G.message=="string"?String(G.message):String(G),error:G});if(!window.dispatchEvent(ne))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",G);return}console.error(G)},Ke={map:ue,forEach:function(G,ne,ce){ue(G,function(){ne.apply(this,arguments)},ce)},count:function(G){var ne=0;return ue(G,function(){ne++}),ne},toArray:function(G){return ue(G,function(ne){return ne})||[]},only:function(G){if(!L(G))throw Error("React.Children.only expected to receive a single React element child.");return G}};return Ne.Activity=T,Ne.Children=Ke,Ne.Component=$,Ne.Fragment=t,Ne.Profiler=o,Ne.PureComponent=X,Ne.StrictMode=i,Ne.Suspense=m,Ne.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,Ne.__COMPILER_RUNTIME={__proto__:null,c:function(G){return R.H.useMemoCache(G)}},Ne.cache=function(G){return function(){return G.apply(null,arguments)}},Ne.cacheSignal=function(){return null},Ne.cloneElement=function(G,ne,ce){if(G==null)throw Error("The argument must be a React element, but you passed "+G+".");var ye=O({},G.props),xe=G.key;if(ne!=null)for(Le in ne.key!==void 0&&(xe=""+ne.key),ne)!M.call(ne,Le)||Le==="key"||Le==="__self"||Le==="__source"||Le==="ref"&&ne.ref===void 0||(ye[Le]=ne[Le]);var Le=arguments.length-2;if(Le===1)ye.children=ce;else if(1<Le){for(var Ye=Array(Le),Lt=0;Lt<Le;Lt++)Ye[Lt]=arguments[Lt+2];ye.children=Ye}return D(G.type,xe,ye)},Ne.createContext=function(G){return G={$$typeof:u,_currentValue:G,_currentValue2:G,_threadCount:0,Provider:null,Consumer:null},G.Provider=G,G.Consumer={$$typeof:a,_context:G},G},Ne.createElement=function(G,ne,ce){var ye,xe={},Le=null;if(ne!=null)for(ye in ne.key!==void 0&&(Le=""+ne.key),ne)M.call(ne,ye)&&ye!=="key"&&ye!=="__self"&&ye!=="__source"&&(xe[ye]=ne[ye]);var Ye=arguments.length-2;if(Ye===1)xe.children=ce;else if(1<Ye){for(var Lt=Array(Ye),dt=0;dt<Ye;dt++)Lt[dt]=arguments[dt+2];xe.children=Lt}if(G&&G.defaultProps)for(ye in Ye=G.defaultProps,Ye)xe[ye]===void 0&&(xe[ye]=Ye[ye]);return D(G,Le,xe)},Ne.createRef=function(){return{current:null}},Ne.forwardRef=function(G){return{$$typeof:f,render:G}},Ne.isValidElement=L,Ne.lazy=function(G){return{$$typeof:v,_payload:{_status:-1,_result:G},_init:pe}},Ne.memo=function(G,ne){return{$$typeof:h,type:G,compare:ne===void 0?null:ne}},Ne.startTransition=function(G){var ne=R.T,ce={};R.T=ce;try{var ye=G(),xe=R.S;xe!==null&&xe(ce,ye),typeof ye=="object"&&ye!==null&&typeof ye.then=="function"&&ye.then(j,ke)}catch(Le){ke(Le)}finally{ne!==null&&ce.types!==null&&(ne.types=ce.types),R.T=ne}},Ne.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},Ne.use=function(G){return R.H.use(G)},Ne.useActionState=function(G,ne,ce){return R.H.useActionState(G,ne,ce)},Ne.useCallback=function(G,ne){return R.H.useCallback(G,ne)},Ne.useContext=function(G){return R.H.useContext(G)},Ne.useDebugValue=function(){},Ne.useDeferredValue=function(G,ne){return R.H.useDeferredValue(G,ne)},Ne.useEffect=function(G,ne){return R.H.useEffect(G,ne)},Ne.useEffectEvent=function(G){return R.H.useEffectEvent(G)},Ne.useId=function(){return R.H.useId()},Ne.useImperativeHandle=function(G,ne,ce){return R.H.useImperativeHandle(G,ne,ce)},Ne.useInsertionEffect=function(G,ne){return R.H.useInsertionEffect(G,ne)},Ne.useLayoutEffect=function(G,ne){return R.H.useLayoutEffect(G,ne)},Ne.useMemo=function(G,ne){return R.H.useMemo(G,ne)},Ne.useOptimistic=function(G,ne){return R.H.useOptimistic(G,ne)},Ne.useReducer=function(G,ne,ce){return R.H.useReducer(G,ne,ce)},Ne.useRef=function(G){return R.H.useRef(G)},Ne.useState=function(G){return R.H.useState(G)},Ne.useSyncExternalStore=function(G,ne,ce){return R.H.useSyncExternalStore(G,ne,ce)},Ne.useTransition=function(){return R.H.useTransition()},Ne.version="19.2.4",Ne}var A_;function Wm(){return A_||(A_=1,Up.exports=VI()),Up.exports}var be=Wm();const UI=US(be);var Op={exports:{}},Ql={},Fp={exports:{}},Gp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var w_;function OI(){return w_||(w_=1,(function(n){function e(Y,ue){var pe=Y.length;Y.push(ue);e:for(;0<pe;){var ke=pe-1>>>1,Ke=Y[ke];if(0<o(Ke,ue))Y[ke]=ue,Y[pe]=Ke,pe=ke;else break e}}function t(Y){return Y.length===0?null:Y[0]}function i(Y){if(Y.length===0)return null;var ue=Y[0],pe=Y.pop();if(pe!==ue){Y[0]=pe;e:for(var ke=0,Ke=Y.length,G=Ke>>>1;ke<G;){var ne=2*(ke+1)-1,ce=Y[ne],ye=ne+1,xe=Y[ye];if(0>o(ce,pe))ye<Ke&&0>o(xe,ce)?(Y[ke]=xe,Y[ye]=pe,ke=ye):(Y[ke]=ce,Y[ne]=pe,ke=ne);else if(ye<Ke&&0>o(xe,pe))Y[ke]=xe,Y[ye]=pe,ke=ye;else break e}}return ue}function o(Y,ue){var pe=Y.sortIndex-ue.sortIndex;return pe!==0?pe:Y.id-ue.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var u=Date,f=u.now();n.unstable_now=function(){return u.now()-f}}var m=[],h=[],v=1,T=null,S=3,I=!1,k=!1,O=!1,P=!1,$=typeof setTimeout=="function"?setTimeout:null,ee=typeof clearTimeout=="function"?clearTimeout:null,X=typeof setImmediate<"u"?setImmediate:null;function re(Y){for(var ue=t(h);ue!==null;){if(ue.callback===null)i(h);else if(ue.startTime<=Y)i(h),ue.sortIndex=ue.expirationTime,e(m,ue);else break;ue=t(h)}}function ae(Y){if(O=!1,re(Y),!k)if(t(m)!==null)k=!0,j||(j=!0,B());else{var ue=t(h);ue!==null&&fe(ae,ue.startTime-Y)}}var j=!1,R=-1,M=5,D=-1;function U(){return P?!0:!(n.unstable_now()-D<M)}function L(){if(P=!1,j){var Y=n.unstable_now();D=Y;var ue=!0;try{e:{k=!1,O&&(O=!1,ee(R),R=-1),I=!0;var pe=S;try{t:{for(re(Y),T=t(m);T!==null&&!(T.expirationTime>Y&&U());){var ke=T.callback;if(typeof ke=="function"){T.callback=null,S=T.priorityLevel;var Ke=ke(T.expirationTime<=Y);if(Y=n.unstable_now(),typeof Ke=="function"){T.callback=Ke,re(Y),ue=!0;break t}T===t(m)&&i(m),re(Y)}else i(m);T=t(m)}if(T!==null)ue=!0;else{var G=t(h);G!==null&&fe(ae,G.startTime-Y),ue=!1}}break e}finally{T=null,S=pe,I=!1}ue=void 0}}finally{ue?B():j=!1}}}var B;if(typeof X=="function")B=function(){X(L)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,ge=N.port2;N.port1.onmessage=L,B=function(){ge.postMessage(null)}}else B=function(){$(L,0)};function fe(Y,ue){R=$(function(){Y(n.unstable_now())},ue)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Y){Y.callback=null},n.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<Y?Math.floor(1e3/Y):5},n.unstable_getCurrentPriorityLevel=function(){return S},n.unstable_next=function(Y){switch(S){case 1:case 2:case 3:var ue=3;break;default:ue=S}var pe=S;S=ue;try{return Y()}finally{S=pe}},n.unstable_requestPaint=function(){P=!0},n.unstable_runWithPriority=function(Y,ue){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var pe=S;S=Y;try{return ue()}finally{S=pe}},n.unstable_scheduleCallback=function(Y,ue,pe){var ke=n.unstable_now();switch(typeof pe=="object"&&pe!==null?(pe=pe.delay,pe=typeof pe=="number"&&0<pe?ke+pe:ke):pe=ke,Y){case 1:var Ke=-1;break;case 2:Ke=250;break;case 5:Ke=1073741823;break;case 4:Ke=1e4;break;default:Ke=5e3}return Ke=pe+Ke,Y={id:v++,callback:ue,priorityLevel:Y,startTime:pe,expirationTime:Ke,sortIndex:-1},pe>ke?(Y.sortIndex=pe,e(h,Y),t(m)===null&&Y===t(h)&&(O?(ee(R),R=-1):O=!0,fe(ae,pe-ke))):(Y.sortIndex=Ke,e(m,Y),k||I||(k=!0,j||(j=!0,B()))),Y},n.unstable_shouldYield=U,n.unstable_wrapCallback=function(Y){var ue=S;return function(){var pe=S;S=ue;try{return Y.apply(this,arguments)}finally{S=pe}}}})(Gp)),Gp}var C_;function FI(){return C_||(C_=1,Fp.exports=OI()),Fp.exports}var Bp={exports:{}},tn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var x_;function GI(){if(x_)return tn;x_=1;var n=Wm();function e(m){var h="https://react.dev/errors/"+m;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)h+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+m+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function a(m,h,v){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:T==null?null:""+T,children:m,containerInfo:h,implementation:v}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(m,h){if(m==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return tn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,tn.createPortal=function(m,h){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return a(m,h,null,v)},tn.flushSync=function(m){var h=u.T,v=i.p;try{if(u.T=null,i.p=2,m)return m()}finally{u.T=h,i.p=v,i.d.f()}},tn.preconnect=function(m,h){typeof m=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,i.d.C(m,h))},tn.prefetchDNS=function(m){typeof m=="string"&&i.d.D(m)},tn.preinit=function(m,h){if(typeof m=="string"&&h&&typeof h.as=="string"){var v=h.as,T=f(v,h.crossOrigin),S=typeof h.integrity=="string"?h.integrity:void 0,I=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;v==="style"?i.d.S(m,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:T,integrity:S,fetchPriority:I}):v==="script"&&i.d.X(m,{crossOrigin:T,integrity:S,fetchPriority:I,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},tn.preinitModule=function(m,h){if(typeof m=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var v=f(h.as,h.crossOrigin);i.d.M(m,{crossOrigin:v,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&i.d.M(m)},tn.preload=function(m,h){if(typeof m=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var v=h.as,T=f(v,h.crossOrigin);i.d.L(m,v,{crossOrigin:T,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},tn.preloadModule=function(m,h){if(typeof m=="string")if(h){var v=f(h.as,h.crossOrigin);i.d.m(m,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:v,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else i.d.m(m)},tn.requestFormReset=function(m){i.d.r(m)},tn.unstable_batchedUpdates=function(m,h){return m(h)},tn.useFormState=function(m,h,v){return u.H.useFormState(m,h,v)},tn.useFormStatus=function(){return u.H.useHostTransitionStatus()},tn.version="19.2.4",tn}var I_;function BI(){if(I_)return Bp.exports;I_=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Bp.exports=GI(),Bp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b_;function HI(){if(b_)return Ql;b_=1;var n=FI(),e=Wm(),t=BI();function i(s){var r="https://react.dev/errors/"+s;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)r+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+s+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function a(s){var r=s,l=s;if(s.alternate)for(;r.return;)r=r.return;else{s=r;do r=s,(r.flags&4098)!==0&&(l=r.return),s=r.return;while(s)}return r.tag===3?l:null}function u(s){if(s.tag===13){var r=s.memoizedState;if(r===null&&(s=s.alternate,s!==null&&(r=s.memoizedState)),r!==null)return r.dehydrated}return null}function f(s){if(s.tag===31){var r=s.memoizedState;if(r===null&&(s=s.alternate,s!==null&&(r=s.memoizedState)),r!==null)return r.dehydrated}return null}function m(s){if(a(s)!==s)throw Error(i(188))}function h(s){var r=s.alternate;if(!r){if(r=a(s),r===null)throw Error(i(188));return r!==s?null:s}for(var l=s,c=r;;){var y=l.return;if(y===null)break;var _=y.alternate;if(_===null){if(c=y.return,c!==null){l=c;continue}break}if(y.child===_.child){for(_=y.child;_;){if(_===l)return m(y),s;if(_===c)return m(y),r;_=_.sibling}throw Error(i(188))}if(l.return!==c.return)l=y,c=_;else{for(var w=!1,x=y.child;x;){if(x===l){w=!0,l=y,c=_;break}if(x===c){w=!0,c=y,l=_;break}x=x.sibling}if(!w){for(x=_.child;x;){if(x===l){w=!0,l=_,c=y;break}if(x===c){w=!0,c=_,l=y;break}x=x.sibling}if(!w)throw Error(i(189))}}if(l.alternate!==c)throw Error(i(190))}if(l.tag!==3)throw Error(i(188));return l.stateNode.current===l?s:r}function v(s){var r=s.tag;if(r===5||r===26||r===27||r===6)return s;for(s=s.child;s!==null;){if(r=v(s),r!==null)return r;s=s.sibling}return null}var T=Object.assign,S=Symbol.for("react.element"),I=Symbol.for("react.transitional.element"),k=Symbol.for("react.portal"),O=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),$=Symbol.for("react.profiler"),ee=Symbol.for("react.consumer"),X=Symbol.for("react.context"),re=Symbol.for("react.forward_ref"),ae=Symbol.for("react.suspense"),j=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),D=Symbol.for("react.activity"),U=Symbol.for("react.memo_cache_sentinel"),L=Symbol.iterator;function B(s){return s===null||typeof s!="object"?null:(s=L&&s[L]||s["@@iterator"],typeof s=="function"?s:null)}var N=Symbol.for("react.client.reference");function ge(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===N?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case O:return"Fragment";case $:return"Profiler";case P:return"StrictMode";case ae:return"Suspense";case j:return"SuspenseList";case D:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case k:return"Portal";case X:return s.displayName||"Context";case ee:return(s._context.displayName||"Context")+".Consumer";case re:var r=s.render;return s=s.displayName,s||(s=r.displayName||r.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case R:return r=s.displayName||null,r!==null?r:ge(s.type)||"Memo";case M:r=s._payload,s=s._init;try{return ge(s(r))}catch{}}return null}var fe=Array.isArray,Y=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ue=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,pe={pending:!1,data:null,method:null,action:null},ke=[],Ke=-1;function G(s){return{current:s}}function ne(s){0>Ke||(s.current=ke[Ke],ke[Ke]=null,Ke--)}function ce(s,r){Ke++,ke[Ke]=s.current,s.current=r}var ye=G(null),xe=G(null),Le=G(null),Ye=G(null);function Lt(s,r){switch(ce(Le,r),ce(xe,s),ce(ye,null),r.nodeType){case 9:case 11:s=(s=r.documentElement)&&(s=s.namespaceURI)?qv(s):0;break;default:if(s=r.tagName,r=r.namespaceURI)r=qv(r),s=zv(r,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}ne(ye),ce(ye,s)}function dt(){ne(ye),ne(xe),ne(Le)}function wr(s){s.memoizedState!==null&&ce(Ye,s);var r=ye.current,l=zv(r,s.type);r!==l&&(ce(xe,s),ce(ye,l))}function Ao(s){xe.current===s&&(ne(ye),ne(xe)),Ye.current===s&&(ne(Ye),Yl._currentValue=pe)}var wo,Co;function gi(s){if(wo===void 0)try{throw Error()}catch(l){var r=l.stack.trim().match(/\n( *(at )?)/);wo=r&&r[1]||"",Co=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+wo+s+Co}var Ya=!1;function Cr(s,r){if(!s||Ya)return"";Ya=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(r){var ie=function(){throw Error()};if(Object.defineProperty(ie.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ie,[])}catch(W){var K=W}Reflect.construct(s,[],ie)}else{try{ie.call()}catch(W){K=W}s.call(ie.prototype)}}else{try{throw Error()}catch(W){K=W}(ie=s())&&typeof ie.catch=="function"&&ie.catch(function(){})}}catch(W){if(W&&K&&typeof W.stack=="string")return[W.stack,K.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=c.DetermineComponentFrameRoot(),w=_[0],x=_[1];if(w&&x){var V=w.split(`
`),J=x.split(`
`);for(y=c=0;c<V.length&&!V[c].includes("DetermineComponentFrameRoot");)c++;for(;y<J.length&&!J[y].includes("DetermineComponentFrameRoot");)y++;if(c===V.length||y===J.length)for(c=V.length-1,y=J.length-1;1<=c&&0<=y&&V[c]!==J[y];)y--;for(;1<=c&&0<=y;c--,y--)if(V[c]!==J[y]){if(c!==1||y!==1)do if(c--,y--,0>y||V[c]!==J[y]){var Z=`
`+V[c].replace(" at new "," at ");return s.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",s.displayName)),Z}while(1<=c&&0<=y);break}}}finally{Ya=!1,Error.prepareStackTrace=l}return(l=s?s.displayName||s.name:"")?gi(l):""}function Ja(s,r){switch(s.tag){case 26:case 27:case 5:return gi(s.type);case 16:return gi("Lazy");case 13:return s.child!==r&&r!==null?gi("Suspense Fallback"):gi("Suspense");case 19:return gi("SuspenseList");case 0:case 15:return Cr(s.type,!1);case 11:return Cr(s.type.render,!1);case 1:return Cr(s.type,!0);case 31:return gi("Activity");default:return""}}function Ka(s){try{var r="",l=null;do r+=Ja(s,l),l=s,s=s.return;while(s);return r}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var wt=Object.prototype.hasOwnProperty,Vt=n.unstable_scheduleCallback,Is=n.unstable_cancelCallback,Of=n.unstable_shouldYield,Bu=n.unstable_requestPaint,un=n.unstable_now,xr=n.unstable_getCurrentPriorityLevel,$a=n.unstable_ImmediatePriority,ja=n.unstable_UserBlockingPriority,bs=n.unstable_NormalPriority,Ff=n.unstable_LowPriority,Hu=n.unstable_IdlePriority,qu=n.log,zu=n.unstable_setDisableYieldValue,Wn=null,Jt=null;function Pn(s){if(typeof qu=="function"&&zu(s),Jt&&typeof Jt.setStrictMode=="function")try{Jt.setStrictMode(Wn,s)}catch{}}var _t=Math.clz32?Math.clz32:Ju,Yu=Math.log,xo=Math.LN2;function Ju(s){return s>>>=0,s===0?32:31-(Yu(s)/xo|0)|0}var yi=256,Ir=262144,Ct=4194304;function vi(s){var r=s&42;if(r!==0)return r;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function _i(s,r,l){var c=s.pendingLanes;if(c===0)return 0;var y=0,_=s.suspendedLanes,w=s.pingedLanes;s=s.warmLanes;var x=c&134217727;return x!==0?(c=x&~_,c!==0?y=vi(c):(w&=x,w!==0?y=vi(w):l||(l=x&~s,l!==0&&(y=vi(l))))):(x=c&~_,x!==0?y=vi(x):w!==0?y=vi(w):l||(l=c&~s,l!==0&&(y=vi(l)))),y===0?0:r!==0&&r!==y&&(r&_)===0&&(_=y&-y,l=r&-r,_>=l||_===32&&(l&4194048)!==0)?r:y}function Xn(s,r){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&r)===0}function Gf(s,r){switch(s){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ku(){var s=Ct;return Ct<<=1,(Ct&62914560)===0&&(Ct=4194304),s}function Ti(s){for(var r=[],l=0;31>l;l++)r.push(s);return r}function br(s,r){s.pendingLanes|=r,r!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function Bf(s,r,l,c,y,_){var w=s.pendingLanes;s.pendingLanes=l,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=l,s.entangledLanes&=l,s.errorRecoveryDisabledLanes&=l,s.shellSuspendCounter=0;var x=s.entanglements,V=s.expirationTimes,J=s.hiddenUpdates;for(l=w&~l;0<l;){var Z=31-_t(l),ie=1<<Z;x[Z]=0,V[Z]=-1;var K=J[Z];if(K!==null)for(J[Z]=null,Z=0;Z<K.length;Z++){var W=K[Z];W!==null&&(W.lane&=-536870913)}l&=~ie}c!==0&&Rr(s,c,0),_!==0&&y===0&&s.tag!==0&&(s.suspendedLanes|=_&~(w&~r))}function Rr(s,r,l){s.pendingLanes|=r,s.suspendedLanes&=~r;var c=31-_t(r);s.entangledLanes|=r,s.entanglements[c]=s.entanglements[c]|1073741824|l&261930}function Qa(s,r){var l=s.entangledLanes|=r;for(s=s.entanglements;l;){var c=31-_t(l),y=1<<c;y&r|s[c]&r&&(s[c]|=r),l&=~y}}function Wa(s,r){var l=r&-r;return l=(l&42)!==0?1:Nr(l),(l&(s.suspendedLanes|r))!==0?0:l}function Nr(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Ji(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function $u(){var s=ue.p;return s!==0?s:(s=window.event,s===void 0?32:h_(s.type))}function Zn(s,r){var l=ue.p;try{return ue.p=s,r()}finally{ue.p=l}}var ei=Math.random().toString(36).slice(2),xt="__reactFiber$"+ei,Bt="__reactProps$"+ei,Ei="__reactContainer$"+ei,Io="__reactEvents$"+ei,Hf="__reactListeners$"+ei,ju="__reactHandles$"+ei,Qu="__reactResources$"+ei,Si="__reactMarker$"+ei;function bo(s){delete s[xt],delete s[Bt],delete s[Io],delete s[Hf],delete s[ju]}function Ai(s){var r=s[xt];if(r)return r;for(var l=s.parentNode;l;){if(r=l[Ei]||l[xt]){if(l=r.alternate,r.child!==null||l!==null&&l.child!==null)for(s=Wv(s);s!==null;){if(l=s[xt])return l;s=Wv(s)}return r}s=l,l=s.parentNode}return null}function Ln(s){if(s=s[xt]||s[Ei]){var r=s.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return s}return null}function An(s){var r=s.tag;if(r===5||r===26||r===27||r===6)return s.stateNode;throw Error(i(33))}function wi(s){var r=s[Qu];return r||(r=s[Qu]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function It(s){s[Si]=!0}var Xa=new Set,Za={};function Ci(s,r){xi(s,r),xi(s+"Capture",r)}function xi(s,r){for(Za[s]=r,s=0;s<r.length;s++)Xa.add(r[s])}var el=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),tl={},nl={};function Wu(s){return wt.call(nl,s)?!0:wt.call(tl,s)?!1:el.test(s)?nl[s]=!0:(tl[s]=!0,!1)}function Ro(s,r,l){if(Wu(r))if(l===null)s.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":s.removeAttribute(r);return;case"boolean":var c=r.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){s.removeAttribute(r);return}}s.setAttribute(r,""+l)}}function wn(s,r,l){if(l===null)s.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(r);return}s.setAttribute(r,""+l)}}function bt(s,r,l,c){if(c===null)s.removeAttribute(l);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttributeNS(r,l,""+c)}}function Ht(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Rs(s){var r=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function il(s,r,l){var c=Object.getOwnPropertyDescriptor(s.constructor.prototype,r);if(!s.hasOwnProperty(r)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var y=c.get,_=c.set;return Object.defineProperty(s,r,{configurable:!0,get:function(){return y.call(this)},set:function(w){l=""+w,_.call(this,w)}}),Object.defineProperty(s,r,{enumerable:c.enumerable}),{getValue:function(){return l},setValue:function(w){l=""+w},stopTracking:function(){s._valueTracker=null,delete s[r]}}}}function et(s){if(!s._valueTracker){var r=Rs(s)?"checked":"value";s._valueTracker=il(s,r,""+s[r])}}function Mr(s){if(!s)return!1;var r=s._valueTracker;if(!r)return!0;var l=r.getValue(),c="";return s&&(c=Rs(s)?s.checked?"true":"false":s.value),s=c,s!==l?(r.setValue(s),!0):!1}function Ii(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var kr=/[\n"\\]/g;function pn(s){return s.replace(kr,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function No(s,r,l,c,y,_,w,x){s.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?s.type=w:s.removeAttribute("type"),r!=null?w==="number"?(r===0&&s.value===""||s.value!=r)&&(s.value=""+Ht(r)):s.value!==""+Ht(r)&&(s.value=""+Ht(r)):w!=="submit"&&w!=="reset"||s.removeAttribute("value"),r!=null?sl(s,w,Ht(r)):l!=null?sl(s,w,Ht(l)):c!=null&&s.removeAttribute("value"),y==null&&_!=null&&(s.defaultChecked=!!_),y!=null&&(s.checked=y&&typeof y!="function"&&typeof y!="symbol"),x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?s.name=""+Ht(x):s.removeAttribute("name")}function Xu(s,r,l,c,y,_,w,x){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(s.type=_),r!=null||l!=null){if(!(_!=="submit"&&_!=="reset"||r!=null)){et(s);return}l=l!=null?""+Ht(l):"",r=r!=null?""+Ht(r):l,x||r===s.value||(s.value=r),s.defaultValue=r}c=c??y,c=typeof c!="function"&&typeof c!="symbol"&&!!c,s.checked=x?s.checked:!!c,s.defaultChecked=!!c,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(s.name=w),et(s)}function sl(s,r,l){r==="number"&&Ii(s.ownerDocument)===s||s.defaultValue===""+l||(s.defaultValue=""+l)}function Ns(s,r,l,c){if(s=s.options,r){r={};for(var y=0;y<l.length;y++)r["$"+l[y]]=!0;for(l=0;l<s.length;l++)y=r.hasOwnProperty("$"+s[l].value),s[l].selected!==y&&(s[l].selected=y),y&&c&&(s[l].defaultSelected=!0)}else{for(l=""+Ht(l),r=null,y=0;y<s.length;y++){if(s[y].value===l){s[y].selected=!0,c&&(s[y].defaultSelected=!0);return}r!==null||s[y].disabled||(r=s[y])}r!==null&&(r.selected=!0)}}function Zu(s,r,l){if(r!=null&&(r=""+Ht(r),r!==s.value&&(s.value=r),l==null)){s.defaultValue!==r&&(s.defaultValue=r);return}s.defaultValue=l!=null?""+Ht(l):""}function Ms(s,r,l,c){if(r==null){if(c!=null){if(l!=null)throw Error(i(92));if(fe(c)){if(1<c.length)throw Error(i(93));c=c[0]}l=c}l==null&&(l=""),r=l}l=Ht(r),s.defaultValue=l,c=s.textContent,c===l&&c!==""&&c!==null&&(s.value=c),et(s)}function mn(s,r){if(r){var l=s.firstChild;if(l&&l===s.lastChild&&l.nodeType===3){l.nodeValue=r;return}}s.textContent=r}var ec=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function rl(s,r,l){var c=r.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?c?s.setProperty(r,""):r==="float"?s.cssFloat="":s[r]="":c?s.setProperty(r,l):typeof l!="number"||l===0||ec.has(r)?r==="float"?s.cssFloat=l:s[r]=(""+l).trim():s[r]=l+"px"}function ol(s,r,l){if(r!=null&&typeof r!="object")throw Error(i(62));if(s=s.style,l!=null){for(var c in l)!l.hasOwnProperty(c)||r!=null&&r.hasOwnProperty(c)||(c.indexOf("--")===0?s.setProperty(c,""):c==="float"?s.cssFloat="":s[c]="");for(var y in r)c=r[y],r.hasOwnProperty(y)&&l[y]!==c&&rl(s,y,c)}else for(var _ in r)r.hasOwnProperty(_)&&rl(s,_,r[_])}function Mo(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var tc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ks=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ko(s){return ks.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function ti(){}var al=null;function Vn(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Ds=null,bi=null;function Dr(s){var r=Ln(s);if(r&&(s=r.stateNode)){var l=s[Bt]||null;e:switch(s=r.stateNode,r.type){case"input":if(No(s,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),r=l.name,l.type==="radio"&&r!=null){for(l=s;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+pn(""+r)+'"][type="radio"]'),r=0;r<l.length;r++){var c=l[r];if(c!==s&&c.form===s.form){var y=c[Bt]||null;if(!y)throw Error(i(90));No(c,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(r=0;r<l.length;r++)c=l[r],c.form===s.form&&Mr(c)}break e;case"textarea":Zu(s,l.value,l.defaultValue);break e;case"select":r=l.value,r!=null&&Ns(s,!!l.multiple,r,!1)}}}var Do=!1;function Ps(s,r,l){if(Do)return s(r,l);Do=!0;try{var c=s(r);return c}finally{if(Do=!1,(Ds!==null||bi!==null)&&($c(),Ds&&(r=Ds,s=bi,bi=Ds=null,Dr(r),s)))for(r=0;r<s.length;r++)Dr(s[r])}}function ni(s,r){var l=s.stateNode;if(l===null)return null;var c=l[Bt]||null;if(c===null)return null;l=c[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(s=s.type,c=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!c;break e;default:s=!1}if(s)return null;if(l&&typeof l!="function")throw Error(i(231,r,typeof l));return l}var Un=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Pr=!1;if(Un)try{var it={};Object.defineProperty(it,"passive",{get:function(){Pr=!0}}),window.addEventListener("test",it,it),window.removeEventListener("test",it,it)}catch{Pr=!1}var Ri=null,ll=null,Lr=null;function ul(){if(Lr)return Lr;var s,r=ll,l=r.length,c,y="value"in Ri?Ri.value:Ri.textContent,_=y.length;for(s=0;s<l&&r[s]===y[s];s++);var w=l-s;for(c=1;c<=w&&r[l-c]===y[_-c];c++);return Lr=y.slice(s,1<c?1-c:void 0)}function Vr(s){var r=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&r===13&&(s=13)):s=r,s===10&&(s=13),32<=s||s===13?s:0}function Ki(){return!0}function ii(){return!1}function Kt(s){function r(l,c,y,_,w){this._reactName=l,this._targetInst=y,this.type=c,this.nativeEvent=_,this.target=w,this.currentTarget=null;for(var x in s)s.hasOwnProperty(x)&&(l=s[x],this[x]=l?l(_):_[x]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?Ki:ii,this.isPropagationStopped=ii,this}return T(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Ki)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Ki)},persist:function(){},isPersistent:Ki}),r}var $i={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ni=Kt($i),Ls=T({},$i,{view:0,detail:0}),cl=Kt(Ls),Vs,Po,Mi,Lo=T({},Ls,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Us,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Mi&&(Mi&&s.type==="mousemove"?(Vs=s.screenX-Mi.screenX,Po=s.screenY-Mi.screenY):Po=Vs=0,Mi=s),Vs)},movementY:function(s){return"movementY"in s?s.movementY:Po}}),dl=Kt(Lo),Ur=T({},Lo,{dataTransfer:0}),nc=Kt(Ur),ic=T({},Ls,{relatedTarget:0}),Or=Kt(ic),fl=T({},$i,{animationName:0,elapsedTime:0,pseudoElement:0}),sc=Kt(fl),Vo=T({},$i,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),rc=Kt(Vo),oc=T({},$i,{data:0}),ki=Kt(oc),ac={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},lc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},uc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function cc(s){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(s):(s=uc[s])?!!r[s]:!1}function Us(){return cc}var cn=T({},Ls,{key:function(s){if(s.key){var r=ac[s.key]||s.key;if(r!=="Unidentified")return r}return s.type==="keypress"?(s=Vr(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?lc[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Us,charCode:function(s){return s.type==="keypress"?Vr(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Vr(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),dc=Kt(cn),fc=T({},Lo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ji=Kt(fc),g=T({},Ls,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Us}),E=Kt(g),C=T({},$i,{propertyName:0,elapsedTime:0,pseudoElement:0}),b=Kt(C),q=T({},Lo,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Q=Kt(q),le=T({},$i,{newState:0,oldState:0}),De=Kt(le),Tt=[9,13,27,32],We=Un&&"CompositionEvent"in window,ft=null;Un&&"documentMode"in document&&(ft=document.documentMode);var On=Un&&"TextEvent"in window&&!ft,Di=Un&&(!We||ft&&8<ft&&11>=ft),si=" ",ri=!1;function Fr(s,r){switch(s){case"keyup":return Tt.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Uo(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Oo=!1;function sx(s,r){switch(s){case"compositionend":return Uo(r);case"keypress":return r.which!==32?null:(ri=!0,si);case"textInput":return s=r.data,s===si&&ri?null:s;default:return null}}function rx(s,r){if(Oo)return s==="compositionend"||!We&&Fr(s,r)?(s=ul(),Lr=ll=Ri=null,Oo=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Di&&r.locale!=="ko"?null:r.data;default:return null}}var ox={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ey(s){var r=s&&s.nodeName&&s.nodeName.toLowerCase();return r==="input"?!!ox[s.type]:r==="textarea"}function ty(s,r,l,c){Ds?bi?bi.push(c):bi=[c]:Ds=c,r=td(r,"onChange"),0<r.length&&(l=new Ni("onChange","change",null,l,c),s.push({event:l,listeners:r}))}var hl=null,pl=null;function ax(s){Uv(s,0)}function hc(s){var r=An(s);if(Mr(r))return s}function ny(s,r){if(s==="change")return r}var iy=!1;if(Un){var qf;if(Un){var zf="oninput"in document;if(!zf){var sy=document.createElement("div");sy.setAttribute("oninput","return;"),zf=typeof sy.oninput=="function"}qf=zf}else qf=!1;iy=qf&&(!document.documentMode||9<document.documentMode)}function ry(){hl&&(hl.detachEvent("onpropertychange",oy),pl=hl=null)}function oy(s){if(s.propertyName==="value"&&hc(pl)){var r=[];ty(r,pl,s,Vn(s)),Ps(ax,r)}}function lx(s,r,l){s==="focusin"?(ry(),hl=r,pl=l,hl.attachEvent("onpropertychange",oy)):s==="focusout"&&ry()}function ux(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return hc(pl)}function cx(s,r){if(s==="click")return hc(r)}function dx(s,r){if(s==="input"||s==="change")return hc(r)}function fx(s,r){return s===r&&(s!==0||1/s===1/r)||s!==s&&r!==r}var Cn=typeof Object.is=="function"?Object.is:fx;function ml(s,r){if(Cn(s,r))return!0;if(typeof s!="object"||s===null||typeof r!="object"||r===null)return!1;var l=Object.keys(s),c=Object.keys(r);if(l.length!==c.length)return!1;for(c=0;c<l.length;c++){var y=l[c];if(!wt.call(r,y)||!Cn(s[y],r[y]))return!1}return!0}function ay(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function ly(s,r){var l=ay(s);s=0;for(var c;l;){if(l.nodeType===3){if(c=s+l.textContent.length,s<=r&&c>=r)return{node:l,offset:r-s};s=c}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=ay(l)}}function uy(s,r){return s&&r?s===r?!0:s&&s.nodeType===3?!1:r&&r.nodeType===3?uy(s,r.parentNode):"contains"in s?s.contains(r):s.compareDocumentPosition?!!(s.compareDocumentPosition(r)&16):!1:!1}function cy(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var r=Ii(s.document);r instanceof s.HTMLIFrameElement;){try{var l=typeof r.contentWindow.location.href=="string"}catch{l=!1}if(l)s=r.contentWindow;else break;r=Ii(s.document)}return r}function Yf(s){var r=s&&s.nodeName&&s.nodeName.toLowerCase();return r&&(r==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||r==="textarea"||s.contentEditable==="true")}var hx=Un&&"documentMode"in document&&11>=document.documentMode,Fo=null,Jf=null,gl=null,Kf=!1;function dy(s,r,l){var c=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Kf||Fo==null||Fo!==Ii(c)||(c=Fo,"selectionStart"in c&&Yf(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),gl&&ml(gl,c)||(gl=c,c=td(Jf,"onSelect"),0<c.length&&(r=new Ni("onSelect","select",null,r,l),s.push({event:r,listeners:c}),r.target=Fo)))}function Gr(s,r){var l={};return l[s.toLowerCase()]=r.toLowerCase(),l["Webkit"+s]="webkit"+r,l["Moz"+s]="moz"+r,l}var Go={animationend:Gr("Animation","AnimationEnd"),animationiteration:Gr("Animation","AnimationIteration"),animationstart:Gr("Animation","AnimationStart"),transitionrun:Gr("Transition","TransitionRun"),transitionstart:Gr("Transition","TransitionStart"),transitioncancel:Gr("Transition","TransitionCancel"),transitionend:Gr("Transition","TransitionEnd")},$f={},fy={};Un&&(fy=document.createElement("div").style,"AnimationEvent"in window||(delete Go.animationend.animation,delete Go.animationiteration.animation,delete Go.animationstart.animation),"TransitionEvent"in window||delete Go.transitionend.transition);function Br(s){if($f[s])return $f[s];if(!Go[s])return s;var r=Go[s],l;for(l in r)if(r.hasOwnProperty(l)&&l in fy)return $f[s]=r[l];return s}var hy=Br("animationend"),py=Br("animationiteration"),my=Br("animationstart"),px=Br("transitionrun"),mx=Br("transitionstart"),gx=Br("transitioncancel"),gy=Br("transitionend"),yy=new Map,jf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");jf.push("scrollEnd");function oi(s,r){yy.set(s,r),Ci(r,[s])}var pc=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},Fn=[],Bo=0,Qf=0;function mc(){for(var s=Bo,r=Qf=Bo=0;r<s;){var l=Fn[r];Fn[r++]=null;var c=Fn[r];Fn[r++]=null;var y=Fn[r];Fn[r++]=null;var _=Fn[r];if(Fn[r++]=null,c!==null&&y!==null){var w=c.pending;w===null?y.next=y:(y.next=w.next,w.next=y),c.pending=y}_!==0&&vy(l,y,_)}}function gc(s,r,l,c){Fn[Bo++]=s,Fn[Bo++]=r,Fn[Bo++]=l,Fn[Bo++]=c,Qf|=c,s.lanes|=c,s=s.alternate,s!==null&&(s.lanes|=c)}function Wf(s,r,l,c){return gc(s,r,l,c),yc(s)}function Hr(s,r){return gc(s,null,null,r),yc(s)}function vy(s,r,l){s.lanes|=l;var c=s.alternate;c!==null&&(c.lanes|=l);for(var y=!1,_=s.return;_!==null;)_.childLanes|=l,c=_.alternate,c!==null&&(c.childLanes|=l),_.tag===22&&(s=_.stateNode,s===null||s._visibility&1||(y=!0)),s=_,_=_.return;return s.tag===3?(_=s.stateNode,y&&r!==null&&(y=31-_t(l),s=_.hiddenUpdates,c=s[y],c===null?s[y]=[r]:c.push(r),r.lane=l|536870912),_):null}function yc(s){if(50<Ol)throw Ol=0,op=null,Error(i(185));for(var r=s.return;r!==null;)s=r,r=s.return;return s.tag===3?s.stateNode:null}var Ho={};function yx(s,r,l,c){this.tag=s,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xn(s,r,l,c){return new yx(s,r,l,c)}function Xf(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Qi(s,r){var l=s.alternate;return l===null?(l=xn(s.tag,r,s.key,s.mode),l.elementType=s.elementType,l.type=s.type,l.stateNode=s.stateNode,l.alternate=s,s.alternate=l):(l.pendingProps=r,l.type=s.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=s.flags&65011712,l.childLanes=s.childLanes,l.lanes=s.lanes,l.child=s.child,l.memoizedProps=s.memoizedProps,l.memoizedState=s.memoizedState,l.updateQueue=s.updateQueue,r=s.dependencies,l.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},l.sibling=s.sibling,l.index=s.index,l.ref=s.ref,l.refCleanup=s.refCleanup,l}function _y(s,r){s.flags&=65011714;var l=s.alternate;return l===null?(s.childLanes=0,s.lanes=r,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,r=l.dependencies,s.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),s}function vc(s,r,l,c,y,_){var w=0;if(c=s,typeof s=="function")Xf(s)&&(w=1);else if(typeof s=="string")w=SI(s,l,ye.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case D:return s=xn(31,l,r,y),s.elementType=D,s.lanes=_,s;case O:return qr(l.children,y,_,r);case P:w=8,y|=24;break;case $:return s=xn(12,l,r,y|2),s.elementType=$,s.lanes=_,s;case ae:return s=xn(13,l,r,y),s.elementType=ae,s.lanes=_,s;case j:return s=xn(19,l,r,y),s.elementType=j,s.lanes=_,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case X:w=10;break e;case ee:w=9;break e;case re:w=11;break e;case R:w=14;break e;case M:w=16,c=null;break e}w=29,l=Error(i(130,s===null?"null":typeof s,"")),c=null}return r=xn(w,l,r,y),r.elementType=s,r.type=c,r.lanes=_,r}function qr(s,r,l,c){return s=xn(7,s,c,r),s.lanes=l,s}function Zf(s,r,l){return s=xn(6,s,null,r),s.lanes=l,s}function Ty(s){var r=xn(18,null,null,0);return r.stateNode=s,r}function eh(s,r,l){return r=xn(4,s.children!==null?s.children:[],s.key,r),r.lanes=l,r.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},r}var Ey=new WeakMap;function Gn(s,r){if(typeof s=="object"&&s!==null){var l=Ey.get(s);return l!==void 0?l:(r={value:s,source:r,stack:Ka(r)},Ey.set(s,r),r)}return{value:s,source:r,stack:Ka(r)}}var qo=[],zo=0,_c=null,yl=0,Bn=[],Hn=0,Os=null,Pi=1,Li="";function Wi(s,r){qo[zo++]=yl,qo[zo++]=_c,_c=s,yl=r}function Sy(s,r,l){Bn[Hn++]=Pi,Bn[Hn++]=Li,Bn[Hn++]=Os,Os=s;var c=Pi;s=Li;var y=32-_t(c)-1;c&=~(1<<y),l+=1;var _=32-_t(r)+y;if(30<_){var w=y-y%5;_=(c&(1<<w)-1).toString(32),c>>=w,y-=w,Pi=1<<32-_t(r)+y|l<<y|c,Li=_+s}else Pi=1<<_|l<<y|c,Li=s}function th(s){s.return!==null&&(Wi(s,1),Sy(s,1,0))}function nh(s){for(;s===_c;)_c=qo[--zo],qo[zo]=null,yl=qo[--zo],qo[zo]=null;for(;s===Os;)Os=Bn[--Hn],Bn[Hn]=null,Li=Bn[--Hn],Bn[Hn]=null,Pi=Bn[--Hn],Bn[Hn]=null}function Ay(s,r){Bn[Hn++]=Pi,Bn[Hn++]=Li,Bn[Hn++]=Os,Pi=r.id,Li=r.overflow,Os=s}var $t=null,lt=null,ze=!1,Fs=null,qn=!1,ih=Error(i(519));function Gs(s){var r=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw vl(Gn(r,s)),ih}function wy(s){var r=s.stateNode,l=s.type,c=s.memoizedProps;switch(r[xt]=s,r[Bt]=c,l){case"dialog":Oe("cancel",r),Oe("close",r);break;case"iframe":case"object":case"embed":Oe("load",r);break;case"video":case"audio":for(l=0;l<Gl.length;l++)Oe(Gl[l],r);break;case"source":Oe("error",r);break;case"img":case"image":case"link":Oe("error",r),Oe("load",r);break;case"details":Oe("toggle",r);break;case"input":Oe("invalid",r),Xu(r,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Oe("invalid",r);break;case"textarea":Oe("invalid",r),Ms(r,c.value,c.defaultValue,c.children)}l=c.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||r.textContent===""+l||c.suppressHydrationWarning===!0||Bv(r.textContent,l)?(c.popover!=null&&(Oe("beforetoggle",r),Oe("toggle",r)),c.onScroll!=null&&Oe("scroll",r),c.onScrollEnd!=null&&Oe("scrollend",r),c.onClick!=null&&(r.onclick=ti),r=!0):r=!1,r||Gs(s,!0)}function Cy(s){for($t=s.return;$t;)switch($t.tag){case 5:case 31:case 13:qn=!1;return;case 27:case 3:qn=!0;return;default:$t=$t.return}}function Yo(s){if(s!==$t)return!1;if(!ze)return Cy(s),ze=!0,!1;var r=s.tag,l;if((l=r!==3&&r!==27)&&((l=r===5)&&(l=s.type,l=!(l!=="form"&&l!=="button")||Ep(s.type,s.memoizedProps)),l=!l),l&&lt&&Gs(s),Cy(s),r===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));lt=Qv(s)}else if(r===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));lt=Qv(s)}else r===27?(r=lt,er(s.type)?(s=xp,xp=null,lt=s):lt=r):lt=$t?Yn(s.stateNode.nextSibling):null;return!0}function zr(){lt=$t=null,ze=!1}function sh(){var s=Fs;return s!==null&&(_n===null?_n=s:_n.push.apply(_n,s),Fs=null),s}function vl(s){Fs===null?Fs=[s]:Fs.push(s)}var rh=G(null),Yr=null,Xi=null;function Bs(s,r,l){ce(rh,r._currentValue),r._currentValue=l}function Zi(s){s._currentValue=rh.current,ne(rh)}function oh(s,r,l){for(;s!==null;){var c=s.alternate;if((s.childLanes&r)!==r?(s.childLanes|=r,c!==null&&(c.childLanes|=r)):c!==null&&(c.childLanes&r)!==r&&(c.childLanes|=r),s===l)break;s=s.return}}function ah(s,r,l,c){var y=s.child;for(y!==null&&(y.return=s);y!==null;){var _=y.dependencies;if(_!==null){var w=y.child;_=_.firstContext;e:for(;_!==null;){var x=_;_=y;for(var V=0;V<r.length;V++)if(x.context===r[V]){_.lanes|=l,x=_.alternate,x!==null&&(x.lanes|=l),oh(_.return,l,s),c||(w=null);break e}_=x.next}}else if(y.tag===18){if(w=y.return,w===null)throw Error(i(341));w.lanes|=l,_=w.alternate,_!==null&&(_.lanes|=l),oh(w,l,s),w=null}else w=y.child;if(w!==null)w.return=y;else for(w=y;w!==null;){if(w===s){w=null;break}if(y=w.sibling,y!==null){y.return=w.return,w=y;break}w=w.return}y=w}}function Jo(s,r,l,c){s=null;for(var y=r,_=!1;y!==null;){if(!_){if((y.flags&524288)!==0)_=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var w=y.alternate;if(w===null)throw Error(i(387));if(w=w.memoizedProps,w!==null){var x=y.type;Cn(y.pendingProps.value,w.value)||(s!==null?s.push(x):s=[x])}}else if(y===Ye.current){if(w=y.alternate,w===null)throw Error(i(387));w.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(s!==null?s.push(Yl):s=[Yl])}y=y.return}s!==null&&ah(r,s,l,c),r.flags|=262144}function Tc(s){for(s=s.firstContext;s!==null;){if(!Cn(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Jr(s){Yr=s,Xi=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function jt(s){return xy(Yr,s)}function Ec(s,r){return Yr===null&&Jr(s),xy(s,r)}function xy(s,r){var l=r._currentValue;if(r={context:r,memoizedValue:l,next:null},Xi===null){if(s===null)throw Error(i(308));Xi=r,s.dependencies={lanes:0,firstContext:r},s.flags|=524288}else Xi=Xi.next=r;return l}var vx=typeof AbortController<"u"?AbortController:function(){var s=[],r=this.signal={aborted:!1,addEventListener:function(l,c){s.push(c)}};this.abort=function(){r.aborted=!0,s.forEach(function(l){return l()})}},_x=n.unstable_scheduleCallback,Tx=n.unstable_NormalPriority,Rt={$$typeof:X,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function lh(){return{controller:new vx,data:new Map,refCount:0}}function _l(s){s.refCount--,s.refCount===0&&_x(Tx,function(){s.controller.abort()})}var Tl=null,uh=0,Ko=0,$o=null;function Ex(s,r){if(Tl===null){var l=Tl=[];uh=0,Ko=fp(),$o={status:"pending",value:void 0,then:function(c){l.push(c)}}}return uh++,r.then(Iy,Iy),r}function Iy(){if(--uh===0&&Tl!==null){$o!==null&&($o.status="fulfilled");var s=Tl;Tl=null,Ko=0,$o=null;for(var r=0;r<s.length;r++)(0,s[r])()}}function Sx(s,r){var l=[],c={status:"pending",value:null,reason:null,then:function(y){l.push(y)}};return s.then(function(){c.status="fulfilled",c.value=r;for(var y=0;y<l.length;y++)(0,l[y])(r)},function(y){for(c.status="rejected",c.reason=y,y=0;y<l.length;y++)(0,l[y])(void 0)}),c}var by=Y.S;Y.S=function(s,r){dv=un(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&Ex(s,r),by!==null&&by(s,r)};var Kr=G(null);function ch(){var s=Kr.current;return s!==null?s:at.pooledCache}function Sc(s,r){r===null?ce(Kr,Kr.current):ce(Kr,r.pool)}function Ry(){var s=ch();return s===null?null:{parent:Rt._currentValue,pool:s}}var jo=Error(i(460)),dh=Error(i(474)),Ac=Error(i(542)),wc={then:function(){}};function Ny(s){return s=s.status,s==="fulfilled"||s==="rejected"}function My(s,r,l){switch(l=s[l],l===void 0?s.push(r):l!==r&&(r.then(ti,ti),r=l),r.status){case"fulfilled":return r.value;case"rejected":throw s=r.reason,Dy(s),s;default:if(typeof r.status=="string")r.then(ti,ti);else{if(s=at,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=r,s.status="pending",s.then(function(c){if(r.status==="pending"){var y=r;y.status="fulfilled",y.value=c}},function(c){if(r.status==="pending"){var y=r;y.status="rejected",y.reason=c}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw s=r.reason,Dy(s),s}throw jr=r,jo}}function $r(s){try{var r=s._init;return r(s._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(jr=l,jo):l}}var jr=null;function ky(){if(jr===null)throw Error(i(459));var s=jr;return jr=null,s}function Dy(s){if(s===jo||s===Ac)throw Error(i(483))}var Qo=null,El=0;function Cc(s){var r=El;return El+=1,Qo===null&&(Qo=[]),My(Qo,s,r)}function Sl(s,r){r=r.props.ref,s.ref=r!==void 0?r:null}function xc(s,r){throw r.$$typeof===S?Error(i(525)):(s=Object.prototype.toString.call(r),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":s)))}function Py(s){function r(H,F){if(s){var z=H.deletions;z===null?(H.deletions=[F],H.flags|=16):z.push(F)}}function l(H,F){if(!s)return null;for(;F!==null;)r(H,F),F=F.sibling;return null}function c(H){for(var F=new Map;H!==null;)H.key!==null?F.set(H.key,H):F.set(H.index,H),H=H.sibling;return F}function y(H,F){return H=Qi(H,F),H.index=0,H.sibling=null,H}function _(H,F,z){return H.index=z,s?(z=H.alternate,z!==null?(z=z.index,z<F?(H.flags|=67108866,F):z):(H.flags|=67108866,F)):(H.flags|=1048576,F)}function w(H){return s&&H.alternate===null&&(H.flags|=67108866),H}function x(H,F,z,te){return F===null||F.tag!==6?(F=Zf(z,H.mode,te),F.return=H,F):(F=y(F,z),F.return=H,F)}function V(H,F,z,te){var Ee=z.type;return Ee===O?Z(H,F,z.props.children,te,z.key):F!==null&&(F.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===M&&$r(Ee)===F.type)?(F=y(F,z.props),Sl(F,z),F.return=H,F):(F=vc(z.type,z.key,z.props,null,H.mode,te),Sl(F,z),F.return=H,F)}function J(H,F,z,te){return F===null||F.tag!==4||F.stateNode.containerInfo!==z.containerInfo||F.stateNode.implementation!==z.implementation?(F=eh(z,H.mode,te),F.return=H,F):(F=y(F,z.children||[]),F.return=H,F)}function Z(H,F,z,te,Ee){return F===null||F.tag!==7?(F=qr(z,H.mode,te,Ee),F.return=H,F):(F=y(F,z),F.return=H,F)}function ie(H,F,z){if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return F=Zf(""+F,H.mode,z),F.return=H,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case I:return z=vc(F.type,F.key,F.props,null,H.mode,z),Sl(z,F),z.return=H,z;case k:return F=eh(F,H.mode,z),F.return=H,F;case M:return F=$r(F),ie(H,F,z)}if(fe(F)||B(F))return F=qr(F,H.mode,z,null),F.return=H,F;if(typeof F.then=="function")return ie(H,Cc(F),z);if(F.$$typeof===X)return ie(H,Ec(H,F),z);xc(H,F)}return null}function K(H,F,z,te){var Ee=F!==null?F.key:null;if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return Ee!==null?null:x(H,F,""+z,te);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case I:return z.key===Ee?V(H,F,z,te):null;case k:return z.key===Ee?J(H,F,z,te):null;case M:return z=$r(z),K(H,F,z,te)}if(fe(z)||B(z))return Ee!==null?null:Z(H,F,z,te,null);if(typeof z.then=="function")return K(H,F,Cc(z),te);if(z.$$typeof===X)return K(H,F,Ec(H,z),te);xc(H,z)}return null}function W(H,F,z,te,Ee){if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return H=H.get(z)||null,x(F,H,""+te,Ee);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case I:return H=H.get(te.key===null?z:te.key)||null,V(F,H,te,Ee);case k:return H=H.get(te.key===null?z:te.key)||null,J(F,H,te,Ee);case M:return te=$r(te),W(H,F,z,te,Ee)}if(fe(te)||B(te))return H=H.get(z)||null,Z(F,H,te,Ee,null);if(typeof te.then=="function")return W(H,F,z,Cc(te),Ee);if(te.$$typeof===X)return W(H,F,z,Ec(F,te),Ee);xc(F,te)}return null}function ve(H,F,z,te){for(var Ee=null,$e=null,_e=F,Ve=F=0,Ge=null;_e!==null&&Ve<z.length;Ve++){_e.index>Ve?(Ge=_e,_e=null):Ge=_e.sibling;var je=K(H,_e,z[Ve],te);if(je===null){_e===null&&(_e=Ge);break}s&&_e&&je.alternate===null&&r(H,_e),F=_(je,F,Ve),$e===null?Ee=je:$e.sibling=je,$e=je,_e=Ge}if(Ve===z.length)return l(H,_e),ze&&Wi(H,Ve),Ee;if(_e===null){for(;Ve<z.length;Ve++)_e=ie(H,z[Ve],te),_e!==null&&(F=_(_e,F,Ve),$e===null?Ee=_e:$e.sibling=_e,$e=_e);return ze&&Wi(H,Ve),Ee}for(_e=c(_e);Ve<z.length;Ve++)Ge=W(_e,H,Ve,z[Ve],te),Ge!==null&&(s&&Ge.alternate!==null&&_e.delete(Ge.key===null?Ve:Ge.key),F=_(Ge,F,Ve),$e===null?Ee=Ge:$e.sibling=Ge,$e=Ge);return s&&_e.forEach(function(rr){return r(H,rr)}),ze&&Wi(H,Ve),Ee}function Ae(H,F,z,te){if(z==null)throw Error(i(151));for(var Ee=null,$e=null,_e=F,Ve=F=0,Ge=null,je=z.next();_e!==null&&!je.done;Ve++,je=z.next()){_e.index>Ve?(Ge=_e,_e=null):Ge=_e.sibling;var rr=K(H,_e,je.value,te);if(rr===null){_e===null&&(_e=Ge);break}s&&_e&&rr.alternate===null&&r(H,_e),F=_(rr,F,Ve),$e===null?Ee=rr:$e.sibling=rr,$e=rr,_e=Ge}if(je.done)return l(H,_e),ze&&Wi(H,Ve),Ee;if(_e===null){for(;!je.done;Ve++,je=z.next())je=ie(H,je.value,te),je!==null&&(F=_(je,F,Ve),$e===null?Ee=je:$e.sibling=je,$e=je);return ze&&Wi(H,Ve),Ee}for(_e=c(_e);!je.done;Ve++,je=z.next())je=W(_e,H,Ve,je.value,te),je!==null&&(s&&je.alternate!==null&&_e.delete(je.key===null?Ve:je.key),F=_(je,F,Ve),$e===null?Ee=je:$e.sibling=je,$e=je);return s&&_e.forEach(function(DI){return r(H,DI)}),ze&&Wi(H,Ve),Ee}function ot(H,F,z,te){if(typeof z=="object"&&z!==null&&z.type===O&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case I:e:{for(var Ee=z.key;F!==null;){if(F.key===Ee){if(Ee=z.type,Ee===O){if(F.tag===7){l(H,F.sibling),te=y(F,z.props.children),te.return=H,H=te;break e}}else if(F.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===M&&$r(Ee)===F.type){l(H,F.sibling),te=y(F,z.props),Sl(te,z),te.return=H,H=te;break e}l(H,F);break}else r(H,F);F=F.sibling}z.type===O?(te=qr(z.props.children,H.mode,te,z.key),te.return=H,H=te):(te=vc(z.type,z.key,z.props,null,H.mode,te),Sl(te,z),te.return=H,H=te)}return w(H);case k:e:{for(Ee=z.key;F!==null;){if(F.key===Ee)if(F.tag===4&&F.stateNode.containerInfo===z.containerInfo&&F.stateNode.implementation===z.implementation){l(H,F.sibling),te=y(F,z.children||[]),te.return=H,H=te;break e}else{l(H,F);break}else r(H,F);F=F.sibling}te=eh(z,H.mode,te),te.return=H,H=te}return w(H);case M:return z=$r(z),ot(H,F,z,te)}if(fe(z))return ve(H,F,z,te);if(B(z)){if(Ee=B(z),typeof Ee!="function")throw Error(i(150));return z=Ee.call(z),Ae(H,F,z,te)}if(typeof z.then=="function")return ot(H,F,Cc(z),te);if(z.$$typeof===X)return ot(H,F,Ec(H,z),te);xc(H,z)}return typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint"?(z=""+z,F!==null&&F.tag===6?(l(H,F.sibling),te=y(F,z),te.return=H,H=te):(l(H,F),te=Zf(z,H.mode,te),te.return=H,H=te),w(H)):l(H,F)}return function(H,F,z,te){try{El=0;var Ee=ot(H,F,z,te);return Qo=null,Ee}catch(_e){if(_e===jo||_e===Ac)throw _e;var $e=xn(29,_e,null,H.mode);return $e.lanes=te,$e.return=H,$e}finally{}}}var Qr=Py(!0),Ly=Py(!1),Hs=!1;function fh(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function hh(s,r){s=s.updateQueue,r.updateQueue===s&&(r.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function qs(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function zs(s,r,l){var c=s.updateQueue;if(c===null)return null;if(c=c.shared,(Xe&2)!==0){var y=c.pending;return y===null?r.next=r:(r.next=y.next,y.next=r),c.pending=r,r=yc(s),vy(s,null,l),r}return gc(s,c,r,l),yc(s)}function Al(s,r,l){if(r=r.updateQueue,r!==null&&(r=r.shared,(l&4194048)!==0)){var c=r.lanes;c&=s.pendingLanes,l|=c,r.lanes=l,Qa(s,l)}}function ph(s,r){var l=s.updateQueue,c=s.alternate;if(c!==null&&(c=c.updateQueue,l===c)){var y=null,_=null;if(l=l.firstBaseUpdate,l!==null){do{var w={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};_===null?y=_=w:_=_.next=w,l=l.next}while(l!==null);_===null?y=_=r:_=_.next=r}else y=_=r;l={baseState:c.baseState,firstBaseUpdate:y,lastBaseUpdate:_,shared:c.shared,callbacks:c.callbacks},s.updateQueue=l;return}s=l.lastBaseUpdate,s===null?l.firstBaseUpdate=r:s.next=r,l.lastBaseUpdate=r}var mh=!1;function wl(){if(mh){var s=$o;if(s!==null)throw s}}function Cl(s,r,l,c){mh=!1;var y=s.updateQueue;Hs=!1;var _=y.firstBaseUpdate,w=y.lastBaseUpdate,x=y.shared.pending;if(x!==null){y.shared.pending=null;var V=x,J=V.next;V.next=null,w===null?_=J:w.next=J,w=V;var Z=s.alternate;Z!==null&&(Z=Z.updateQueue,x=Z.lastBaseUpdate,x!==w&&(x===null?Z.firstBaseUpdate=J:x.next=J,Z.lastBaseUpdate=V))}if(_!==null){var ie=y.baseState;w=0,Z=J=V=null,x=_;do{var K=x.lane&-536870913,W=K!==x.lane;if(W?(Fe&K)===K:(c&K)===K){K!==0&&K===Ko&&(mh=!0),Z!==null&&(Z=Z.next={lane:0,tag:x.tag,payload:x.payload,callback:null,next:null});e:{var ve=s,Ae=x;K=r;var ot=l;switch(Ae.tag){case 1:if(ve=Ae.payload,typeof ve=="function"){ie=ve.call(ot,ie,K);break e}ie=ve;break e;case 3:ve.flags=ve.flags&-65537|128;case 0:if(ve=Ae.payload,K=typeof ve=="function"?ve.call(ot,ie,K):ve,K==null)break e;ie=T({},ie,K);break e;case 2:Hs=!0}}K=x.callback,K!==null&&(s.flags|=64,W&&(s.flags|=8192),W=y.callbacks,W===null?y.callbacks=[K]:W.push(K))}else W={lane:K,tag:x.tag,payload:x.payload,callback:x.callback,next:null},Z===null?(J=Z=W,V=ie):Z=Z.next=W,w|=K;if(x=x.next,x===null){if(x=y.shared.pending,x===null)break;W=x,x=W.next,W.next=null,y.lastBaseUpdate=W,y.shared.pending=null}}while(!0);Z===null&&(V=ie),y.baseState=V,y.firstBaseUpdate=J,y.lastBaseUpdate=Z,_===null&&(y.shared.lanes=0),js|=w,s.lanes=w,s.memoizedState=ie}}function Vy(s,r){if(typeof s!="function")throw Error(i(191,s));s.call(r)}function Uy(s,r){var l=s.callbacks;if(l!==null)for(s.callbacks=null,s=0;s<l.length;s++)Vy(l[s],r)}var Wo=G(null),Ic=G(0);function Oy(s,r){s=ls,ce(Ic,s),ce(Wo,r),ls=s|r.baseLanes}function gh(){ce(Ic,ls),ce(Wo,Wo.current)}function yh(){ls=Ic.current,ne(Wo),ne(Ic)}var In=G(null),zn=null;function Ys(s){var r=s.alternate;ce(Et,Et.current&1),ce(In,s),zn===null&&(r===null||Wo.current!==null||r.memoizedState!==null)&&(zn=s)}function vh(s){ce(Et,Et.current),ce(In,s),zn===null&&(zn=s)}function Fy(s){s.tag===22?(ce(Et,Et.current),ce(In,s),zn===null&&(zn=s)):Js()}function Js(){ce(Et,Et.current),ce(In,In.current)}function bn(s){ne(In),zn===s&&(zn=null),ne(Et)}var Et=G(0);function bc(s){for(var r=s;r!==null;){if(r.tag===13){var l=r.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||wp(l)||Cp(l)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var es=0,Pe=null,st=null,Nt=null,Rc=!1,Xo=!1,Wr=!1,Nc=0,xl=0,Zo=null,Ax=0;function gt(){throw Error(i(321))}function _h(s,r){if(r===null)return!1;for(var l=0;l<r.length&&l<s.length;l++)if(!Cn(s[l],r[l]))return!1;return!0}function Th(s,r,l,c,y,_){return es=_,Pe=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,Y.H=s===null||s.memoizedState===null?S0:Lh,Wr=!1,_=l(c,y),Wr=!1,Xo&&(_=By(r,l,c,y)),Gy(s),_}function Gy(s){Y.H=Rl;var r=st!==null&&st.next!==null;if(es=0,Nt=st=Pe=null,Rc=!1,xl=0,Zo=null,r)throw Error(i(300));s===null||Mt||(s=s.dependencies,s!==null&&Tc(s)&&(Mt=!0))}function By(s,r,l,c){Pe=s;var y=0;do{if(Xo&&(Zo=null),xl=0,Xo=!1,25<=y)throw Error(i(301));if(y+=1,Nt=st=null,s.updateQueue!=null){var _=s.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}Y.H=A0,_=r(l,c)}while(Xo);return _}function wx(){var s=Y.H,r=s.useState()[0];return r=typeof r.then=="function"?Il(r):r,s=s.useState()[0],(st!==null?st.memoizedState:null)!==s&&(Pe.flags|=1024),r}function Eh(){var s=Nc!==0;return Nc=0,s}function Sh(s,r,l){r.updateQueue=s.updateQueue,r.flags&=-2053,s.lanes&=~l}function Ah(s){if(Rc){for(s=s.memoizedState;s!==null;){var r=s.queue;r!==null&&(r.pending=null),s=s.next}Rc=!1}es=0,Nt=st=Pe=null,Xo=!1,xl=Nc=0,Zo=null}function dn(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nt===null?Pe.memoizedState=Nt=s:Nt=Nt.next=s,Nt}function St(){if(st===null){var s=Pe.alternate;s=s!==null?s.memoizedState:null}else s=st.next;var r=Nt===null?Pe.memoizedState:Nt.next;if(r!==null)Nt=r,st=s;else{if(s===null)throw Pe.alternate===null?Error(i(467)):Error(i(310));st=s,s={memoizedState:st.memoizedState,baseState:st.baseState,baseQueue:st.baseQueue,queue:st.queue,next:null},Nt===null?Pe.memoizedState=Nt=s:Nt=Nt.next=s}return Nt}function Mc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Il(s){var r=xl;return xl+=1,Zo===null&&(Zo=[]),s=My(Zo,s,r),r=Pe,(Nt===null?r.memoizedState:Nt.next)===null&&(r=r.alternate,Y.H=r===null||r.memoizedState===null?S0:Lh),s}function kc(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Il(s);if(s.$$typeof===X)return jt(s)}throw Error(i(438,String(s)))}function wh(s){var r=null,l=Pe.updateQueue;if(l!==null&&(r=l.memoCache),r==null){var c=Pe.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(r={data:c.data.map(function(y){return y.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),l===null&&(l=Mc(),Pe.updateQueue=l),l.memoCache=r,l=r.data[r.index],l===void 0)for(l=r.data[r.index]=Array(s),c=0;c<s;c++)l[c]=U;return r.index++,l}function ts(s,r){return typeof r=="function"?r(s):r}function Dc(s){var r=St();return Ch(r,st,s)}function Ch(s,r,l){var c=s.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=l;var y=s.baseQueue,_=c.pending;if(_!==null){if(y!==null){var w=y.next;y.next=_.next,_.next=w}r.baseQueue=y=_,c.pending=null}if(_=s.baseState,y===null)s.memoizedState=_;else{r=y.next;var x=w=null,V=null,J=r,Z=!1;do{var ie=J.lane&-536870913;if(ie!==J.lane?(Fe&ie)===ie:(es&ie)===ie){var K=J.revertLane;if(K===0)V!==null&&(V=V.next={lane:0,revertLane:0,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null}),ie===Ko&&(Z=!0);else if((es&K)===K){J=J.next,K===Ko&&(Z=!0);continue}else ie={lane:0,revertLane:J.revertLane,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},V===null?(x=V=ie,w=_):V=V.next=ie,Pe.lanes|=K,js|=K;ie=J.action,Wr&&l(_,ie),_=J.hasEagerState?J.eagerState:l(_,ie)}else K={lane:ie,revertLane:J.revertLane,gesture:J.gesture,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},V===null?(x=V=K,w=_):V=V.next=K,Pe.lanes|=ie,js|=ie;J=J.next}while(J!==null&&J!==r);if(V===null?w=_:V.next=x,!Cn(_,s.memoizedState)&&(Mt=!0,Z&&(l=$o,l!==null)))throw l;s.memoizedState=_,s.baseState=w,s.baseQueue=V,c.lastRenderedState=_}return y===null&&(c.lanes=0),[s.memoizedState,c.dispatch]}function xh(s){var r=St(),l=r.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=s;var c=l.dispatch,y=l.pending,_=r.memoizedState;if(y!==null){l.pending=null;var w=y=y.next;do _=s(_,w.action),w=w.next;while(w!==y);Cn(_,r.memoizedState)||(Mt=!0),r.memoizedState=_,r.baseQueue===null&&(r.baseState=_),l.lastRenderedState=_}return[_,c]}function Hy(s,r,l){var c=Pe,y=St(),_=ze;if(_){if(l===void 0)throw Error(i(407));l=l()}else l=r();var w=!Cn((st||y).memoizedState,l);if(w&&(y.memoizedState=l,Mt=!0),y=y.queue,Rh(Yy.bind(null,c,y,s),[s]),y.getSnapshot!==r||w||Nt!==null&&Nt.memoizedState.tag&1){if(c.flags|=2048,ea(9,{destroy:void 0},zy.bind(null,c,y,l,r),null),at===null)throw Error(i(349));_||(es&127)!==0||qy(c,r,l)}return l}function qy(s,r,l){s.flags|=16384,s={getSnapshot:r,value:l},r=Pe.updateQueue,r===null?(r=Mc(),Pe.updateQueue=r,r.stores=[s]):(l=r.stores,l===null?r.stores=[s]:l.push(s))}function zy(s,r,l,c){r.value=l,r.getSnapshot=c,Jy(r)&&Ky(s)}function Yy(s,r,l){return l(function(){Jy(r)&&Ky(s)})}function Jy(s){var r=s.getSnapshot;s=s.value;try{var l=r();return!Cn(s,l)}catch{return!0}}function Ky(s){var r=Hr(s,2);r!==null&&Tn(r,s,2)}function Ih(s){var r=dn();if(typeof s=="function"){var l=s;if(s=l(),Wr){Pn(!0);try{l()}finally{Pn(!1)}}}return r.memoizedState=r.baseState=s,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ts,lastRenderedState:s},r}function $y(s,r,l,c){return s.baseState=l,Ch(s,st,typeof c=="function"?c:ts)}function Cx(s,r,l,c,y){if(Vc(s))throw Error(i(485));if(s=r.action,s!==null){var _={payload:y,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){_.listeners.push(w)}};Y.T!==null?l(!0):_.isTransition=!1,c(_),l=r.pending,l===null?(_.next=r.pending=_,jy(r,_)):(_.next=l.next,r.pending=l.next=_)}}function jy(s,r){var l=r.action,c=r.payload,y=s.state;if(r.isTransition){var _=Y.T,w={};Y.T=w;try{var x=l(y,c),V=Y.S;V!==null&&V(w,x),Qy(s,r,x)}catch(J){bh(s,r,J)}finally{_!==null&&w.types!==null&&(_.types=w.types),Y.T=_}}else try{_=l(y,c),Qy(s,r,_)}catch(J){bh(s,r,J)}}function Qy(s,r,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(c){Wy(s,r,c)},function(c){return bh(s,r,c)}):Wy(s,r,l)}function Wy(s,r,l){r.status="fulfilled",r.value=l,Xy(r),s.state=l,r=s.pending,r!==null&&(l=r.next,l===r?s.pending=null:(l=l.next,r.next=l,jy(s,l)))}function bh(s,r,l){var c=s.pending;if(s.pending=null,c!==null){c=c.next;do r.status="rejected",r.reason=l,Xy(r),r=r.next;while(r!==c)}s.action=null}function Xy(s){s=s.listeners;for(var r=0;r<s.length;r++)(0,s[r])()}function Zy(s,r){return r}function e0(s,r){if(ze){var l=at.formState;if(l!==null){e:{var c=Pe;if(ze){if(lt){t:{for(var y=lt,_=qn;y.nodeType!==8;){if(!_){y=null;break t}if(y=Yn(y.nextSibling),y===null){y=null;break t}}_=y.data,y=_==="F!"||_==="F"?y:null}if(y){lt=Yn(y.nextSibling),c=y.data==="F!";break e}}Gs(c)}c=!1}c&&(r=l[0])}}return l=dn(),l.memoizedState=l.baseState=r,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zy,lastRenderedState:r},l.queue=c,l=_0.bind(null,Pe,c),c.dispatch=l,c=Ih(!1),_=Ph.bind(null,Pe,!1,c.queue),c=dn(),y={state:r,dispatch:null,action:s,pending:null},c.queue=y,l=Cx.bind(null,Pe,y,_,l),y.dispatch=l,c.memoizedState=s,[r,l,!1]}function t0(s){var r=St();return n0(r,st,s)}function n0(s,r,l){if(r=Ch(s,r,Zy)[0],s=Dc(ts)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var c=Il(r)}catch(w){throw w===jo?Ac:w}else c=r;r=St();var y=r.queue,_=y.dispatch;return l!==r.memoizedState&&(Pe.flags|=2048,ea(9,{destroy:void 0},xx.bind(null,y,l),null)),[c,_,s]}function xx(s,r){s.action=r}function i0(s){var r=St(),l=st;if(l!==null)return n0(r,l,s);St(),r=r.memoizedState,l=St();var c=l.queue.dispatch;return l.memoizedState=s,[r,c,!1]}function ea(s,r,l,c){return s={tag:s,create:l,deps:c,inst:r,next:null},r=Pe.updateQueue,r===null&&(r=Mc(),Pe.updateQueue=r),l=r.lastEffect,l===null?r.lastEffect=s.next=s:(c=l.next,l.next=s,s.next=c,r.lastEffect=s),s}function s0(){return St().memoizedState}function Pc(s,r,l,c){var y=dn();Pe.flags|=s,y.memoizedState=ea(1|r,{destroy:void 0},l,c===void 0?null:c)}function Lc(s,r,l,c){var y=St();c=c===void 0?null:c;var _=y.memoizedState.inst;st!==null&&c!==null&&_h(c,st.memoizedState.deps)?y.memoizedState=ea(r,_,l,c):(Pe.flags|=s,y.memoizedState=ea(1|r,_,l,c))}function r0(s,r){Pc(8390656,8,s,r)}function Rh(s,r){Lc(2048,8,s,r)}function Ix(s){Pe.flags|=4;var r=Pe.updateQueue;if(r===null)r=Mc(),Pe.updateQueue=r,r.events=[s];else{var l=r.events;l===null?r.events=[s]:l.push(s)}}function o0(s){var r=St().memoizedState;return Ix({ref:r,nextImpl:s}),function(){if((Xe&2)!==0)throw Error(i(440));return r.impl.apply(void 0,arguments)}}function a0(s,r){return Lc(4,2,s,r)}function l0(s,r){return Lc(4,4,s,r)}function u0(s,r){if(typeof r=="function"){s=s();var l=r(s);return function(){typeof l=="function"?l():r(null)}}if(r!=null)return s=s(),r.current=s,function(){r.current=null}}function c0(s,r,l){l=l!=null?l.concat([s]):null,Lc(4,4,u0.bind(null,r,s),l)}function Nh(){}function d0(s,r){var l=St();r=r===void 0?null:r;var c=l.memoizedState;return r!==null&&_h(r,c[1])?c[0]:(l.memoizedState=[s,r],s)}function f0(s,r){var l=St();r=r===void 0?null:r;var c=l.memoizedState;if(r!==null&&_h(r,c[1]))return c[0];if(c=s(),Wr){Pn(!0);try{s()}finally{Pn(!1)}}return l.memoizedState=[c,r],c}function Mh(s,r,l){return l===void 0||(es&1073741824)!==0&&(Fe&261930)===0?s.memoizedState=r:(s.memoizedState=l,s=hv(),Pe.lanes|=s,js|=s,l)}function h0(s,r,l,c){return Cn(l,r)?l:Wo.current!==null?(s=Mh(s,l,c),Cn(s,r)||(Mt=!0),s):(es&42)===0||(es&1073741824)!==0&&(Fe&261930)===0?(Mt=!0,s.memoizedState=l):(s=hv(),Pe.lanes|=s,js|=s,r)}function p0(s,r,l,c,y){var _=ue.p;ue.p=_!==0&&8>_?_:8;var w=Y.T,x={};Y.T=x,Ph(s,!1,r,l);try{var V=y(),J=Y.S;if(J!==null&&J(x,V),V!==null&&typeof V=="object"&&typeof V.then=="function"){var Z=Sx(V,c);bl(s,r,Z,Mn(s))}else bl(s,r,c,Mn(s))}catch(ie){bl(s,r,{then:function(){},status:"rejected",reason:ie},Mn())}finally{ue.p=_,w!==null&&x.types!==null&&(w.types=x.types),Y.T=w}}function bx(){}function kh(s,r,l,c){if(s.tag!==5)throw Error(i(476));var y=m0(s).queue;p0(s,y,r,pe,l===null?bx:function(){return g0(s),l(c)})}function m0(s){var r=s.memoizedState;if(r!==null)return r;r={memoizedState:pe,baseState:pe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ts,lastRenderedState:pe},next:null};var l={};return r.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ts,lastRenderedState:l},next:null},s.memoizedState=r,s=s.alternate,s!==null&&(s.memoizedState=r),r}function g0(s){var r=m0(s);r.next===null&&(r=s.alternate.memoizedState),bl(s,r.next.queue,{},Mn())}function Dh(){return jt(Yl)}function y0(){return St().memoizedState}function v0(){return St().memoizedState}function Rx(s){for(var r=s.return;r!==null;){switch(r.tag){case 24:case 3:var l=Mn();s=qs(l);var c=zs(r,s,l);c!==null&&(Tn(c,r,l),Al(c,r,l)),r={cache:lh()},s.payload=r;return}r=r.return}}function Nx(s,r,l){var c=Mn();l={lane:c,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Vc(s)?T0(r,l):(l=Wf(s,r,l,c),l!==null&&(Tn(l,s,c),E0(l,r,c)))}function _0(s,r,l){var c=Mn();bl(s,r,l,c)}function bl(s,r,l,c){var y={lane:c,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(Vc(s))T0(r,y);else{var _=s.alternate;if(s.lanes===0&&(_===null||_.lanes===0)&&(_=r.lastRenderedReducer,_!==null))try{var w=r.lastRenderedState,x=_(w,l);if(y.hasEagerState=!0,y.eagerState=x,Cn(x,w))return gc(s,r,y,0),at===null&&mc(),!1}catch{}finally{}if(l=Wf(s,r,y,c),l!==null)return Tn(l,s,c),E0(l,r,c),!0}return!1}function Ph(s,r,l,c){if(c={lane:2,revertLane:fp(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Vc(s)){if(r)throw Error(i(479))}else r=Wf(s,l,c,2),r!==null&&Tn(r,s,2)}function Vc(s){var r=s.alternate;return s===Pe||r!==null&&r===Pe}function T0(s,r){Xo=Rc=!0;var l=s.pending;l===null?r.next=r:(r.next=l.next,l.next=r),s.pending=r}function E0(s,r,l){if((l&4194048)!==0){var c=r.lanes;c&=s.pendingLanes,l|=c,r.lanes=l,Qa(s,l)}}var Rl={readContext:jt,use:kc,useCallback:gt,useContext:gt,useEffect:gt,useImperativeHandle:gt,useLayoutEffect:gt,useInsertionEffect:gt,useMemo:gt,useReducer:gt,useRef:gt,useState:gt,useDebugValue:gt,useDeferredValue:gt,useTransition:gt,useSyncExternalStore:gt,useId:gt,useHostTransitionStatus:gt,useFormState:gt,useActionState:gt,useOptimistic:gt,useMemoCache:gt,useCacheRefresh:gt};Rl.useEffectEvent=gt;var S0={readContext:jt,use:kc,useCallback:function(s,r){return dn().memoizedState=[s,r===void 0?null:r],s},useContext:jt,useEffect:r0,useImperativeHandle:function(s,r,l){l=l!=null?l.concat([s]):null,Pc(4194308,4,u0.bind(null,r,s),l)},useLayoutEffect:function(s,r){return Pc(4194308,4,s,r)},useInsertionEffect:function(s,r){Pc(4,2,s,r)},useMemo:function(s,r){var l=dn();r=r===void 0?null:r;var c=s();if(Wr){Pn(!0);try{s()}finally{Pn(!1)}}return l.memoizedState=[c,r],c},useReducer:function(s,r,l){var c=dn();if(l!==void 0){var y=l(r);if(Wr){Pn(!0);try{l(r)}finally{Pn(!1)}}}else y=r;return c.memoizedState=c.baseState=y,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:y},c.queue=s,s=s.dispatch=Nx.bind(null,Pe,s),[c.memoizedState,s]},useRef:function(s){var r=dn();return s={current:s},r.memoizedState=s},useState:function(s){s=Ih(s);var r=s.queue,l=_0.bind(null,Pe,r);return r.dispatch=l,[s.memoizedState,l]},useDebugValue:Nh,useDeferredValue:function(s,r){var l=dn();return Mh(l,s,r)},useTransition:function(){var s=Ih(!1);return s=p0.bind(null,Pe,s.queue,!0,!1),dn().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,r,l){var c=Pe,y=dn();if(ze){if(l===void 0)throw Error(i(407));l=l()}else{if(l=r(),at===null)throw Error(i(349));(Fe&127)!==0||qy(c,r,l)}y.memoizedState=l;var _={value:l,getSnapshot:r};return y.queue=_,r0(Yy.bind(null,c,_,s),[s]),c.flags|=2048,ea(9,{destroy:void 0},zy.bind(null,c,_,l,r),null),l},useId:function(){var s=dn(),r=at.identifierPrefix;if(ze){var l=Li,c=Pi;l=(c&~(1<<32-_t(c)-1)).toString(32)+l,r="_"+r+"R_"+l,l=Nc++,0<l&&(r+="H"+l.toString(32)),r+="_"}else l=Ax++,r="_"+r+"r_"+l.toString(32)+"_";return s.memoizedState=r},useHostTransitionStatus:Dh,useFormState:e0,useActionState:e0,useOptimistic:function(s){var r=dn();r.memoizedState=r.baseState=s;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=l,r=Ph.bind(null,Pe,!0,l),l.dispatch=r,[s,r]},useMemoCache:wh,useCacheRefresh:function(){return dn().memoizedState=Rx.bind(null,Pe)},useEffectEvent:function(s){var r=dn(),l={impl:s};return r.memoizedState=l,function(){if((Xe&2)!==0)throw Error(i(440));return l.impl.apply(void 0,arguments)}}},Lh={readContext:jt,use:kc,useCallback:d0,useContext:jt,useEffect:Rh,useImperativeHandle:c0,useInsertionEffect:a0,useLayoutEffect:l0,useMemo:f0,useReducer:Dc,useRef:s0,useState:function(){return Dc(ts)},useDebugValue:Nh,useDeferredValue:function(s,r){var l=St();return h0(l,st.memoizedState,s,r)},useTransition:function(){var s=Dc(ts)[0],r=St().memoizedState;return[typeof s=="boolean"?s:Il(s),r]},useSyncExternalStore:Hy,useId:y0,useHostTransitionStatus:Dh,useFormState:t0,useActionState:t0,useOptimistic:function(s,r){var l=St();return $y(l,st,s,r)},useMemoCache:wh,useCacheRefresh:v0};Lh.useEffectEvent=o0;var A0={readContext:jt,use:kc,useCallback:d0,useContext:jt,useEffect:Rh,useImperativeHandle:c0,useInsertionEffect:a0,useLayoutEffect:l0,useMemo:f0,useReducer:xh,useRef:s0,useState:function(){return xh(ts)},useDebugValue:Nh,useDeferredValue:function(s,r){var l=St();return st===null?Mh(l,s,r):h0(l,st.memoizedState,s,r)},useTransition:function(){var s=xh(ts)[0],r=St().memoizedState;return[typeof s=="boolean"?s:Il(s),r]},useSyncExternalStore:Hy,useId:y0,useHostTransitionStatus:Dh,useFormState:i0,useActionState:i0,useOptimistic:function(s,r){var l=St();return st!==null?$y(l,st,s,r):(l.baseState=s,[s,l.queue.dispatch])},useMemoCache:wh,useCacheRefresh:v0};A0.useEffectEvent=o0;function Vh(s,r,l,c){r=s.memoizedState,l=l(c,r),l=l==null?r:T({},r,l),s.memoizedState=l,s.lanes===0&&(s.updateQueue.baseState=l)}var Uh={enqueueSetState:function(s,r,l){s=s._reactInternals;var c=Mn(),y=qs(c);y.payload=r,l!=null&&(y.callback=l),r=zs(s,y,c),r!==null&&(Tn(r,s,c),Al(r,s,c))},enqueueReplaceState:function(s,r,l){s=s._reactInternals;var c=Mn(),y=qs(c);y.tag=1,y.payload=r,l!=null&&(y.callback=l),r=zs(s,y,c),r!==null&&(Tn(r,s,c),Al(r,s,c))},enqueueForceUpdate:function(s,r){s=s._reactInternals;var l=Mn(),c=qs(l);c.tag=2,r!=null&&(c.callback=r),r=zs(s,c,l),r!==null&&(Tn(r,s,l),Al(r,s,l))}};function w0(s,r,l,c,y,_,w){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(c,_,w):r.prototype&&r.prototype.isPureReactComponent?!ml(l,c)||!ml(y,_):!0}function C0(s,r,l,c){s=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(l,c),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(l,c),r.state!==s&&Uh.enqueueReplaceState(r,r.state,null)}function Xr(s,r){var l=r;if("ref"in r){l={};for(var c in r)c!=="ref"&&(l[c]=r[c])}if(s=s.defaultProps){l===r&&(l=T({},l));for(var y in s)l[y]===void 0&&(l[y]=s[y])}return l}function x0(s){pc(s)}function I0(s){console.error(s)}function b0(s){pc(s)}function Uc(s,r){try{var l=s.onUncaughtError;l(r.value,{componentStack:r.stack})}catch(c){setTimeout(function(){throw c})}}function R0(s,r,l){try{var c=s.onCaughtError;c(l.value,{componentStack:l.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function Oh(s,r,l){return l=qs(l),l.tag=3,l.payload={element:null},l.callback=function(){Uc(s,r)},l}function N0(s){return s=qs(s),s.tag=3,s}function M0(s,r,l,c){var y=l.type.getDerivedStateFromError;if(typeof y=="function"){var _=c.value;s.payload=function(){return y(_)},s.callback=function(){R0(r,l,c)}}var w=l.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(s.callback=function(){R0(r,l,c),typeof y!="function"&&(Qs===null?Qs=new Set([this]):Qs.add(this));var x=c.stack;this.componentDidCatch(c.value,{componentStack:x!==null?x:""})})}function Mx(s,r,l,c,y){if(l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(r=l.alternate,r!==null&&Jo(r,l,y,!0),l=In.current,l!==null){switch(l.tag){case 31:case 13:return zn===null?jc():l.alternate===null&&yt===0&&(yt=3),l.flags&=-257,l.flags|=65536,l.lanes=y,c===wc?l.flags|=16384:(r=l.updateQueue,r===null?l.updateQueue=new Set([c]):r.add(c),up(s,c,y)),!1;case 22:return l.flags|=65536,c===wc?l.flags|=16384:(r=l.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([c])},l.updateQueue=r):(l=r.retryQueue,l===null?r.retryQueue=new Set([c]):l.add(c)),up(s,c,y)),!1}throw Error(i(435,l.tag))}return up(s,c,y),jc(),!1}if(ze)return r=In.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=y,c!==ih&&(s=Error(i(422),{cause:c}),vl(Gn(s,l)))):(c!==ih&&(r=Error(i(423),{cause:c}),vl(Gn(r,l))),s=s.current.alternate,s.flags|=65536,y&=-y,s.lanes|=y,c=Gn(c,l),y=Oh(s.stateNode,c,y),ph(s,y),yt!==4&&(yt=2)),!1;var _=Error(i(520),{cause:c});if(_=Gn(_,l),Ul===null?Ul=[_]:Ul.push(_),yt!==4&&(yt=2),r===null)return!0;c=Gn(c,l),l=r;do{switch(l.tag){case 3:return l.flags|=65536,s=y&-y,l.lanes|=s,s=Oh(l.stateNode,c,s),ph(l,s),!1;case 1:if(r=l.type,_=l.stateNode,(l.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Qs===null||!Qs.has(_))))return l.flags|=65536,y&=-y,l.lanes|=y,y=N0(y),M0(y,s,l,c),ph(l,y),!1}l=l.return}while(l!==null);return!1}var Fh=Error(i(461)),Mt=!1;function Qt(s,r,l,c){r.child=s===null?Ly(r,null,l,c):Qr(r,s.child,l,c)}function k0(s,r,l,c,y){l=l.render;var _=r.ref;if("ref"in c){var w={};for(var x in c)x!=="ref"&&(w[x]=c[x])}else w=c;return Jr(r),c=Th(s,r,l,w,_,y),x=Eh(),s!==null&&!Mt?(Sh(s,r,y),ns(s,r,y)):(ze&&x&&th(r),r.flags|=1,Qt(s,r,c,y),r.child)}function D0(s,r,l,c,y){if(s===null){var _=l.type;return typeof _=="function"&&!Xf(_)&&_.defaultProps===void 0&&l.compare===null?(r.tag=15,r.type=_,P0(s,r,_,c,y)):(s=vc(l.type,null,c,r,r.mode,y),s.ref=r.ref,s.return=r,r.child=s)}if(_=s.child,!Kh(s,y)){var w=_.memoizedProps;if(l=l.compare,l=l!==null?l:ml,l(w,c)&&s.ref===r.ref)return ns(s,r,y)}return r.flags|=1,s=Qi(_,c),s.ref=r.ref,s.return=r,r.child=s}function P0(s,r,l,c,y){if(s!==null){var _=s.memoizedProps;if(ml(_,c)&&s.ref===r.ref)if(Mt=!1,r.pendingProps=c=_,Kh(s,y))(s.flags&131072)!==0&&(Mt=!0);else return r.lanes=s.lanes,ns(s,r,y)}return Gh(s,r,l,c,y)}function L0(s,r,l,c){var y=c.children,_=s!==null?s.memoizedState:null;if(s===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((r.flags&128)!==0){if(_=_!==null?_.baseLanes|l:l,s!==null){for(c=r.child=s.child,y=0;c!==null;)y=y|c.lanes|c.childLanes,c=c.sibling;c=y&~_}else c=0,r.child=null;return V0(s,r,_,l,c)}if((l&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},s!==null&&Sc(r,_!==null?_.cachePool:null),_!==null?Oy(r,_):gh(),Fy(r);else return c=r.lanes=536870912,V0(s,r,_!==null?_.baseLanes|l:l,l,c)}else _!==null?(Sc(r,_.cachePool),Oy(r,_),Js(),r.memoizedState=null):(s!==null&&Sc(r,null),gh(),Js());return Qt(s,r,y,l),r.child}function Nl(s,r){return s!==null&&s.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function V0(s,r,l,c,y){var _=ch();return _=_===null?null:{parent:Rt._currentValue,pool:_},r.memoizedState={baseLanes:l,cachePool:_},s!==null&&Sc(r,null),gh(),Fy(r),s!==null&&Jo(s,r,c,!0),r.childLanes=y,null}function Oc(s,r){return r=Gc({mode:r.mode,children:r.children},s.mode),r.ref=s.ref,s.child=r,r.return=s,r}function U0(s,r,l){return Qr(r,s.child,null,l),s=Oc(r,r.pendingProps),s.flags|=2,bn(r),r.memoizedState=null,s}function kx(s,r,l){var c=r.pendingProps,y=(r.flags&128)!==0;if(r.flags&=-129,s===null){if(ze){if(c.mode==="hidden")return s=Oc(r,c),r.lanes=536870912,Nl(null,s);if(vh(r),(s=lt)?(s=jv(s,qn),s=s!==null&&s.data==="&"?s:null,s!==null&&(r.memoizedState={dehydrated:s,treeContext:Os!==null?{id:Pi,overflow:Li}:null,retryLane:536870912,hydrationErrors:null},l=Ty(s),l.return=r,r.child=l,$t=r,lt=null)):s=null,s===null)throw Gs(r);return r.lanes=536870912,null}return Oc(r,c)}var _=s.memoizedState;if(_!==null){var w=_.dehydrated;if(vh(r),y)if(r.flags&256)r.flags&=-257,r=U0(s,r,l);else if(r.memoizedState!==null)r.child=s.child,r.flags|=128,r=null;else throw Error(i(558));else if(Mt||Jo(s,r,l,!1),y=(l&s.childLanes)!==0,Mt||y){if(c=at,c!==null&&(w=Wa(c,l),w!==0&&w!==_.retryLane))throw _.retryLane=w,Hr(s,w),Tn(c,s,w),Fh;jc(),r=U0(s,r,l)}else s=_.treeContext,lt=Yn(w.nextSibling),$t=r,ze=!0,Fs=null,qn=!1,s!==null&&Ay(r,s),r=Oc(r,c),r.flags|=4096;return r}return s=Qi(s.child,{mode:c.mode,children:c.children}),s.ref=r.ref,r.child=s,s.return=r,s}function Fc(s,r){var l=r.ref;if(l===null)s!==null&&s.ref!==null&&(r.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(i(284));(s===null||s.ref!==l)&&(r.flags|=4194816)}}function Gh(s,r,l,c,y){return Jr(r),l=Th(s,r,l,c,void 0,y),c=Eh(),s!==null&&!Mt?(Sh(s,r,y),ns(s,r,y)):(ze&&c&&th(r),r.flags|=1,Qt(s,r,l,y),r.child)}function O0(s,r,l,c,y,_){return Jr(r),r.updateQueue=null,l=By(r,c,l,y),Gy(s),c=Eh(),s!==null&&!Mt?(Sh(s,r,_),ns(s,r,_)):(ze&&c&&th(r),r.flags|=1,Qt(s,r,l,_),r.child)}function F0(s,r,l,c,y){if(Jr(r),r.stateNode===null){var _=Ho,w=l.contextType;typeof w=="object"&&w!==null&&(_=jt(w)),_=new l(c,_),r.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=Uh,r.stateNode=_,_._reactInternals=r,_=r.stateNode,_.props=c,_.state=r.memoizedState,_.refs={},fh(r),w=l.contextType,_.context=typeof w=="object"&&w!==null?jt(w):Ho,_.state=r.memoizedState,w=l.getDerivedStateFromProps,typeof w=="function"&&(Vh(r,l,w,c),_.state=r.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(w=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),w!==_.state&&Uh.enqueueReplaceState(_,_.state,null),Cl(r,c,_,y),wl(),_.state=r.memoizedState),typeof _.componentDidMount=="function"&&(r.flags|=4194308),c=!0}else if(s===null){_=r.stateNode;var x=r.memoizedProps,V=Xr(l,x);_.props=V;var J=_.context,Z=l.contextType;w=Ho,typeof Z=="object"&&Z!==null&&(w=jt(Z));var ie=l.getDerivedStateFromProps;Z=typeof ie=="function"||typeof _.getSnapshotBeforeUpdate=="function",x=r.pendingProps!==x,Z||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(x||J!==w)&&C0(r,_,c,w),Hs=!1;var K=r.memoizedState;_.state=K,Cl(r,c,_,y),wl(),J=r.memoizedState,x||K!==J||Hs?(typeof ie=="function"&&(Vh(r,l,ie,c),J=r.memoizedState),(V=Hs||w0(r,l,V,c,K,J,w))?(Z||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(r.flags|=4194308)):(typeof _.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=c,r.memoizedState=J),_.props=c,_.state=J,_.context=w,c=V):(typeof _.componentDidMount=="function"&&(r.flags|=4194308),c=!1)}else{_=r.stateNode,hh(s,r),w=r.memoizedProps,Z=Xr(l,w),_.props=Z,ie=r.pendingProps,K=_.context,J=l.contextType,V=Ho,typeof J=="object"&&J!==null&&(V=jt(J)),x=l.getDerivedStateFromProps,(J=typeof x=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(w!==ie||K!==V)&&C0(r,_,c,V),Hs=!1,K=r.memoizedState,_.state=K,Cl(r,c,_,y),wl();var W=r.memoizedState;w!==ie||K!==W||Hs||s!==null&&s.dependencies!==null&&Tc(s.dependencies)?(typeof x=="function"&&(Vh(r,l,x,c),W=r.memoizedState),(Z=Hs||w0(r,l,Z,c,K,W,V)||s!==null&&s.dependencies!==null&&Tc(s.dependencies))?(J||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(c,W,V),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(c,W,V)),typeof _.componentDidUpdate=="function"&&(r.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof _.componentDidUpdate!="function"||w===s.memoizedProps&&K===s.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||w===s.memoizedProps&&K===s.memoizedState||(r.flags|=1024),r.memoizedProps=c,r.memoizedState=W),_.props=c,_.state=W,_.context=V,c=Z):(typeof _.componentDidUpdate!="function"||w===s.memoizedProps&&K===s.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||w===s.memoizedProps&&K===s.memoizedState||(r.flags|=1024),c=!1)}return _=c,Fc(s,r),c=(r.flags&128)!==0,_||c?(_=r.stateNode,l=c&&typeof l.getDerivedStateFromError!="function"?null:_.render(),r.flags|=1,s!==null&&c?(r.child=Qr(r,s.child,null,y),r.child=Qr(r,null,l,y)):Qt(s,r,l,y),r.memoizedState=_.state,s=r.child):s=ns(s,r,y),s}function G0(s,r,l,c){return zr(),r.flags|=256,Qt(s,r,l,c),r.child}var Bh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Hh(s){return{baseLanes:s,cachePool:Ry()}}function qh(s,r,l){return s=s!==null?s.childLanes&~l:0,r&&(s|=Nn),s}function B0(s,r,l){var c=r.pendingProps,y=!1,_=(r.flags&128)!==0,w;if((w=_)||(w=s!==null&&s.memoizedState===null?!1:(Et.current&2)!==0),w&&(y=!0,r.flags&=-129),w=(r.flags&32)!==0,r.flags&=-33,s===null){if(ze){if(y?Ys(r):Js(),(s=lt)?(s=jv(s,qn),s=s!==null&&s.data!=="&"?s:null,s!==null&&(r.memoizedState={dehydrated:s,treeContext:Os!==null?{id:Pi,overflow:Li}:null,retryLane:536870912,hydrationErrors:null},l=Ty(s),l.return=r,r.child=l,$t=r,lt=null)):s=null,s===null)throw Gs(r);return Cp(s)?r.lanes=32:r.lanes=536870912,null}var x=c.children;return c=c.fallback,y?(Js(),y=r.mode,x=Gc({mode:"hidden",children:x},y),c=qr(c,y,l,null),x.return=r,c.return=r,x.sibling=c,r.child=x,c=r.child,c.memoizedState=Hh(l),c.childLanes=qh(s,w,l),r.memoizedState=Bh,Nl(null,c)):(Ys(r),zh(r,x))}var V=s.memoizedState;if(V!==null&&(x=V.dehydrated,x!==null)){if(_)r.flags&256?(Ys(r),r.flags&=-257,r=Yh(s,r,l)):r.memoizedState!==null?(Js(),r.child=s.child,r.flags|=128,r=null):(Js(),x=c.fallback,y=r.mode,c=Gc({mode:"visible",children:c.children},y),x=qr(x,y,l,null),x.flags|=2,c.return=r,x.return=r,c.sibling=x,r.child=c,Qr(r,s.child,null,l),c=r.child,c.memoizedState=Hh(l),c.childLanes=qh(s,w,l),r.memoizedState=Bh,r=Nl(null,c));else if(Ys(r),Cp(x)){if(w=x.nextSibling&&x.nextSibling.dataset,w)var J=w.dgst;w=J,c=Error(i(419)),c.stack="",c.digest=w,vl({value:c,source:null,stack:null}),r=Yh(s,r,l)}else if(Mt||Jo(s,r,l,!1),w=(l&s.childLanes)!==0,Mt||w){if(w=at,w!==null&&(c=Wa(w,l),c!==0&&c!==V.retryLane))throw V.retryLane=c,Hr(s,c),Tn(w,s,c),Fh;wp(x)||jc(),r=Yh(s,r,l)}else wp(x)?(r.flags|=192,r.child=s.child,r=null):(s=V.treeContext,lt=Yn(x.nextSibling),$t=r,ze=!0,Fs=null,qn=!1,s!==null&&Ay(r,s),r=zh(r,c.children),r.flags|=4096);return r}return y?(Js(),x=c.fallback,y=r.mode,V=s.child,J=V.sibling,c=Qi(V,{mode:"hidden",children:c.children}),c.subtreeFlags=V.subtreeFlags&65011712,J!==null?x=Qi(J,x):(x=qr(x,y,l,null),x.flags|=2),x.return=r,c.return=r,c.sibling=x,r.child=c,Nl(null,c),c=r.child,x=s.child.memoizedState,x===null?x=Hh(l):(y=x.cachePool,y!==null?(V=Rt._currentValue,y=y.parent!==V?{parent:V,pool:V}:y):y=Ry(),x={baseLanes:x.baseLanes|l,cachePool:y}),c.memoizedState=x,c.childLanes=qh(s,w,l),r.memoizedState=Bh,Nl(s.child,c)):(Ys(r),l=s.child,s=l.sibling,l=Qi(l,{mode:"visible",children:c.children}),l.return=r,l.sibling=null,s!==null&&(w=r.deletions,w===null?(r.deletions=[s],r.flags|=16):w.push(s)),r.child=l,r.memoizedState=null,l)}function zh(s,r){return r=Gc({mode:"visible",children:r},s.mode),r.return=s,s.child=r}function Gc(s,r){return s=xn(22,s,null,r),s.lanes=0,s}function Yh(s,r,l){return Qr(r,s.child,null,l),s=zh(r,r.pendingProps.children),s.flags|=2,r.memoizedState=null,s}function H0(s,r,l){s.lanes|=r;var c=s.alternate;c!==null&&(c.lanes|=r),oh(s.return,r,l)}function Jh(s,r,l,c,y,_){var w=s.memoizedState;w===null?s.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:c,tail:l,tailMode:y,treeForkCount:_}:(w.isBackwards=r,w.rendering=null,w.renderingStartTime=0,w.last=c,w.tail=l,w.tailMode=y,w.treeForkCount=_)}function q0(s,r,l){var c=r.pendingProps,y=c.revealOrder,_=c.tail;c=c.children;var w=Et.current,x=(w&2)!==0;if(x?(w=w&1|2,r.flags|=128):w&=1,ce(Et,w),Qt(s,r,c,l),c=ze?yl:0,!x&&s!==null&&(s.flags&128)!==0)e:for(s=r.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&H0(s,l,r);else if(s.tag===19)H0(s,l,r);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break e;for(;s.sibling===null;){if(s.return===null||s.return===r)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(y){case"forwards":for(l=r.child,y=null;l!==null;)s=l.alternate,s!==null&&bc(s)===null&&(y=l),l=l.sibling;l=y,l===null?(y=r.child,r.child=null):(y=l.sibling,l.sibling=null),Jh(r,!1,y,l,_,c);break;case"backwards":case"unstable_legacy-backwards":for(l=null,y=r.child,r.child=null;y!==null;){if(s=y.alternate,s!==null&&bc(s)===null){r.child=y;break}s=y.sibling,y.sibling=l,l=y,y=s}Jh(r,!0,l,null,_,c);break;case"together":Jh(r,!1,null,null,void 0,c);break;default:r.memoizedState=null}return r.child}function ns(s,r,l){if(s!==null&&(r.dependencies=s.dependencies),js|=r.lanes,(l&r.childLanes)===0)if(s!==null){if(Jo(s,r,l,!1),(l&r.childLanes)===0)return null}else return null;if(s!==null&&r.child!==s.child)throw Error(i(153));if(r.child!==null){for(s=r.child,l=Qi(s,s.pendingProps),r.child=l,l.return=r;s.sibling!==null;)s=s.sibling,l=l.sibling=Qi(s,s.pendingProps),l.return=r;l.sibling=null}return r.child}function Kh(s,r){return(s.lanes&r)!==0?!0:(s=s.dependencies,!!(s!==null&&Tc(s)))}function Dx(s,r,l){switch(r.tag){case 3:Lt(r,r.stateNode.containerInfo),Bs(r,Rt,s.memoizedState.cache),zr();break;case 27:case 5:wr(r);break;case 4:Lt(r,r.stateNode.containerInfo);break;case 10:Bs(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,vh(r),null;break;case 13:var c=r.memoizedState;if(c!==null)return c.dehydrated!==null?(Ys(r),r.flags|=128,null):(l&r.child.childLanes)!==0?B0(s,r,l):(Ys(r),s=ns(s,r,l),s!==null?s.sibling:null);Ys(r);break;case 19:var y=(s.flags&128)!==0;if(c=(l&r.childLanes)!==0,c||(Jo(s,r,l,!1),c=(l&r.childLanes)!==0),y){if(c)return q0(s,r,l);r.flags|=128}if(y=r.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),ce(Et,Et.current),c)break;return null;case 22:return r.lanes=0,L0(s,r,l,r.pendingProps);case 24:Bs(r,Rt,s.memoizedState.cache)}return ns(s,r,l)}function z0(s,r,l){if(s!==null)if(s.memoizedProps!==r.pendingProps)Mt=!0;else{if(!Kh(s,l)&&(r.flags&128)===0)return Mt=!1,Dx(s,r,l);Mt=(s.flags&131072)!==0}else Mt=!1,ze&&(r.flags&1048576)!==0&&Sy(r,yl,r.index);switch(r.lanes=0,r.tag){case 16:e:{var c=r.pendingProps;if(s=$r(r.elementType),r.type=s,typeof s=="function")Xf(s)?(c=Xr(s,c),r.tag=1,r=F0(null,r,s,c,l)):(r.tag=0,r=Gh(null,r,s,c,l));else{if(s!=null){var y=s.$$typeof;if(y===re){r.tag=11,r=k0(null,r,s,c,l);break e}else if(y===R){r.tag=14,r=D0(null,r,s,c,l);break e}}throw r=ge(s)||s,Error(i(306,r,""))}}return r;case 0:return Gh(s,r,r.type,r.pendingProps,l);case 1:return c=r.type,y=Xr(c,r.pendingProps),F0(s,r,c,y,l);case 3:e:{if(Lt(r,r.stateNode.containerInfo),s===null)throw Error(i(387));c=r.pendingProps;var _=r.memoizedState;y=_.element,hh(s,r),Cl(r,c,null,l);var w=r.memoizedState;if(c=w.cache,Bs(r,Rt,c),c!==_.cache&&ah(r,[Rt],l,!0),wl(),c=w.element,_.isDehydrated)if(_={element:c,isDehydrated:!1,cache:w.cache},r.updateQueue.baseState=_,r.memoizedState=_,r.flags&256){r=G0(s,r,c,l);break e}else if(c!==y){y=Gn(Error(i(424)),r),vl(y),r=G0(s,r,c,l);break e}else{switch(s=r.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(lt=Yn(s.firstChild),$t=r,ze=!0,Fs=null,qn=!0,l=Ly(r,null,c,l),r.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(zr(),c===y){r=ns(s,r,l);break e}Qt(s,r,c,l)}r=r.child}return r;case 26:return Fc(s,r),s===null?(l=t_(r.type,null,r.pendingProps,null))?r.memoizedState=l:ze||(l=r.type,s=r.pendingProps,c=nd(Le.current).createElement(l),c[xt]=r,c[Bt]=s,Wt(c,l,s),It(c),r.stateNode=c):r.memoizedState=t_(r.type,s.memoizedProps,r.pendingProps,s.memoizedState),null;case 27:return wr(r),s===null&&ze&&(c=r.stateNode=Xv(r.type,r.pendingProps,Le.current),$t=r,qn=!0,y=lt,er(r.type)?(xp=y,lt=Yn(c.firstChild)):lt=y),Qt(s,r,r.pendingProps.children,l),Fc(s,r),s===null&&(r.flags|=4194304),r.child;case 5:return s===null&&ze&&((y=c=lt)&&(c=uI(c,r.type,r.pendingProps,qn),c!==null?(r.stateNode=c,$t=r,lt=Yn(c.firstChild),qn=!1,y=!0):y=!1),y||Gs(r)),wr(r),y=r.type,_=r.pendingProps,w=s!==null?s.memoizedProps:null,c=_.children,Ep(y,_)?c=null:w!==null&&Ep(y,w)&&(r.flags|=32),r.memoizedState!==null&&(y=Th(s,r,wx,null,null,l),Yl._currentValue=y),Fc(s,r),Qt(s,r,c,l),r.child;case 6:return s===null&&ze&&((s=l=lt)&&(l=cI(l,r.pendingProps,qn),l!==null?(r.stateNode=l,$t=r,lt=null,s=!0):s=!1),s||Gs(r)),null;case 13:return B0(s,r,l);case 4:return Lt(r,r.stateNode.containerInfo),c=r.pendingProps,s===null?r.child=Qr(r,null,c,l):Qt(s,r,c,l),r.child;case 11:return k0(s,r,r.type,r.pendingProps,l);case 7:return Qt(s,r,r.pendingProps,l),r.child;case 8:return Qt(s,r,r.pendingProps.children,l),r.child;case 12:return Qt(s,r,r.pendingProps.children,l),r.child;case 10:return c=r.pendingProps,Bs(r,r.type,c.value),Qt(s,r,c.children,l),r.child;case 9:return y=r.type._context,c=r.pendingProps.children,Jr(r),y=jt(y),c=c(y),r.flags|=1,Qt(s,r,c,l),r.child;case 14:return D0(s,r,r.type,r.pendingProps,l);case 15:return P0(s,r,r.type,r.pendingProps,l);case 19:return q0(s,r,l);case 31:return kx(s,r,l);case 22:return L0(s,r,l,r.pendingProps);case 24:return Jr(r),c=jt(Rt),s===null?(y=ch(),y===null&&(y=at,_=lh(),y.pooledCache=_,_.refCount++,_!==null&&(y.pooledCacheLanes|=l),y=_),r.memoizedState={parent:c,cache:y},fh(r),Bs(r,Rt,y)):((s.lanes&l)!==0&&(hh(s,r),Cl(r,null,null,l),wl()),y=s.memoizedState,_=r.memoizedState,y.parent!==c?(y={parent:c,cache:c},r.memoizedState=y,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=y),Bs(r,Rt,c)):(c=_.cache,Bs(r,Rt,c),c!==y.cache&&ah(r,[Rt],l,!0))),Qt(s,r,r.pendingProps.children,l),r.child;case 29:throw r.pendingProps}throw Error(i(156,r.tag))}function is(s){s.flags|=4}function $h(s,r,l,c,y){if((r=(s.mode&32)!==0)&&(r=!1),r){if(s.flags|=16777216,(y&335544128)===y)if(s.stateNode.complete)s.flags|=8192;else if(yv())s.flags|=8192;else throw jr=wc,dh}else s.flags&=-16777217}function Y0(s,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!o_(r))if(yv())s.flags|=8192;else throw jr=wc,dh}function Bc(s,r){r!==null&&(s.flags|=4),s.flags&16384&&(r=s.tag!==22?Ku():536870912,s.lanes|=r,sa|=r)}function Ml(s,r){if(!ze)switch(s.tailMode){case"hidden":r=s.tail;for(var l=null;r!==null;)r.alternate!==null&&(l=r),r=r.sibling;l===null?s.tail=null:l.sibling=null;break;case"collapsed":l=s.tail;for(var c=null;l!==null;)l.alternate!==null&&(c=l),l=l.sibling;c===null?r||s.tail===null?s.tail=null:s.tail.sibling=null:c.sibling=null}}function ut(s){var r=s.alternate!==null&&s.alternate.child===s.child,l=0,c=0;if(r)for(var y=s.child;y!==null;)l|=y.lanes|y.childLanes,c|=y.subtreeFlags&65011712,c|=y.flags&65011712,y.return=s,y=y.sibling;else for(y=s.child;y!==null;)l|=y.lanes|y.childLanes,c|=y.subtreeFlags,c|=y.flags,y.return=s,y=y.sibling;return s.subtreeFlags|=c,s.childLanes=l,r}function Px(s,r,l){var c=r.pendingProps;switch(nh(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ut(r),null;case 1:return ut(r),null;case 3:return l=r.stateNode,c=null,s!==null&&(c=s.memoizedState.cache),r.memoizedState.cache!==c&&(r.flags|=2048),Zi(Rt),dt(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(s===null||s.child===null)&&(Yo(r)?is(r):s===null||s.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,sh())),ut(r),null;case 26:var y=r.type,_=r.memoizedState;return s===null?(is(r),_!==null?(ut(r),Y0(r,_)):(ut(r),$h(r,y,null,c,l))):_?_!==s.memoizedState?(is(r),ut(r),Y0(r,_)):(ut(r),r.flags&=-16777217):(s=s.memoizedProps,s!==c&&is(r),ut(r),$h(r,y,s,c,l)),null;case 27:if(Ao(r),l=Le.current,y=r.type,s!==null&&r.stateNode!=null)s.memoizedProps!==c&&is(r);else{if(!c){if(r.stateNode===null)throw Error(i(166));return ut(r),null}s=ye.current,Yo(r)?wy(r):(s=Xv(y,c,l),r.stateNode=s,is(r))}return ut(r),null;case 5:if(Ao(r),y=r.type,s!==null&&r.stateNode!=null)s.memoizedProps!==c&&is(r);else{if(!c){if(r.stateNode===null)throw Error(i(166));return ut(r),null}if(_=ye.current,Yo(r))wy(r);else{var w=nd(Le.current);switch(_){case 1:_=w.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:_=w.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":_=w.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":_=w.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":_=w.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof c.is=="string"?w.createElement("select",{is:c.is}):w.createElement("select"),c.multiple?_.multiple=!0:c.size&&(_.size=c.size);break;default:_=typeof c.is=="string"?w.createElement(y,{is:c.is}):w.createElement(y)}}_[xt]=r,_[Bt]=c;e:for(w=r.child;w!==null;){if(w.tag===5||w.tag===6)_.appendChild(w.stateNode);else if(w.tag!==4&&w.tag!==27&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===r)break e;for(;w.sibling===null;){if(w.return===null||w.return===r)break e;w=w.return}w.sibling.return=w.return,w=w.sibling}r.stateNode=_;e:switch(Wt(_,y,c),y){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&is(r)}}return ut(r),$h(r,r.type,s===null?null:s.memoizedProps,r.pendingProps,l),null;case 6:if(s&&r.stateNode!=null)s.memoizedProps!==c&&is(r);else{if(typeof c!="string"&&r.stateNode===null)throw Error(i(166));if(s=Le.current,Yo(r)){if(s=r.stateNode,l=r.memoizedProps,c=null,y=$t,y!==null)switch(y.tag){case 27:case 5:c=y.memoizedProps}s[xt]=r,s=!!(s.nodeValue===l||c!==null&&c.suppressHydrationWarning===!0||Bv(s.nodeValue,l)),s||Gs(r,!0)}else s=nd(s).createTextNode(c),s[xt]=r,r.stateNode=s}return ut(r),null;case 31:if(l=r.memoizedState,s===null||s.memoizedState!==null){if(c=Yo(r),l!==null){if(s===null){if(!c)throw Error(i(318));if(s=r.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(557));s[xt]=r}else zr(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ut(r),s=!1}else l=sh(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=l),s=!0;if(!s)return r.flags&256?(bn(r),r):(bn(r),null);if((r.flags&128)!==0)throw Error(i(558))}return ut(r),null;case 13:if(c=r.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(y=Yo(r),c!==null&&c.dehydrated!==null){if(s===null){if(!y)throw Error(i(318));if(y=r.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(i(317));y[xt]=r}else zr(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ut(r),y=!1}else y=sh(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=y),y=!0;if(!y)return r.flags&256?(bn(r),r):(bn(r),null)}return bn(r),(r.flags&128)!==0?(r.lanes=l,r):(l=c!==null,s=s!==null&&s.memoizedState!==null,l&&(c=r.child,y=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(y=c.alternate.memoizedState.cachePool.pool),_=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(_=c.memoizedState.cachePool.pool),_!==y&&(c.flags|=2048)),l!==s&&l&&(r.child.flags|=8192),Bc(r,r.updateQueue),ut(r),null);case 4:return dt(),s===null&&gp(r.stateNode.containerInfo),ut(r),null;case 10:return Zi(r.type),ut(r),null;case 19:if(ne(Et),c=r.memoizedState,c===null)return ut(r),null;if(y=(r.flags&128)!==0,_=c.rendering,_===null)if(y)Ml(c,!1);else{if(yt!==0||s!==null&&(s.flags&128)!==0)for(s=r.child;s!==null;){if(_=bc(s),_!==null){for(r.flags|=128,Ml(c,!1),s=_.updateQueue,r.updateQueue=s,Bc(r,s),r.subtreeFlags=0,s=l,l=r.child;l!==null;)_y(l,s),l=l.sibling;return ce(Et,Et.current&1|2),ze&&Wi(r,c.treeForkCount),r.child}s=s.sibling}c.tail!==null&&un()>Jc&&(r.flags|=128,y=!0,Ml(c,!1),r.lanes=4194304)}else{if(!y)if(s=bc(_),s!==null){if(r.flags|=128,y=!0,s=s.updateQueue,r.updateQueue=s,Bc(r,s),Ml(c,!0),c.tail===null&&c.tailMode==="hidden"&&!_.alternate&&!ze)return ut(r),null}else 2*un()-c.renderingStartTime>Jc&&l!==536870912&&(r.flags|=128,y=!0,Ml(c,!1),r.lanes=4194304);c.isBackwards?(_.sibling=r.child,r.child=_):(s=c.last,s!==null?s.sibling=_:r.child=_,c.last=_)}return c.tail!==null?(s=c.tail,c.rendering=s,c.tail=s.sibling,c.renderingStartTime=un(),s.sibling=null,l=Et.current,ce(Et,y?l&1|2:l&1),ze&&Wi(r,c.treeForkCount),s):(ut(r),null);case 22:case 23:return bn(r),yh(),c=r.memoizedState!==null,s!==null?s.memoizedState!==null!==c&&(r.flags|=8192):c&&(r.flags|=8192),c?(l&536870912)!==0&&(r.flags&128)===0&&(ut(r),r.subtreeFlags&6&&(r.flags|=8192)):ut(r),l=r.updateQueue,l!==null&&Bc(r,l.retryQueue),l=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),c=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),c!==l&&(r.flags|=2048),s!==null&&ne(Kr),null;case 24:return l=null,s!==null&&(l=s.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),Zi(Rt),ut(r),null;case 25:return null;case 30:return null}throw Error(i(156,r.tag))}function Lx(s,r){switch(nh(r),r.tag){case 1:return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 3:return Zi(Rt),dt(),s=r.flags,(s&65536)!==0&&(s&128)===0?(r.flags=s&-65537|128,r):null;case 26:case 27:case 5:return Ao(r),null;case 31:if(r.memoizedState!==null){if(bn(r),r.alternate===null)throw Error(i(340));zr()}return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 13:if(bn(r),s=r.memoizedState,s!==null&&s.dehydrated!==null){if(r.alternate===null)throw Error(i(340));zr()}return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 19:return ne(Et),null;case 4:return dt(),null;case 10:return Zi(r.type),null;case 22:case 23:return bn(r),yh(),s!==null&&ne(Kr),s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 24:return Zi(Rt),null;case 25:return null;default:return null}}function J0(s,r){switch(nh(r),r.tag){case 3:Zi(Rt),dt();break;case 26:case 27:case 5:Ao(r);break;case 4:dt();break;case 31:r.memoizedState!==null&&bn(r);break;case 13:bn(r);break;case 19:ne(Et);break;case 10:Zi(r.type);break;case 22:case 23:bn(r),yh(),s!==null&&ne(Kr);break;case 24:Zi(Rt)}}function kl(s,r){try{var l=r.updateQueue,c=l!==null?l.lastEffect:null;if(c!==null){var y=c.next;l=y;do{if((l.tag&s)===s){c=void 0;var _=l.create,w=l.inst;c=_(),w.destroy=c}l=l.next}while(l!==y)}}catch(x){nt(r,r.return,x)}}function Ks(s,r,l){try{var c=r.updateQueue,y=c!==null?c.lastEffect:null;if(y!==null){var _=y.next;c=_;do{if((c.tag&s)===s){var w=c.inst,x=w.destroy;if(x!==void 0){w.destroy=void 0,y=r;var V=l,J=x;try{J()}catch(Z){nt(y,V,Z)}}}c=c.next}while(c!==_)}}catch(Z){nt(r,r.return,Z)}}function K0(s){var r=s.updateQueue;if(r!==null){var l=s.stateNode;try{Uy(r,l)}catch(c){nt(s,s.return,c)}}}function $0(s,r,l){l.props=Xr(s.type,s.memoizedProps),l.state=s.memoizedState;try{l.componentWillUnmount()}catch(c){nt(s,r,c)}}function Dl(s,r){try{var l=s.ref;if(l!==null){switch(s.tag){case 26:case 27:case 5:var c=s.stateNode;break;case 30:c=s.stateNode;break;default:c=s.stateNode}typeof l=="function"?s.refCleanup=l(c):l.current=c}}catch(y){nt(s,r,y)}}function Vi(s,r){var l=s.ref,c=s.refCleanup;if(l!==null)if(typeof c=="function")try{c()}catch(y){nt(s,r,y)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(y){nt(s,r,y)}else l.current=null}function j0(s){var r=s.type,l=s.memoizedProps,c=s.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":l.autoFocus&&c.focus();break e;case"img":l.src?c.src=l.src:l.srcSet&&(c.srcset=l.srcSet)}}catch(y){nt(s,s.return,y)}}function jh(s,r,l){try{var c=s.stateNode;iI(c,s.type,l,r),c[Bt]=r}catch(y){nt(s,s.return,y)}}function Q0(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&er(s.type)||s.tag===4}function Qh(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||Q0(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&er(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Wh(s,r,l){var c=s.tag;if(c===5||c===6)s=s.stateNode,r?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(s,r):(r=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,r.appendChild(s),l=l._reactRootContainer,l!=null||r.onclick!==null||(r.onclick=ti));else if(c!==4&&(c===27&&er(s.type)&&(l=s.stateNode,r=null),s=s.child,s!==null))for(Wh(s,r,l),s=s.sibling;s!==null;)Wh(s,r,l),s=s.sibling}function Hc(s,r,l){var c=s.tag;if(c===5||c===6)s=s.stateNode,r?l.insertBefore(s,r):l.appendChild(s);else if(c!==4&&(c===27&&er(s.type)&&(l=s.stateNode),s=s.child,s!==null))for(Hc(s,r,l),s=s.sibling;s!==null;)Hc(s,r,l),s=s.sibling}function W0(s){var r=s.stateNode,l=s.memoizedProps;try{for(var c=s.type,y=r.attributes;y.length;)r.removeAttributeNode(y[0]);Wt(r,c,l),r[xt]=s,r[Bt]=l}catch(_){nt(s,s.return,_)}}var ss=!1,kt=!1,Xh=!1,X0=typeof WeakSet=="function"?WeakSet:Set,qt=null;function Vx(s,r){if(s=s.containerInfo,_p=ud,s=cy(s),Yf(s)){if("selectionStart"in s)var l={start:s.selectionStart,end:s.selectionEnd};else e:{l=(l=s.ownerDocument)&&l.defaultView||window;var c=l.getSelection&&l.getSelection();if(c&&c.rangeCount!==0){l=c.anchorNode;var y=c.anchorOffset,_=c.focusNode;c=c.focusOffset;try{l.nodeType,_.nodeType}catch{l=null;break e}var w=0,x=-1,V=-1,J=0,Z=0,ie=s,K=null;t:for(;;){for(var W;ie!==l||y!==0&&ie.nodeType!==3||(x=w+y),ie!==_||c!==0&&ie.nodeType!==3||(V=w+c),ie.nodeType===3&&(w+=ie.nodeValue.length),(W=ie.firstChild)!==null;)K=ie,ie=W;for(;;){if(ie===s)break t;if(K===l&&++J===y&&(x=w),K===_&&++Z===c&&(V=w),(W=ie.nextSibling)!==null)break;ie=K,K=ie.parentNode}ie=W}l=x===-1||V===-1?null:{start:x,end:V}}else l=null}l=l||{start:0,end:0}}else l=null;for(Tp={focusedElem:s,selectionRange:l},ud=!1,qt=r;qt!==null;)if(r=qt,s=r.child,(r.subtreeFlags&1028)!==0&&s!==null)s.return=r,qt=s;else for(;qt!==null;){switch(r=qt,_=r.alternate,s=r.flags,r.tag){case 0:if((s&4)!==0&&(s=r.updateQueue,s=s!==null?s.events:null,s!==null))for(l=0;l<s.length;l++)y=s[l],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&_!==null){s=void 0,l=r,y=_.memoizedProps,_=_.memoizedState,c=l.stateNode;try{var ve=Xr(l.type,y);s=c.getSnapshotBeforeUpdate(ve,_),c.__reactInternalSnapshotBeforeUpdate=s}catch(Ae){nt(l,l.return,Ae)}}break;case 3:if((s&1024)!==0){if(s=r.stateNode.containerInfo,l=s.nodeType,l===9)Ap(s);else if(l===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":Ap(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=r.sibling,s!==null){s.return=r.return,qt=s;break}qt=r.return}}function Z0(s,r,l){var c=l.flags;switch(l.tag){case 0:case 11:case 15:os(s,l),c&4&&kl(5,l);break;case 1:if(os(s,l),c&4)if(s=l.stateNode,r===null)try{s.componentDidMount()}catch(w){nt(l,l.return,w)}else{var y=Xr(l.type,r.memoizedProps);r=r.memoizedState;try{s.componentDidUpdate(y,r,s.__reactInternalSnapshotBeforeUpdate)}catch(w){nt(l,l.return,w)}}c&64&&K0(l),c&512&&Dl(l,l.return);break;case 3:if(os(s,l),c&64&&(s=l.updateQueue,s!==null)){if(r=null,l.child!==null)switch(l.child.tag){case 27:case 5:r=l.child.stateNode;break;case 1:r=l.child.stateNode}try{Uy(s,r)}catch(w){nt(l,l.return,w)}}break;case 27:r===null&&c&4&&W0(l);case 26:case 5:os(s,l),r===null&&c&4&&j0(l),c&512&&Dl(l,l.return);break;case 12:os(s,l);break;case 31:os(s,l),c&4&&nv(s,l);break;case 13:os(s,l),c&4&&iv(s,l),c&64&&(s=l.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(l=Yx.bind(null,l),dI(s,l))));break;case 22:if(c=l.memoizedState!==null||ss,!c){r=r!==null&&r.memoizedState!==null||kt,y=ss;var _=kt;ss=c,(kt=r)&&!_?as(s,l,(l.subtreeFlags&8772)!==0):os(s,l),ss=y,kt=_}break;case 30:break;default:os(s,l)}}function ev(s){var r=s.alternate;r!==null&&(s.alternate=null,ev(r)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(r=s.stateNode,r!==null&&bo(r)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var ht=null,gn=!1;function rs(s,r,l){for(l=l.child;l!==null;)tv(s,r,l),l=l.sibling}function tv(s,r,l){if(Jt&&typeof Jt.onCommitFiberUnmount=="function")try{Jt.onCommitFiberUnmount(Wn,l)}catch{}switch(l.tag){case 26:kt||Vi(l,r),rs(s,r,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:kt||Vi(l,r);var c=ht,y=gn;er(l.type)&&(ht=l.stateNode,gn=!1),rs(s,r,l),Hl(l.stateNode),ht=c,gn=y;break;case 5:kt||Vi(l,r);case 6:if(c=ht,y=gn,ht=null,rs(s,r,l),ht=c,gn=y,ht!==null)if(gn)try{(ht.nodeType===9?ht.body:ht.nodeName==="HTML"?ht.ownerDocument.body:ht).removeChild(l.stateNode)}catch(_){nt(l,r,_)}else try{ht.removeChild(l.stateNode)}catch(_){nt(l,r,_)}break;case 18:ht!==null&&(gn?(s=ht,Kv(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,l.stateNode),fa(s)):Kv(ht,l.stateNode));break;case 4:c=ht,y=gn,ht=l.stateNode.containerInfo,gn=!0,rs(s,r,l),ht=c,gn=y;break;case 0:case 11:case 14:case 15:Ks(2,l,r),kt||Ks(4,l,r),rs(s,r,l);break;case 1:kt||(Vi(l,r),c=l.stateNode,typeof c.componentWillUnmount=="function"&&$0(l,r,c)),rs(s,r,l);break;case 21:rs(s,r,l);break;case 22:kt=(c=kt)||l.memoizedState!==null,rs(s,r,l),kt=c;break;default:rs(s,r,l)}}function nv(s,r){if(r.memoizedState===null&&(s=r.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{fa(s)}catch(l){nt(r,r.return,l)}}}function iv(s,r){if(r.memoizedState===null&&(s=r.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{fa(s)}catch(l){nt(r,r.return,l)}}function Ux(s){switch(s.tag){case 31:case 13:case 19:var r=s.stateNode;return r===null&&(r=s.stateNode=new X0),r;case 22:return s=s.stateNode,r=s._retryCache,r===null&&(r=s._retryCache=new X0),r;default:throw Error(i(435,s.tag))}}function qc(s,r){var l=Ux(s);r.forEach(function(c){if(!l.has(c)){l.add(c);var y=Jx.bind(null,s,c);c.then(y,y)}})}function yn(s,r){var l=r.deletions;if(l!==null)for(var c=0;c<l.length;c++){var y=l[c],_=s,w=r,x=w;e:for(;x!==null;){switch(x.tag){case 27:if(er(x.type)){ht=x.stateNode,gn=!1;break e}break;case 5:ht=x.stateNode,gn=!1;break e;case 3:case 4:ht=x.stateNode.containerInfo,gn=!0;break e}x=x.return}if(ht===null)throw Error(i(160));tv(_,w,y),ht=null,gn=!1,_=y.alternate,_!==null&&(_.return=null),y.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)sv(r,s),r=r.sibling}var ai=null;function sv(s,r){var l=s.alternate,c=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:yn(r,s),vn(s),c&4&&(Ks(3,s,s.return),kl(3,s),Ks(5,s,s.return));break;case 1:yn(r,s),vn(s),c&512&&(kt||l===null||Vi(l,l.return)),c&64&&ss&&(s=s.updateQueue,s!==null&&(c=s.callbacks,c!==null&&(l=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=l===null?c:l.concat(c))));break;case 26:var y=ai;if(yn(r,s),vn(s),c&512&&(kt||l===null||Vi(l,l.return)),c&4){var _=l!==null?l.memoizedState:null;if(c=s.memoizedState,l===null)if(c===null)if(s.stateNode===null){e:{c=s.type,l=s.memoizedProps,y=y.ownerDocument||y;t:switch(c){case"title":_=y.getElementsByTagName("title")[0],(!_||_[Si]||_[xt]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=y.createElement(c),y.head.insertBefore(_,y.querySelector("head > title"))),Wt(_,c,l),_[xt]=s,It(_),c=_;break e;case"link":var w=s_("link","href",y).get(c+(l.href||""));if(w){for(var x=0;x<w.length;x++)if(_=w[x],_.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&_.getAttribute("rel")===(l.rel==null?null:l.rel)&&_.getAttribute("title")===(l.title==null?null:l.title)&&_.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){w.splice(x,1);break t}}_=y.createElement(c),Wt(_,c,l),y.head.appendChild(_);break;case"meta":if(w=s_("meta","content",y).get(c+(l.content||""))){for(x=0;x<w.length;x++)if(_=w[x],_.getAttribute("content")===(l.content==null?null:""+l.content)&&_.getAttribute("name")===(l.name==null?null:l.name)&&_.getAttribute("property")===(l.property==null?null:l.property)&&_.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&_.getAttribute("charset")===(l.charSet==null?null:l.charSet)){w.splice(x,1);break t}}_=y.createElement(c),Wt(_,c,l),y.head.appendChild(_);break;default:throw Error(i(468,c))}_[xt]=s,It(_),c=_}s.stateNode=c}else r_(y,s.type,s.stateNode);else s.stateNode=i_(y,c,s.memoizedProps);else _!==c?(_===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):_.count--,c===null?r_(y,s.type,s.stateNode):i_(y,c,s.memoizedProps)):c===null&&s.stateNode!==null&&jh(s,s.memoizedProps,l.memoizedProps)}break;case 27:yn(r,s),vn(s),c&512&&(kt||l===null||Vi(l,l.return)),l!==null&&c&4&&jh(s,s.memoizedProps,l.memoizedProps);break;case 5:if(yn(r,s),vn(s),c&512&&(kt||l===null||Vi(l,l.return)),s.flags&32){y=s.stateNode;try{mn(y,"")}catch(ve){nt(s,s.return,ve)}}c&4&&s.stateNode!=null&&(y=s.memoizedProps,jh(s,y,l!==null?l.memoizedProps:y)),c&1024&&(Xh=!0);break;case 6:if(yn(r,s),vn(s),c&4){if(s.stateNode===null)throw Error(i(162));c=s.memoizedProps,l=s.stateNode;try{l.nodeValue=c}catch(ve){nt(s,s.return,ve)}}break;case 3:if(rd=null,y=ai,ai=id(r.containerInfo),yn(r,s),ai=y,vn(s),c&4&&l!==null&&l.memoizedState.isDehydrated)try{fa(r.containerInfo)}catch(ve){nt(s,s.return,ve)}Xh&&(Xh=!1,rv(s));break;case 4:c=ai,ai=id(s.stateNode.containerInfo),yn(r,s),vn(s),ai=c;break;case 12:yn(r,s),vn(s);break;case 31:yn(r,s),vn(s),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,qc(s,c)));break;case 13:yn(r,s),vn(s),s.child.flags&8192&&s.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Yc=un()),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,qc(s,c)));break;case 22:y=s.memoizedState!==null;var V=l!==null&&l.memoizedState!==null,J=ss,Z=kt;if(ss=J||y,kt=Z||V,yn(r,s),kt=Z,ss=J,vn(s),c&8192)e:for(r=s.stateNode,r._visibility=y?r._visibility&-2:r._visibility|1,y&&(l===null||V||ss||kt||Zr(s)),l=null,r=s;;){if(r.tag===5||r.tag===26){if(l===null){V=l=r;try{if(_=V.stateNode,y)w=_.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none";else{x=V.stateNode;var ie=V.memoizedProps.style,K=ie!=null&&ie.hasOwnProperty("display")?ie.display:null;x.style.display=K==null||typeof K=="boolean"?"":(""+K).trim()}}catch(ve){nt(V,V.return,ve)}}}else if(r.tag===6){if(l===null){V=r;try{V.stateNode.nodeValue=y?"":V.memoizedProps}catch(ve){nt(V,V.return,ve)}}}else if(r.tag===18){if(l===null){V=r;try{var W=V.stateNode;y?$v(W,!0):$v(V.stateNode,!1)}catch(ve){nt(V,V.return,ve)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===s)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;l===r&&(l=null),r=r.return}l===r&&(l=null),r.sibling.return=r.return,r=r.sibling}c&4&&(c=s.updateQueue,c!==null&&(l=c.retryQueue,l!==null&&(c.retryQueue=null,qc(s,l))));break;case 19:yn(r,s),vn(s),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,qc(s,c)));break;case 30:break;case 21:break;default:yn(r,s),vn(s)}}function vn(s){var r=s.flags;if(r&2){try{for(var l,c=s.return;c!==null;){if(Q0(c)){l=c;break}c=c.return}if(l==null)throw Error(i(160));switch(l.tag){case 27:var y=l.stateNode,_=Qh(s);Hc(s,_,y);break;case 5:var w=l.stateNode;l.flags&32&&(mn(w,""),l.flags&=-33);var x=Qh(s);Hc(s,x,w);break;case 3:case 4:var V=l.stateNode.containerInfo,J=Qh(s);Wh(s,J,V);break;default:throw Error(i(161))}}catch(Z){nt(s,s.return,Z)}s.flags&=-3}r&4096&&(s.flags&=-4097)}function rv(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var r=s;rv(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),s=s.sibling}}function os(s,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)Z0(s,r.alternate,r),r=r.sibling}function Zr(s){for(s=s.child;s!==null;){var r=s;switch(r.tag){case 0:case 11:case 14:case 15:Ks(4,r,r.return),Zr(r);break;case 1:Vi(r,r.return);var l=r.stateNode;typeof l.componentWillUnmount=="function"&&$0(r,r.return,l),Zr(r);break;case 27:Hl(r.stateNode);case 26:case 5:Vi(r,r.return),Zr(r);break;case 22:r.memoizedState===null&&Zr(r);break;case 30:Zr(r);break;default:Zr(r)}s=s.sibling}}function as(s,r,l){for(l=l&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var c=r.alternate,y=s,_=r,w=_.flags;switch(_.tag){case 0:case 11:case 15:as(y,_,l),kl(4,_);break;case 1:if(as(y,_,l),c=_,y=c.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(J){nt(c,c.return,J)}if(c=_,y=c.updateQueue,y!==null){var x=c.stateNode;try{var V=y.shared.hiddenCallbacks;if(V!==null)for(y.shared.hiddenCallbacks=null,y=0;y<V.length;y++)Vy(V[y],x)}catch(J){nt(c,c.return,J)}}l&&w&64&&K0(_),Dl(_,_.return);break;case 27:W0(_);case 26:case 5:as(y,_,l),l&&c===null&&w&4&&j0(_),Dl(_,_.return);break;case 12:as(y,_,l);break;case 31:as(y,_,l),l&&w&4&&nv(y,_);break;case 13:as(y,_,l),l&&w&4&&iv(y,_);break;case 22:_.memoizedState===null&&as(y,_,l),Dl(_,_.return);break;case 30:break;default:as(y,_,l)}r=r.sibling}}function Zh(s,r){var l=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),s=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(s=r.memoizedState.cachePool.pool),s!==l&&(s!=null&&s.refCount++,l!=null&&_l(l))}function ep(s,r){s=null,r.alternate!==null&&(s=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==s&&(r.refCount++,s!=null&&_l(s))}function li(s,r,l,c){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)ov(s,r,l,c),r=r.sibling}function ov(s,r,l,c){var y=r.flags;switch(r.tag){case 0:case 11:case 15:li(s,r,l,c),y&2048&&kl(9,r);break;case 1:li(s,r,l,c);break;case 3:li(s,r,l,c),y&2048&&(s=null,r.alternate!==null&&(s=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==s&&(r.refCount++,s!=null&&_l(s)));break;case 12:if(y&2048){li(s,r,l,c),s=r.stateNode;try{var _=r.memoizedProps,w=_.id,x=_.onPostCommit;typeof x=="function"&&x(w,r.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(V){nt(r,r.return,V)}}else li(s,r,l,c);break;case 31:li(s,r,l,c);break;case 13:li(s,r,l,c);break;case 23:break;case 22:_=r.stateNode,w=r.alternate,r.memoizedState!==null?_._visibility&2?li(s,r,l,c):Pl(s,r):_._visibility&2?li(s,r,l,c):(_._visibility|=2,ta(s,r,l,c,(r.subtreeFlags&10256)!==0||!1)),y&2048&&Zh(w,r);break;case 24:li(s,r,l,c),y&2048&&ep(r.alternate,r);break;default:li(s,r,l,c)}}function ta(s,r,l,c,y){for(y=y&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var _=s,w=r,x=l,V=c,J=w.flags;switch(w.tag){case 0:case 11:case 15:ta(_,w,x,V,y),kl(8,w);break;case 23:break;case 22:var Z=w.stateNode;w.memoizedState!==null?Z._visibility&2?ta(_,w,x,V,y):Pl(_,w):(Z._visibility|=2,ta(_,w,x,V,y)),y&&J&2048&&Zh(w.alternate,w);break;case 24:ta(_,w,x,V,y),y&&J&2048&&ep(w.alternate,w);break;default:ta(_,w,x,V,y)}r=r.sibling}}function Pl(s,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var l=s,c=r,y=c.flags;switch(c.tag){case 22:Pl(l,c),y&2048&&Zh(c.alternate,c);break;case 24:Pl(l,c),y&2048&&ep(c.alternate,c);break;default:Pl(l,c)}r=r.sibling}}var Ll=8192;function na(s,r,l){if(s.subtreeFlags&Ll)for(s=s.child;s!==null;)av(s,r,l),s=s.sibling}function av(s,r,l){switch(s.tag){case 26:na(s,r,l),s.flags&Ll&&s.memoizedState!==null&&AI(l,ai,s.memoizedState,s.memoizedProps);break;case 5:na(s,r,l);break;case 3:case 4:var c=ai;ai=id(s.stateNode.containerInfo),na(s,r,l),ai=c;break;case 22:s.memoizedState===null&&(c=s.alternate,c!==null&&c.memoizedState!==null?(c=Ll,Ll=16777216,na(s,r,l),Ll=c):na(s,r,l));break;default:na(s,r,l)}}function lv(s){var r=s.alternate;if(r!==null&&(s=r.child,s!==null)){r.child=null;do r=s.sibling,s.sibling=null,s=r;while(s!==null)}}function Vl(s){var r=s.deletions;if((s.flags&16)!==0){if(r!==null)for(var l=0;l<r.length;l++){var c=r[l];qt=c,cv(c,s)}lv(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)uv(s),s=s.sibling}function uv(s){switch(s.tag){case 0:case 11:case 15:Vl(s),s.flags&2048&&Ks(9,s,s.return);break;case 3:Vl(s);break;case 12:Vl(s);break;case 22:var r=s.stateNode;s.memoizedState!==null&&r._visibility&2&&(s.return===null||s.return.tag!==13)?(r._visibility&=-3,zc(s)):Vl(s);break;default:Vl(s)}}function zc(s){var r=s.deletions;if((s.flags&16)!==0){if(r!==null)for(var l=0;l<r.length;l++){var c=r[l];qt=c,cv(c,s)}lv(s)}for(s=s.child;s!==null;){switch(r=s,r.tag){case 0:case 11:case 15:Ks(8,r,r.return),zc(r);break;case 22:l=r.stateNode,l._visibility&2&&(l._visibility&=-3,zc(r));break;default:zc(r)}s=s.sibling}}function cv(s,r){for(;qt!==null;){var l=qt;switch(l.tag){case 0:case 11:case 15:Ks(8,l,r);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var c=l.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:_l(l.memoizedState.cache)}if(c=l.child,c!==null)c.return=l,qt=c;else e:for(l=s;qt!==null;){c=qt;var y=c.sibling,_=c.return;if(ev(c),c===l){qt=null;break e}if(y!==null){y.return=_,qt=y;break e}qt=_}}}var Ox={getCacheForType:function(s){var r=jt(Rt),l=r.data.get(s);return l===void 0&&(l=s(),r.data.set(s,l)),l},cacheSignal:function(){return jt(Rt).controller.signal}},Fx=typeof WeakMap=="function"?WeakMap:Map,Xe=0,at=null,Ue=null,Fe=0,tt=0,Rn=null,$s=!1,ia=!1,tp=!1,ls=0,yt=0,js=0,eo=0,np=0,Nn=0,sa=0,Ul=null,_n=null,ip=!1,Yc=0,dv=0,Jc=1/0,Kc=null,Qs=null,Ut=0,Ws=null,ra=null,us=0,sp=0,rp=null,fv=null,Ol=0,op=null;function Mn(){return(Xe&2)!==0&&Fe!==0?Fe&-Fe:Y.T!==null?fp():$u()}function hv(){if(Nn===0)if((Fe&536870912)===0||ze){var s=Ir;Ir<<=1,(Ir&3932160)===0&&(Ir=262144),Nn=s}else Nn=536870912;return s=In.current,s!==null&&(s.flags|=32),Nn}function Tn(s,r,l){(s===at&&(tt===2||tt===9)||s.cancelPendingCommit!==null)&&(oa(s,0),Xs(s,Fe,Nn,!1)),br(s,l),((Xe&2)===0||s!==at)&&(s===at&&((Xe&2)===0&&(eo|=l),yt===4&&Xs(s,Fe,Nn,!1)),Ui(s))}function pv(s,r,l){if((Xe&6)!==0)throw Error(i(327));var c=!l&&(r&127)===0&&(r&s.expiredLanes)===0||Xn(s,r),y=c?Hx(s,r):lp(s,r,!0),_=c;do{if(y===0){ia&&!c&&Xs(s,r,0,!1);break}else{if(l=s.current.alternate,_&&!Gx(l)){y=lp(s,r,!1),_=!1;continue}if(y===2){if(_=r,s.errorRecoveryDisabledLanes&_)var w=0;else w=s.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){r=w;e:{var x=s;y=Ul;var V=x.current.memoizedState.isDehydrated;if(V&&(oa(x,w).flags|=256),w=lp(x,w,!1),w!==2){if(tp&&!V){x.errorRecoveryDisabledLanes|=_,eo|=_,y=4;break e}_=_n,_n=y,_!==null&&(_n===null?_n=_:_n.push.apply(_n,_))}y=w}if(_=!1,y!==2)continue}}if(y===1){oa(s,0),Xs(s,r,0,!0);break}e:{switch(c=s,_=y,_){case 0:case 1:throw Error(i(345));case 4:if((r&4194048)!==r)break;case 6:Xs(c,r,Nn,!$s);break e;case 2:_n=null;break;case 3:case 5:break;default:throw Error(i(329))}if((r&62914560)===r&&(y=Yc+300-un(),10<y)){if(Xs(c,r,Nn,!$s),_i(c,0,!0)!==0)break e;us=r,c.timeoutHandle=Yv(mv.bind(null,c,l,_n,Kc,ip,r,Nn,eo,sa,$s,_,"Throttled",-0,0),y);break e}mv(c,l,_n,Kc,ip,r,Nn,eo,sa,$s,_,null,-0,0)}}break}while(!0);Ui(s)}function mv(s,r,l,c,y,_,w,x,V,J,Z,ie,K,W){if(s.timeoutHandle=-1,ie=r.subtreeFlags,ie&8192||(ie&16785408)===16785408){ie={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ti},av(r,_,ie);var ve=(_&62914560)===_?Yc-un():(_&4194048)===_?dv-un():0;if(ve=wI(ie,ve),ve!==null){us=_,s.cancelPendingCommit=ve(Av.bind(null,s,r,_,l,c,y,w,x,V,Z,ie,null,K,W)),Xs(s,_,w,!J);return}}Av(s,r,_,l,c,y,w,x,V)}function Gx(s){for(var r=s;;){var l=r.tag;if((l===0||l===11||l===15)&&r.flags&16384&&(l=r.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var c=0;c<l.length;c++){var y=l[c],_=y.getSnapshot;y=y.value;try{if(!Cn(_(),y))return!1}catch{return!1}}if(l=r.child,r.subtreeFlags&16384&&l!==null)l.return=r,r=l;else{if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Xs(s,r,l,c){r&=~np,r&=~eo,s.suspendedLanes|=r,s.pingedLanes&=~r,c&&(s.warmLanes|=r),c=s.expirationTimes;for(var y=r;0<y;){var _=31-_t(y),w=1<<_;c[_]=-1,y&=~w}l!==0&&Rr(s,l,r)}function $c(){return(Xe&6)===0?(Fl(0),!1):!0}function ap(){if(Ue!==null){if(tt===0)var s=Ue.return;else s=Ue,Xi=Yr=null,Ah(s),Qo=null,El=0,s=Ue;for(;s!==null;)J0(s.alternate,s),s=s.return;Ue=null}}function oa(s,r){var l=s.timeoutHandle;l!==-1&&(s.timeoutHandle=-1,oI(l)),l=s.cancelPendingCommit,l!==null&&(s.cancelPendingCommit=null,l()),us=0,ap(),at=s,Ue=l=Qi(s.current,null),Fe=r,tt=0,Rn=null,$s=!1,ia=Xn(s,r),tp=!1,sa=Nn=np=eo=js=yt=0,_n=Ul=null,ip=!1,(r&8)!==0&&(r|=r&32);var c=s.entangledLanes;if(c!==0)for(s=s.entanglements,c&=r;0<c;){var y=31-_t(c),_=1<<y;r|=s[y],c&=~_}return ls=r,mc(),l}function gv(s,r){Pe=null,Y.H=Rl,r===jo||r===Ac?(r=ky(),tt=3):r===dh?(r=ky(),tt=4):tt=r===Fh?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Rn=r,Ue===null&&(yt=1,Uc(s,Gn(r,s.current)))}function yv(){var s=In.current;return s===null?!0:(Fe&4194048)===Fe?zn===null:(Fe&62914560)===Fe||(Fe&536870912)!==0?s===zn:!1}function vv(){var s=Y.H;return Y.H=Rl,s===null?Rl:s}function _v(){var s=Y.A;return Y.A=Ox,s}function jc(){yt=4,$s||(Fe&4194048)!==Fe&&In.current!==null||(ia=!0),(js&134217727)===0&&(eo&134217727)===0||at===null||Xs(at,Fe,Nn,!1)}function lp(s,r,l){var c=Xe;Xe|=2;var y=vv(),_=_v();(at!==s||Fe!==r)&&(Kc=null,oa(s,r)),r=!1;var w=yt;e:do try{if(tt!==0&&Ue!==null){var x=Ue,V=Rn;switch(tt){case 8:ap(),w=6;break e;case 3:case 2:case 9:case 6:In.current===null&&(r=!0);var J=tt;if(tt=0,Rn=null,aa(s,x,V,J),l&&ia){w=0;break e}break;default:J=tt,tt=0,Rn=null,aa(s,x,V,J)}}Bx(),w=yt;break}catch(Z){gv(s,Z)}while(!0);return r&&s.shellSuspendCounter++,Xi=Yr=null,Xe=c,Y.H=y,Y.A=_,Ue===null&&(at=null,Fe=0,mc()),w}function Bx(){for(;Ue!==null;)Tv(Ue)}function Hx(s,r){var l=Xe;Xe|=2;var c=vv(),y=_v();at!==s||Fe!==r?(Kc=null,Jc=un()+500,oa(s,r)):ia=Xn(s,r);e:do try{if(tt!==0&&Ue!==null){r=Ue;var _=Rn;t:switch(tt){case 1:tt=0,Rn=null,aa(s,r,_,1);break;case 2:case 9:if(Ny(_)){tt=0,Rn=null,Ev(r);break}r=function(){tt!==2&&tt!==9||at!==s||(tt=7),Ui(s)},_.then(r,r);break e;case 3:tt=7;break e;case 4:tt=5;break e;case 7:Ny(_)?(tt=0,Rn=null,Ev(r)):(tt=0,Rn=null,aa(s,r,_,7));break;case 5:var w=null;switch(Ue.tag){case 26:w=Ue.memoizedState;case 5:case 27:var x=Ue;if(w?o_(w):x.stateNode.complete){tt=0,Rn=null;var V=x.sibling;if(V!==null)Ue=V;else{var J=x.return;J!==null?(Ue=J,Qc(J)):Ue=null}break t}}tt=0,Rn=null,aa(s,r,_,5);break;case 6:tt=0,Rn=null,aa(s,r,_,6);break;case 8:ap(),yt=6;break e;default:throw Error(i(462))}}qx();break}catch(Z){gv(s,Z)}while(!0);return Xi=Yr=null,Y.H=c,Y.A=y,Xe=l,Ue!==null?0:(at=null,Fe=0,mc(),yt)}function qx(){for(;Ue!==null&&!Of();)Tv(Ue)}function Tv(s){var r=z0(s.alternate,s,ls);s.memoizedProps=s.pendingProps,r===null?Qc(s):Ue=r}function Ev(s){var r=s,l=r.alternate;switch(r.tag){case 15:case 0:r=O0(l,r,r.pendingProps,r.type,void 0,Fe);break;case 11:r=O0(l,r,r.pendingProps,r.type.render,r.ref,Fe);break;case 5:Ah(r);default:J0(l,r),r=Ue=_y(r,ls),r=z0(l,r,ls)}s.memoizedProps=s.pendingProps,r===null?Qc(s):Ue=r}function aa(s,r,l,c){Xi=Yr=null,Ah(r),Qo=null,El=0;var y=r.return;try{if(Mx(s,y,r,l,Fe)){yt=1,Uc(s,Gn(l,s.current)),Ue=null;return}}catch(_){if(y!==null)throw Ue=y,_;yt=1,Uc(s,Gn(l,s.current)),Ue=null;return}r.flags&32768?(ze||c===1?s=!0:ia||(Fe&536870912)!==0?s=!1:($s=s=!0,(c===2||c===9||c===3||c===6)&&(c=In.current,c!==null&&c.tag===13&&(c.flags|=16384))),Sv(r,s)):Qc(r)}function Qc(s){var r=s;do{if((r.flags&32768)!==0){Sv(r,$s);return}s=r.return;var l=Px(r.alternate,r,ls);if(l!==null){Ue=l;return}if(r=r.sibling,r!==null){Ue=r;return}Ue=r=s}while(r!==null);yt===0&&(yt=5)}function Sv(s,r){do{var l=Lx(s.alternate,s);if(l!==null){l.flags&=32767,Ue=l;return}if(l=s.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!r&&(s=s.sibling,s!==null)){Ue=s;return}Ue=s=l}while(s!==null);yt=6,Ue=null}function Av(s,r,l,c,y,_,w,x,V){s.cancelPendingCommit=null;do Wc();while(Ut!==0);if((Xe&6)!==0)throw Error(i(327));if(r!==null){if(r===s.current)throw Error(i(177));if(_=r.lanes|r.childLanes,_|=Qf,Bf(s,l,_,w,x,V),s===at&&(Ue=at=null,Fe=0),ra=r,Ws=s,us=l,sp=_,rp=y,fv=c,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,Kx(bs,function(){return bv(),null})):(s.callbackNode=null,s.callbackPriority=0),c=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||c){c=Y.T,Y.T=null,y=ue.p,ue.p=2,w=Xe,Xe|=4;try{Vx(s,r,l)}finally{Xe=w,ue.p=y,Y.T=c}}Ut=1,wv(),Cv(),xv()}}function wv(){if(Ut===1){Ut=0;var s=Ws,r=ra,l=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||l){l=Y.T,Y.T=null;var c=ue.p;ue.p=2;var y=Xe;Xe|=4;try{sv(r,s);var _=Tp,w=cy(s.containerInfo),x=_.focusedElem,V=_.selectionRange;if(w!==x&&x&&x.ownerDocument&&uy(x.ownerDocument.documentElement,x)){if(V!==null&&Yf(x)){var J=V.start,Z=V.end;if(Z===void 0&&(Z=J),"selectionStart"in x)x.selectionStart=J,x.selectionEnd=Math.min(Z,x.value.length);else{var ie=x.ownerDocument||document,K=ie&&ie.defaultView||window;if(K.getSelection){var W=K.getSelection(),ve=x.textContent.length,Ae=Math.min(V.start,ve),ot=V.end===void 0?Ae:Math.min(V.end,ve);!W.extend&&Ae>ot&&(w=ot,ot=Ae,Ae=w);var H=ly(x,Ae),F=ly(x,ot);if(H&&F&&(W.rangeCount!==1||W.anchorNode!==H.node||W.anchorOffset!==H.offset||W.focusNode!==F.node||W.focusOffset!==F.offset)){var z=ie.createRange();z.setStart(H.node,H.offset),W.removeAllRanges(),Ae>ot?(W.addRange(z),W.extend(F.node,F.offset)):(z.setEnd(F.node,F.offset),W.addRange(z))}}}}for(ie=[],W=x;W=W.parentNode;)W.nodeType===1&&ie.push({element:W,left:W.scrollLeft,top:W.scrollTop});for(typeof x.focus=="function"&&x.focus(),x=0;x<ie.length;x++){var te=ie[x];te.element.scrollLeft=te.left,te.element.scrollTop=te.top}}ud=!!_p,Tp=_p=null}finally{Xe=y,ue.p=c,Y.T=l}}s.current=r,Ut=2}}function Cv(){if(Ut===2){Ut=0;var s=Ws,r=ra,l=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||l){l=Y.T,Y.T=null;var c=ue.p;ue.p=2;var y=Xe;Xe|=4;try{Z0(s,r.alternate,r)}finally{Xe=y,ue.p=c,Y.T=l}}Ut=3}}function xv(){if(Ut===4||Ut===3){Ut=0,Bu();var s=Ws,r=ra,l=us,c=fv;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Ut=5:(Ut=0,ra=Ws=null,Iv(s,s.pendingLanes));var y=s.pendingLanes;if(y===0&&(Qs=null),Ji(l),r=r.stateNode,Jt&&typeof Jt.onCommitFiberRoot=="function")try{Jt.onCommitFiberRoot(Wn,r,void 0,(r.current.flags&128)===128)}catch{}if(c!==null){r=Y.T,y=ue.p,ue.p=2,Y.T=null;try{for(var _=s.onRecoverableError,w=0;w<c.length;w++){var x=c[w];_(x.value,{componentStack:x.stack})}}finally{Y.T=r,ue.p=y}}(us&3)!==0&&Wc(),Ui(s),y=s.pendingLanes,(l&261930)!==0&&(y&42)!==0?s===op?Ol++:(Ol=0,op=s):Ol=0,Fl(0)}}function Iv(s,r){(s.pooledCacheLanes&=r)===0&&(r=s.pooledCache,r!=null&&(s.pooledCache=null,_l(r)))}function Wc(){return wv(),Cv(),xv(),bv()}function bv(){if(Ut!==5)return!1;var s=Ws,r=sp;sp=0;var l=Ji(us),c=Y.T,y=ue.p;try{ue.p=32>l?32:l,Y.T=null,l=rp,rp=null;var _=Ws,w=us;if(Ut=0,ra=Ws=null,us=0,(Xe&6)!==0)throw Error(i(331));var x=Xe;if(Xe|=4,uv(_.current),ov(_,_.current,w,l),Xe=x,Fl(0,!1),Jt&&typeof Jt.onPostCommitFiberRoot=="function")try{Jt.onPostCommitFiberRoot(Wn,_)}catch{}return!0}finally{ue.p=y,Y.T=c,Iv(s,r)}}function Rv(s,r,l){r=Gn(l,r),r=Oh(s.stateNode,r,2),s=zs(s,r,2),s!==null&&(br(s,2),Ui(s))}function nt(s,r,l){if(s.tag===3)Rv(s,s,l);else for(;r!==null;){if(r.tag===3){Rv(r,s,l);break}else if(r.tag===1){var c=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Qs===null||!Qs.has(c))){s=Gn(l,s),l=N0(2),c=zs(r,l,2),c!==null&&(M0(l,c,r,s),br(c,2),Ui(c));break}}r=r.return}}function up(s,r,l){var c=s.pingCache;if(c===null){c=s.pingCache=new Fx;var y=new Set;c.set(r,y)}else y=c.get(r),y===void 0&&(y=new Set,c.set(r,y));y.has(l)||(tp=!0,y.add(l),s=zx.bind(null,s,r,l),r.then(s,s))}function zx(s,r,l){var c=s.pingCache;c!==null&&c.delete(r),s.pingedLanes|=s.suspendedLanes&l,s.warmLanes&=~l,at===s&&(Fe&l)===l&&(yt===4||yt===3&&(Fe&62914560)===Fe&&300>un()-Yc?(Xe&2)===0&&oa(s,0):np|=l,sa===Fe&&(sa=0)),Ui(s)}function Nv(s,r){r===0&&(r=Ku()),s=Hr(s,r),s!==null&&(br(s,r),Ui(s))}function Yx(s){var r=s.memoizedState,l=0;r!==null&&(l=r.retryLane),Nv(s,l)}function Jx(s,r){var l=0;switch(s.tag){case 31:case 13:var c=s.stateNode,y=s.memoizedState;y!==null&&(l=y.retryLane);break;case 19:c=s.stateNode;break;case 22:c=s.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(r),Nv(s,l)}function Kx(s,r){return Vt(s,r)}var Xc=null,la=null,cp=!1,Zc=!1,dp=!1,Zs=0;function Ui(s){s!==la&&s.next===null&&(la===null?Xc=la=s:la=la.next=s),Zc=!0,cp||(cp=!0,jx())}function Fl(s,r){if(!dp&&Zc){dp=!0;do for(var l=!1,c=Xc;c!==null;){if(s!==0){var y=c.pendingLanes;if(y===0)var _=0;else{var w=c.suspendedLanes,x=c.pingedLanes;_=(1<<31-_t(42|s)+1)-1,_&=y&~(w&~x),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(l=!0,Pv(c,_))}else _=Fe,_=_i(c,c===at?_:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(_&3)===0||Xn(c,_)||(l=!0,Pv(c,_));c=c.next}while(l);dp=!1}}function $x(){Mv()}function Mv(){Zc=cp=!1;var s=0;Zs!==0&&rI()&&(s=Zs);for(var r=un(),l=null,c=Xc;c!==null;){var y=c.next,_=kv(c,r);_===0?(c.next=null,l===null?Xc=y:l.next=y,y===null&&(la=l)):(l=c,(s!==0||(_&3)!==0)&&(Zc=!0)),c=y}Ut!==0&&Ut!==5||Fl(s),Zs!==0&&(Zs=0)}function kv(s,r){for(var l=s.suspendedLanes,c=s.pingedLanes,y=s.expirationTimes,_=s.pendingLanes&-62914561;0<_;){var w=31-_t(_),x=1<<w,V=y[w];V===-1?((x&l)===0||(x&c)!==0)&&(y[w]=Gf(x,r)):V<=r&&(s.expiredLanes|=x),_&=~x}if(r=at,l=Fe,l=_i(s,s===r?l:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),c=s.callbackNode,l===0||s===r&&(tt===2||tt===9)||s.cancelPendingCommit!==null)return c!==null&&c!==null&&Is(c),s.callbackNode=null,s.callbackPriority=0;if((l&3)===0||Xn(s,l)){if(r=l&-l,r===s.callbackPriority)return r;switch(c!==null&&Is(c),Ji(l)){case 2:case 8:l=ja;break;case 32:l=bs;break;case 268435456:l=Hu;break;default:l=bs}return c=Dv.bind(null,s),l=Vt(l,c),s.callbackPriority=r,s.callbackNode=l,r}return c!==null&&c!==null&&Is(c),s.callbackPriority=2,s.callbackNode=null,2}function Dv(s,r){if(Ut!==0&&Ut!==5)return s.callbackNode=null,s.callbackPriority=0,null;var l=s.callbackNode;if(Wc()&&s.callbackNode!==l)return null;var c=Fe;return c=_i(s,s===at?c:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),c===0?null:(pv(s,c,r),kv(s,un()),s.callbackNode!=null&&s.callbackNode===l?Dv.bind(null,s):null)}function Pv(s,r){if(Wc())return null;pv(s,r,!0)}function jx(){aI(function(){(Xe&6)!==0?Vt($a,$x):Mv()})}function fp(){if(Zs===0){var s=Ko;s===0&&(s=yi,yi<<=1,(yi&261888)===0&&(yi=256)),Zs=s}return Zs}function Lv(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:ko(""+s)}function Vv(s,r){var l=r.ownerDocument.createElement("input");return l.name=r.name,l.value=r.value,s.id&&l.setAttribute("form",s.id),r.parentNode.insertBefore(l,r),s=new FormData(s),l.parentNode.removeChild(l),s}function Qx(s,r,l,c,y){if(r==="submit"&&l&&l.stateNode===y){var _=Lv((y[Bt]||null).action),w=c.submitter;w&&(r=(r=w[Bt]||null)?Lv(r.formAction):w.getAttribute("formAction"),r!==null&&(_=r,w=null));var x=new Ni("action","action",null,c,y);s.push({event:x,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Zs!==0){var V=w?Vv(y,w):new FormData(y);kh(l,{pending:!0,data:V,method:y.method,action:_},null,V)}}else typeof _=="function"&&(x.preventDefault(),V=w?Vv(y,w):new FormData(y),kh(l,{pending:!0,data:V,method:y.method,action:_},_,V))},currentTarget:y}]})}}for(var hp=0;hp<jf.length;hp++){var pp=jf[hp],Wx=pp.toLowerCase(),Xx=pp[0].toUpperCase()+pp.slice(1);oi(Wx,"on"+Xx)}oi(hy,"onAnimationEnd"),oi(py,"onAnimationIteration"),oi(my,"onAnimationStart"),oi("dblclick","onDoubleClick"),oi("focusin","onFocus"),oi("focusout","onBlur"),oi(px,"onTransitionRun"),oi(mx,"onTransitionStart"),oi(gx,"onTransitionCancel"),oi(gy,"onTransitionEnd"),xi("onMouseEnter",["mouseout","mouseover"]),xi("onMouseLeave",["mouseout","mouseover"]),xi("onPointerEnter",["pointerout","pointerover"]),xi("onPointerLeave",["pointerout","pointerover"]),Ci("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ci("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ci("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ci("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ci("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ci("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Gl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Zx=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Gl));function Uv(s,r){r=(r&4)!==0;for(var l=0;l<s.length;l++){var c=s[l],y=c.event;c=c.listeners;e:{var _=void 0;if(r)for(var w=c.length-1;0<=w;w--){var x=c[w],V=x.instance,J=x.currentTarget;if(x=x.listener,V!==_&&y.isPropagationStopped())break e;_=x,y.currentTarget=J;try{_(y)}catch(Z){pc(Z)}y.currentTarget=null,_=V}else for(w=0;w<c.length;w++){if(x=c[w],V=x.instance,J=x.currentTarget,x=x.listener,V!==_&&y.isPropagationStopped())break e;_=x,y.currentTarget=J;try{_(y)}catch(Z){pc(Z)}y.currentTarget=null,_=V}}}}function Oe(s,r){var l=r[Io];l===void 0&&(l=r[Io]=new Set);var c=s+"__bubble";l.has(c)||(Ov(r,s,2,!1),l.add(c))}function mp(s,r,l){var c=0;r&&(c|=4),Ov(l,s,c,r)}var ed="_reactListening"+Math.random().toString(36).slice(2);function gp(s){if(!s[ed]){s[ed]=!0,Xa.forEach(function(l){l!=="selectionchange"&&(Zx.has(l)||mp(l,!1,s),mp(l,!0,s))});var r=s.nodeType===9?s:s.ownerDocument;r===null||r[ed]||(r[ed]=!0,mp("selectionchange",!1,r))}}function Ov(s,r,l,c){switch(h_(r)){case 2:var y=II;break;case 8:y=bI;break;default:y=Mp}l=y.bind(null,r,l,s),y=void 0,!Pr||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(y=!0),c?y!==void 0?s.addEventListener(r,l,{capture:!0,passive:y}):s.addEventListener(r,l,!0):y!==void 0?s.addEventListener(r,l,{passive:y}):s.addEventListener(r,l,!1)}function yp(s,r,l,c,y){var _=c;if((r&1)===0&&(r&2)===0&&c!==null)e:for(;;){if(c===null)return;var w=c.tag;if(w===3||w===4){var x=c.stateNode.containerInfo;if(x===y)break;if(w===4)for(w=c.return;w!==null;){var V=w.tag;if((V===3||V===4)&&w.stateNode.containerInfo===y)return;w=w.return}for(;x!==null;){if(w=Ai(x),w===null)return;if(V=w.tag,V===5||V===6||V===26||V===27){c=_=w;continue e}x=x.parentNode}}c=c.return}Ps(function(){var J=_,Z=Vn(l),ie=[];e:{var K=yy.get(s);if(K!==void 0){var W=Ni,ve=s;switch(s){case"keypress":if(Vr(l)===0)break e;case"keydown":case"keyup":W=dc;break;case"focusin":ve="focus",W=Or;break;case"focusout":ve="blur",W=Or;break;case"beforeblur":case"afterblur":W=Or;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":W=dl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":W=nc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":W=E;break;case hy:case py:case my:W=sc;break;case gy:W=b;break;case"scroll":case"scrollend":W=cl;break;case"wheel":W=Q;break;case"copy":case"cut":case"paste":W=rc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":W=ji;break;case"toggle":case"beforetoggle":W=De}var Ae=(r&4)!==0,ot=!Ae&&(s==="scroll"||s==="scrollend"),H=Ae?K!==null?K+"Capture":null:K;Ae=[];for(var F=J,z;F!==null;){var te=F;if(z=te.stateNode,te=te.tag,te!==5&&te!==26&&te!==27||z===null||H===null||(te=ni(F,H),te!=null&&Ae.push(Bl(F,te,z))),ot)break;F=F.return}0<Ae.length&&(K=new W(K,ve,null,l,Z),ie.push({event:K,listeners:Ae}))}}if((r&7)===0){e:{if(K=s==="mouseover"||s==="pointerover",W=s==="mouseout"||s==="pointerout",K&&l!==al&&(ve=l.relatedTarget||l.fromElement)&&(Ai(ve)||ve[Ei]))break e;if((W||K)&&(K=Z.window===Z?Z:(K=Z.ownerDocument)?K.defaultView||K.parentWindow:window,W?(ve=l.relatedTarget||l.toElement,W=J,ve=ve?Ai(ve):null,ve!==null&&(ot=a(ve),Ae=ve.tag,ve!==ot||Ae!==5&&Ae!==27&&Ae!==6)&&(ve=null)):(W=null,ve=J),W!==ve)){if(Ae=dl,te="onMouseLeave",H="onMouseEnter",F="mouse",(s==="pointerout"||s==="pointerover")&&(Ae=ji,te="onPointerLeave",H="onPointerEnter",F="pointer"),ot=W==null?K:An(W),z=ve==null?K:An(ve),K=new Ae(te,F+"leave",W,l,Z),K.target=ot,K.relatedTarget=z,te=null,Ai(Z)===J&&(Ae=new Ae(H,F+"enter",ve,l,Z),Ae.target=z,Ae.relatedTarget=ot,te=Ae),ot=te,W&&ve)t:{for(Ae=eI,H=W,F=ve,z=0,te=H;te;te=Ae(te))z++;te=0;for(var Ee=F;Ee;Ee=Ae(Ee))te++;for(;0<z-te;)H=Ae(H),z--;for(;0<te-z;)F=Ae(F),te--;for(;z--;){if(H===F||F!==null&&H===F.alternate){Ae=H;break t}H=Ae(H),F=Ae(F)}Ae=null}else Ae=null;W!==null&&Fv(ie,K,W,Ae,!1),ve!==null&&ot!==null&&Fv(ie,ot,ve,Ae,!0)}}e:{if(K=J?An(J):window,W=K.nodeName&&K.nodeName.toLowerCase(),W==="select"||W==="input"&&K.type==="file")var $e=ny;else if(ey(K))if(iy)$e=dx;else{$e=ux;var _e=lx}else W=K.nodeName,!W||W.toLowerCase()!=="input"||K.type!=="checkbox"&&K.type!=="radio"?J&&Mo(J.elementType)&&($e=ny):$e=cx;if($e&&($e=$e(s,J))){ty(ie,$e,l,Z);break e}_e&&_e(s,K,J),s==="focusout"&&J&&K.type==="number"&&J.memoizedProps.value!=null&&sl(K,"number",K.value)}switch(_e=J?An(J):window,s){case"focusin":(ey(_e)||_e.contentEditable==="true")&&(Fo=_e,Jf=J,gl=null);break;case"focusout":gl=Jf=Fo=null;break;case"mousedown":Kf=!0;break;case"contextmenu":case"mouseup":case"dragend":Kf=!1,dy(ie,l,Z);break;case"selectionchange":if(hx)break;case"keydown":case"keyup":dy(ie,l,Z)}var Ve;if(We)e:{switch(s){case"compositionstart":var Ge="onCompositionStart";break e;case"compositionend":Ge="onCompositionEnd";break e;case"compositionupdate":Ge="onCompositionUpdate";break e}Ge=void 0}else Oo?Fr(s,l)&&(Ge="onCompositionEnd"):s==="keydown"&&l.keyCode===229&&(Ge="onCompositionStart");Ge&&(Di&&l.locale!=="ko"&&(Oo||Ge!=="onCompositionStart"?Ge==="onCompositionEnd"&&Oo&&(Ve=ul()):(Ri=Z,ll="value"in Ri?Ri.value:Ri.textContent,Oo=!0)),_e=td(J,Ge),0<_e.length&&(Ge=new ki(Ge,s,null,l,Z),ie.push({event:Ge,listeners:_e}),Ve?Ge.data=Ve:(Ve=Uo(l),Ve!==null&&(Ge.data=Ve)))),(Ve=On?sx(s,l):rx(s,l))&&(Ge=td(J,"onBeforeInput"),0<Ge.length&&(_e=new ki("onBeforeInput","beforeinput",null,l,Z),ie.push({event:_e,listeners:Ge}),_e.data=Ve)),Qx(ie,s,J,l,Z)}Uv(ie,r)})}function Bl(s,r,l){return{instance:s,listener:r,currentTarget:l}}function td(s,r){for(var l=r+"Capture",c=[];s!==null;){var y=s,_=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||_===null||(y=ni(s,l),y!=null&&c.unshift(Bl(s,y,_)),y=ni(s,r),y!=null&&c.push(Bl(s,y,_))),s.tag===3)return c;s=s.return}return[]}function eI(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function Fv(s,r,l,c,y){for(var _=r._reactName,w=[];l!==null&&l!==c;){var x=l,V=x.alternate,J=x.stateNode;if(x=x.tag,V!==null&&V===c)break;x!==5&&x!==26&&x!==27||J===null||(V=J,y?(J=ni(l,_),J!=null&&w.unshift(Bl(l,J,V))):y||(J=ni(l,_),J!=null&&w.push(Bl(l,J,V)))),l=l.return}w.length!==0&&s.push({event:r,listeners:w})}var tI=/\r\n?/g,nI=/\u0000|\uFFFD/g;function Gv(s){return(typeof s=="string"?s:""+s).replace(tI,`
`).replace(nI,"")}function Bv(s,r){return r=Gv(r),Gv(s)===r}function rt(s,r,l,c,y,_){switch(l){case"children":typeof c=="string"?r==="body"||r==="textarea"&&c===""||mn(s,c):(typeof c=="number"||typeof c=="bigint")&&r!=="body"&&mn(s,""+c);break;case"className":wn(s,"class",c);break;case"tabIndex":wn(s,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":wn(s,l,c);break;case"style":ol(s,c,_);break;case"data":if(r!=="object"){wn(s,"data",c);break}case"src":case"href":if(c===""&&(r!=="a"||l!=="href")){s.removeAttribute(l);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){s.removeAttribute(l);break}c=ko(""+c),s.setAttribute(l,c);break;case"action":case"formAction":if(typeof c=="function"){s.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(l==="formAction"?(r!=="input"&&rt(s,r,"name",y.name,y,null),rt(s,r,"formEncType",y.formEncType,y,null),rt(s,r,"formMethod",y.formMethod,y,null),rt(s,r,"formTarget",y.formTarget,y,null)):(rt(s,r,"encType",y.encType,y,null),rt(s,r,"method",y.method,y,null),rt(s,r,"target",y.target,y,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){s.removeAttribute(l);break}c=ko(""+c),s.setAttribute(l,c);break;case"onClick":c!=null&&(s.onclick=ti);break;case"onScroll":c!=null&&Oe("scroll",s);break;case"onScrollEnd":c!=null&&Oe("scrollend",s);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(l=c.__html,l!=null){if(y.children!=null)throw Error(i(60));s.innerHTML=l}}break;case"multiple":s.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":s.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){s.removeAttribute("xlink:href");break}l=ko(""+c),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(l,""+c):s.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(l,""):s.removeAttribute(l);break;case"capture":case"download":c===!0?s.setAttribute(l,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(l,c):s.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?s.setAttribute(l,c):s.removeAttribute(l);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?s.removeAttribute(l):s.setAttribute(l,c);break;case"popover":Oe("beforetoggle",s),Oe("toggle",s),Ro(s,"popover",c);break;case"xlinkActuate":bt(s,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":bt(s,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":bt(s,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":bt(s,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":bt(s,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":bt(s,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":bt(s,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":bt(s,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":bt(s,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Ro(s,"is",c);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=tc.get(l)||l,Ro(s,l,c))}}function vp(s,r,l,c,y,_){switch(l){case"style":ol(s,c,_);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(l=c.__html,l!=null){if(y.children!=null)throw Error(i(60));s.innerHTML=l}}break;case"children":typeof c=="string"?mn(s,c):(typeof c=="number"||typeof c=="bigint")&&mn(s,""+c);break;case"onScroll":c!=null&&Oe("scroll",s);break;case"onScrollEnd":c!=null&&Oe("scrollend",s);break;case"onClick":c!=null&&(s.onclick=ti);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Za.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(y=l.endsWith("Capture"),r=l.slice(2,y?l.length-7:void 0),_=s[Bt]||null,_=_!=null?_[l]:null,typeof _=="function"&&s.removeEventListener(r,_,y),typeof c=="function")){typeof _!="function"&&_!==null&&(l in s?s[l]=null:s.hasAttribute(l)&&s.removeAttribute(l)),s.addEventListener(r,c,y);break e}l in s?s[l]=c:c===!0?s.setAttribute(l,""):Ro(s,l,c)}}}function Wt(s,r,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Oe("error",s),Oe("load",s);var c=!1,y=!1,_;for(_ in l)if(l.hasOwnProperty(_)){var w=l[_];if(w!=null)switch(_){case"src":c=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:rt(s,r,_,w,l,null)}}y&&rt(s,r,"srcSet",l.srcSet,l,null),c&&rt(s,r,"src",l.src,l,null);return;case"input":Oe("invalid",s);var x=_=w=y=null,V=null,J=null;for(c in l)if(l.hasOwnProperty(c)){var Z=l[c];if(Z!=null)switch(c){case"name":y=Z;break;case"type":w=Z;break;case"checked":V=Z;break;case"defaultChecked":J=Z;break;case"value":_=Z;break;case"defaultValue":x=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(i(137,r));break;default:rt(s,r,c,Z,l,null)}}Xu(s,_,x,V,J,w,y,!1);return;case"select":Oe("invalid",s),c=w=_=null;for(y in l)if(l.hasOwnProperty(y)&&(x=l[y],x!=null))switch(y){case"value":_=x;break;case"defaultValue":w=x;break;case"multiple":c=x;default:rt(s,r,y,x,l,null)}r=_,l=w,s.multiple=!!c,r!=null?Ns(s,!!c,r,!1):l!=null&&Ns(s,!!c,l,!0);return;case"textarea":Oe("invalid",s),_=y=c=null;for(w in l)if(l.hasOwnProperty(w)&&(x=l[w],x!=null))switch(w){case"value":c=x;break;case"defaultValue":y=x;break;case"children":_=x;break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(i(91));break;default:rt(s,r,w,x,l,null)}Ms(s,c,y,_);return;case"option":for(V in l)if(l.hasOwnProperty(V)&&(c=l[V],c!=null))switch(V){case"selected":s.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:rt(s,r,V,c,l,null)}return;case"dialog":Oe("beforetoggle",s),Oe("toggle",s),Oe("cancel",s),Oe("close",s);break;case"iframe":case"object":Oe("load",s);break;case"video":case"audio":for(c=0;c<Gl.length;c++)Oe(Gl[c],s);break;case"image":Oe("error",s),Oe("load",s);break;case"details":Oe("toggle",s);break;case"embed":case"source":case"link":Oe("error",s),Oe("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(J in l)if(l.hasOwnProperty(J)&&(c=l[J],c!=null))switch(J){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:rt(s,r,J,c,l,null)}return;default:if(Mo(r)){for(Z in l)l.hasOwnProperty(Z)&&(c=l[Z],c!==void 0&&vp(s,r,Z,c,l,void 0));return}}for(x in l)l.hasOwnProperty(x)&&(c=l[x],c!=null&&rt(s,r,x,c,l,null))}function iI(s,r,l,c){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,_=null,w=null,x=null,V=null,J=null,Z=null;for(W in l){var ie=l[W];if(l.hasOwnProperty(W)&&ie!=null)switch(W){case"checked":break;case"value":break;case"defaultValue":V=ie;default:c.hasOwnProperty(W)||rt(s,r,W,null,c,ie)}}for(var K in c){var W=c[K];if(ie=l[K],c.hasOwnProperty(K)&&(W!=null||ie!=null))switch(K){case"type":_=W;break;case"name":y=W;break;case"checked":J=W;break;case"defaultChecked":Z=W;break;case"value":w=W;break;case"defaultValue":x=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(i(137,r));break;default:W!==ie&&rt(s,r,K,W,c,ie)}}No(s,w,x,V,J,Z,_,y);return;case"select":W=w=x=K=null;for(_ in l)if(V=l[_],l.hasOwnProperty(_)&&V!=null)switch(_){case"value":break;case"multiple":W=V;default:c.hasOwnProperty(_)||rt(s,r,_,null,c,V)}for(y in c)if(_=c[y],V=l[y],c.hasOwnProperty(y)&&(_!=null||V!=null))switch(y){case"value":K=_;break;case"defaultValue":x=_;break;case"multiple":w=_;default:_!==V&&rt(s,r,y,_,c,V)}r=x,l=w,c=W,K!=null?Ns(s,!!l,K,!1):!!c!=!!l&&(r!=null?Ns(s,!!l,r,!0):Ns(s,!!l,l?[]:"",!1));return;case"textarea":W=K=null;for(x in l)if(y=l[x],l.hasOwnProperty(x)&&y!=null&&!c.hasOwnProperty(x))switch(x){case"value":break;case"children":break;default:rt(s,r,x,null,c,y)}for(w in c)if(y=c[w],_=l[w],c.hasOwnProperty(w)&&(y!=null||_!=null))switch(w){case"value":K=y;break;case"defaultValue":W=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(i(91));break;default:y!==_&&rt(s,r,w,y,c,_)}Zu(s,K,W);return;case"option":for(var ve in l)if(K=l[ve],l.hasOwnProperty(ve)&&K!=null&&!c.hasOwnProperty(ve))switch(ve){case"selected":s.selected=!1;break;default:rt(s,r,ve,null,c,K)}for(V in c)if(K=c[V],W=l[V],c.hasOwnProperty(V)&&K!==W&&(K!=null||W!=null))switch(V){case"selected":s.selected=K&&typeof K!="function"&&typeof K!="symbol";break;default:rt(s,r,V,K,c,W)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ae in l)K=l[Ae],l.hasOwnProperty(Ae)&&K!=null&&!c.hasOwnProperty(Ae)&&rt(s,r,Ae,null,c,K);for(J in c)if(K=c[J],W=l[J],c.hasOwnProperty(J)&&K!==W&&(K!=null||W!=null))switch(J){case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(i(137,r));break;default:rt(s,r,J,K,c,W)}return;default:if(Mo(r)){for(var ot in l)K=l[ot],l.hasOwnProperty(ot)&&K!==void 0&&!c.hasOwnProperty(ot)&&vp(s,r,ot,void 0,c,K);for(Z in c)K=c[Z],W=l[Z],!c.hasOwnProperty(Z)||K===W||K===void 0&&W===void 0||vp(s,r,Z,K,c,W);return}}for(var H in l)K=l[H],l.hasOwnProperty(H)&&K!=null&&!c.hasOwnProperty(H)&&rt(s,r,H,null,c,K);for(ie in c)K=c[ie],W=l[ie],!c.hasOwnProperty(ie)||K===W||K==null&&W==null||rt(s,r,ie,K,c,W)}function Hv(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function sI(){if(typeof performance.getEntriesByType=="function"){for(var s=0,r=0,l=performance.getEntriesByType("resource"),c=0;c<l.length;c++){var y=l[c],_=y.transferSize,w=y.initiatorType,x=y.duration;if(_&&x&&Hv(w)){for(w=0,x=y.responseEnd,c+=1;c<l.length;c++){var V=l[c],J=V.startTime;if(J>x)break;var Z=V.transferSize,ie=V.initiatorType;Z&&Hv(ie)&&(V=V.responseEnd,w+=Z*(V<x?1:(x-J)/(V-J)))}if(--c,r+=8*(_+w)/(y.duration/1e3),s++,10<s)break}}if(0<s)return r/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var _p=null,Tp=null;function nd(s){return s.nodeType===9?s:s.ownerDocument}function qv(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function zv(s,r){if(s===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&r==="foreignObject"?0:s}function Ep(s,r){return s==="textarea"||s==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Sp=null;function rI(){var s=window.event;return s&&s.type==="popstate"?s===Sp?!1:(Sp=s,!0):(Sp=null,!1)}var Yv=typeof setTimeout=="function"?setTimeout:void 0,oI=typeof clearTimeout=="function"?clearTimeout:void 0,Jv=typeof Promise=="function"?Promise:void 0,aI=typeof queueMicrotask=="function"?queueMicrotask:typeof Jv<"u"?function(s){return Jv.resolve(null).then(s).catch(lI)}:Yv;function lI(s){setTimeout(function(){throw s})}function er(s){return s==="head"}function Kv(s,r){var l=r,c=0;do{var y=l.nextSibling;if(s.removeChild(l),y&&y.nodeType===8)if(l=y.data,l==="/$"||l==="/&"){if(c===0){s.removeChild(y),fa(r);return}c--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")c++;else if(l==="html")Hl(s.ownerDocument.documentElement);else if(l==="head"){l=s.ownerDocument.head,Hl(l);for(var _=l.firstChild;_;){var w=_.nextSibling,x=_.nodeName;_[Si]||x==="SCRIPT"||x==="STYLE"||x==="LINK"&&_.rel.toLowerCase()==="stylesheet"||l.removeChild(_),_=w}}else l==="body"&&Hl(s.ownerDocument.body);l=y}while(l);fa(r)}function $v(s,r){var l=s;s=0;do{var c=l.nextSibling;if(l.nodeType===1?r?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(r?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),c&&c.nodeType===8)if(l=c.data,l==="/$"){if(s===0)break;s--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||s++;l=c}while(l)}function Ap(s){var r=s.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var l=r;switch(r=r.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Ap(l),bo(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}s.removeChild(l)}}function uI(s,r,l,c){for(;s.nodeType===1;){var y=l;if(s.nodeName.toLowerCase()!==r.toLowerCase()){if(!c&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(c){if(!s[Si])switch(r){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(_=s.getAttribute("rel"),_==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(_!==y.rel||s.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||s.getAttribute("title")!==(y.title==null?null:y.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(_=s.getAttribute("src"),(_!==(y.src==null?null:y.src)||s.getAttribute("type")!==(y.type==null?null:y.type)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&_&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(r==="input"&&s.type==="hidden"){var _=y.name==null?null:""+y.name;if(y.type==="hidden"&&s.getAttribute("name")===_)return s}else return s;if(s=Yn(s.nextSibling),s===null)break}return null}function cI(s,r,l){if(r==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!l||(s=Yn(s.nextSibling),s===null))return null;return s}function jv(s,r){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!r||(s=Yn(s.nextSibling),s===null))return null;return s}function wp(s){return s.data==="$?"||s.data==="$~"}function Cp(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function dI(s,r){var l=s.ownerDocument;if(s.data==="$~")s._reactRetry=r;else if(s.data!=="$?"||l.readyState!=="loading")r();else{var c=function(){r(),l.removeEventListener("DOMContentLoaded",c)};l.addEventListener("DOMContentLoaded",c),s._reactRetry=c}}function Yn(s){for(;s!=null;s=s.nextSibling){var r=s.nodeType;if(r===1||r===3)break;if(r===8){if(r=s.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return s}var xp=null;function Qv(s){s=s.nextSibling;for(var r=0;s;){if(s.nodeType===8){var l=s.data;if(l==="/$"||l==="/&"){if(r===0)return Yn(s.nextSibling);r--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||r++}s=s.nextSibling}return null}function Wv(s){s=s.previousSibling;for(var r=0;s;){if(s.nodeType===8){var l=s.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(r===0)return s;r--}else l!=="/$"&&l!=="/&"||r++}s=s.previousSibling}return null}function Xv(s,r,l){switch(r=nd(l),s){case"html":if(s=r.documentElement,!s)throw Error(i(452));return s;case"head":if(s=r.head,!s)throw Error(i(453));return s;case"body":if(s=r.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function Hl(s){for(var r=s.attributes;r.length;)s.removeAttributeNode(r[0]);bo(s)}var Jn=new Map,Zv=new Set;function id(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var cs=ue.d;ue.d={f:fI,r:hI,D:pI,C:mI,L:gI,m:yI,X:_I,S:vI,M:TI};function fI(){var s=cs.f(),r=$c();return s||r}function hI(s){var r=Ln(s);r!==null&&r.tag===5&&r.type==="form"?g0(r):cs.r(s)}var ua=typeof document>"u"?null:document;function e_(s,r,l){var c=ua;if(c&&typeof r=="string"&&r){var y=pn(r);y='link[rel="'+s+'"][href="'+y+'"]',typeof l=="string"&&(y+='[crossorigin="'+l+'"]'),Zv.has(y)||(Zv.add(y),s={rel:s,crossOrigin:l,href:r},c.querySelector(y)===null&&(r=c.createElement("link"),Wt(r,"link",s),It(r),c.head.appendChild(r)))}}function pI(s){cs.D(s),e_("dns-prefetch",s,null)}function mI(s,r){cs.C(s,r),e_("preconnect",s,r)}function gI(s,r,l){cs.L(s,r,l);var c=ua;if(c&&s&&r){var y='link[rel="preload"][as="'+pn(r)+'"]';r==="image"&&l&&l.imageSrcSet?(y+='[imagesrcset="'+pn(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(y+='[imagesizes="'+pn(l.imageSizes)+'"]')):y+='[href="'+pn(s)+'"]';var _=y;switch(r){case"style":_=ca(s);break;case"script":_=da(s)}Jn.has(_)||(s=T({rel:"preload",href:r==="image"&&l&&l.imageSrcSet?void 0:s,as:r},l),Jn.set(_,s),c.querySelector(y)!==null||r==="style"&&c.querySelector(ql(_))||r==="script"&&c.querySelector(zl(_))||(r=c.createElement("link"),Wt(r,"link",s),It(r),c.head.appendChild(r)))}}function yI(s,r){cs.m(s,r);var l=ua;if(l&&s){var c=r&&typeof r.as=="string"?r.as:"script",y='link[rel="modulepreload"][as="'+pn(c)+'"][href="'+pn(s)+'"]',_=y;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=da(s)}if(!Jn.has(_)&&(s=T({rel:"modulepreload",href:s},r),Jn.set(_,s),l.querySelector(y)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(zl(_)))return}c=l.createElement("link"),Wt(c,"link",s),It(c),l.head.appendChild(c)}}}function vI(s,r,l){cs.S(s,r,l);var c=ua;if(c&&s){var y=wi(c).hoistableStyles,_=ca(s);r=r||"default";var w=y.get(_);if(!w){var x={loading:0,preload:null};if(w=c.querySelector(ql(_)))x.loading=5;else{s=T({rel:"stylesheet",href:s,"data-precedence":r},l),(l=Jn.get(_))&&Ip(s,l);var V=w=c.createElement("link");It(V),Wt(V,"link",s),V._p=new Promise(function(J,Z){V.onload=J,V.onerror=Z}),V.addEventListener("load",function(){x.loading|=1}),V.addEventListener("error",function(){x.loading|=2}),x.loading|=4,sd(w,r,c)}w={type:"stylesheet",instance:w,count:1,state:x},y.set(_,w)}}}function _I(s,r){cs.X(s,r);var l=ua;if(l&&s){var c=wi(l).hoistableScripts,y=da(s),_=c.get(y);_||(_=l.querySelector(zl(y)),_||(s=T({src:s,async:!0},r),(r=Jn.get(y))&&bp(s,r),_=l.createElement("script"),It(_),Wt(_,"link",s),l.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},c.set(y,_))}}function TI(s,r){cs.M(s,r);var l=ua;if(l&&s){var c=wi(l).hoistableScripts,y=da(s),_=c.get(y);_||(_=l.querySelector(zl(y)),_||(s=T({src:s,async:!0,type:"module"},r),(r=Jn.get(y))&&bp(s,r),_=l.createElement("script"),It(_),Wt(_,"link",s),l.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},c.set(y,_))}}function t_(s,r,l,c){var y=(y=Le.current)?id(y):null;if(!y)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(r=ca(l.href),l=wi(y).hoistableStyles,c=l.get(r),c||(c={type:"style",instance:null,count:0,state:null},l.set(r,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){s=ca(l.href);var _=wi(y).hoistableStyles,w=_.get(s);if(w||(y=y.ownerDocument||y,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(s,w),(_=y.querySelector(ql(s)))&&!_._p&&(w.instance=_,w.state.loading=5),Jn.has(s)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Jn.set(s,l),_||EI(y,s,l,w.state))),r&&c===null)throw Error(i(528,""));return w}if(r&&c!==null)throw Error(i(529,""));return null;case"script":return r=l.async,l=l.src,typeof l=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=da(l),l=wi(y).hoistableScripts,c=l.get(r),c||(c={type:"script",instance:null,count:0,state:null},l.set(r,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function ca(s){return'href="'+pn(s)+'"'}function ql(s){return'link[rel="stylesheet"]['+s+"]"}function n_(s){return T({},s,{"data-precedence":s.precedence,precedence:null})}function EI(s,r,l,c){s.querySelector('link[rel="preload"][as="style"]['+r+"]")?c.loading=1:(r=s.createElement("link"),c.preload=r,r.addEventListener("load",function(){return c.loading|=1}),r.addEventListener("error",function(){return c.loading|=2}),Wt(r,"link",l),It(r),s.head.appendChild(r))}function da(s){return'[src="'+pn(s)+'"]'}function zl(s){return"script[async]"+s}function i_(s,r,l){if(r.count++,r.instance===null)switch(r.type){case"style":var c=s.querySelector('style[data-href~="'+pn(l.href)+'"]');if(c)return r.instance=c,It(c),c;var y=T({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return c=(s.ownerDocument||s).createElement("style"),It(c),Wt(c,"style",y),sd(c,l.precedence,s),r.instance=c;case"stylesheet":y=ca(l.href);var _=s.querySelector(ql(y));if(_)return r.state.loading|=4,r.instance=_,It(_),_;c=n_(l),(y=Jn.get(y))&&Ip(c,y),_=(s.ownerDocument||s).createElement("link"),It(_);var w=_;return w._p=new Promise(function(x,V){w.onload=x,w.onerror=V}),Wt(_,"link",c),r.state.loading|=4,sd(_,l.precedence,s),r.instance=_;case"script":return _=da(l.src),(y=s.querySelector(zl(_)))?(r.instance=y,It(y),y):(c=l,(y=Jn.get(_))&&(c=T({},l),bp(c,y)),s=s.ownerDocument||s,y=s.createElement("script"),It(y),Wt(y,"link",c),s.head.appendChild(y),r.instance=y);case"void":return null;default:throw Error(i(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(c=r.instance,r.state.loading|=4,sd(c,l.precedence,s));return r.instance}function sd(s,r,l){for(var c=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=c.length?c[c.length-1]:null,_=y,w=0;w<c.length;w++){var x=c[w];if(x.dataset.precedence===r)_=x;else if(_!==y)break}_?_.parentNode.insertBefore(s,_.nextSibling):(r=l.nodeType===9?l.head:l,r.insertBefore(s,r.firstChild))}function Ip(s,r){s.crossOrigin==null&&(s.crossOrigin=r.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=r.referrerPolicy),s.title==null&&(s.title=r.title)}function bp(s,r){s.crossOrigin==null&&(s.crossOrigin=r.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=r.referrerPolicy),s.integrity==null&&(s.integrity=r.integrity)}var rd=null;function s_(s,r,l){if(rd===null){var c=new Map,y=rd=new Map;y.set(l,c)}else y=rd,c=y.get(l),c||(c=new Map,y.set(l,c));if(c.has(s))return c;for(c.set(s,null),l=l.getElementsByTagName(s),y=0;y<l.length;y++){var _=l[y];if(!(_[Si]||_[xt]||s==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var w=_.getAttribute(r)||"";w=s+w;var x=c.get(w);x?x.push(_):c.set(w,[_])}}return c}function r_(s,r,l){s=s.ownerDocument||s,s.head.insertBefore(l,r==="title"?s.querySelector("head > title"):null)}function SI(s,r,l){if(l===1||r.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return s=r.disabled,typeof r.precedence=="string"&&s==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function o_(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function AI(s,r,l,c){if(l.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var y=ca(c.href),_=r.querySelector(ql(y));if(_){r=_._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(s.count++,s=od.bind(s),r.then(s,s)),l.state.loading|=4,l.instance=_,It(_);return}_=r.ownerDocument||r,c=n_(c),(y=Jn.get(y))&&Ip(c,y),_=_.createElement("link"),It(_);var w=_;w._p=new Promise(function(x,V){w.onload=x,w.onerror=V}),Wt(_,"link",c),l.instance=_}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(l,r),(r=l.state.preload)&&(l.state.loading&3)===0&&(s.count++,l=od.bind(s),r.addEventListener("load",l),r.addEventListener("error",l))}}var Rp=0;function wI(s,r){return s.stylesheets&&s.count===0&&ld(s,s.stylesheets),0<s.count||0<s.imgCount?function(l){var c=setTimeout(function(){if(s.stylesheets&&ld(s,s.stylesheets),s.unsuspend){var _=s.unsuspend;s.unsuspend=null,_()}},6e4+r);0<s.imgBytes&&Rp===0&&(Rp=62500*sI());var y=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&ld(s,s.stylesheets),s.unsuspend)){var _=s.unsuspend;s.unsuspend=null,_()}},(s.imgBytes>Rp?50:800)+r);return s.unsuspend=l,function(){s.unsuspend=null,clearTimeout(c),clearTimeout(y)}}:null}function od(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)ld(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var ad=null;function ld(s,r){s.stylesheets=null,s.unsuspend!==null&&(s.count++,ad=new Map,r.forEach(CI,s),ad=null,od.call(s))}function CI(s,r){if(!(r.state.loading&4)){var l=ad.get(s);if(l)var c=l.get(null);else{l=new Map,ad.set(s,l);for(var y=s.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<y.length;_++){var w=y[_];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(l.set(w.dataset.precedence,w),c=w)}c&&l.set(null,c)}y=r.instance,w=y.getAttribute("data-precedence"),_=l.get(w)||c,_===c&&l.set(null,y),l.set(w,y),this.count++,c=od.bind(this),y.addEventListener("load",c),y.addEventListener("error",c),_?_.parentNode.insertBefore(y,_.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(y,s.firstChild)),r.state.loading|=4}}var Yl={$$typeof:X,Provider:null,Consumer:null,_currentValue:pe,_currentValue2:pe,_threadCount:0};function xI(s,r,l,c,y,_,w,x,V){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ti(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ti(0),this.hiddenUpdates=Ti(null),this.identifierPrefix=c,this.onUncaughtError=y,this.onCaughtError=_,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=V,this.incompleteTransitions=new Map}function a_(s,r,l,c,y,_,w,x,V,J,Z,ie){return s=new xI(s,r,l,w,V,J,Z,ie,x),r=1,_===!0&&(r|=24),_=xn(3,null,null,r),s.current=_,_.stateNode=s,r=lh(),r.refCount++,s.pooledCache=r,r.refCount++,_.memoizedState={element:c,isDehydrated:l,cache:r},fh(_),s}function l_(s){return s?(s=Ho,s):Ho}function u_(s,r,l,c,y,_){y=l_(y),c.context===null?c.context=y:c.pendingContext=y,c=qs(r),c.payload={element:l},_=_===void 0?null:_,_!==null&&(c.callback=_),l=zs(s,c,r),l!==null&&(Tn(l,s,r),Al(l,s,r))}function c_(s,r){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var l=s.retryLane;s.retryLane=l!==0&&l<r?l:r}}function Np(s,r){c_(s,r),(s=s.alternate)&&c_(s,r)}function d_(s){if(s.tag===13||s.tag===31){var r=Hr(s,67108864);r!==null&&Tn(r,s,67108864),Np(s,67108864)}}function f_(s){if(s.tag===13||s.tag===31){var r=Mn();r=Nr(r);var l=Hr(s,r);l!==null&&Tn(l,s,r),Np(s,r)}}var ud=!0;function II(s,r,l,c){var y=Y.T;Y.T=null;var _=ue.p;try{ue.p=2,Mp(s,r,l,c)}finally{ue.p=_,Y.T=y}}function bI(s,r,l,c){var y=Y.T;Y.T=null;var _=ue.p;try{ue.p=8,Mp(s,r,l,c)}finally{ue.p=_,Y.T=y}}function Mp(s,r,l,c){if(ud){var y=kp(c);if(y===null)yp(s,r,c,cd,l),p_(s,c);else if(NI(y,s,r,l,c))c.stopPropagation();else if(p_(s,c),r&4&&-1<RI.indexOf(s)){for(;y!==null;){var _=Ln(y);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var w=vi(_.pendingLanes);if(w!==0){var x=_;for(x.pendingLanes|=2,x.entangledLanes|=2;w;){var V=1<<31-_t(w);x.entanglements[1]|=V,w&=~V}Ui(_),(Xe&6)===0&&(Jc=un()+500,Fl(0))}}break;case 31:case 13:x=Hr(_,2),x!==null&&Tn(x,_,2),$c(),Np(_,2)}if(_=kp(c),_===null&&yp(s,r,c,cd,l),_===y)break;y=_}y!==null&&c.stopPropagation()}else yp(s,r,c,null,l)}}function kp(s){return s=Vn(s),Dp(s)}var cd=null;function Dp(s){if(cd=null,s=Ai(s),s!==null){var r=a(s);if(r===null)s=null;else{var l=r.tag;if(l===13){if(s=u(r),s!==null)return s;s=null}else if(l===31){if(s=f(r),s!==null)return s;s=null}else if(l===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;s=null}else r!==s&&(s=null)}}return cd=s,null}function h_(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(xr()){case $a:return 2;case ja:return 8;case bs:case Ff:return 32;case Hu:return 268435456;default:return 32}default:return 32}}var Pp=!1,tr=null,nr=null,ir=null,Jl=new Map,Kl=new Map,sr=[],RI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function p_(s,r){switch(s){case"focusin":case"focusout":tr=null;break;case"dragenter":case"dragleave":nr=null;break;case"mouseover":case"mouseout":ir=null;break;case"pointerover":case"pointerout":Jl.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Kl.delete(r.pointerId)}}function $l(s,r,l,c,y,_){return s===null||s.nativeEvent!==_?(s={blockedOn:r,domEventName:l,eventSystemFlags:c,nativeEvent:_,targetContainers:[y]},r!==null&&(r=Ln(r),r!==null&&d_(r)),s):(s.eventSystemFlags|=c,r=s.targetContainers,y!==null&&r.indexOf(y)===-1&&r.push(y),s)}function NI(s,r,l,c,y){switch(r){case"focusin":return tr=$l(tr,s,r,l,c,y),!0;case"dragenter":return nr=$l(nr,s,r,l,c,y),!0;case"mouseover":return ir=$l(ir,s,r,l,c,y),!0;case"pointerover":var _=y.pointerId;return Jl.set(_,$l(Jl.get(_)||null,s,r,l,c,y)),!0;case"gotpointercapture":return _=y.pointerId,Kl.set(_,$l(Kl.get(_)||null,s,r,l,c,y)),!0}return!1}function m_(s){var r=Ai(s.target);if(r!==null){var l=a(r);if(l!==null){if(r=l.tag,r===13){if(r=u(l),r!==null){s.blockedOn=r,Zn(s.priority,function(){f_(l)});return}}else if(r===31){if(r=f(l),r!==null){s.blockedOn=r,Zn(s.priority,function(){f_(l)});return}}else if(r===3&&l.stateNode.current.memoizedState.isDehydrated){s.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}s.blockedOn=null}function dd(s){if(s.blockedOn!==null)return!1;for(var r=s.targetContainers;0<r.length;){var l=kp(s.nativeEvent);if(l===null){l=s.nativeEvent;var c=new l.constructor(l.type,l);al=c,l.target.dispatchEvent(c),al=null}else return r=Ln(l),r!==null&&d_(r),s.blockedOn=l,!1;r.shift()}return!0}function g_(s,r,l){dd(s)&&l.delete(r)}function MI(){Pp=!1,tr!==null&&dd(tr)&&(tr=null),nr!==null&&dd(nr)&&(nr=null),ir!==null&&dd(ir)&&(ir=null),Jl.forEach(g_),Kl.forEach(g_)}function fd(s,r){s.blockedOn===r&&(s.blockedOn=null,Pp||(Pp=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,MI)))}var hd=null;function y_(s){hd!==s&&(hd=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){hd===s&&(hd=null);for(var r=0;r<s.length;r+=3){var l=s[r],c=s[r+1],y=s[r+2];if(typeof c!="function"){if(Dp(c||l)===null)continue;break}var _=Ln(l);_!==null&&(s.splice(r,3),r-=3,kh(_,{pending:!0,data:y,method:l.method,action:c},c,y))}}))}function fa(s){function r(V){return fd(V,s)}tr!==null&&fd(tr,s),nr!==null&&fd(nr,s),ir!==null&&fd(ir,s),Jl.forEach(r),Kl.forEach(r);for(var l=0;l<sr.length;l++){var c=sr[l];c.blockedOn===s&&(c.blockedOn=null)}for(;0<sr.length&&(l=sr[0],l.blockedOn===null);)m_(l),l.blockedOn===null&&sr.shift();if(l=(s.ownerDocument||s).$$reactFormReplay,l!=null)for(c=0;c<l.length;c+=3){var y=l[c],_=l[c+1],w=y[Bt]||null;if(typeof _=="function")w||y_(l);else if(w){var x=null;if(_&&_.hasAttribute("formAction")){if(y=_,w=_[Bt]||null)x=w.formAction;else if(Dp(y)!==null)continue}else x=w.action;typeof x=="function"?l[c+1]=x:(l.splice(c,3),c-=3),y_(l)}}}function v_(){function s(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(w){return y=w})},focusReset:"manual",scroll:"manual"})}function r(){y!==null&&(y(),y=null),c||setTimeout(l,20)}function l(){if(!c&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,y=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(l,100),function(){c=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),y!==null&&(y(),y=null)}}}function Lp(s){this._internalRoot=s}pd.prototype.render=Lp.prototype.render=function(s){var r=this._internalRoot;if(r===null)throw Error(i(409));var l=r.current,c=Mn();u_(l,c,s,r,null,null)},pd.prototype.unmount=Lp.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var r=s.containerInfo;u_(s.current,2,null,s,null,null),$c(),r[Ei]=null}};function pd(s){this._internalRoot=s}pd.prototype.unstable_scheduleHydration=function(s){if(s){var r=$u();s={blockedOn:null,target:s,priority:r};for(var l=0;l<sr.length&&r!==0&&r<sr[l].priority;l++);sr.splice(l,0,s),l===0&&m_(s)}};var __=e.version;if(__!=="19.2.4")throw Error(i(527,__,"19.2.4"));ue.findDOMNode=function(s){var r=s._reactInternals;if(r===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=h(r),s=s!==null?v(s):null,s=s===null?null:s.stateNode,s};var kI={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:Y,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var md=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!md.isDisabled&&md.supportsFiber)try{Wn=md.inject(kI),Jt=md}catch{}}return Ql.createRoot=function(s,r){if(!o(s))throw Error(i(299));var l=!1,c="",y=x0,_=I0,w=b0;return r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onUncaughtError!==void 0&&(y=r.onUncaughtError),r.onCaughtError!==void 0&&(_=r.onCaughtError),r.onRecoverableError!==void 0&&(w=r.onRecoverableError)),r=a_(s,1,!1,null,null,l,c,null,y,_,w,v_),s[Ei]=r.current,gp(s),new Lp(r)},Ql.hydrateRoot=function(s,r,l){if(!o(s))throw Error(i(299));var c=!1,y="",_=x0,w=I0,x=b0,V=null;return l!=null&&(l.unstable_strictMode===!0&&(c=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onUncaughtError!==void 0&&(_=l.onUncaughtError),l.onCaughtError!==void 0&&(w=l.onCaughtError),l.onRecoverableError!==void 0&&(x=l.onRecoverableError),l.formState!==void 0&&(V=l.formState)),r=a_(s,1,!0,r,l??null,c,y,V,_,w,x,v_),r.context=l_(null),l=r.current,c=Mn(),c=Nr(c),y=qs(c),y.callback=null,zs(l,y,c),l=c,r.current.lanes=l,br(r,l),Ui(r),s[Ei]=r.current,gp(s),new pd(r)},Ql.version="19.2.4",Ql}var R_;function qI(){if(R_)return Op.exports;R_=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Op.exports=HI(),Op.exports}var zI=qI();const YI=US(zI),vo="gemini-3-flash-preview",am=10,lm=["image/png","image/jpeg","image/jpg","image/webp"],Ia="Not financial advice. DYOR.",JI=`
  Act as a top-tier crypto day trader. Analyze this chart for a high-impact social media update.

  Identify:
  1. Asset Name (Strictly TICKER/USDT format. Default to USDT pair).
  2. Timeframe.
  3. Market Structure (e.g., MSB, Uptrend, Downtrend, Range).
  4. Price Action Patterns (e.g., SFP, Flags, Wedges, liquidity sweeps).
  5. Key Liquidity Levels (Support/Resistance).
  6. The Verdict (assessment): Write a single, cohesive technical narrative paragraph (approx 50-75 words) using this specific flow:
     - Start with the Ticker and the primary structure (e.g., "#BTC is respecting the ascending channel on the 4H timeframe...").
     - Describe the recent reaction (e.g., "The recent pullback found demand near...").
     - State the thesis/condition (e.g., "As long as price holds above X, a move toward Y is likely.").
     - State the invalidation (e.g., "A clean break below Z would invalidate the setup.").
     - Use specific price levels from the image.
     - DO NOT use bullet points or labels like "Verdict:".
  7. Confidence score (0-100).

  Tone & Style:
  - Professional, concise, "Smart Money" trader.
  - No hedging or "AI" sounding filler.
`,KI=`
  Analyze this image of a crypto market heatmap or price list (e.g. Coin360, TradingView list).
  
  Generate:
  1. Overall Sentiment (Bullish, Bearish, or Mixed).
  2. Market Mood: A short, punchy 2-4 word phrase describing the state (e.g., "Bitcoin Dominance Squeeze", "Altcoin Bloodbath", "Green Across Board").
  3. Top Performers: Identify up to 5 tickers with the highest positive % visible. Format: Ticker (+X%).
  4. Laggards: Identify up to 5 tickers with negative % or lowest gains. Format: Ticker (-X%).
  5. Summary: A professional 2-3 sentence observation of money flow. (e.g., "Liquidity is rotating from BTC to L1s.", "Total market sell-off driven by macro fears.").
  6. Social Post: A list-style update. 
     - Structure: 
       " Market Update"
       [Market Mood]
       
        Strength: $AAA, $BBB
        Weakness: $CCC, $DDD
       
        [Summary]
       
       #Crypto #Bitcoin #Markets
`,$I=`
  Act as a macro-focused crypto trader. Analyze the provided topic/news (e.g., FOMC, CPI, GDP, Tech Upgrade) for a social media update.

  Generate:
  1. Impact Level (High/Medium/Low).
  2. Market Sentiment (Hawkish, Dovish, Neutral, or Volatile).
  3. Affected Assets: List up to 3 tickers most likely to move (e.g., $BTC, $DXY, $GOLD, $ETH).
  4. Trading Strategy: A short, 3-5 word directive (e.g., "Long Volatility", "Wait for flush", "Short bounces").
  5. Key Takeaway: A 1-sentence "bottom line" for traders.
  6. Social Post: A punchy, "Smart Money" style post (max 280 chars style). 
     - Focus on liquidity, volatility, and reaction. 
     - Be cynical/professional. No "Exciting news!" fluff.
     - Example tone: "CPI prints hot. Fed pivot expectations dead. DXY ripping. Protect capital."
`,jI=`
  Perform a Google Search to identify the top 5 most critical cryptocurrency market news stories from the last 12-24 hours relative to the provided "Current Date".
  
  CRITICAL INSTRUCTION:
  - IGNORE old news. If a story is older than 24 hours, do not include it.
  - Prioritize breaking news happening *today*.

  Focus on high-impact items such as:
  - Regulatory rulings (SEC, etc.)
  - Macroeconomic data (CPI, Fed Rates, GDP)
  - Major protocol upgrades or hacks
  - Institutional flows (ETF data)

  Output a JSON object containing:
  1. marketOverview: A 2-sentence summary of the overall market mood based on the latest search results.
  2. news: A list of 5 items (title, summary, sentiment, timestamp). Timestamp must be relative to now (e.g., "2h ago").
  3. upcomingEvents: A list of 3 items (event, date, importance, expectedImpact) for the next 7 days.

  Be concise, professional, and data-driven.
`,QI=`
  Act as a top Binance Square Content Creator (KOL).
  
  I will provide you with a News Item or an Upcoming Event.
  Write a high-engagement Binance Square post (approx 300-500 characters) about it.

  Guidelines:
  - **Headline**: Start with a catchy, all-caps headline/hook with emojis.
  - **Body**: Summarize the news and why it matters for the market.
  - **Opinion**: Add a "Smart Money" take (Bullish/Bearish/Caution).
  - **Engagement**: Ask a question to drive comments.
  - **Tags**: Use #Binance #Crypto #Bitcoin + 2 relevant tags.
  - **Formatting**: Use line breaks for readability. Do not use markdown bolding (**text**) as it may not render, use ALL CAPS for emphasis instead.
  
  Input Data:
`,WI=`
  Analyze this trading chart which appears to have a strategy dashboard or metric table overlay.
  
  Extract the following data strictly from the image:
  1. Ticker. Ensure the format is TICKER/USDT (e.g. XRP/USDT).
  2. Timeframe (e.g. 30m).
  3. Direction: "Long" or "Short" (Look for "Current Position" or indicator labels).
  4. Entry Price.
  5. Stop Loss Price.
  6. Strategy Metrics:
     - Win Rate (e.g. 69.92%)
     - Net PnL (e.g. 679.36%).
     - Win/Loss Ratio (e.g. 0.53).
     - Confidence Score (e.g. 90%, 9.5, or High). Look for "Entry Conf", "Entry Score", or "Conf". STRICTLY IGNORE "Live Conf".
  
  **Calculations & Logic:**
  - If targets are not visible, calculate 4 targets (1R, 2R, 3R, 4R).
  - **CRITICAL**: Calculate the ROI % for each Target price relative to the Entry price. Format as (+X.X%).
  - **Sanitization**: If "Net PnL" is negative (starts with -), DO NOT include it in the "formattedPost" string. Only include positive stats in the text.

  Finally, generate a "formattedPost" string using this high-engagement template:

   $TICKER/USDT | [Direction] Setup
  
  ENTRY: [Entry Price]
  STOP: [Stop Loss Price]

   System Metrics:
   Confidence: [Confidence Score] 
   Win Rate: [Win Rate]
  [Include Net PnL line ONLY if positive]

   Targets:
  1 [Target 1 Price] ([ROI %])
  2 [Target 2 Price] ([ROI %])
  3 [Target 3 Price] ([ROI %])
  4 [Target 4 Price] ([ROI %])

   Plan: Move SL to Breakeven after TP1.

  #Crypto #Trading #[Ticker]
`,XI=`
  Analyze the provided images to generate a "Signal Success" social media post.
  
  **Step 1: Visual Data Extraction (Precision Required)**
  1. **Identify Tickers**: List every unique ticker (e.g., BTC, ETH, SOL).
  
  2. **Verify TP Level (Logic)**:
     - **Visual Check**: Look for horizontal lines labeled TP1, TP2, TP3, TP4.
     - **Price Action**: Compare the HIGHEST candle wick in the provided image against these lines.
       - If price crossed TP3 line -> Report "TP 3 Hit".
       - If price crossed TP1 line but not TP2 -> Report "TP 1 Hit".
     - **Text Overlays**: Trust visual text like "Target 2 Hit", "T2 ", "TP3 Smashed", or labels like "TP4 (4ATR)" near the price.

  3. **Extract Profit % (Logic)**:
     - **CRITICAL PRIORITY**: You must find the specific label/badge on the chart that says "**Long Printed**", "**Short Printed**", "**Long Printing**", or "**Short Printing**".
     - **Extraction Rule**: These labels usually contain a percentage (e.g., "+338.29%"). Extract this number EXACTLY.
     - **Conflict Resolution**: If multiple such labels appear on the same chart (e.g. one from last week and one from today), **ONLY select the one associated with the CURRENT price action** (usually the right-most one, or the one labeled "Printing"). **DO NOT SUM** them.
     - **Fallback**: Only if these specific labels are completely absent, look for other ROI/PnL indicators.

  4. **Output Metrics**:
     - Extract 'numberOfTargetsHit' as an integer (0-4).
     - Extract 'totalProfitPercentage' as a string (e.g. "+338.29%").

  **Step 2: Social Post Generation (High Variety Mode)**
  *Instruction*: You must vary your writing style. Do not use the same template repeatedly. Pick one of the following "Vibes" randomly for this response to ensure uniqueness:
  - Vibe A: "The Sniper" (Short, punchy, professional, minimal emojis).
  - Vibe B: "The Hype" (Excited, uses fire/rocket emojis, focuses on the big wins).
  - Vibe C: "The Analyst" (Focuses on the setup validation, market structure).

  **Draft the Post (Structure):**
  
  [Paragraph 1: The Hook]
  - Write a unique opening sentence based on the selected Vibe. Mention the Ticker.
  - *Forbidden*: Do not start with generic phrases like "The market is moving" or "Here is the update". Be creative.

  [Paragraph 2: The Scoreboard (Mandatory Data)]
  - Format: "$TICKER: [TP #] Smashed  (+[Total Profit]% Profit)"
  - Example: "$SOL: TP 4 Obliterated  (+400% ROI)"
  - **MANDATORY**: If the profit label says "Printing", mention "Trade is RUNNING" or similar. If "Printed", mention "Banked".
  - Include "SL moved to Entry" or "Risk Free" if applicable.

  [Paragraph 3: The Flex]
  - A short comment on the trade execution based on the Vibe.
  - *Constraint*: Do NOT mention specific algorithm names. Keep it generic (e.g. "Clean reaction," "No drawdown," "System delivered").

  [Paragraph 4: Call to Action]
  - "Join the winning side" or "Don't miss the next setup" (Vary this wording every time).

  [Hashtags]
  #Crypto #Trading #Signals #[Ticker]
`,N_=({onImagesSelected:n,isAnalyzing:e,multiple:t=!1,variant:i="full"})=>{const[o,a]=be.useState(!1),[u,f]=be.useState(null),m=be.useCallback(k=>{f(null);const O=[];let P=Array.from(k);!t&&P.length>1&&(P=[P[0]]);let $=0;P.forEach(ee=>{if(!lm.includes(ee.type)){f("Invalid file type. Please upload PNG, JPG, or WEBP.");return}if(ee.size>am*1024*1024){f(`File size exceeds ${am}MB.`);return}const X=new FileReader;X.onload=re=>{var j;const ae=(j=re.target)==null?void 0:j.result;ae&&O.push({base64:ae,mimeType:ee.type}),$++,$===P.length&&O.length>0&&n(O)},X.onerror=()=>f("Failed to read file."),X.readAsDataURL(ee)})},[n,t]),h=k=>{k.preventDefault(),a(!0)},v=k=>{k.preventDefault(),a(!1)},T=k=>{k.preventDefault(),a(!1),!e&&k.dataTransfer.files&&k.dataTransfer.files.length>0&&m(k.dataTransfer.files)},S=k=>{k.target.files&&k.target.files.length>0&&m(k.target.files)},I=i==="compact";return A.jsxs("div",{className:`relative w-full rounded-3xl transition-all duration-300 ease-out text-center overflow-hidden group
        ${I?"p-6":"p-12 md:p-20"}
        ${e?"opacity-50 cursor-not-allowed":"cursor-pointer"}
      `,onDragOver:h,onDragLeave:v,onDrop:T,children:[A.jsx("div",{className:`absolute inset-0 transition-all duration-300
        ${o?"bg-cyan-500/10 border-2 border-cyan-400":"bg-white/50 dark:bg-slate-900/40 border border-slate-200 dark:border-white/10 hover:border-cyan-500/30"}
      `}),A.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-cyan-500/5 to-transparent -translate-x-full group-hover:animate-[shimmer_2s_infinite] pointer-events-none"}),A.jsx("input",{type:"file",accept:lm.join(","),onChange:S,disabled:e,multiple:t,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer disabled:cursor-not-allowed z-20"}),A.jsxs("div",{className:"relative z-10 flex flex-col items-center justify-center pointer-events-none",children:[!I&&A.jsx("div",{className:`p-5 rounded-2xl mb-6 transition-all duration-300 relative group-hover:scale-110
            ${o?"bg-cyan-500 text-white shadow-[0_0_30px_rgba(6,182,212,0.5)]":"bg-white dark:bg-slate-800 text-cyan-600 dark:text-cyan-400 border border-slate-200 dark:border-white/10 shadow-lg"}
          `,children:A.jsx("svg",{className:"w-12 h-12",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})})}),A.jsx("div",{children:I?A.jsxs("div",{className:"flex items-center gap-3 justify-center text-slate-500 dark:text-slate-400 group-hover:text-slate-800 dark:group-hover:text-white transition-colors",children:[A.jsx("div",{className:"w-8 h-8 rounded-full bg-white dark:bg-slate-800 flex items-center justify-center border border-slate-200 dark:border-white/10 text-cyan-500 dark:text-cyan-400",children:A.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),A.jsx("span",{className:"text-sm font-medium",children:"Add Evidence"})]}):A.jsxs(A.Fragment,{children:[A.jsx("h3",{className:"text-2xl md:text-3xl font-bold text-slate-800 dark:text-white mb-3 tracking-tight",children:t?"Upload Evidence":"Analyze Structure"}),A.jsxs("p",{className:"text-base text-slate-600 dark:text-slate-400 max-w-sm mx-auto",children:["Drop your chart here to initialize ",A.jsx("span",{className:"text-cyan-600 dark:text-cyan-400",children:"Deep Scan"})]})]})})]}),u&&A.jsx("div",{className:"absolute bottom-6 left-0 right-0 mx-auto w-max max-w-[90%] bg-rose-500/10 border border-rose-500/40 backdrop-blur-xl text-rose-600 dark:text-rose-200 px-6 py-3 rounded-xl text-sm z-20 shadow-xl",children:u})]})};var ui=(n=>(n.BULLISH="Bullish",n.BEARISH="Bearish",n.NEUTRAL="Neutral/Sideways",n))(ui||{});const vt=({children:n,variant:e="primary",isLoading:t=!1,className:i="",disabled:o,...a})=>{const u="relative inline-flex items-center justify-center px-6 py-3 text-sm font-bold tracking-wide rounded-xl transition-all duration-300 focus:outline-none disabled:opacity-50 disabled:cursor-not-allowed active:scale-[0.98]",f={primary:"bg-gradient-to-r from-indigo-600 to-cyan-600 hover:from-indigo-500 hover:to-cyan-500 text-white shadow-[0_0_20px_rgba(34,211,238,0.25)] hover:shadow-[0_0_30px_rgba(34,211,238,0.4)] border border-transparent",secondary:"bg-white dark:bg-slate-800 hover:bg-slate-50 dark:hover:bg-slate-700 text-slate-900 dark:text-white border border-slate-200 dark:border-white/10 hover:border-slate-300 dark:hover:border-white/20 shadow-lg backdrop-blur-md",outline:"bg-transparent border border-slate-300 dark:border-white/10 hover:border-cyan-500/50 text-slate-600 dark:text-slate-300 hover:text-cyan-600 dark:hover:text-white hover:bg-cyan-500/5",ghost:"bg-transparent hover:bg-slate-100 dark:hover:bg-white/5 text-slate-500 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white"};return A.jsx("button",{className:`${u} ${f[e]} ${i}`,disabled:o||t,...a,children:t?A.jsxs(A.Fragment,{children:[A.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-cyan-600 dark:text-cyan-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[A.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),A.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),A.jsx("span",{className:"animate-pulse text-cyan-700 dark:text-cyan-200",children:"Processing..."})]}):n})},ZI=({data:n,onReset:e})=>{const[t,i]=be.useState(!1),[o,a]=be.useState("");be.useEffect(()=>{const h=n.coinName.split("/")[0].toUpperCase(),v=n.trend===ui.BULLISH?"":n.trend===ui.BEARISH?"":"",T=`
 $${h} Analysis [${n.timeframe}] ${v}

${n.assessment}

 Key Levels:
 Resistance: ${n.keyLevels.resistance.slice(0,2).join(", ")}
 Support: ${n.keyLevels.support.slice(0,2).join(", ")}

#Crypto #Trading $${h}
${Ia}
    `.trim();a(T)},[n]);const u=h=>{switch(h){case ui.BULLISH:return"text-emerald-600 dark:text-emerald-400 bg-emerald-100 dark:bg-emerald-500/10 border-emerald-500/30 shadow-[0_0_20px_rgba(16,185,129,0.15)]";case ui.BEARISH:return"text-rose-600 dark:text-rose-400 bg-rose-100 dark:bg-rose-500/10 border-rose-500/30 shadow-[0_0_20px_rgba(244,63,94,0.15)]";default:return"text-amber-600 dark:text-amber-400 bg-amber-100 dark:bg-amber-500/10 border-amber-500/30"}},f=h=>h>=80?"text-emerald-600 dark:text-emerald-400":h>=50?"text-amber-600 dark:text-amber-400":"text-rose-600 dark:text-rose-400",m=async()=>{try{await navigator.clipboard.writeText(o),i(!0),setTimeout(()=>i(!1),2e3)}catch(h){console.error("Failed to copy text: ",h)}};return A.jsxs("div",{className:"space-y-8 animate-slide-up pb-12",children:[A.jsxs("div",{className:"glass-panel rounded-3xl p-8 flex flex-col md:flex-row justify-between items-start md:items-center gap-8 relative overflow-hidden",children:[A.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-indigo-500/10 dark:bg-indigo-500/20 rounded-full blur-[80px] -mr-16 -mt-16 pointer-events-none"}),A.jsxs("div",{className:"relative z-10",children:[A.jsxs("div",{className:"flex items-center gap-4 mb-3",children:[A.jsx("h2",{className:"text-4xl font-extrabold text-slate-800 dark:text-white tracking-tight font-mono",children:n.coinName}),A.jsx("span",{className:"text-xs font-bold text-cyan-600 dark:text-cyan-300 px-3 py-1 bg-cyan-100 dark:bg-cyan-900/30 rounded-lg border border-cyan-500/30 uppercase tracking-wider",children:n.timeframe})]}),A.jsxs("div",{className:"flex items-center gap-4",children:[A.jsxs("span",{className:`px-5 py-2 rounded-full text-sm font-bold border ${u(n.trend)} flex items-center gap-2 uppercase tracking-wide`,children:[n.trend===ui.BULLISH&&"",n.trend===ui.BEARISH&&"",n.trend===ui.NEUTRAL&&"",n.trend]}),A.jsx("div",{className:"h-8 w-px bg-slate-200 dark:bg-white/10 mx-2"}),A.jsxs("span",{className:"text-slate-600 dark:text-slate-400 text-sm font-medium",children:["AI Confidence: ",A.jsxs("span",{className:`font-bold text-lg ${f(n.confidence)}`,children:[n.confidence,"%"]})]})]})]}),A.jsxs("div",{className:"flex gap-4 w-full md:w-auto relative z-10",children:[A.jsx(vt,{variant:"outline",onClick:e,className:"flex-1 md:flex-none",children:"New Scan"}),A.jsx(vt,{onClick:m,className:"flex-1 md:flex-none",children:t?"Copied! ":"Copy Setup"})]})]}),A.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[A.jsxs("div",{className:"glass-panel rounded-3xl p-8 border-t-4 border-t-indigo-500",children:[A.jsxs("h3",{className:"text-sm font-bold text-indigo-500 dark:text-indigo-300 uppercase tracking-widest mb-6 flex items-center gap-2",children:[A.jsx("span",{className:"w-2 h-2 rounded-full bg-indigo-500 shadow-[0_0_10px_rgba(99,102,241,0.5)]"}),"Patterns & Levels"]}),A.jsxs("div",{className:"mb-8",children:[A.jsx("h4",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-widest mb-3",children:"Detected Structure"}),A.jsx("div",{className:"flex flex-wrap gap-2",children:n.patterns.length>0?n.patterns.map((h,v)=>A.jsx("span",{className:"text-xs bg-slate-100 dark:bg-slate-800/80 text-slate-700 dark:text-slate-200 px-3 py-1.5 rounded-lg border border-slate-200 dark:border-slate-700 font-medium",children:h},v)):A.jsx("span",{className:"text-sm text-slate-500 italic",children:"No clear patterns detected"})})]}),A.jsxs("div",{className:"space-y-6",children:[A.jsxs("div",{children:[A.jsx("div",{className:"flex justify-between items-center mb-2",children:A.jsx("span",{className:"text-[10px] font-bold text-rose-500 dark:text-rose-400 uppercase tracking-widest",children:"Resistance"})}),A.jsx("div",{className:"font-mono text-sm text-rose-600 dark:text-rose-100 bg-rose-100 dark:bg-rose-500/10 p-3 rounded-xl border border-rose-500/20",children:n.keyLevels.resistance.map((h,v)=>A.jsx("div",{className:"py-0.5",children:h},v))})]}),A.jsxs("div",{children:[A.jsx("div",{className:"flex justify-between items-center mb-2",children:A.jsx("span",{className:"text-[10px] font-bold text-emerald-500 dark:text-emerald-400 uppercase tracking-widest",children:"Support"})}),A.jsx("div",{className:"font-mono text-sm text-emerald-600 dark:text-emerald-100 bg-emerald-100 dark:bg-emerald-500/10 p-3 rounded-xl border border-emerald-500/20",children:n.keyLevels.support.map((h,v)=>A.jsx("div",{className:"py-0.5",children:h},v))})]})]})]}),A.jsxs("div",{className:"lg:col-span-2 glass-panel rounded-3xl p-8 flex flex-col",children:[A.jsxs("h3",{className:"text-sm font-bold text-cyan-600 dark:text-cyan-300 uppercase tracking-widest mb-6 flex items-center gap-2",children:[A.jsx("span",{className:"w-2 h-2 rounded-full bg-cyan-400 shadow-[0_0_10px_rgba(34,211,238,0.5)]"}),"AI Narrative"]}),A.jsx("p",{className:"text-slate-700 dark:text-slate-200 text-lg leading-relaxed font-light mb-8",children:n.assessment}),A.jsxs("div",{className:"mt-auto pt-6 border-t border-slate-200 dark:border-white/5",children:[A.jsxs("div",{className:"flex justify-between items-center mb-3",children:[A.jsx("h3",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest",children:"Social Draft"}),A.jsx("button",{onClick:m,className:"text-xs text-cyan-600 dark:text-cyan-400 hover:text-cyan-500 dark:hover:text-cyan-300 transition-colors uppercase font-bold tracking-wider",children:t?"Copied":"Copy Text"})]}),A.jsx("div",{className:"bg-slate-50 dark:bg-[#05050a] rounded-xl p-4 border border-slate-200 dark:border-white/10 shadow-inner",children:A.jsx("textarea",{value:o,onChange:h=>a(h.target.value),className:"w-full h-80 bg-transparent border-none focus:ring-0 p-0 font-mono text-sm text-slate-600 dark:text-slate-400 resize-none leading-relaxed"})})]})]})]}),A.jsx("p",{className:"text-center text-xs text-slate-500 dark:text-slate-600 mt-4 uppercase tracking-widest",children:Ia})]})},eb=Object.prototype.toString,tb=n=>eb.call(n)==="[object Error]",nb=new Set(["network error","Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed","fetch failed","terminated"," A network error occurred.","Network connection lost"]);function ib(n){if(!(n&&tb(n)&&n.name==="TypeError"&&typeof n.message=="string"))return!1;const{message:t,stack:i}=n;return t==="Load failed"?i===void 0||"__sentry_captured__"in n:t.startsWith("error sending request for url")?!0:nb.has(t)}function sb(n){if(typeof n=="number"){if(n<0)throw new TypeError("Expected `retries` to be a non-negative number.");if(Number.isNaN(n))throw new TypeError("Expected `retries` to be a valid number or Infinity, got NaN.")}else if(n!==void 0)throw new TypeError("Expected `retries` to be a number or Infinity.")}function gd(n,e,{min:t=0,allowInfinity:i=!1}={}){if(e!==void 0){if(typeof e!="number"||Number.isNaN(e))throw new TypeError(`Expected \`${n}\` to be a number${i?" or Infinity":""}.`);if(!i&&!Number.isFinite(e))throw new TypeError(`Expected \`${n}\` to be a finite number.`);if(e<t)throw new TypeError(`Expected \`${n}\` to be  ${t}.`)}}class OS extends Error{constructor(e){super(),e instanceof Error?(this.originalError=e,{message:e}=e):(this.originalError=new Error(e),this.originalError.stack=this.stack),this.name="AbortError",this.message=e}}function rb(n,e){const t=Math.max(1,n+1),i=e.randomize?Math.random()+1:1;let o=Math.round(i*e.minTimeout*e.factor**(t-1));return o=Math.min(o,e.maxTimeout),o}function M_(n,e){return Number.isFinite(e)?e-(performance.now()-n):e}async function ob({error:n,attemptNumber:e,retriesConsumed:t,startTime:i,options:o}){var I,k,O,P;const a=n instanceof Error?n:new TypeError(`Non-error was thrown: "${n}". You should only throw errors.`);if(a instanceof OS)throw a.originalError;const u=Number.isFinite(o.retries)?Math.max(0,o.retries-t):o.retries,f=o.maxRetryTime??Number.POSITIVE_INFINITY,m=Object.freeze({error:a,attemptNumber:e,retriesLeft:u,retriesConsumed:t});if(await o.onFailedAttempt(m),M_(i,f)<=0)throw a;const h=await o.shouldConsumeRetry(m),v=M_(i,f);if(v<=0||u<=0)throw a;if(a instanceof TypeError&&!ib(a)){if(h)throw a;return(I=o.signal)==null||I.throwIfAborted(),!1}if(!await o.shouldRetry(m))throw a;if(!h)return(k=o.signal)==null||k.throwIfAborted(),!1;const T=rb(t,o),S=Math.min(T,v);return(O=o.signal)==null||O.throwIfAborted(),S>0&&await new Promise(($,ee)=>{var ae,j;const X=()=>{var R;clearTimeout(re),(R=o.signal)==null||R.removeEventListener("abort",X),ee(o.signal.reason)},re=setTimeout(()=>{var R;(R=o.signal)==null||R.removeEventListener("abort",X),$()},S);o.unref&&((ae=re.unref)==null||ae.call(re)),(j=o.signal)==null||j.addEventListener("abort",X,{once:!0})}),(P=o.signal)==null||P.throwIfAborted(),!0}async function ab(n,e={}){var a,u,f;if(e={...e},sb(e.retries),Object.hasOwn(e,"forever"))throw new Error("The `forever` option is no longer supported. For many use-cases, you can set `retries: Infinity` instead.");e.retries??(e.retries=10),e.factor??(e.factor=2),e.minTimeout??(e.minTimeout=1e3),e.maxTimeout??(e.maxTimeout=Number.POSITIVE_INFINITY),e.maxRetryTime??(e.maxRetryTime=Number.POSITIVE_INFINITY),e.randomize??(e.randomize=!1),e.onFailedAttempt??(e.onFailedAttempt=()=>{}),e.shouldRetry??(e.shouldRetry=()=>!0),e.shouldConsumeRetry??(e.shouldConsumeRetry=()=>!0),gd("factor",e.factor,{min:0,allowInfinity:!1}),gd("minTimeout",e.minTimeout,{min:0,allowInfinity:!1}),gd("maxTimeout",e.maxTimeout,{min:0,allowInfinity:!0}),gd("maxRetryTime",e.maxRetryTime,{min:0,allowInfinity:!0}),e.factor>0||(e.factor=1),(a=e.signal)==null||a.throwIfAborted();let t=0,i=0;const o=performance.now();for(;!Number.isFinite(e.retries)||i<=e.retries;){t++;try{(u=e.signal)==null||u.throwIfAborted();const m=await n(t);return(f=e.signal)==null||f.throwIfAborted(),m}catch(m){await ob({error:m,attemptNumber:t,retriesConsumed:i,startTime:o,options:e})&&i++}}throw new Error("Retry attempts exhausted without throwing an error.")}var lb={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let ub,cb;function db(){return{geminiUrl:ub,vertexUrl:cb}}function fb(n,e,t,i){var o,a;if(!(n!=null&&n.baseUrl)){const u=db();return e?(o=u.vertexUrl)!==null&&o!==void 0?o:t:(a=u.geminiUrl)!==null&&a!==void 0?a:i}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Es{}function he(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(i,o)=>{if(Object.prototype.hasOwnProperty.call(e,o)){const a=e[o];return a!=null?String(a):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function p(n,e,t){for(let a=0;a<e.length-1;a++){const u=e[a];if(u.endsWith("[]")){const f=u.slice(0,-2);if(!(f in n))if(Array.isArray(t))n[f]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${u}`);if(Array.isArray(n[f])){const m=n[f];if(Array.isArray(t))for(let h=0;h<m.length;h++){const v=m[h];p(v,e.slice(a+1),t[h])}else for(const h of m)p(h,e.slice(a+1),t)}return}else if(u.endsWith("[0]")){const f=u.slice(0,-3);f in n||(n[f]=[{}]);const m=n[f];p(m[0],e.slice(a+1),t);return}(!n[u]||typeof n[u]!="object")&&(n[u]={}),n=n[u]}const i=e[e.length-1],o=n[i];if(o!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===o)return;if(typeof o=="object"&&typeof t=="object"&&o!==null&&t!==null)Object.assign(o,t);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[i]=t}function d(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let i=0;i<e.length;i++){if(typeof n!="object"||n===null)return t;const o=e[i];if(o.endsWith("[]")){const a=o.slice(0,-2);if(a in n){const u=n[a];return Array.isArray(u)?u.map(f=>d(f,e.slice(i+1),t)):t}else return t}else n=n[o]}return n}catch(i){if(i instanceof TypeError)return t;throw i}}function hb(n,e){for(const[t,i]of Object.entries(e)){const o=t.split("."),a=i.split("."),u=new Set;let f=-1;for(let m=0;m<o.length;m++)if(o[m]==="*"){f=m;break}if(f!==-1&&a.length>f)for(let m=f;m<a.length;m++){const h=a[m];h!=="*"&&!h.endsWith("[]")&&!h.endsWith("[0]")&&u.add(h)}um(n,o,a,0,u)}}function um(n,e,t,i,o){if(i>=e.length||typeof n!="object"||n===null)return;const a=e[i];if(a.endsWith("[]")){const u=a.slice(0,-2),f=n;if(u in f&&Array.isArray(f[u]))for(const m of f[u])um(m,e,t,i+1,o)}else if(a==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const u=n,f=Object.keys(u).filter(h=>!h.startsWith("_")&&!o.has(h)),m={};for(const h of f)m[h]=u[h];for(const[h,v]of Object.entries(m)){const T=[];for(const S of t.slice(i))S==="*"?T.push(h):T.push(S);p(u,T,v)}for(const h of f)delete u[h]}}else{const u=n;a in u&&um(u[a],e,t,i+1,o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Xm(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function pb(n){const e={},t=d(n,["operationName"]);t!=null&&p(e,["operationName"],t);const i=d(n,["resourceName"]);return i!=null&&p(e,["_url","resourceName"],i),e}function mb(n){const e={},t=d(n,["name"]);t!=null&&p(e,["name"],t);const i=d(n,["metadata"]);i!=null&&p(e,["metadata"],i);const o=d(n,["done"]);o!=null&&p(e,["done"],o);const a=d(n,["error"]);a!=null&&p(e,["error"],a);const u=d(n,["response","generateVideoResponse"]);return u!=null&&p(e,["response"],yb(u)),e}function gb(n){const e={},t=d(n,["name"]);t!=null&&p(e,["name"],t);const i=d(n,["metadata"]);i!=null&&p(e,["metadata"],i);const o=d(n,["done"]);o!=null&&p(e,["done"],o);const a=d(n,["error"]);a!=null&&p(e,["error"],a);const u=d(n,["response"]);return u!=null&&p(e,["response"],vb(u)),e}function yb(n){const e={},t=d(n,["generatedSamples"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(u=>_b(u))),p(e,["generatedVideos"],a)}const i=d(n,["raiMediaFilteredCount"]);i!=null&&p(e,["raiMediaFilteredCount"],i);const o=d(n,["raiMediaFilteredReasons"]);return o!=null&&p(e,["raiMediaFilteredReasons"],o),e}function vb(n){const e={},t=d(n,["videos"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(u=>Tb(u))),p(e,["generatedVideos"],a)}const i=d(n,["raiMediaFilteredCount"]);i!=null&&p(e,["raiMediaFilteredCount"],i);const o=d(n,["raiMediaFilteredReasons"]);return o!=null&&p(e,["raiMediaFilteredReasons"],o),e}function _b(n){const e={},t=d(n,["video"]);return t!=null&&p(e,["video"],xb(t)),e}function Tb(n){const e={},t=d(n,["_self"]);return t!=null&&p(e,["video"],Ib(t)),e}function Eb(n){const e={},t=d(n,["operationName"]);return t!=null&&p(e,["_url","operationName"],t),e}function Sb(n){const e={},t=d(n,["operationName"]);return t!=null&&p(e,["_url","operationName"],t),e}function Ab(n){const e={},t=d(n,["name"]);t!=null&&p(e,["name"],t);const i=d(n,["metadata"]);i!=null&&p(e,["metadata"],i);const o=d(n,["done"]);o!=null&&p(e,["done"],o);const a=d(n,["error"]);a!=null&&p(e,["error"],a);const u=d(n,["response"]);return u!=null&&p(e,["response"],wb(u)),e}function wb(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["parent"]);i!=null&&p(e,["parent"],i);const o=d(n,["documentName"]);return o!=null&&p(e,["documentName"],o),e}function FS(n){const e={},t=d(n,["name"]);t!=null&&p(e,["name"],t);const i=d(n,["metadata"]);i!=null&&p(e,["metadata"],i);const o=d(n,["done"]);o!=null&&p(e,["done"],o);const a=d(n,["error"]);a!=null&&p(e,["error"],a);const u=d(n,["response"]);return u!=null&&p(e,["response"],Cb(u)),e}function Cb(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["parent"]);i!=null&&p(e,["parent"],i);const o=d(n,["documentName"]);return o!=null&&p(e,["documentName"],o),e}function xb(n){const e={},t=d(n,["uri"]);t!=null&&p(e,["uri"],t);const i=d(n,["encodedVideo"]);i!=null&&p(e,["videoBytes"],Xm(i));const o=d(n,["encoding"]);return o!=null&&p(e,["mimeType"],o),e}function Ib(n){const e={},t=d(n,["gcsUri"]);t!=null&&p(e,["uri"],t);const i=d(n,["bytesBase64Encoded"]);i!=null&&p(e,["videoBytes"],Xm(i));const o=d(n,["mimeType"]);return o!=null&&p(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var k_;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(k_||(k_={}));var D_;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(D_||(D_={}));var P_;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(P_||(P_={}));var de;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(de||(de={}));var L_;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(L_||(L_={}));var V_;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(V_||(V_={}));var U_;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(U_||(U_={}));var O_;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(O_||(O_={}));var F_;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(F_||(F_={}));var G_;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(G_||(G_={}));var B_;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(B_||(B_={}));var H_;(function(n){n.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH",n.MINIMAL="MINIMAL"})(H_||(H_={}));var q_;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(q_||(q_={}));var z_;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(z_||(z_={}));var Y_;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(Y_||(Y_={}));var J_;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE",n.IMAGE_RECITATION="IMAGE_RECITATION",n.IMAGE_OTHER="IMAGE_OTHER"})(J_||(J_={}));var K_;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(K_||(K_={}));var $_;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})($_||($_={}));var j_;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(j_||(j_={}));var Q_;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(Q_||(Q_={}));var W_;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(W_||(W_={}));var Bd;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(Bd||(Bd={}));var X_;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(X_||(X_={}));var Z_;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Z_||(Z_={}));var eT;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(eT||(eT={}));var cm;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(cm||(cm={}));var tT;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(tT||(tT={}));var nT;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",n.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(nT||(nT={}));var dm;(function(n){n.COLLECTION="COLLECTION"})(dm||(dm={}));var iT;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(iT||(iT={}));var sT;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(sT||(sT={}));var rT;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(rT||(rT={}));var oT;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(oT||(oT={}));var aT;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(aT||(aT={}));var lT;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(lT||(lT={}));var uT;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(uT||(uT={}));var cT;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(cT||(cT={}));var dT;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(dT||(dT={}));var fT;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(fT||(fT={}));var hT;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(hT||(hT={}));var pT;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(pT||(pT={}));var mT;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(mT||(mT={}));var gT;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING",n.DISTILLATION="DISTILLATION"})(gT||(gT={}));var yT;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(yT||(yT={}));var vT;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(vT||(vT={}));var _T;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED",n.REGISTERED="REGISTERED"})(_T||(_T={}));var TT;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(TT||(TT={}));var ET;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(ET||(ET={}));var ST;(function(n){n.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",n.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",n.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(ST||(ST={}));var AT;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.ACTIVITY_START="ACTIVITY_START",n.ACTIVITY_END="ACTIVITY_END"})(AT||(AT={}));var wT;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(wT||(wT={}));var CT;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(CT||(CT={}));var xT;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(xT||(xT={}));var IT;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(IT||(IT={}));var bT;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(bT||(bT={}));var RT;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(RT||(RT={}));var va;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(va||(va={}));class fm{constructor(e){const t={};for(const i of e.headers.entries())t[i[0]]=i[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class Wl{get text(){var e,t,i,o,a,u,f,m;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let h="",v=!1;const T=[];for(const S of(m=(f=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)!==null&&m!==void 0?m:[]){for(const[I,k]of Object.entries(S))I!=="text"&&I!=="thought"&&I!=="thoughtSignature"&&(k!==null||k!==void 0)&&T.push(I);if(typeof S.text=="string"){if(typeof S.thought=="boolean"&&S.thought)continue;v=!0,h+=S.text}}return T.length>0&&console.warn(`there are non-text parts ${T} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),v?h:void 0}get data(){var e,t,i,o,a,u,f,m;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let h="";const v=[];for(const T of(m=(f=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)!==null&&m!==void 0?m:[]){for(const[S,I]of Object.entries(T))S!=="inlineData"&&(I!==null||I!==void 0)&&v.push(S);T.inlineData&&typeof T.inlineData.data=="string"&&(h+=atob(T.inlineData.data))}return v.length>0&&console.warn(`there are non-data parts ${v} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),h.length>0?btoa(h):void 0}get functionCalls(){var e,t,i,o,a,u,f,m;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const h=(m=(f=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)===null||m===void 0?void 0:m.filter(v=>v.functionCall).map(v=>v.functionCall).filter(v=>v!==void 0);if((h==null?void 0:h.length)!==0)return h}get executableCode(){var e,t,i,o,a,u,f,m,h;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const v=(m=(f=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)===null||m===void 0?void 0:m.filter(T=>T.executableCode).map(T=>T.executableCode).filter(T=>T!==void 0);if((v==null?void 0:v.length)!==0)return(h=v==null?void 0:v[0])===null||h===void 0?void 0:h.code}get codeExecutionResult(){var e,t,i,o,a,u,f,m,h;if(((o=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const v=(m=(f=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)===null||m===void 0?void 0:m.filter(T=>T.codeExecutionResult).map(T=>T.codeExecutionResult).filter(T=>T!==void 0);if((v==null?void 0:v.length)!==0)return(h=v==null?void 0:v[0])===null||h===void 0?void 0:h.output}}class NT{}class MT{}class bb{}class Rb{}class Nb{}class Mb{}class kT{}class DT{}class PT{}class kb{}class Hd{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new Hd;let o;const a=e;return t?o=gb(a):o=mb(a),Object.assign(i,o),i}}class LT{}class VT{}class UT{}class OT{}class Db{}class Pb{}class Lb{}class Zm{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new Zm,a=Ab(e);return Object.assign(i,a),i}}class Vb{}class Ub{}class Ob{}class Fb{}class FT{}class Gb{get text(){var e,t,i;let o="",a=!1;const u=[];for(const f of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[m,h]of Object.entries(f))m!=="text"&&m!=="thought"&&h!==null&&u.push(m);if(typeof f.text=="string"){if(typeof f.thought=="boolean"&&f.thought)continue;a=!0,o+=f.text}}return u.length>0&&console.warn(`there are non-text parts ${u} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?o:void 0}get data(){var e,t,i;let o="";const a=[];for(const u of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[f,m]of Object.entries(u))f!=="inlineData"&&m!==null&&a.push(f);u.inlineData&&typeof u.inlineData.data=="string"&&(o+=atob(u.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}}class Bb{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class eg{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new eg,a=FS(e);return Object.assign(i,a),i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Qe(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function GS(n,e){const t=Qe(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function BS(n){return Array.isArray(n)?n.map(e=>qd(e)):[qd(n)]}function qd(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function HS(n){const e=qd(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function qS(n){const e=qd(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function GT(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function zS(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>GT(e)):[GT(n)]}function hm(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function BT(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function HT(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function on(n){if(n==null)throw new Error("ContentUnion is required");return hm(n)?n:{role:"user",parts:zS(n)}}function tg(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const i=on(t);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(n.isVertexAI()){const t=on(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>on(t)):[on(e)]}function $n(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(BT(n)||HT(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[on(n)]}const e=[],t=[],i=hm(n[0]);for(const o of n){const a=hm(o);if(a!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)e.push(o);else{if(BT(o)||HT(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(o)}}return i||e.push({role:"user",parts:zS(t)}),e}function Hb(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(i=>i!=="null");if(t.length===1)e.type=Object.values(de).includes(t[0].toUpperCase())?t[0].toUpperCase():de.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of t)e.anyOf.push({type:Object.values(de).includes(i.toUpperCase())?i.toUpperCase():de.TYPE_UNSPECIFIED})}}function Ta(n){const e={},t=["items"],i=["anyOf"],o=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=n.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(e.nullable=!0,n=a[1]):a[1].type==="null"&&(e.nullable=!0,n=a[0])),n.type instanceof Array&&Hb(n.type,e);for(const[u,f]of Object.entries(n))if(f!=null)if(u=="type"){if(f==="null")throw new Error("type: null can not be the only possible type for the field.");if(f instanceof Array)continue;e.type=Object.values(de).includes(f.toUpperCase())?f.toUpperCase():de.TYPE_UNSPECIFIED}else if(t.includes(u))e[u]=Ta(f);else if(i.includes(u)){const m=[];for(const h of f){if(h.type=="null"){e.nullable=!0;continue}m.push(Ta(h))}e[u]=m}else if(o.includes(u)){const m={};for(const[h,v]of Object.entries(f))m[h]=Ta(v);e[u]=m}else{if(u==="additionalProperties")continue;e[u]=f}return e}function ng(n){return Ta(n)}function ig(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function sg(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function Pa(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Ta(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Ta(e.response));return n}function La(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function qb(n,e,t,i=1){const o=!e.startsWith(`${t}/`)&&e.split("/").length===i;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:o?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:o?`${t}/${e}`:e}function Ss(n,e){if(typeof e!="string")throw new Error("name must be a string");return qb(n,e,"cachedContents")}function YS(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function Er(n){return Xm(n)}function zb(n){return n!=null&&typeof n=="object"&&"name"in n}function Yb(n){return n!=null&&typeof n=="object"&&"video"in n}function Jb(n){return n!=null&&typeof n=="object"&&"uri"in n}function JS(n){var e;let t;if(zb(n)&&(t=n.name),!(Jb(n)&&(t=n.uri,t===void 0))&&!(Yb(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const o=t.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${t}`);t=o[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function KS(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function $S(n){for(const e of["models","tunedModels","publisherModels"])if(Kb(n,e))return n[e];return[]}function Kb(n,e){return n!==null&&typeof n=="object"&&e in n}function $b(n,e={}){const t=n,i={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(i.responseJsonSchema=t.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function jb(n,e={}){const t=[],i=new Set;for(const o of n){const a=o.name;if(i.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);i.add(a);const u=$b(o,e);u.functionDeclarations&&t.push(...u.functionDeclarations)}return{functionDeclarations:t}}function jS(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const i=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,o=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(o>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||o!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function Qb(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function QS(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const o=t.inlinedResponses;if(!Array.isArray(o)||o.length===0)return n;let a=!1;for(const u of o){if(typeof u!="object"||u===null)continue;const m=u.response;if(typeof m!="object"||m===null)continue;if(m.embedding!==void 0){a=!0;break}}return a&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function Va(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function WS(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Wb(n){const e={},t=d(n,["responsesFile"]);t!=null&&p(e,["fileName"],t);const i=d(n,["inlinedResponses","inlinedResponses"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>MR(u))),p(e,["inlinedResponses"],a)}const o=d(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),p(e,["inlinedEmbedContentResponses"],a)}return e}function Xb(n){const e={},t=d(n,["predictionsFormat"]);t!=null&&p(e,["format"],t);const i=d(n,["gcsDestination","outputUriPrefix"]);i!=null&&p(e,["gcsUri"],i);const o=d(n,["bigqueryDestination","outputUri"]);return o!=null&&p(e,["bigqueryUri"],o),e}function Zb(n){const e={},t=d(n,["format"]);t!=null&&p(e,["predictionsFormat"],t);const i=d(n,["gcsUri"]);i!=null&&p(e,["gcsDestination","outputUriPrefix"],i);const o=d(n,["bigqueryUri"]);if(o!=null&&p(e,["bigqueryDestination","outputUri"],o),d(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(d(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(d(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Rd(n){const e={},t=d(n,["name"]);t!=null&&p(e,["name"],t);const i=d(n,["metadata","displayName"]);i!=null&&p(e,["displayName"],i);const o=d(n,["metadata","state"]);o!=null&&p(e,["state"],WS(o));const a=d(n,["metadata","createTime"]);a!=null&&p(e,["createTime"],a);const u=d(n,["metadata","endTime"]);u!=null&&p(e,["endTime"],u);const f=d(n,["metadata","updateTime"]);f!=null&&p(e,["updateTime"],f);const m=d(n,["metadata","model"]);m!=null&&p(e,["model"],m);const h=d(n,["metadata","output"]);return h!=null&&p(e,["dest"],Wb(QS(h))),e}function pm(n){const e={},t=d(n,["name"]);t!=null&&p(e,["name"],t);const i=d(n,["displayName"]);i!=null&&p(e,["displayName"],i);const o=d(n,["state"]);o!=null&&p(e,["state"],WS(o));const a=d(n,["error"]);a!=null&&p(e,["error"],a);const u=d(n,["createTime"]);u!=null&&p(e,["createTime"],u);const f=d(n,["startTime"]);f!=null&&p(e,["startTime"],f);const m=d(n,["endTime"]);m!=null&&p(e,["endTime"],m);const h=d(n,["updateTime"]);h!=null&&p(e,["updateTime"],h);const v=d(n,["model"]);v!=null&&p(e,["model"],v);const T=d(n,["inputConfig"]);T!=null&&p(e,["src"],eR(T));const S=d(n,["outputConfig"]);S!=null&&p(e,["dest"],Xb(QS(S)));const I=d(n,["completionStats"]);return I!=null&&p(e,["completionStats"],I),e}function eR(n){const e={},t=d(n,["instancesFormat"]);t!=null&&p(e,["format"],t);const i=d(n,["gcsSource","uris"]);i!=null&&p(e,["gcsUri"],i);const o=d(n,["bigquerySource","inputUri"]);return o!=null&&p(e,["bigqueryUri"],o),e}function tR(n,e){const t={};if(d(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(d(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(d(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=d(e,["fileName"]);i!=null&&p(t,["fileName"],i);const o=d(e,["inlinedRequests"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>NR(n,u))),p(t,["requests","requests"],a)}return t}function nR(n){const e={},t=d(n,["format"]);t!=null&&p(e,["instancesFormat"],t);const i=d(n,["gcsUri"]);i!=null&&p(e,["gcsSource","uris"],i);const o=d(n,["bigqueryUri"]);if(o!=null&&p(e,["bigquerySource","inputUri"],o),d(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(d(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function iR(n){const e={},t=d(n,["data"]);if(t!=null&&p(e,["data"],t),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function sR(n,e){const t={},i=d(e,["name"]);return i!=null&&p(t,["_url","name"],Va(n,i)),t}function rR(n,e){const t={},i=d(e,["name"]);return i!=null&&p(t,["_url","name"],Va(n,i)),t}function oR(n){const e={},t=d(n,["content"]);t!=null&&p(e,["content"],t);const i=d(n,["citationMetadata"]);i!=null&&p(e,["citationMetadata"],aR(i));const o=d(n,["tokenCount"]);o!=null&&p(e,["tokenCount"],o);const a=d(n,["finishReason"]);a!=null&&p(e,["finishReason"],a);const u=d(n,["avgLogprobs"]);u!=null&&p(e,["avgLogprobs"],u);const f=d(n,["groundingMetadata"]);f!=null&&p(e,["groundingMetadata"],f);const m=d(n,["index"]);m!=null&&p(e,["index"],m);const h=d(n,["logprobsResult"]);h!=null&&p(e,["logprobsResult"],h);const v=d(n,["safetyRatings"]);if(v!=null){let S=v;Array.isArray(S)&&(S=S.map(I=>I)),p(e,["safetyRatings"],S)}const T=d(n,["urlContextMetadata"]);return T!=null&&p(e,["urlContextMetadata"],T),e}function aR(n){const e={},t=d(n,["citationSources"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>o)),p(e,["citations"],i)}return e}function XS(n){const e={},t=d(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>OR(a))),p(e,["parts"],o)}const i=d(n,["role"]);return i!=null&&p(e,["role"],i),e}function lR(n,e){const t={},i=d(n,["displayName"]);if(e!==void 0&&i!=null&&p(e,["batch","displayName"],i),d(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function uR(n,e){const t={},i=d(n,["displayName"]);e!==void 0&&i!=null&&p(e,["displayName"],i);const o=d(n,["dest"]);return e!==void 0&&o!=null&&p(e,["outputConfig"],Zb(Qb(o))),t}function qT(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["_url","model"],Qe(n,i));const o=d(e,["src"]);o!=null&&p(t,["batch","inputConfig"],tR(n,jS(n,o)));const a=d(e,["config"]);return a!=null&&lR(a,t),t}function cR(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["model"],Qe(n,i));const o=d(e,["src"]);o!=null&&p(t,["inputConfig"],nR(jS(n,o)));const a=d(e,["config"]);return a!=null&&uR(a,t),t}function dR(n,e){const t={},i=d(n,["displayName"]);return e!==void 0&&i!=null&&p(e,["batch","displayName"],i),t}function fR(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["_url","model"],Qe(n,i));const o=d(e,["src"]);o!=null&&p(t,["batch","inputConfig"],_R(n,o));const a=d(e,["config"]);return a!=null&&dR(a,t),t}function hR(n,e){const t={},i=d(e,["name"]);return i!=null&&p(t,["_url","name"],Va(n,i)),t}function pR(n,e){const t={},i=d(e,["name"]);return i!=null&&p(t,["_url","name"],Va(n,i)),t}function mR(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["name"]);i!=null&&p(e,["name"],i);const o=d(n,["done"]);o!=null&&p(e,["done"],o);const a=d(n,["error"]);return a!=null&&p(e,["error"],a),e}function gR(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["name"]);i!=null&&p(e,["name"],i);const o=d(n,["done"]);o!=null&&p(e,["done"],o);const a=d(n,["error"]);return a!=null&&p(e,["error"],a),e}function yR(n,e){const t={},i=d(e,["contents"]);if(i!=null){let a=tg(n,i);Array.isArray(a)&&(a=a.map(u=>u)),p(t,["requests[]","request","content"],a)}const o=d(e,["config"]);return o!=null&&(p(t,["_self"],vR(o,t)),hb(t,{"requests[].*":"requests[].request.*"})),t}function vR(n,e){const t={},i=d(n,["taskType"]);e!==void 0&&i!=null&&p(e,["requests[]","taskType"],i);const o=d(n,["title"]);e!==void 0&&o!=null&&p(e,["requests[]","title"],o);const a=d(n,["outputDimensionality"]);if(e!==void 0&&a!=null&&p(e,["requests[]","outputDimensionality"],a),d(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(d(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function _R(n,e){const t={},i=d(e,["fileName"]);i!=null&&p(t,["file_name"],i);const o=d(e,["inlinedRequests"]);return o!=null&&p(t,["requests"],yR(n,o)),t}function TR(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["fileUri"]);t!=null&&p(e,["fileUri"],t);const i=d(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function ER(n){const e={},t=d(n,["id"]);t!=null&&p(e,["id"],t);const i=d(n,["args"]);i!=null&&p(e,["args"],i);const o=d(n,["name"]);if(o!=null&&p(e,["name"],o),d(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function SR(n){const e={},t=d(n,["allowedFunctionNames"]);t!=null&&p(e,["allowedFunctionNames"],t);const i=d(n,["mode"]);if(i!=null&&p(e,["mode"],i),d(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function AR(n,e,t){const i={},o=d(e,["systemInstruction"]);t!==void 0&&o!=null&&p(t,["systemInstruction"],XS(on(o)));const a=d(e,["temperature"]);a!=null&&p(i,["temperature"],a);const u=d(e,["topP"]);u!=null&&p(i,["topP"],u);const f=d(e,["topK"]);f!=null&&p(i,["topK"],f);const m=d(e,["candidateCount"]);m!=null&&p(i,["candidateCount"],m);const h=d(e,["maxOutputTokens"]);h!=null&&p(i,["maxOutputTokens"],h);const v=d(e,["stopSequences"]);v!=null&&p(i,["stopSequences"],v);const T=d(e,["responseLogprobs"]);T!=null&&p(i,["responseLogprobs"],T);const S=d(e,["logprobs"]);S!=null&&p(i,["logprobs"],S);const I=d(e,["presencePenalty"]);I!=null&&p(i,["presencePenalty"],I);const k=d(e,["frequencyPenalty"]);k!=null&&p(i,["frequencyPenalty"],k);const O=d(e,["seed"]);O!=null&&p(i,["seed"],O);const P=d(e,["responseMimeType"]);P!=null&&p(i,["responseMimeType"],P);const $=d(e,["responseSchema"]);$!=null&&p(i,["responseSchema"],ng($));const ee=d(e,["responseJsonSchema"]);if(ee!=null&&p(i,["responseJsonSchema"],ee),d(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const X=d(e,["safetySettings"]);if(t!==void 0&&X!=null){let N=X;Array.isArray(N)&&(N=N.map(ge=>FR(ge))),p(t,["safetySettings"],N)}const re=d(e,["tools"]);if(t!==void 0&&re!=null){let N=La(re);Array.isArray(N)&&(N=N.map(ge=>BR(Pa(ge)))),p(t,["tools"],N)}const ae=d(e,["toolConfig"]);if(t!==void 0&&ae!=null&&p(t,["toolConfig"],GR(ae)),d(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const j=d(e,["cachedContent"]);t!==void 0&&j!=null&&p(t,["cachedContent"],Ss(n,j));const R=d(e,["responseModalities"]);R!=null&&p(i,["responseModalities"],R);const M=d(e,["mediaResolution"]);M!=null&&p(i,["mediaResolution"],M);const D=d(e,["speechConfig"]);if(D!=null&&p(i,["speechConfig"],ig(D)),d(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const U=d(e,["thinkingConfig"]);U!=null&&p(i,["thinkingConfig"],U);const L=d(e,["imageConfig"]);L!=null&&p(i,["imageConfig"],RR(L));const B=d(e,["enableEnhancedCivicAnswers"]);if(B!=null&&p(i,["enableEnhancedCivicAnswers"],B),d(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return i}function wR(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["candidates"]);if(i!=null){let m=i;Array.isArray(m)&&(m=m.map(h=>oR(h))),p(e,["candidates"],m)}const o=d(n,["modelVersion"]);o!=null&&p(e,["modelVersion"],o);const a=d(n,["promptFeedback"]);a!=null&&p(e,["promptFeedback"],a);const u=d(n,["responseId"]);u!=null&&p(e,["responseId"],u);const f=d(n,["usageMetadata"]);return f!=null&&p(e,["usageMetadata"],f),e}function CR(n,e){const t={},i=d(e,["name"]);return i!=null&&p(t,["_url","name"],Va(n,i)),t}function xR(n,e){const t={},i=d(e,["name"]);return i!=null&&p(t,["_url","name"],Va(n,i)),t}function IR(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=d(n,["enableWidget"]);return t!=null&&p(e,["enableWidget"],t),e}function bR(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=d(n,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],t),e}function RR(n){const e={},t=d(n,["aspectRatio"]);t!=null&&p(e,["aspectRatio"],t);const i=d(n,["imageSize"]);if(i!=null&&p(e,["imageSize"],i),d(n,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(d(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(d(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function NR(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["request","model"],Qe(n,i));const o=d(e,["contents"]);if(o!=null){let f=$n(o);Array.isArray(f)&&(f=f.map(m=>XS(m))),p(t,["request","contents"],f)}const a=d(e,["metadata"]);a!=null&&p(t,["metadata"],a);const u=d(e,["config"]);return u!=null&&p(t,["request","generationConfig"],AR(n,u,d(t,["request"],{}))),t}function MR(n){const e={},t=d(n,["response"]);t!=null&&p(e,["response"],wR(t));const i=d(n,["metadata"]);i!=null&&p(e,["metadata"],i);const o=d(n,["error"]);return o!=null&&p(e,["error"],o),e}function kR(n,e){const t={},i=d(n,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const o=d(n,["pageToken"]);if(e!==void 0&&o!=null&&p(e,["_query","pageToken"],o),d(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function DR(n,e){const t={},i=d(n,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const o=d(n,["pageToken"]);e!==void 0&&o!=null&&p(e,["_query","pageToken"],o);const a=d(n,["filter"]);return e!==void 0&&a!=null&&p(e,["_query","filter"],a),t}function PR(n){const e={},t=d(n,["config"]);return t!=null&&kR(t,e),e}function LR(n){const e={},t=d(n,["config"]);return t!=null&&DR(t,e),e}function VR(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const o=d(n,["operations"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>Rd(u))),p(e,["batchJobs"],a)}return e}function UR(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const o=d(n,["batchPredictionJobs"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>pm(u))),p(e,["batchJobs"],a)}return e}function OR(n){const e={},t=d(n,["mediaResolution"]);t!=null&&p(e,["mediaResolution"],t);const i=d(n,["codeExecutionResult"]);i!=null&&p(e,["codeExecutionResult"],i);const o=d(n,["executableCode"]);o!=null&&p(e,["executableCode"],o);const a=d(n,["fileData"]);a!=null&&p(e,["fileData"],TR(a));const u=d(n,["functionCall"]);u!=null&&p(e,["functionCall"],ER(u));const f=d(n,["functionResponse"]);f!=null&&p(e,["functionResponse"],f);const m=d(n,["inlineData"]);m!=null&&p(e,["inlineData"],iR(m));const h=d(n,["text"]);h!=null&&p(e,["text"],h);const v=d(n,["thought"]);v!=null&&p(e,["thought"],v);const T=d(n,["thoughtSignature"]);T!=null&&p(e,["thoughtSignature"],T);const S=d(n,["videoMetadata"]);return S!=null&&p(e,["videoMetadata"],S),e}function FR(n){const e={},t=d(n,["category"]);if(t!=null&&p(e,["category"],t),d(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=d(n,["threshold"]);return i!=null&&p(e,["threshold"],i),e}function GR(n){const e={},t=d(n,["retrievalConfig"]);t!=null&&p(e,["retrievalConfig"],t);const i=d(n,["functionCallingConfig"]);return i!=null&&p(e,["functionCallingConfig"],SR(i)),e}function BR(n){const e={};if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=d(n,["computerUse"]);t!=null&&p(e,["computerUse"],t);const i=d(n,["fileSearch"]);i!=null&&p(e,["fileSearch"],i);const o=d(n,["codeExecution"]);if(o!=null&&p(e,["codeExecution"],o),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=d(n,["functionDeclarations"]);if(a!=null){let v=a;Array.isArray(v)&&(v=v.map(T=>T)),p(e,["functionDeclarations"],v)}const u=d(n,["googleMaps"]);u!=null&&p(e,["googleMaps"],IR(u));const f=d(n,["googleSearch"]);f!=null&&p(e,["googleSearch"],bR(f));const m=d(n,["googleSearchRetrieval"]);m!=null&&p(e,["googleSearchRetrieval"],m);const h=d(n,["urlContext"]);return h!=null&&p(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var gs;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(gs||(gs={}));class _o{constructor(e,t,i,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,i,o)}init(e,t,i){var o,a;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let u={config:{}};!i||Object.keys(i).length===0?u={config:{}}:typeof i=="object"?u=Object.assign({},i):u=i,u.config&&(u.config.pageToken=t.nextPageToken),this.paramsInternal=u,this.pageInternalSize=(a=(o=u.config)===null||o===void 0?void 0:o.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class HR extends Es{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new _o(gs.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(t),t),this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)}}createInlinedGenerateContentRequest(e){const t=qT(this.apiClient,e),i=t._url,o=he("{model}:batchGenerateContent",i),f=t.batch.inputConfig.requests,m=f.requests,h=[];for(const v of m){const T=Object.assign({},v);if(T.systemInstruction){const S=T.systemInstruction;delete T.systemInstruction;const I=T.request;I.systemInstruction=S,T.request=I}h.push(T)}return f.requests=h,delete t.config,delete t._url,delete t._query,{path:o,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const i=t?Object.assign({},t):{},o=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${o}`),i.dest===void 0){const a=this.getGcsUri(e),u=this.getBigqueryUri(e);if(a)a.endsWith(".jsonl")?i.dest=`${a.slice(0,-6)}/dest`:i.dest=`${a}_dest_${o}`;else if(u)i.dest=`${u}_dest_${o}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var t,i,o,a;let u,f="",m={};if(this.apiClient.isVertexAI()){const h=cR(this.apiClient,e);return f=he("batchPredictionJobs",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>pm(v))}else{const h=qT(this.apiClient,e);return f=he("{model}:batchGenerateContent",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>Rd(v))}}async createEmbeddingsInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=fR(this.apiClient,e);return a=he("{model}:asyncBatchEmbedContent",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>Rd(m))}}async get(e){var t,i,o,a;let u,f="",m={};if(this.apiClient.isVertexAI()){const h=xR(this.apiClient,e);return f=he("batchPredictionJobs/{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>pm(v))}else{const h=CR(this.apiClient,e);return f=he("batches/{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>Rd(v))}}async cancel(e){var t,i,o,a;let u="",f={};if(this.apiClient.isVertexAI()){const m=rR(this.apiClient,e);u=he("batchPredictionJobs/{name}:cancel",m._url),f=m._query,delete m._url,delete m._query,await this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const m=sR(this.apiClient,e);u=he("batches/{name}:cancel",m._url),f=m._query,delete m._url,delete m._query,await this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(e){var t,i,o,a;let u,f="",m={};if(this.apiClient.isVertexAI()){const h=LR(e);return f=he("batchPredictionJobs",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=UR(v),S=new FT;return Object.assign(S,T),S})}else{const h=PR(e);return f=he("batches",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=VR(v),S=new FT;return Object.assign(S,T),S})}}async delete(e){var t,i,o,a;let u,f="",m={};if(this.apiClient.isVertexAI()){const h=pR(this.apiClient,e);return f=he("batchPredictionJobs/{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>gR(v))}else{const h=hR(this.apiClient,e);return f=he("batches/{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>mR(v))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function qR(n){const e={},t=d(n,["data"]);if(t!=null&&p(e,["data"],t),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function zT(n){const e={},t=d(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>fN(a))),p(e,["parts"],o)}const i=d(n,["role"]);return i!=null&&p(e,["role"],i),e}function zR(n,e){const t={},i=d(n,["ttl"]);e!==void 0&&i!=null&&p(e,["ttl"],i);const o=d(n,["expireTime"]);e!==void 0&&o!=null&&p(e,["expireTime"],o);const a=d(n,["displayName"]);e!==void 0&&a!=null&&p(e,["displayName"],a);const u=d(n,["contents"]);if(e!==void 0&&u!=null){let v=$n(u);Array.isArray(v)&&(v=v.map(T=>zT(T))),p(e,["contents"],v)}const f=d(n,["systemInstruction"]);e!==void 0&&f!=null&&p(e,["systemInstruction"],zT(on(f)));const m=d(n,["tools"]);if(e!==void 0&&m!=null){let v=m;Array.isArray(v)&&(v=v.map(T=>pN(T))),p(e,["tools"],v)}const h=d(n,["toolConfig"]);if(e!==void 0&&h!=null&&p(e,["toolConfig"],hN(h)),d(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function YR(n,e){const t={},i=d(n,["ttl"]);e!==void 0&&i!=null&&p(e,["ttl"],i);const o=d(n,["expireTime"]);e!==void 0&&o!=null&&p(e,["expireTime"],o);const a=d(n,["displayName"]);e!==void 0&&a!=null&&p(e,["displayName"],a);const u=d(n,["contents"]);if(e!==void 0&&u!=null){let T=$n(u);Array.isArray(T)&&(T=T.map(S=>S)),p(e,["contents"],T)}const f=d(n,["systemInstruction"]);e!==void 0&&f!=null&&p(e,["systemInstruction"],on(f));const m=d(n,["tools"]);if(e!==void 0&&m!=null){let T=m;Array.isArray(T)&&(T=T.map(S=>mN(S))),p(e,["tools"],T)}const h=d(n,["toolConfig"]);e!==void 0&&h!=null&&p(e,["toolConfig"],h);const v=d(n,["kmsKeyName"]);return e!==void 0&&v!=null&&p(e,["encryption_spec","kmsKeyName"],v),t}function JR(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["model"],GS(n,i));const o=d(e,["config"]);return o!=null&&zR(o,t),t}function KR(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["model"],GS(n,i));const o=d(e,["config"]);return o!=null&&YR(o,t),t}function $R(n,e){const t={},i=d(e,["name"]);return i!=null&&p(t,["_url","name"],Ss(n,i)),t}function jR(n,e){const t={},i=d(e,["name"]);return i!=null&&p(t,["_url","name"],Ss(n,i)),t}function QR(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function WR(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function XR(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["fileUri"]);t!=null&&p(e,["fileUri"],t);const i=d(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function ZR(n){const e={},t=d(n,["id"]);t!=null&&p(e,["id"],t);const i=d(n,["args"]);i!=null&&p(e,["args"],i);const o=d(n,["name"]);if(o!=null&&p(e,["name"],o),d(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function eN(n){const e={},t=d(n,["allowedFunctionNames"]);t!=null&&p(e,["allowedFunctionNames"],t);const i=d(n,["mode"]);if(i!=null&&p(e,["mode"],i),d(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function tN(n){const e={},t=d(n,["description"]);t!=null&&p(e,["description"],t);const i=d(n,["name"]);i!=null&&p(e,["name"],i);const o=d(n,["parameters"]);o!=null&&p(e,["parameters"],o);const a=d(n,["parametersJsonSchema"]);a!=null&&p(e,["parametersJsonSchema"],a);const u=d(n,["response"]);u!=null&&p(e,["response"],u);const f=d(n,["responseJsonSchema"]);if(f!=null&&p(e,["responseJsonSchema"],f),d(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function nN(n,e){const t={},i=d(e,["name"]);return i!=null&&p(t,["_url","name"],Ss(n,i)),t}function iN(n,e){const t={},i=d(e,["name"]);return i!=null&&p(t,["_url","name"],Ss(n,i)),t}function sN(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=d(n,["enableWidget"]);return t!=null&&p(e,["enableWidget"],t),e}function rN(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=d(n,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],t),e}function oN(n,e){const t={},i=d(n,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const o=d(n,["pageToken"]);return e!==void 0&&o!=null&&p(e,["_query","pageToken"],o),t}function aN(n,e){const t={},i=d(n,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const o=d(n,["pageToken"]);return e!==void 0&&o!=null&&p(e,["_query","pageToken"],o),t}function lN(n){const e={},t=d(n,["config"]);return t!=null&&oN(t,e),e}function uN(n){const e={},t=d(n,["config"]);return t!=null&&aN(t,e),e}function cN(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const o=d(n,["cachedContents"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),p(e,["cachedContents"],a)}return e}function dN(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const o=d(n,["cachedContents"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),p(e,["cachedContents"],a)}return e}function fN(n){const e={},t=d(n,["mediaResolution"]);t!=null&&p(e,["mediaResolution"],t);const i=d(n,["codeExecutionResult"]);i!=null&&p(e,["codeExecutionResult"],i);const o=d(n,["executableCode"]);o!=null&&p(e,["executableCode"],o);const a=d(n,["fileData"]);a!=null&&p(e,["fileData"],XR(a));const u=d(n,["functionCall"]);u!=null&&p(e,["functionCall"],ZR(u));const f=d(n,["functionResponse"]);f!=null&&p(e,["functionResponse"],f);const m=d(n,["inlineData"]);m!=null&&p(e,["inlineData"],qR(m));const h=d(n,["text"]);h!=null&&p(e,["text"],h);const v=d(n,["thought"]);v!=null&&p(e,["thought"],v);const T=d(n,["thoughtSignature"]);T!=null&&p(e,["thoughtSignature"],T);const S=d(n,["videoMetadata"]);return S!=null&&p(e,["videoMetadata"],S),e}function hN(n){const e={},t=d(n,["retrievalConfig"]);t!=null&&p(e,["retrievalConfig"],t);const i=d(n,["functionCallingConfig"]);return i!=null&&p(e,["functionCallingConfig"],eN(i)),e}function pN(n){const e={};if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=d(n,["computerUse"]);t!=null&&p(e,["computerUse"],t);const i=d(n,["fileSearch"]);i!=null&&p(e,["fileSearch"],i);const o=d(n,["codeExecution"]);if(o!=null&&p(e,["codeExecution"],o),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=d(n,["functionDeclarations"]);if(a!=null){let v=a;Array.isArray(v)&&(v=v.map(T=>T)),p(e,["functionDeclarations"],v)}const u=d(n,["googleMaps"]);u!=null&&p(e,["googleMaps"],sN(u));const f=d(n,["googleSearch"]);f!=null&&p(e,["googleSearch"],rN(f));const m=d(n,["googleSearchRetrieval"]);m!=null&&p(e,["googleSearchRetrieval"],m);const h=d(n,["urlContext"]);return h!=null&&p(e,["urlContext"],h),e}function mN(n){const e={},t=d(n,["retrieval"]);t!=null&&p(e,["retrieval"],t);const i=d(n,["computerUse"]);if(i!=null&&p(e,["computerUse"],i),d(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const o=d(n,["codeExecution"]);o!=null&&p(e,["codeExecution"],o);const a=d(n,["enterpriseWebSearch"]);a!=null&&p(e,["enterpriseWebSearch"],a);const u=d(n,["functionDeclarations"]);if(u!=null){let T=u;Array.isArray(T)&&(T=T.map(S=>tN(S))),p(e,["functionDeclarations"],T)}const f=d(n,["googleMaps"]);f!=null&&p(e,["googleMaps"],f);const m=d(n,["googleSearch"]);m!=null&&p(e,["googleSearch"],m);const h=d(n,["googleSearchRetrieval"]);h!=null&&p(e,["googleSearchRetrieval"],h);const v=d(n,["urlContext"]);return v!=null&&p(e,["urlContext"],v),e}function gN(n,e){const t={},i=d(n,["ttl"]);e!==void 0&&i!=null&&p(e,["ttl"],i);const o=d(n,["expireTime"]);return e!==void 0&&o!=null&&p(e,["expireTime"],o),t}function yN(n,e){const t={},i=d(n,["ttl"]);e!==void 0&&i!=null&&p(e,["ttl"],i);const o=d(n,["expireTime"]);return e!==void 0&&o!=null&&p(e,["expireTime"],o),t}function vN(n,e){const t={},i=d(e,["name"]);i!=null&&p(t,["_url","name"],Ss(n,i));const o=d(e,["config"]);return o!=null&&gN(o,t),t}function _N(n,e){const t={},i=d(e,["name"]);i!=null&&p(t,["_url","name"],Ss(n,i));const o=d(e,["config"]);return o!=null&&yN(o,t),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class TN extends Es{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new _o(gs.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(t),t)}async create(e){var t,i,o,a;let u,f="",m={};if(this.apiClient.isVertexAI()){const h=KR(this.apiClient,e);return f=he("cachedContents",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>v)}else{const h=JR(this.apiClient,e);return f=he("cachedContents",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>v)}}async get(e){var t,i,o,a;let u,f="",m={};if(this.apiClient.isVertexAI()){const h=iN(this.apiClient,e);return f=he("{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>v)}else{const h=nN(this.apiClient,e);return f=he("{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>v)}}async delete(e){var t,i,o,a;let u,f="",m={};if(this.apiClient.isVertexAI()){const h=jR(this.apiClient,e);return f=he("{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=WR(v),S=new UT;return Object.assign(S,T),S})}else{const h=$R(this.apiClient,e);return f=he("{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=QR(v),S=new UT;return Object.assign(S,T),S})}}async update(e){var t,i,o,a;let u,f="",m={};if(this.apiClient.isVertexAI()){const h=_N(this.apiClient,e);return f=he("{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>v)}else{const h=vN(this.apiClient,e);return f=he("{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>v)}}async listInternal(e){var t,i,o,a;let u,f="",m={};if(this.apiClient.isVertexAI()){const h=uN(e);return f=he("cachedContents",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=dN(v),S=new OT;return Object.assign(S,T),S})}else{const h=lN(e);return f=he("cachedContents",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=cN(v),S=new OT;return Object.assign(S,T),S})}}}function zd(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t}function YT(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ie(n){return this instanceof Ie?(this.v=n,this):new Ie(n)}function di(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),o,a=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),f("next"),f("throw"),f("return",u),o[Symbol.asyncIterator]=function(){return this},o;function u(I){return function(k){return Promise.resolve(k).then(I,T)}}function f(I,k){i[I]&&(o[I]=function(O){return new Promise(function(P,$){a.push([I,O,P,$])>1||m(I,O)})},k&&(o[I]=k(o[I])))}function m(I,k){try{h(i[I](k))}catch(O){S(a[0][3],O)}}function h(I){I.value instanceof Ie?Promise.resolve(I.value.v).then(v,T):S(a[0][2],I)}function v(I){m("next",I)}function T(I){m("throw",I)}function S(I,k){I(k),a.shift(),a.length&&m(a[0][0],a[0][1])}}function fi(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof YT=="function"?YT(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(a){t[a]=n[a]&&function(u){return new Promise(function(f,m){u=n[a](u),o(f,m,u.done,u.value)})}}function o(a,u,f,m){Promise.resolve(m).then(function(h){a({value:h,done:f})},u)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function EN(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:ZS(t)}function ZS(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function SN(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function JT(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let i=0;for(;i<t;)if(n[i].role==="user")e.push(n[i]),i++;else{const o=[];let a=!0;for(;i<t&&n[i].role==="model";)o.push(n[i]),a&&!ZS(n[i])&&(a=!1),i++;a?e.push(...o):e.pop()}return e}class AN{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new wN(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class wN{constructor(e,t,i,o={},a=[]){this.apiClient=e,this.modelsModule=t,this.model=i,this.config=o,this.history=a,this.sendPromise=Promise.resolve(),SN(a)}async sendMessage(e){var t;await this.sendPromise;const i=on(e.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var a,u,f;const m=await o,h=(u=(a=m.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content,v=m.automaticFunctionCallingHistory,T=this.getHistory(!0).length;let S=[];v!=null&&(S=(f=v.slice(T))!==null&&f!==void 0?f:[]);const I=h?[h]:[];this.recordHistory(i,I,S)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(e){var t;await this.sendPromise;const i=on(e.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});const a=await o;return this.processStreamResponse(a,i)}getHistory(e=!1){const t=e?JT(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){return di(this,arguments,function*(){var o,a,u,f,m,h;const v=[];try{for(var T=!0,S=fi(e),I;I=yield Ie(S.next()),o=I.done,!o;T=!0){f=I.value,T=!1;const k=f;if(EN(k)){const O=(h=(m=k.candidates)===null||m===void 0?void 0:m[0])===null||h===void 0?void 0:h.content;O!==void 0&&v.push(O)}yield yield Ie(k)}}catch(k){a={error:k}}finally{try{!T&&!o&&(u=S.return)&&(yield Ie(u.call(S)))}finally{if(a)throw a.error}}this.recordHistory(t,v)})}recordHistory(e,t,i){let o=[];t.length>0&&t.every(a=>a.role!==void 0)?o=t:o.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...JT(i)):this.history.push(e),this.history.push(...o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class mu extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,mu.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function CN(n){const e={},t=d(n,["file"]);return t!=null&&p(e,["file"],t),e}function xN(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function IN(n){const e={},t=d(n,["name"]);return t!=null&&p(e,["_url","file"],JS(t)),e}function bN(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function RN(n){const e={},t=d(n,["name"]);return t!=null&&p(e,["_url","file"],JS(t)),e}function NN(n){const e={},t=d(n,["uris"]);return t!=null&&p(e,["uris"],t),e}function MN(n,e){const t={},i=d(n,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const o=d(n,["pageToken"]);return e!==void 0&&o!=null&&p(e,["_query","pageToken"],o),t}function kN(n){const e={},t=d(n,["config"]);return t!=null&&MN(t,e),e}function DN(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const o=d(n,["files"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),p(e,["files"],a)}return e}function PN(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["files"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),p(e,["files"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class LN extends Es{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new _o(gs.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async registerFiles(e){throw new Error("registerFiles is only supported in Node.js environments.")}async _registerFiles(e){return this.registerFilesInternal(e)}async listInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=kN(e);return a=he("files",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:m.headers},v})),o.then(m=>{const h=DN(m),v=new Vb;return Object.assign(v,h),v})}}async createInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=CN(e);return a=he("upload/v1beta/files",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>{const h=xN(m),v=new Ub;return Object.assign(v,h),v})}}async get(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=RN(e);return a=he("files/{file}",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>m)}}async delete(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=IN(e);return a=he("files/{file}",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:m.headers},v})),o.then(m=>{const h=bN(m),v=new Ob;return Object.assign(v,h),v})}}async registerFilesInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=NN(e);return a=he("files:register",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>{const h=PN(m),v=new Fb;return Object.assign(v,h),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Nd(n){const e={},t=d(n,["data"]);if(t!=null&&p(e,["data"],t),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function VN(n){const e={},t=d(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>XN(a))),p(e,["parts"],o)}const i=d(n,["role"]);return i!=null&&p(e,["role"],i),e}function UN(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["fileUri"]);t!=null&&p(e,["fileUri"],t);const i=d(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function ON(n){const e={},t=d(n,["id"]);t!=null&&p(e,["id"],t);const i=d(n,["args"]);i!=null&&p(e,["args"],i);const o=d(n,["name"]);if(o!=null&&p(e,["name"],o),d(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function FN(n){const e={},t=d(n,["description"]);t!=null&&p(e,["description"],t);const i=d(n,["name"]);i!=null&&p(e,["name"],i);const o=d(n,["parameters"]);o!=null&&p(e,["parameters"],o);const a=d(n,["parametersJsonSchema"]);a!=null&&p(e,["parametersJsonSchema"],a);const u=d(n,["response"]);u!=null&&p(e,["response"],u);const f=d(n,["responseJsonSchema"]);if(f!=null&&p(e,["responseJsonSchema"],f),d(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function GN(n){const e={},t=d(n,["modelSelectionConfig"]);t!=null&&p(e,["modelConfig"],t);const i=d(n,["responseJsonSchema"]);i!=null&&p(e,["responseJsonSchema"],i);const o=d(n,["audioTimestamp"]);o!=null&&p(e,["audioTimestamp"],o);const a=d(n,["candidateCount"]);a!=null&&p(e,["candidateCount"],a);const u=d(n,["enableAffectiveDialog"]);u!=null&&p(e,["enableAffectiveDialog"],u);const f=d(n,["frequencyPenalty"]);f!=null&&p(e,["frequencyPenalty"],f);const m=d(n,["logprobs"]);m!=null&&p(e,["logprobs"],m);const h=d(n,["maxOutputTokens"]);h!=null&&p(e,["maxOutputTokens"],h);const v=d(n,["mediaResolution"]);v!=null&&p(e,["mediaResolution"],v);const T=d(n,["presencePenalty"]);T!=null&&p(e,["presencePenalty"],T);const S=d(n,["responseLogprobs"]);S!=null&&p(e,["responseLogprobs"],S);const I=d(n,["responseMimeType"]);I!=null&&p(e,["responseMimeType"],I);const k=d(n,["responseModalities"]);k!=null&&p(e,["responseModalities"],k);const O=d(n,["responseSchema"]);O!=null&&p(e,["responseSchema"],O);const P=d(n,["routingConfig"]);P!=null&&p(e,["routingConfig"],P);const $=d(n,["seed"]);$!=null&&p(e,["seed"],$);const ee=d(n,["speechConfig"]);ee!=null&&p(e,["speechConfig"],ee);const X=d(n,["stopSequences"]);X!=null&&p(e,["stopSequences"],X);const re=d(n,["temperature"]);re!=null&&p(e,["temperature"],re);const ae=d(n,["thinkingConfig"]);ae!=null&&p(e,["thinkingConfig"],ae);const j=d(n,["topK"]);j!=null&&p(e,["topK"],j);const R=d(n,["topP"]);if(R!=null&&p(e,["topP"],R),d(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function BN(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=d(n,["enableWidget"]);return t!=null&&p(e,["enableWidget"],t),e}function HN(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=d(n,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],t),e}function qN(n,e){const t={},i=d(n,["generationConfig"]);e!==void 0&&i!=null&&p(e,["setup","generationConfig"],i);const o=d(n,["responseModalities"]);e!==void 0&&o!=null&&p(e,["setup","generationConfig","responseModalities"],o);const a=d(n,["temperature"]);e!==void 0&&a!=null&&p(e,["setup","generationConfig","temperature"],a);const u=d(n,["topP"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","topP"],u);const f=d(n,["topK"]);e!==void 0&&f!=null&&p(e,["setup","generationConfig","topK"],f);const m=d(n,["maxOutputTokens"]);e!==void 0&&m!=null&&p(e,["setup","generationConfig","maxOutputTokens"],m);const h=d(n,["mediaResolution"]);e!==void 0&&h!=null&&p(e,["setup","generationConfig","mediaResolution"],h);const v=d(n,["seed"]);e!==void 0&&v!=null&&p(e,["setup","generationConfig","seed"],v);const T=d(n,["speechConfig"]);e!==void 0&&T!=null&&p(e,["setup","generationConfig","speechConfig"],sg(T));const S=d(n,["thinkingConfig"]);e!==void 0&&S!=null&&p(e,["setup","generationConfig","thinkingConfig"],S);const I=d(n,["enableAffectiveDialog"]);e!==void 0&&I!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],I);const k=d(n,["systemInstruction"]);e!==void 0&&k!=null&&p(e,["setup","systemInstruction"],VN(on(k)));const O=d(n,["tools"]);if(e!==void 0&&O!=null){let j=La(O);Array.isArray(j)&&(j=j.map(R=>e1(Pa(R)))),p(e,["setup","tools"],j)}const P=d(n,["sessionResumption"]);e!==void 0&&P!=null&&p(e,["setup","sessionResumption"],ZN(P));const $=d(n,["inputAudioTranscription"]);e!==void 0&&$!=null&&p(e,["setup","inputAudioTranscription"],$);const ee=d(n,["outputAudioTranscription"]);e!==void 0&&ee!=null&&p(e,["setup","outputAudioTranscription"],ee);const X=d(n,["realtimeInputConfig"]);e!==void 0&&X!=null&&p(e,["setup","realtimeInputConfig"],X);const re=d(n,["contextWindowCompression"]);e!==void 0&&re!=null&&p(e,["setup","contextWindowCompression"],re);const ae=d(n,["proactivity"]);if(e!==void 0&&ae!=null&&p(e,["setup","proactivity"],ae),d(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function zN(n,e){const t={},i=d(n,["generationConfig"]);e!==void 0&&i!=null&&p(e,["setup","generationConfig"],GN(i));const o=d(n,["responseModalities"]);e!==void 0&&o!=null&&p(e,["setup","generationConfig","responseModalities"],o);const a=d(n,["temperature"]);e!==void 0&&a!=null&&p(e,["setup","generationConfig","temperature"],a);const u=d(n,["topP"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","topP"],u);const f=d(n,["topK"]);e!==void 0&&f!=null&&p(e,["setup","generationConfig","topK"],f);const m=d(n,["maxOutputTokens"]);e!==void 0&&m!=null&&p(e,["setup","generationConfig","maxOutputTokens"],m);const h=d(n,["mediaResolution"]);e!==void 0&&h!=null&&p(e,["setup","generationConfig","mediaResolution"],h);const v=d(n,["seed"]);e!==void 0&&v!=null&&p(e,["setup","generationConfig","seed"],v);const T=d(n,["speechConfig"]);e!==void 0&&T!=null&&p(e,["setup","generationConfig","speechConfig"],sg(T));const S=d(n,["thinkingConfig"]);e!==void 0&&S!=null&&p(e,["setup","generationConfig","thinkingConfig"],S);const I=d(n,["enableAffectiveDialog"]);e!==void 0&&I!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],I);const k=d(n,["systemInstruction"]);e!==void 0&&k!=null&&p(e,["setup","systemInstruction"],on(k));const O=d(n,["tools"]);if(e!==void 0&&O!=null){let R=La(O);Array.isArray(R)&&(R=R.map(M=>t1(Pa(M)))),p(e,["setup","tools"],R)}const P=d(n,["sessionResumption"]);e!==void 0&&P!=null&&p(e,["setup","sessionResumption"],P);const $=d(n,["inputAudioTranscription"]);e!==void 0&&$!=null&&p(e,["setup","inputAudioTranscription"],$);const ee=d(n,["outputAudioTranscription"]);e!==void 0&&ee!=null&&p(e,["setup","outputAudioTranscription"],ee);const X=d(n,["realtimeInputConfig"]);e!==void 0&&X!=null&&p(e,["setup","realtimeInputConfig"],X);const re=d(n,["contextWindowCompression"]);e!==void 0&&re!=null&&p(e,["setup","contextWindowCompression"],re);const ae=d(n,["proactivity"]);e!==void 0&&ae!=null&&p(e,["setup","proactivity"],ae);const j=d(n,["explicitVadSignal"]);return e!==void 0&&j!=null&&p(e,["setup","explicitVadSignal"],j),t}function YN(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["setup","model"],Qe(n,i));const o=d(e,["config"]);return o!=null&&p(t,["config"],qN(o,t)),t}function JN(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["setup","model"],Qe(n,i));const o=d(e,["config"]);return o!=null&&p(t,["config"],zN(o,t)),t}function KN(n){const e={},t=d(n,["musicGenerationConfig"]);return t!=null&&p(e,["musicGenerationConfig"],t),e}function $N(n){const e={},t=d(n,["weightedPrompts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(o=>o)),p(e,["weightedPrompts"],i)}return e}function jN(n){const e={},t=d(n,["media"]);if(t!=null){let h=BS(t);Array.isArray(h)&&(h=h.map(v=>Nd(v))),p(e,["mediaChunks"],h)}const i=d(n,["audio"]);i!=null&&p(e,["audio"],Nd(qS(i)));const o=d(n,["audioStreamEnd"]);o!=null&&p(e,["audioStreamEnd"],o);const a=d(n,["video"]);a!=null&&p(e,["video"],Nd(HS(a)));const u=d(n,["text"]);u!=null&&p(e,["text"],u);const f=d(n,["activityStart"]);f!=null&&p(e,["activityStart"],f);const m=d(n,["activityEnd"]);return m!=null&&p(e,["activityEnd"],m),e}function QN(n){const e={},t=d(n,["media"]);if(t!=null){let h=BS(t);Array.isArray(h)&&(h=h.map(v=>v)),p(e,["mediaChunks"],h)}const i=d(n,["audio"]);i!=null&&p(e,["audio"],qS(i));const o=d(n,["audioStreamEnd"]);o!=null&&p(e,["audioStreamEnd"],o);const a=d(n,["video"]);a!=null&&p(e,["video"],HS(a));const u=d(n,["text"]);u!=null&&p(e,["text"],u);const f=d(n,["activityStart"]);f!=null&&p(e,["activityStart"],f);const m=d(n,["activityEnd"]);return m!=null&&p(e,["activityEnd"],m),e}function WN(n){const e={},t=d(n,["setupComplete"]);t!=null&&p(e,["setupComplete"],t);const i=d(n,["serverContent"]);i!=null&&p(e,["serverContent"],i);const o=d(n,["toolCall"]);o!=null&&p(e,["toolCall"],o);const a=d(n,["toolCallCancellation"]);a!=null&&p(e,["toolCallCancellation"],a);const u=d(n,["usageMetadata"]);u!=null&&p(e,["usageMetadata"],n1(u));const f=d(n,["goAway"]);f!=null&&p(e,["goAway"],f);const m=d(n,["sessionResumptionUpdate"]);m!=null&&p(e,["sessionResumptionUpdate"],m);const h=d(n,["voiceActivityDetectionSignal"]);h!=null&&p(e,["voiceActivityDetectionSignal"],h);const v=d(n,["voiceActivity"]);return v!=null&&p(e,["voiceActivity"],i1(v)),e}function XN(n){const e={},t=d(n,["mediaResolution"]);t!=null&&p(e,["mediaResolution"],t);const i=d(n,["codeExecutionResult"]);i!=null&&p(e,["codeExecutionResult"],i);const o=d(n,["executableCode"]);o!=null&&p(e,["executableCode"],o);const a=d(n,["fileData"]);a!=null&&p(e,["fileData"],UN(a));const u=d(n,["functionCall"]);u!=null&&p(e,["functionCall"],ON(u));const f=d(n,["functionResponse"]);f!=null&&p(e,["functionResponse"],f);const m=d(n,["inlineData"]);m!=null&&p(e,["inlineData"],Nd(m));const h=d(n,["text"]);h!=null&&p(e,["text"],h);const v=d(n,["thought"]);v!=null&&p(e,["thought"],v);const T=d(n,["thoughtSignature"]);T!=null&&p(e,["thoughtSignature"],T);const S=d(n,["videoMetadata"]);return S!=null&&p(e,["videoMetadata"],S),e}function ZN(n){const e={},t=d(n,["handle"]);if(t!=null&&p(e,["handle"],t),d(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function e1(n){const e={};if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=d(n,["computerUse"]);t!=null&&p(e,["computerUse"],t);const i=d(n,["fileSearch"]);i!=null&&p(e,["fileSearch"],i);const o=d(n,["codeExecution"]);if(o!=null&&p(e,["codeExecution"],o),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=d(n,["functionDeclarations"]);if(a!=null){let v=a;Array.isArray(v)&&(v=v.map(T=>T)),p(e,["functionDeclarations"],v)}const u=d(n,["googleMaps"]);u!=null&&p(e,["googleMaps"],BN(u));const f=d(n,["googleSearch"]);f!=null&&p(e,["googleSearch"],HN(f));const m=d(n,["googleSearchRetrieval"]);m!=null&&p(e,["googleSearchRetrieval"],m);const h=d(n,["urlContext"]);return h!=null&&p(e,["urlContext"],h),e}function t1(n){const e={},t=d(n,["retrieval"]);t!=null&&p(e,["retrieval"],t);const i=d(n,["computerUse"]);if(i!=null&&p(e,["computerUse"],i),d(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const o=d(n,["codeExecution"]);o!=null&&p(e,["codeExecution"],o);const a=d(n,["enterpriseWebSearch"]);a!=null&&p(e,["enterpriseWebSearch"],a);const u=d(n,["functionDeclarations"]);if(u!=null){let T=u;Array.isArray(T)&&(T=T.map(S=>FN(S))),p(e,["functionDeclarations"],T)}const f=d(n,["googleMaps"]);f!=null&&p(e,["googleMaps"],f);const m=d(n,["googleSearch"]);m!=null&&p(e,["googleSearch"],m);const h=d(n,["googleSearchRetrieval"]);h!=null&&p(e,["googleSearchRetrieval"],h);const v=d(n,["urlContext"]);return v!=null&&p(e,["urlContext"],v),e}function n1(n){const e={},t=d(n,["promptTokenCount"]);t!=null&&p(e,["promptTokenCount"],t);const i=d(n,["cachedContentTokenCount"]);i!=null&&p(e,["cachedContentTokenCount"],i);const o=d(n,["candidatesTokenCount"]);o!=null&&p(e,["responseTokenCount"],o);const a=d(n,["toolUsePromptTokenCount"]);a!=null&&p(e,["toolUsePromptTokenCount"],a);const u=d(n,["thoughtsTokenCount"]);u!=null&&p(e,["thoughtsTokenCount"],u);const f=d(n,["totalTokenCount"]);f!=null&&p(e,["totalTokenCount"],f);const m=d(n,["promptTokensDetails"]);if(m!=null){let I=m;Array.isArray(I)&&(I=I.map(k=>k)),p(e,["promptTokensDetails"],I)}const h=d(n,["cacheTokensDetails"]);if(h!=null){let I=h;Array.isArray(I)&&(I=I.map(k=>k)),p(e,["cacheTokensDetails"],I)}const v=d(n,["candidatesTokensDetails"]);if(v!=null){let I=v;Array.isArray(I)&&(I=I.map(k=>k)),p(e,["responseTokensDetails"],I)}const T=d(n,["toolUsePromptTokensDetails"]);if(T!=null){let I=T;Array.isArray(I)&&(I=I.map(k=>k)),p(e,["toolUsePromptTokensDetails"],I)}const S=d(n,["trafficType"]);return S!=null&&p(e,["trafficType"],S),e}function i1(n){const e={},t=d(n,["type"]);return t!=null&&p(e,["voiceActivityType"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function s1(n,e){const t={},i=d(n,["data"]);if(i!=null&&p(t,["data"],i),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=d(n,["mimeType"]);return o!=null&&p(t,["mimeType"],o),t}function r1(n,e){const t={},i=d(n,["content"]);i!=null&&p(t,["content"],i);const o=d(n,["citationMetadata"]);o!=null&&p(t,["citationMetadata"],o1(o));const a=d(n,["tokenCount"]);a!=null&&p(t,["tokenCount"],a);const u=d(n,["finishReason"]);u!=null&&p(t,["finishReason"],u);const f=d(n,["avgLogprobs"]);f!=null&&p(t,["avgLogprobs"],f);const m=d(n,["groundingMetadata"]);m!=null&&p(t,["groundingMetadata"],m);const h=d(n,["index"]);h!=null&&p(t,["index"],h);const v=d(n,["logprobsResult"]);v!=null&&p(t,["logprobsResult"],v);const T=d(n,["safetyRatings"]);if(T!=null){let I=T;Array.isArray(I)&&(I=I.map(k=>k)),p(t,["safetyRatings"],I)}const S=d(n,["urlContextMetadata"]);return S!=null&&p(t,["urlContextMetadata"],S),t}function o1(n,e){const t={},i=d(n,["citationSources"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),p(t,["citations"],o)}return t}function a1(n,e,t){const i={},o=d(e,["model"]);o!=null&&p(i,["_url","model"],Qe(n,o));const a=d(e,["contents"]);if(a!=null){let u=$n(a);Array.isArray(u)&&(u=u.map(f=>f)),p(i,["contents"],u)}return i}function l1(n,e){const t={},i=d(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const o=d(n,["tokensInfo"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),p(t,["tokensInfo"],a)}return t}function u1(n,e){const t={},i=d(n,["values"]);i!=null&&p(t,["values"],i);const o=d(n,["statistics"]);return o!=null&&p(t,["statistics"],c1(o)),t}function c1(n,e){const t={},i=d(n,["truncated"]);i!=null&&p(t,["truncated"],i);const o=d(n,["token_count"]);return o!=null&&p(t,["tokenCount"],o),t}function hf(n,e){const t={},i=d(n,["parts"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>_M(u))),p(t,["parts"],a)}const o=d(n,["role"]);return o!=null&&p(t,["role"],o),t}function d1(n,e){const t={},i=d(n,["controlType"]);i!=null&&p(t,["controlType"],i);const o=d(n,["enableControlImageComputation"]);return o!=null&&p(t,["computeControl"],o),t}function f1(n,e){const t={};if(d(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(d(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(d(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return t}function h1(n,e,t){const i={},o=d(n,["systemInstruction"]);e!==void 0&&o!=null&&p(e,["systemInstruction"],on(o));const a=d(n,["tools"]);if(e!==void 0&&a!=null){let f=a;Array.isArray(f)&&(f=f.map(m=>iA(m))),p(e,["tools"],f)}const u=d(n,["generationConfig"]);return e!==void 0&&u!=null&&p(e,["generationConfig"],sM(u)),i}function p1(n,e,t){const i={},o=d(e,["model"]);o!=null&&p(i,["_url","model"],Qe(n,o));const a=d(e,["contents"]);if(a!=null){let f=$n(a);Array.isArray(f)&&(f=f.map(m=>hf(m))),p(i,["contents"],f)}const u=d(e,["config"]);return u!=null&&f1(u),i}function m1(n,e,t){const i={},o=d(e,["model"]);o!=null&&p(i,["_url","model"],Qe(n,o));const a=d(e,["contents"]);if(a!=null){let f=$n(a);Array.isArray(f)&&(f=f.map(m=>m)),p(i,["contents"],f)}const u=d(e,["config"]);return u!=null&&h1(u,i),i}function g1(n,e){const t={},i=d(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const o=d(n,["totalTokens"]);o!=null&&p(t,["totalTokens"],o);const a=d(n,["cachedContentTokenCount"]);return a!=null&&p(t,["cachedContentTokenCount"],a),t}function y1(n,e){const t={},i=d(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const o=d(n,["totalTokens"]);return o!=null&&p(t,["totalTokens"],o),t}function v1(n,e,t){const i={},o=d(e,["model"]);return o!=null&&p(i,["_url","name"],Qe(n,o)),i}function _1(n,e,t){const i={},o=d(e,["model"]);return o!=null&&p(i,["_url","name"],Qe(n,o)),i}function T1(n,e){const t={},i=d(n,["sdkHttpResponse"]);return i!=null&&p(t,["sdkHttpResponse"],i),t}function E1(n,e){const t={},i=d(n,["sdkHttpResponse"]);return i!=null&&p(t,["sdkHttpResponse"],i),t}function S1(n,e,t){const i={},o=d(n,["outputGcsUri"]);e!==void 0&&o!=null&&p(e,["parameters","storageUri"],o);const a=d(n,["negativePrompt"]);e!==void 0&&a!=null&&p(e,["parameters","negativePrompt"],a);const u=d(n,["numberOfImages"]);e!==void 0&&u!=null&&p(e,["parameters","sampleCount"],u);const f=d(n,["aspectRatio"]);e!==void 0&&f!=null&&p(e,["parameters","aspectRatio"],f);const m=d(n,["guidanceScale"]);e!==void 0&&m!=null&&p(e,["parameters","guidanceScale"],m);const h=d(n,["seed"]);e!==void 0&&h!=null&&p(e,["parameters","seed"],h);const v=d(n,["safetyFilterLevel"]);e!==void 0&&v!=null&&p(e,["parameters","safetySetting"],v);const T=d(n,["personGeneration"]);e!==void 0&&T!=null&&p(e,["parameters","personGeneration"],T);const S=d(n,["includeSafetyAttributes"]);e!==void 0&&S!=null&&p(e,["parameters","includeSafetyAttributes"],S);const I=d(n,["includeRaiReason"]);e!==void 0&&I!=null&&p(e,["parameters","includeRaiReason"],I);const k=d(n,["language"]);e!==void 0&&k!=null&&p(e,["parameters","language"],k);const O=d(n,["outputMimeType"]);e!==void 0&&O!=null&&p(e,["parameters","outputOptions","mimeType"],O);const P=d(n,["outputCompressionQuality"]);e!==void 0&&P!=null&&p(e,["parameters","outputOptions","compressionQuality"],P);const $=d(n,["addWatermark"]);e!==void 0&&$!=null&&p(e,["parameters","addWatermark"],$);const ee=d(n,["labels"]);e!==void 0&&ee!=null&&p(e,["labels"],ee);const X=d(n,["editMode"]);e!==void 0&&X!=null&&p(e,["parameters","editMode"],X);const re=d(n,["baseSteps"]);return e!==void 0&&re!=null&&p(e,["parameters","editConfig","baseSteps"],re),i}function A1(n,e,t){const i={},o=d(e,["model"]);o!=null&&p(i,["_url","model"],Qe(n,o));const a=d(e,["prompt"]);a!=null&&p(i,["instances[0]","prompt"],a);const u=d(e,["referenceImages"]);if(u!=null){let m=u;Array.isArray(m)&&(m=m.map(h=>CM(h))),p(i,["instances[0]","referenceImages"],m)}const f=d(e,["config"]);return f!=null&&S1(f,i),i}function w1(n,e){const t={},i=d(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const o=d(n,["predictions"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>pf(u))),p(t,["generatedImages"],a)}return t}function C1(n,e,t){const i={},o=d(n,["taskType"]);e!==void 0&&o!=null&&p(e,["requests[]","taskType"],o);const a=d(n,["title"]);e!==void 0&&a!=null&&p(e,["requests[]","title"],a);const u=d(n,["outputDimensionality"]);if(e!==void 0&&u!=null&&p(e,["requests[]","outputDimensionality"],u),d(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(d(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return i}function x1(n,e,t){const i={},o=d(n,["taskType"]);e!==void 0&&o!=null&&p(e,["instances[]","task_type"],o);const a=d(n,["title"]);e!==void 0&&a!=null&&p(e,["instances[]","title"],a);const u=d(n,["outputDimensionality"]);e!==void 0&&u!=null&&p(e,["parameters","outputDimensionality"],u);const f=d(n,["mimeType"]);e!==void 0&&f!=null&&p(e,["instances[]","mimeType"],f);const m=d(n,["autoTruncate"]);return e!==void 0&&m!=null&&p(e,["parameters","autoTruncate"],m),i}function I1(n,e,t){const i={},o=d(e,["model"]);o!=null&&p(i,["_url","model"],Qe(n,o));const a=d(e,["contents"]);if(a!=null){let m=tg(n,a);Array.isArray(m)&&(m=m.map(h=>h)),p(i,["requests[]","content"],m)}const u=d(e,["config"]);u!=null&&C1(u,i);const f=d(e,["model"]);return f!==void 0&&p(i,["requests[]","model"],Qe(n,f)),i}function b1(n,e,t){const i={},o=d(e,["model"]);o!=null&&p(i,["_url","model"],Qe(n,o));const a=d(e,["contents"]);if(a!=null){let f=tg(n,a);Array.isArray(f)&&(f=f.map(m=>m)),p(i,["instances[]","content"],f)}const u=d(e,["config"]);return u!=null&&x1(u,i),i}function R1(n,e){const t={},i=d(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const o=d(n,["embeddings"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(f=>f)),p(t,["embeddings"],u)}const a=d(n,["metadata"]);return a!=null&&p(t,["metadata"],a),t}function N1(n,e){const t={},i=d(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const o=d(n,["predictions[]","embeddings"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(f=>u1(f))),p(t,["embeddings"],u)}const a=d(n,["metadata"]);return a!=null&&p(t,["metadata"],a),t}function M1(n,e){const t={},i=d(n,["endpoint"]);i!=null&&p(t,["name"],i);const o=d(n,["deployedModelId"]);return o!=null&&p(t,["deployedModelId"],o),t}function k1(n,e){const t={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(n,["fileUri"]);i!=null&&p(t,["fileUri"],i);const o=d(n,["mimeType"]);return o!=null&&p(t,["mimeType"],o),t}function D1(n,e){const t={},i=d(n,["id"]);i!=null&&p(t,["id"],i);const o=d(n,["args"]);o!=null&&p(t,["args"],o);const a=d(n,["name"]);if(a!=null&&p(t,["name"],a),d(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function P1(n,e){const t={},i=d(n,["allowedFunctionNames"]);i!=null&&p(t,["allowedFunctionNames"],i);const o=d(n,["mode"]);if(o!=null&&p(t,["mode"],o),d(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function L1(n,e){const t={},i=d(n,["description"]);i!=null&&p(t,["description"],i);const o=d(n,["name"]);o!=null&&p(t,["name"],o);const a=d(n,["parameters"]);a!=null&&p(t,["parameters"],a);const u=d(n,["parametersJsonSchema"]);u!=null&&p(t,["parametersJsonSchema"],u);const f=d(n,["response"]);f!=null&&p(t,["response"],f);const m=d(n,["responseJsonSchema"]);if(m!=null&&p(t,["responseJsonSchema"],m),d(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return t}function V1(n,e,t,i){const o={},a=d(e,["systemInstruction"]);t!==void 0&&a!=null&&p(t,["systemInstruction"],hf(on(a)));const u=d(e,["temperature"]);u!=null&&p(o,["temperature"],u);const f=d(e,["topP"]);f!=null&&p(o,["topP"],f);const m=d(e,["topK"]);m!=null&&p(o,["topK"],m);const h=d(e,["candidateCount"]);h!=null&&p(o,["candidateCount"],h);const v=d(e,["maxOutputTokens"]);v!=null&&p(o,["maxOutputTokens"],v);const T=d(e,["stopSequences"]);T!=null&&p(o,["stopSequences"],T);const S=d(e,["responseLogprobs"]);S!=null&&p(o,["responseLogprobs"],S);const I=d(e,["logprobs"]);I!=null&&p(o,["logprobs"],I);const k=d(e,["presencePenalty"]);k!=null&&p(o,["presencePenalty"],k);const O=d(e,["frequencyPenalty"]);O!=null&&p(o,["frequencyPenalty"],O);const P=d(e,["seed"]);P!=null&&p(o,["seed"],P);const $=d(e,["responseMimeType"]);$!=null&&p(o,["responseMimeType"],$);const ee=d(e,["responseSchema"]);ee!=null&&p(o,["responseSchema"],ng(ee));const X=d(e,["responseJsonSchema"]);if(X!=null&&p(o,["responseJsonSchema"],X),d(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const re=d(e,["safetySettings"]);if(t!==void 0&&re!=null){let ge=re;Array.isArray(ge)&&(ge=ge.map(fe=>xM(fe))),p(t,["safetySettings"],ge)}const ae=d(e,["tools"]);if(t!==void 0&&ae!=null){let ge=La(ae);Array.isArray(ge)&&(ge=ge.map(fe=>DM(Pa(fe)))),p(t,["tools"],ge)}const j=d(e,["toolConfig"]);if(t!==void 0&&j!=null&&p(t,["toolConfig"],kM(j)),d(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const R=d(e,["cachedContent"]);t!==void 0&&R!=null&&p(t,["cachedContent"],Ss(n,R));const M=d(e,["responseModalities"]);M!=null&&p(o,["responseModalities"],M);const D=d(e,["mediaResolution"]);D!=null&&p(o,["mediaResolution"],D);const U=d(e,["speechConfig"]);if(U!=null&&p(o,["speechConfig"],ig(U)),d(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const L=d(e,["thinkingConfig"]);L!=null&&p(o,["thinkingConfig"],L);const B=d(e,["imageConfig"]);B!=null&&p(o,["imageConfig"],uM(B));const N=d(e,["enableEnhancedCivicAnswers"]);if(N!=null&&p(o,["enableEnhancedCivicAnswers"],N),d(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return o}function U1(n,e,t,i){const o={},a=d(e,["systemInstruction"]);t!==void 0&&a!=null&&p(t,["systemInstruction"],on(a));const u=d(e,["temperature"]);u!=null&&p(o,["temperature"],u);const f=d(e,["topP"]);f!=null&&p(o,["topP"],f);const m=d(e,["topK"]);m!=null&&p(o,["topK"],m);const h=d(e,["candidateCount"]);h!=null&&p(o,["candidateCount"],h);const v=d(e,["maxOutputTokens"]);v!=null&&p(o,["maxOutputTokens"],v);const T=d(e,["stopSequences"]);T!=null&&p(o,["stopSequences"],T);const S=d(e,["responseLogprobs"]);S!=null&&p(o,["responseLogprobs"],S);const I=d(e,["logprobs"]);I!=null&&p(o,["logprobs"],I);const k=d(e,["presencePenalty"]);k!=null&&p(o,["presencePenalty"],k);const O=d(e,["frequencyPenalty"]);O!=null&&p(o,["frequencyPenalty"],O);const P=d(e,["seed"]);P!=null&&p(o,["seed"],P);const $=d(e,["responseMimeType"]);$!=null&&p(o,["responseMimeType"],$);const ee=d(e,["responseSchema"]);ee!=null&&p(o,["responseSchema"],ng(ee));const X=d(e,["responseJsonSchema"]);X!=null&&p(o,["responseJsonSchema"],X);const re=d(e,["routingConfig"]);re!=null&&p(o,["routingConfig"],re);const ae=d(e,["modelSelectionConfig"]);ae!=null&&p(o,["modelConfig"],ae);const j=d(e,["safetySettings"]);if(t!==void 0&&j!=null){let pe=j;Array.isArray(pe)&&(pe=pe.map(ke=>ke)),p(t,["safetySettings"],pe)}const R=d(e,["tools"]);if(t!==void 0&&R!=null){let pe=La(R);Array.isArray(pe)&&(pe=pe.map(ke=>iA(Pa(ke)))),p(t,["tools"],pe)}const M=d(e,["toolConfig"]);t!==void 0&&M!=null&&p(t,["toolConfig"],M);const D=d(e,["labels"]);t!==void 0&&D!=null&&p(t,["labels"],D);const U=d(e,["cachedContent"]);t!==void 0&&U!=null&&p(t,["cachedContent"],Ss(n,U));const L=d(e,["responseModalities"]);L!=null&&p(o,["responseModalities"],L);const B=d(e,["mediaResolution"]);B!=null&&p(o,["mediaResolution"],B);const N=d(e,["speechConfig"]);N!=null&&p(o,["speechConfig"],ig(N));const ge=d(e,["audioTimestamp"]);ge!=null&&p(o,["audioTimestamp"],ge);const fe=d(e,["thinkingConfig"]);fe!=null&&p(o,["thinkingConfig"],fe);const Y=d(e,["imageConfig"]);if(Y!=null&&p(o,["imageConfig"],cM(Y)),d(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");const ue=d(e,["modelArmorConfig"]);return t!==void 0&&ue!=null&&p(t,["modelArmorConfig"],ue),o}function KT(n,e,t){const i={},o=d(e,["model"]);o!=null&&p(i,["_url","model"],Qe(n,o));const a=d(e,["contents"]);if(a!=null){let f=$n(a);Array.isArray(f)&&(f=f.map(m=>hf(m))),p(i,["contents"],f)}const u=d(e,["config"]);return u!=null&&p(i,["generationConfig"],V1(n,u,i)),i}function $T(n,e,t){const i={},o=d(e,["model"]);o!=null&&p(i,["_url","model"],Qe(n,o));const a=d(e,["contents"]);if(a!=null){let f=$n(a);Array.isArray(f)&&(f=f.map(m=>m)),p(i,["contents"],f)}const u=d(e,["config"]);return u!=null&&p(i,["generationConfig"],U1(n,u,i)),i}function jT(n,e){const t={},i=d(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const o=d(n,["candidates"]);if(o!=null){let h=o;Array.isArray(h)&&(h=h.map(v=>r1(v))),p(t,["candidates"],h)}const a=d(n,["modelVersion"]);a!=null&&p(t,["modelVersion"],a);const u=d(n,["promptFeedback"]);u!=null&&p(t,["promptFeedback"],u);const f=d(n,["responseId"]);f!=null&&p(t,["responseId"],f);const m=d(n,["usageMetadata"]);return m!=null&&p(t,["usageMetadata"],m),t}function QT(n,e){const t={},i=d(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const o=d(n,["candidates"]);if(o!=null){let v=o;Array.isArray(v)&&(v=v.map(T=>T)),p(t,["candidates"],v)}const a=d(n,["createTime"]);a!=null&&p(t,["createTime"],a);const u=d(n,["modelVersion"]);u!=null&&p(t,["modelVersion"],u);const f=d(n,["promptFeedback"]);f!=null&&p(t,["promptFeedback"],f);const m=d(n,["responseId"]);m!=null&&p(t,["responseId"],m);const h=d(n,["usageMetadata"]);return h!=null&&p(t,["usageMetadata"],h),t}function O1(n,e,t){const i={};if(d(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const o=d(n,["numberOfImages"]);e!==void 0&&o!=null&&p(e,["parameters","sampleCount"],o);const a=d(n,["aspectRatio"]);e!==void 0&&a!=null&&p(e,["parameters","aspectRatio"],a);const u=d(n,["guidanceScale"]);if(e!==void 0&&u!=null&&p(e,["parameters","guidanceScale"],u),d(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const f=d(n,["safetyFilterLevel"]);e!==void 0&&f!=null&&p(e,["parameters","safetySetting"],f);const m=d(n,["personGeneration"]);e!==void 0&&m!=null&&p(e,["parameters","personGeneration"],m);const h=d(n,["includeSafetyAttributes"]);e!==void 0&&h!=null&&p(e,["parameters","includeSafetyAttributes"],h);const v=d(n,["includeRaiReason"]);e!==void 0&&v!=null&&p(e,["parameters","includeRaiReason"],v);const T=d(n,["language"]);e!==void 0&&T!=null&&p(e,["parameters","language"],T);const S=d(n,["outputMimeType"]);e!==void 0&&S!=null&&p(e,["parameters","outputOptions","mimeType"],S);const I=d(n,["outputCompressionQuality"]);if(e!==void 0&&I!=null&&p(e,["parameters","outputOptions","compressionQuality"],I),d(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(d(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const k=d(n,["imageSize"]);if(e!==void 0&&k!=null&&p(e,["parameters","sampleImageSize"],k),d(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return i}function F1(n,e,t){const i={},o=d(n,["outputGcsUri"]);e!==void 0&&o!=null&&p(e,["parameters","storageUri"],o);const a=d(n,["negativePrompt"]);e!==void 0&&a!=null&&p(e,["parameters","negativePrompt"],a);const u=d(n,["numberOfImages"]);e!==void 0&&u!=null&&p(e,["parameters","sampleCount"],u);const f=d(n,["aspectRatio"]);e!==void 0&&f!=null&&p(e,["parameters","aspectRatio"],f);const m=d(n,["guidanceScale"]);e!==void 0&&m!=null&&p(e,["parameters","guidanceScale"],m);const h=d(n,["seed"]);e!==void 0&&h!=null&&p(e,["parameters","seed"],h);const v=d(n,["safetyFilterLevel"]);e!==void 0&&v!=null&&p(e,["parameters","safetySetting"],v);const T=d(n,["personGeneration"]);e!==void 0&&T!=null&&p(e,["parameters","personGeneration"],T);const S=d(n,["includeSafetyAttributes"]);e!==void 0&&S!=null&&p(e,["parameters","includeSafetyAttributes"],S);const I=d(n,["includeRaiReason"]);e!==void 0&&I!=null&&p(e,["parameters","includeRaiReason"],I);const k=d(n,["language"]);e!==void 0&&k!=null&&p(e,["parameters","language"],k);const O=d(n,["outputMimeType"]);e!==void 0&&O!=null&&p(e,["parameters","outputOptions","mimeType"],O);const P=d(n,["outputCompressionQuality"]);e!==void 0&&P!=null&&p(e,["parameters","outputOptions","compressionQuality"],P);const $=d(n,["addWatermark"]);e!==void 0&&$!=null&&p(e,["parameters","addWatermark"],$);const ee=d(n,["labels"]);e!==void 0&&ee!=null&&p(e,["labels"],ee);const X=d(n,["imageSize"]);e!==void 0&&X!=null&&p(e,["parameters","sampleImageSize"],X);const re=d(n,["enhancePrompt"]);return e!==void 0&&re!=null&&p(e,["parameters","enhancePrompt"],re),i}function G1(n,e,t){const i={},o=d(e,["model"]);o!=null&&p(i,["_url","model"],Qe(n,o));const a=d(e,["prompt"]);a!=null&&p(i,["instances[0]","prompt"],a);const u=d(e,["config"]);return u!=null&&O1(u,i),i}function B1(n,e,t){const i={},o=d(e,["model"]);o!=null&&p(i,["_url","model"],Qe(n,o));const a=d(e,["prompt"]);a!=null&&p(i,["instances[0]","prompt"],a);const u=d(e,["config"]);return u!=null&&F1(u,i),i}function H1(n,e){const t={},i=d(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const o=d(n,["predictions"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(f=>eM(f))),p(t,["generatedImages"],u)}const a=d(n,["positivePromptSafetyAttributes"]);return a!=null&&p(t,["positivePromptSafetyAttributes"],tA(a)),t}function q1(n,e){const t={},i=d(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const o=d(n,["predictions"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(f=>pf(f))),p(t,["generatedImages"],u)}const a=d(n,["positivePromptSafetyAttributes"]);return a!=null&&p(t,["positivePromptSafetyAttributes"],nA(a)),t}function z1(n,e,t){const i={},o=d(n,["numberOfVideos"]);if(e!==void 0&&o!=null&&p(e,["parameters","sampleCount"],o),d(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const a=d(n,["durationSeconds"]);if(e!==void 0&&a!=null&&p(e,["parameters","durationSeconds"],a),d(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=d(n,["aspectRatio"]);e!==void 0&&u!=null&&p(e,["parameters","aspectRatio"],u);const f=d(n,["resolution"]);e!==void 0&&f!=null&&p(e,["parameters","resolution"],f);const m=d(n,["personGeneration"]);if(e!==void 0&&m!=null&&p(e,["parameters","personGeneration"],m),d(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const h=d(n,["negativePrompt"]);e!==void 0&&h!=null&&p(e,["parameters","negativePrompt"],h);const v=d(n,["enhancePrompt"]);if(e!==void 0&&v!=null&&p(e,["parameters","enhancePrompt"],v),d(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const T=d(n,["lastFrame"]);e!==void 0&&T!=null&&p(e,["instances[0]","lastFrame"],mf(T));const S=d(n,["referenceImages"]);if(e!==void 0&&S!=null){let I=S;Array.isArray(I)&&(I=I.map(k=>JM(k))),p(e,["instances[0]","referenceImages"],I)}if(d(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(d(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return i}function Y1(n,e,t){const i={},o=d(n,["numberOfVideos"]);e!==void 0&&o!=null&&p(e,["parameters","sampleCount"],o);const a=d(n,["outputGcsUri"]);e!==void 0&&a!=null&&p(e,["parameters","storageUri"],a);const u=d(n,["fps"]);e!==void 0&&u!=null&&p(e,["parameters","fps"],u);const f=d(n,["durationSeconds"]);e!==void 0&&f!=null&&p(e,["parameters","durationSeconds"],f);const m=d(n,["seed"]);e!==void 0&&m!=null&&p(e,["parameters","seed"],m);const h=d(n,["aspectRatio"]);e!==void 0&&h!=null&&p(e,["parameters","aspectRatio"],h);const v=d(n,["resolution"]);e!==void 0&&v!=null&&p(e,["parameters","resolution"],v);const T=d(n,["personGeneration"]);e!==void 0&&T!=null&&p(e,["parameters","personGeneration"],T);const S=d(n,["pubsubTopic"]);e!==void 0&&S!=null&&p(e,["parameters","pubsubTopic"],S);const I=d(n,["negativePrompt"]);e!==void 0&&I!=null&&p(e,["parameters","negativePrompt"],I);const k=d(n,["enhancePrompt"]);e!==void 0&&k!=null&&p(e,["parameters","enhancePrompt"],k);const O=d(n,["generateAudio"]);e!==void 0&&O!=null&&p(e,["parameters","generateAudio"],O);const P=d(n,["lastFrame"]);e!==void 0&&P!=null&&p(e,["instances[0]","lastFrame"],mi(P));const $=d(n,["referenceImages"]);if(e!==void 0&&$!=null){let re=$;Array.isArray(re)&&(re=re.map(ae=>KM(ae))),p(e,["instances[0]","referenceImages"],re)}const ee=d(n,["mask"]);e!==void 0&&ee!=null&&p(e,["instances[0]","mask"],YM(ee));const X=d(n,["compressionQuality"]);return e!==void 0&&X!=null&&p(e,["parameters","compressionQuality"],X),i}function J1(n,e){const t={},i=d(n,["name"]);i!=null&&p(t,["name"],i);const o=d(n,["metadata"]);o!=null&&p(t,["metadata"],o);const a=d(n,["done"]);a!=null&&p(t,["done"],a);const u=d(n,["error"]);u!=null&&p(t,["error"],u);const f=d(n,["response","generateVideoResponse"]);return f!=null&&p(t,["response"],Q1(f)),t}function K1(n,e){const t={},i=d(n,["name"]);i!=null&&p(t,["name"],i);const o=d(n,["metadata"]);o!=null&&p(t,["metadata"],o);const a=d(n,["done"]);a!=null&&p(t,["done"],a);const u=d(n,["error"]);u!=null&&p(t,["error"],u);const f=d(n,["response"]);return f!=null&&p(t,["response"],W1(f)),t}function $1(n,e,t){const i={},o=d(e,["model"]);o!=null&&p(i,["_url","model"],Qe(n,o));const a=d(e,["prompt"]);a!=null&&p(i,["instances[0]","prompt"],a);const u=d(e,["image"]);u!=null&&p(i,["instances[0]","image"],mf(u));const f=d(e,["video"]);f!=null&&p(i,["instances[0]","video"],sA(f));const m=d(e,["source"]);m!=null&&X1(m,i);const h=d(e,["config"]);return h!=null&&z1(h,i),i}function j1(n,e,t){const i={},o=d(e,["model"]);o!=null&&p(i,["_url","model"],Qe(n,o));const a=d(e,["prompt"]);a!=null&&p(i,["instances[0]","prompt"],a);const u=d(e,["image"]);u!=null&&p(i,["instances[0]","image"],mi(u));const f=d(e,["video"]);f!=null&&p(i,["instances[0]","video"],rA(f));const m=d(e,["source"]);m!=null&&Z1(m,i);const h=d(e,["config"]);return h!=null&&Y1(h,i),i}function Q1(n,e){const t={},i=d(n,["generatedSamples"]);if(i!=null){let u=i;Array.isArray(u)&&(u=u.map(f=>nM(f))),p(t,["generatedVideos"],u)}const o=d(n,["raiMediaFilteredCount"]);o!=null&&p(t,["raiMediaFilteredCount"],o);const a=d(n,["raiMediaFilteredReasons"]);return a!=null&&p(t,["raiMediaFilteredReasons"],a),t}function W1(n,e){const t={},i=d(n,["videos"]);if(i!=null){let u=i;Array.isArray(u)&&(u=u.map(f=>iM(f))),p(t,["generatedVideos"],u)}const o=d(n,["raiMediaFilteredCount"]);o!=null&&p(t,["raiMediaFilteredCount"],o);const a=d(n,["raiMediaFilteredReasons"]);return a!=null&&p(t,["raiMediaFilteredReasons"],a),t}function X1(n,e,t){const i={},o=d(n,["prompt"]);e!==void 0&&o!=null&&p(e,["instances[0]","prompt"],o);const a=d(n,["image"]);e!==void 0&&a!=null&&p(e,["instances[0]","image"],mf(a));const u=d(n,["video"]);return e!==void 0&&u!=null&&p(e,["instances[0]","video"],sA(u)),i}function Z1(n,e,t){const i={},o=d(n,["prompt"]);e!==void 0&&o!=null&&p(e,["instances[0]","prompt"],o);const a=d(n,["image"]);e!==void 0&&a!=null&&p(e,["instances[0]","image"],mi(a));const u=d(n,["video"]);return e!==void 0&&u!=null&&p(e,["instances[0]","video"],rA(u)),i}function eM(n,e){const t={},i=d(n,["_self"]);i!=null&&p(t,["image"],dM(i));const o=d(n,["raiFilteredReason"]);o!=null&&p(t,["raiFilteredReason"],o);const a=d(n,["_self"]);return a!=null&&p(t,["safetyAttributes"],tA(a)),t}function pf(n,e){const t={},i=d(n,["_self"]);i!=null&&p(t,["image"],eA(i));const o=d(n,["raiFilteredReason"]);o!=null&&p(t,["raiFilteredReason"],o);const a=d(n,["_self"]);a!=null&&p(t,["safetyAttributes"],nA(a));const u=d(n,["prompt"]);return u!=null&&p(t,["enhancedPrompt"],u),t}function tM(n,e){const t={},i=d(n,["_self"]);i!=null&&p(t,["mask"],eA(i));const o=d(n,["labels"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),p(t,["labels"],a)}return t}function nM(n,e){const t={},i=d(n,["video"]);return i!=null&&p(t,["video"],qM(i)),t}function iM(n,e){const t={},i=d(n,["_self"]);return i!=null&&p(t,["video"],zM(i)),t}function sM(n,e){const t={},i=d(n,["modelSelectionConfig"]);i!=null&&p(t,["modelConfig"],i);const o=d(n,["responseJsonSchema"]);o!=null&&p(t,["responseJsonSchema"],o);const a=d(n,["audioTimestamp"]);a!=null&&p(t,["audioTimestamp"],a);const u=d(n,["candidateCount"]);u!=null&&p(t,["candidateCount"],u);const f=d(n,["enableAffectiveDialog"]);f!=null&&p(t,["enableAffectiveDialog"],f);const m=d(n,["frequencyPenalty"]);m!=null&&p(t,["frequencyPenalty"],m);const h=d(n,["logprobs"]);h!=null&&p(t,["logprobs"],h);const v=d(n,["maxOutputTokens"]);v!=null&&p(t,["maxOutputTokens"],v);const T=d(n,["mediaResolution"]);T!=null&&p(t,["mediaResolution"],T);const S=d(n,["presencePenalty"]);S!=null&&p(t,["presencePenalty"],S);const I=d(n,["responseLogprobs"]);I!=null&&p(t,["responseLogprobs"],I);const k=d(n,["responseMimeType"]);k!=null&&p(t,["responseMimeType"],k);const O=d(n,["responseModalities"]);O!=null&&p(t,["responseModalities"],O);const P=d(n,["responseSchema"]);P!=null&&p(t,["responseSchema"],P);const $=d(n,["routingConfig"]);$!=null&&p(t,["routingConfig"],$);const ee=d(n,["seed"]);ee!=null&&p(t,["seed"],ee);const X=d(n,["speechConfig"]);X!=null&&p(t,["speechConfig"],X);const re=d(n,["stopSequences"]);re!=null&&p(t,["stopSequences"],re);const ae=d(n,["temperature"]);ae!=null&&p(t,["temperature"],ae);const j=d(n,["thinkingConfig"]);j!=null&&p(t,["thinkingConfig"],j);const R=d(n,["topK"]);R!=null&&p(t,["topK"],R);const M=d(n,["topP"]);if(M!=null&&p(t,["topP"],M),d(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function rM(n,e,t){const i={},o=d(e,["model"]);return o!=null&&p(i,["_url","name"],Qe(n,o)),i}function oM(n,e,t){const i={},o=d(e,["model"]);return o!=null&&p(i,["_url","name"],Qe(n,o)),i}function aM(n,e){const t={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=d(n,["enableWidget"]);return i!=null&&p(t,["enableWidget"],i),t}function lM(n,e){const t={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=d(n,["timeRangeFilter"]);return i!=null&&p(t,["timeRangeFilter"],i),t}function uM(n,e){const t={},i=d(n,["aspectRatio"]);i!=null&&p(t,["aspectRatio"],i);const o=d(n,["imageSize"]);if(o!=null&&p(t,["imageSize"],o),d(n,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(d(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(d(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function cM(n,e){const t={},i=d(n,["aspectRatio"]);i!=null&&p(t,["aspectRatio"],i);const o=d(n,["imageSize"]);o!=null&&p(t,["imageSize"],o);const a=d(n,["personGeneration"]);a!=null&&p(t,["personGeneration"],a);const u=d(n,["outputMimeType"]);u!=null&&p(t,["imageOutputOptions","mimeType"],u);const f=d(n,["outputCompressionQuality"]);return f!=null&&p(t,["imageOutputOptions","compressionQuality"],f),t}function dM(n,e){const t={},i=d(n,["bytesBase64Encoded"]);i!=null&&p(t,["imageBytes"],Er(i));const o=d(n,["mimeType"]);return o!=null&&p(t,["mimeType"],o),t}function eA(n,e){const t={},i=d(n,["gcsUri"]);i!=null&&p(t,["gcsUri"],i);const o=d(n,["bytesBase64Encoded"]);o!=null&&p(t,["imageBytes"],Er(o));const a=d(n,["mimeType"]);return a!=null&&p(t,["mimeType"],a),t}function mf(n,e){const t={};if(d(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const i=d(n,["imageBytes"]);i!=null&&p(t,["bytesBase64Encoded"],Er(i));const o=d(n,["mimeType"]);return o!=null&&p(t,["mimeType"],o),t}function mi(n,e){const t={},i=d(n,["gcsUri"]);i!=null&&p(t,["gcsUri"],i);const o=d(n,["imageBytes"]);o!=null&&p(t,["bytesBase64Encoded"],Er(o));const a=d(n,["mimeType"]);return a!=null&&p(t,["mimeType"],a),t}function fM(n,e,t,i){const o={},a=d(e,["pageSize"]);t!==void 0&&a!=null&&p(t,["_query","pageSize"],a);const u=d(e,["pageToken"]);t!==void 0&&u!=null&&p(t,["_query","pageToken"],u);const f=d(e,["filter"]);t!==void 0&&f!=null&&p(t,["_query","filter"],f);const m=d(e,["queryBase"]);return t!==void 0&&m!=null&&p(t,["_url","models_url"],KS(n,m)),o}function hM(n,e,t,i){const o={},a=d(e,["pageSize"]);t!==void 0&&a!=null&&p(t,["_query","pageSize"],a);const u=d(e,["pageToken"]);t!==void 0&&u!=null&&p(t,["_query","pageToken"],u);const f=d(e,["filter"]);t!==void 0&&f!=null&&p(t,["_query","filter"],f);const m=d(e,["queryBase"]);return t!==void 0&&m!=null&&p(t,["_url","models_url"],KS(n,m)),o}function pM(n,e,t){const i={},o=d(e,["config"]);return o!=null&&fM(n,o,i),i}function mM(n,e,t){const i={},o=d(e,["config"]);return o!=null&&hM(n,o,i),i}function gM(n,e){const t={},i=d(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const o=d(n,["nextPageToken"]);o!=null&&p(t,["nextPageToken"],o);const a=d(n,["_self"]);if(a!=null){let u=$S(a);Array.isArray(u)&&(u=u.map(f=>mm(f))),p(t,["models"],u)}return t}function yM(n,e){const t={},i=d(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const o=d(n,["nextPageToken"]);o!=null&&p(t,["nextPageToken"],o);const a=d(n,["_self"]);if(a!=null){let u=$S(a);Array.isArray(u)&&(u=u.map(f=>gm(f))),p(t,["models"],u)}return t}function vM(n,e){const t={},i=d(n,["maskMode"]);i!=null&&p(t,["maskMode"],i);const o=d(n,["segmentationClasses"]);o!=null&&p(t,["maskClasses"],o);const a=d(n,["maskDilation"]);return a!=null&&p(t,["dilation"],a),t}function mm(n,e){const t={},i=d(n,["name"]);i!=null&&p(t,["name"],i);const o=d(n,["displayName"]);o!=null&&p(t,["displayName"],o);const a=d(n,["description"]);a!=null&&p(t,["description"],a);const u=d(n,["version"]);u!=null&&p(t,["version"],u);const f=d(n,["_self"]);f!=null&&p(t,["tunedModelInfo"],PM(f));const m=d(n,["inputTokenLimit"]);m!=null&&p(t,["inputTokenLimit"],m);const h=d(n,["outputTokenLimit"]);h!=null&&p(t,["outputTokenLimit"],h);const v=d(n,["supportedGenerationMethods"]);v!=null&&p(t,["supportedActions"],v);const T=d(n,["temperature"]);T!=null&&p(t,["temperature"],T);const S=d(n,["maxTemperature"]);S!=null&&p(t,["maxTemperature"],S);const I=d(n,["topP"]);I!=null&&p(t,["topP"],I);const k=d(n,["topK"]);k!=null&&p(t,["topK"],k);const O=d(n,["thinking"]);return O!=null&&p(t,["thinking"],O),t}function gm(n,e){const t={},i=d(n,["name"]);i!=null&&p(t,["name"],i);const o=d(n,["displayName"]);o!=null&&p(t,["displayName"],o);const a=d(n,["description"]);a!=null&&p(t,["description"],a);const u=d(n,["versionId"]);u!=null&&p(t,["version"],u);const f=d(n,["deployedModels"]);if(f!=null){let S=f;Array.isArray(S)&&(S=S.map(I=>M1(I))),p(t,["endpoints"],S)}const m=d(n,["labels"]);m!=null&&p(t,["labels"],m);const h=d(n,["_self"]);h!=null&&p(t,["tunedModelInfo"],LM(h));const v=d(n,["defaultCheckpointId"]);v!=null&&p(t,["defaultCheckpointId"],v);const T=d(n,["checkpoints"]);if(T!=null){let S=T;Array.isArray(S)&&(S=S.map(I=>I)),p(t,["checkpoints"],S)}return t}function _M(n,e){const t={},i=d(n,["mediaResolution"]);i!=null&&p(t,["mediaResolution"],i);const o=d(n,["codeExecutionResult"]);o!=null&&p(t,["codeExecutionResult"],o);const a=d(n,["executableCode"]);a!=null&&p(t,["executableCode"],a);const u=d(n,["fileData"]);u!=null&&p(t,["fileData"],k1(u));const f=d(n,["functionCall"]);f!=null&&p(t,["functionCall"],D1(f));const m=d(n,["functionResponse"]);m!=null&&p(t,["functionResponse"],m);const h=d(n,["inlineData"]);h!=null&&p(t,["inlineData"],s1(h));const v=d(n,["text"]);v!=null&&p(t,["text"],v);const T=d(n,["thought"]);T!=null&&p(t,["thought"],T);const S=d(n,["thoughtSignature"]);S!=null&&p(t,["thoughtSignature"],S);const I=d(n,["videoMetadata"]);return I!=null&&p(t,["videoMetadata"],I),t}function TM(n,e){const t={},i=d(n,["productImage"]);return i!=null&&p(t,["image"],mi(i)),t}function EM(n,e,t){const i={},o=d(n,["numberOfImages"]);e!==void 0&&o!=null&&p(e,["parameters","sampleCount"],o);const a=d(n,["baseSteps"]);e!==void 0&&a!=null&&p(e,["parameters","baseSteps"],a);const u=d(n,["outputGcsUri"]);e!==void 0&&u!=null&&p(e,["parameters","storageUri"],u);const f=d(n,["seed"]);e!==void 0&&f!=null&&p(e,["parameters","seed"],f);const m=d(n,["safetyFilterLevel"]);e!==void 0&&m!=null&&p(e,["parameters","safetySetting"],m);const h=d(n,["personGeneration"]);e!==void 0&&h!=null&&p(e,["parameters","personGeneration"],h);const v=d(n,["addWatermark"]);e!==void 0&&v!=null&&p(e,["parameters","addWatermark"],v);const T=d(n,["outputMimeType"]);e!==void 0&&T!=null&&p(e,["parameters","outputOptions","mimeType"],T);const S=d(n,["outputCompressionQuality"]);e!==void 0&&S!=null&&p(e,["parameters","outputOptions","compressionQuality"],S);const I=d(n,["enhancePrompt"]);e!==void 0&&I!=null&&p(e,["parameters","enhancePrompt"],I);const k=d(n,["labels"]);return e!==void 0&&k!=null&&p(e,["labels"],k),i}function SM(n,e,t){const i={},o=d(e,["model"]);o!=null&&p(i,["_url","model"],Qe(n,o));const a=d(e,["source"]);a!=null&&wM(a,i);const u=d(e,["config"]);return u!=null&&EM(u,i),i}function AM(n,e){const t={},i=d(n,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>pf(a))),p(t,["generatedImages"],o)}return t}function wM(n,e,t){const i={},o=d(n,["prompt"]);e!==void 0&&o!=null&&p(e,["instances[0]","prompt"],o);const a=d(n,["personImage"]);e!==void 0&&a!=null&&p(e,["instances[0]","personImage","image"],mi(a));const u=d(n,["productImages"]);if(e!==void 0&&u!=null){let f=u;Array.isArray(f)&&(f=f.map(m=>TM(m))),p(e,["instances[0]","productImages"],f)}return i}function CM(n,e){const t={},i=d(n,["referenceImage"]);i!=null&&p(t,["referenceImage"],mi(i));const o=d(n,["referenceId"]);o!=null&&p(t,["referenceId"],o);const a=d(n,["referenceType"]);a!=null&&p(t,["referenceType"],a);const u=d(n,["maskImageConfig"]);u!=null&&p(t,["maskImageConfig"],vM(u));const f=d(n,["controlImageConfig"]);f!=null&&p(t,["controlImageConfig"],d1(f));const m=d(n,["styleImageConfig"]);m!=null&&p(t,["styleImageConfig"],m);const h=d(n,["subjectImageConfig"]);return h!=null&&p(t,["subjectImageConfig"],h),t}function tA(n,e){const t={},i=d(n,["safetyAttributes","categories"]);i!=null&&p(t,["categories"],i);const o=d(n,["safetyAttributes","scores"]);o!=null&&p(t,["scores"],o);const a=d(n,["contentType"]);return a!=null&&p(t,["contentType"],a),t}function nA(n,e){const t={},i=d(n,["safetyAttributes","categories"]);i!=null&&p(t,["categories"],i);const o=d(n,["safetyAttributes","scores"]);o!=null&&p(t,["scores"],o);const a=d(n,["contentType"]);return a!=null&&p(t,["contentType"],a),t}function xM(n,e){const t={},i=d(n,["category"]);if(i!=null&&p(t,["category"],i),d(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=d(n,["threshold"]);return o!=null&&p(t,["threshold"],o),t}function IM(n,e){const t={},i=d(n,["image"]);return i!=null&&p(t,["image"],mi(i)),t}function bM(n,e,t){const i={},o=d(n,["mode"]);e!==void 0&&o!=null&&p(e,["parameters","mode"],o);const a=d(n,["maxPredictions"]);e!==void 0&&a!=null&&p(e,["parameters","maxPredictions"],a);const u=d(n,["confidenceThreshold"]);e!==void 0&&u!=null&&p(e,["parameters","confidenceThreshold"],u);const f=d(n,["maskDilation"]);e!==void 0&&f!=null&&p(e,["parameters","maskDilation"],f);const m=d(n,["binaryColorThreshold"]);e!==void 0&&m!=null&&p(e,["parameters","binaryColorThreshold"],m);const h=d(n,["labels"]);return e!==void 0&&h!=null&&p(e,["labels"],h),i}function RM(n,e,t){const i={},o=d(e,["model"]);o!=null&&p(i,["_url","model"],Qe(n,o));const a=d(e,["source"]);a!=null&&MM(a,i);const u=d(e,["config"]);return u!=null&&bM(u,i),i}function NM(n,e){const t={},i=d(n,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>tM(a))),p(t,["generatedMasks"],o)}return t}function MM(n,e,t){const i={},o=d(n,["prompt"]);e!==void 0&&o!=null&&p(e,["instances[0]","prompt"],o);const a=d(n,["image"]);e!==void 0&&a!=null&&p(e,["instances[0]","image"],mi(a));const u=d(n,["scribbleImage"]);return e!==void 0&&u!=null&&p(e,["instances[0]","scribble"],IM(u)),i}function kM(n,e){const t={},i=d(n,["retrievalConfig"]);i!=null&&p(t,["retrievalConfig"],i);const o=d(n,["functionCallingConfig"]);return o!=null&&p(t,["functionCallingConfig"],P1(o)),t}function DM(n,e){const t={};if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=d(n,["computerUse"]);i!=null&&p(t,["computerUse"],i);const o=d(n,["fileSearch"]);o!=null&&p(t,["fileSearch"],o);const a=d(n,["codeExecution"]);if(a!=null&&p(t,["codeExecution"],a),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=d(n,["functionDeclarations"]);if(u!=null){let T=u;Array.isArray(T)&&(T=T.map(S=>S)),p(t,["functionDeclarations"],T)}const f=d(n,["googleMaps"]);f!=null&&p(t,["googleMaps"],aM(f));const m=d(n,["googleSearch"]);m!=null&&p(t,["googleSearch"],lM(m));const h=d(n,["googleSearchRetrieval"]);h!=null&&p(t,["googleSearchRetrieval"],h);const v=d(n,["urlContext"]);return v!=null&&p(t,["urlContext"],v),t}function iA(n,e){const t={},i=d(n,["retrieval"]);i!=null&&p(t,["retrieval"],i);const o=d(n,["computerUse"]);if(o!=null&&p(t,["computerUse"],o),d(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=d(n,["codeExecution"]);a!=null&&p(t,["codeExecution"],a);const u=d(n,["enterpriseWebSearch"]);u!=null&&p(t,["enterpriseWebSearch"],u);const f=d(n,["functionDeclarations"]);if(f!=null){let S=f;Array.isArray(S)&&(S=S.map(I=>L1(I))),p(t,["functionDeclarations"],S)}const m=d(n,["googleMaps"]);m!=null&&p(t,["googleMaps"],m);const h=d(n,["googleSearch"]);h!=null&&p(t,["googleSearch"],h);const v=d(n,["googleSearchRetrieval"]);v!=null&&p(t,["googleSearchRetrieval"],v);const T=d(n,["urlContext"]);return T!=null&&p(t,["urlContext"],T),t}function PM(n,e){const t={},i=d(n,["baseModel"]);i!=null&&p(t,["baseModel"],i);const o=d(n,["createTime"]);o!=null&&p(t,["createTime"],o);const a=d(n,["updateTime"]);return a!=null&&p(t,["updateTime"],a),t}function LM(n,e){const t={},i=d(n,["labels","google-vertex-llm-tuning-base-model-id"]);i!=null&&p(t,["baseModel"],i);const o=d(n,["createTime"]);o!=null&&p(t,["createTime"],o);const a=d(n,["updateTime"]);return a!=null&&p(t,["updateTime"],a),t}function VM(n,e,t){const i={},o=d(n,["displayName"]);e!==void 0&&o!=null&&p(e,["displayName"],o);const a=d(n,["description"]);e!==void 0&&a!=null&&p(e,["description"],a);const u=d(n,["defaultCheckpointId"]);return e!==void 0&&u!=null&&p(e,["defaultCheckpointId"],u),i}function UM(n,e,t){const i={},o=d(n,["displayName"]);e!==void 0&&o!=null&&p(e,["displayName"],o);const a=d(n,["description"]);e!==void 0&&a!=null&&p(e,["description"],a);const u=d(n,["defaultCheckpointId"]);return e!==void 0&&u!=null&&p(e,["defaultCheckpointId"],u),i}function OM(n,e,t){const i={},o=d(e,["model"]);o!=null&&p(i,["_url","name"],Qe(n,o));const a=d(e,["config"]);return a!=null&&VM(a,i),i}function FM(n,e,t){const i={},o=d(e,["model"]);o!=null&&p(i,["_url","model"],Qe(n,o));const a=d(e,["config"]);return a!=null&&UM(a,i),i}function GM(n,e,t){const i={},o=d(n,["outputGcsUri"]);e!==void 0&&o!=null&&p(e,["parameters","storageUri"],o);const a=d(n,["safetyFilterLevel"]);e!==void 0&&a!=null&&p(e,["parameters","safetySetting"],a);const u=d(n,["personGeneration"]);e!==void 0&&u!=null&&p(e,["parameters","personGeneration"],u);const f=d(n,["includeRaiReason"]);e!==void 0&&f!=null&&p(e,["parameters","includeRaiReason"],f);const m=d(n,["outputMimeType"]);e!==void 0&&m!=null&&p(e,["parameters","outputOptions","mimeType"],m);const h=d(n,["outputCompressionQuality"]);e!==void 0&&h!=null&&p(e,["parameters","outputOptions","compressionQuality"],h);const v=d(n,["enhanceInputImage"]);e!==void 0&&v!=null&&p(e,["parameters","upscaleConfig","enhanceInputImage"],v);const T=d(n,["imagePreservationFactor"]);e!==void 0&&T!=null&&p(e,["parameters","upscaleConfig","imagePreservationFactor"],T);const S=d(n,["labels"]);e!==void 0&&S!=null&&p(e,["labels"],S);const I=d(n,["numberOfImages"]);e!==void 0&&I!=null&&p(e,["parameters","sampleCount"],I);const k=d(n,["mode"]);return e!==void 0&&k!=null&&p(e,["parameters","mode"],k),i}function BM(n,e,t){const i={},o=d(e,["model"]);o!=null&&p(i,["_url","model"],Qe(n,o));const a=d(e,["image"]);a!=null&&p(i,["instances[0]","image"],mi(a));const u=d(e,["upscaleFactor"]);u!=null&&p(i,["parameters","upscaleConfig","upscaleFactor"],u);const f=d(e,["config"]);return f!=null&&GM(f,i),i}function HM(n,e){const t={},i=d(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const o=d(n,["predictions"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>pf(u))),p(t,["generatedImages"],a)}return t}function qM(n,e){const t={},i=d(n,["uri"]);i!=null&&p(t,["uri"],i);const o=d(n,["encodedVideo"]);o!=null&&p(t,["videoBytes"],Er(o));const a=d(n,["encoding"]);return a!=null&&p(t,["mimeType"],a),t}function zM(n,e){const t={},i=d(n,["gcsUri"]);i!=null&&p(t,["uri"],i);const o=d(n,["bytesBase64Encoded"]);o!=null&&p(t,["videoBytes"],Er(o));const a=d(n,["mimeType"]);return a!=null&&p(t,["mimeType"],a),t}function YM(n,e){const t={},i=d(n,["image"]);i!=null&&p(t,["_self"],mi(i));const o=d(n,["maskMode"]);return o!=null&&p(t,["maskMode"],o),t}function JM(n,e){const t={},i=d(n,["image"]);i!=null&&p(t,["image"],mf(i));const o=d(n,["referenceType"]);return o!=null&&p(t,["referenceType"],o),t}function KM(n,e){const t={},i=d(n,["image"]);i!=null&&p(t,["image"],mi(i));const o=d(n,["referenceType"]);return o!=null&&p(t,["referenceType"],o),t}function sA(n,e){const t={},i=d(n,["uri"]);i!=null&&p(t,["uri"],i);const o=d(n,["videoBytes"]);o!=null&&p(t,["encodedVideo"],Er(o));const a=d(n,["mimeType"]);return a!=null&&p(t,["encoding"],a),t}function rA(n,e){const t={},i=d(n,["uri"]);i!=null&&p(t,["gcsUri"],i);const o=d(n,["videoBytes"]);o!=null&&p(t,["bytesBase64Encoded"],Er(o));const a=d(n,["mimeType"]);return a!=null&&p(t,["mimeType"],a),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $M(n,e){const t={},i=d(n,["displayName"]);return e!==void 0&&i!=null&&p(e,["displayName"],i),t}function jM(n){const e={},t=d(n,["config"]);return t!=null&&$M(t,e),e}function QM(n,e){const t={},i=d(n,["force"]);return e!==void 0&&i!=null&&p(e,["_query","force"],i),t}function WM(n){const e={},t=d(n,["name"]);t!=null&&p(e,["_url","name"],t);const i=d(n,["config"]);return i!=null&&QM(i,e),e}function XM(n){const e={},t=d(n,["name"]);return t!=null&&p(e,["_url","name"],t),e}function ZM(n,e){const t={},i=d(n,["customMetadata"]);if(e!==void 0&&i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>u)),p(e,["customMetadata"],a)}const o=d(n,["chunkingConfig"]);return e!==void 0&&o!=null&&p(e,["chunkingConfig"],o),t}function e2(n){const e={},t=d(n,["name"]);t!=null&&p(e,["name"],t);const i=d(n,["metadata"]);i!=null&&p(e,["metadata"],i);const o=d(n,["done"]);o!=null&&p(e,["done"],o);const a=d(n,["error"]);a!=null&&p(e,["error"],a);const u=d(n,["response"]);return u!=null&&p(e,["response"],n2(u)),e}function t2(n){const e={},t=d(n,["fileSearchStoreName"]);t!=null&&p(e,["_url","file_search_store_name"],t);const i=d(n,["fileName"]);i!=null&&p(e,["fileName"],i);const o=d(n,["config"]);return o!=null&&ZM(o,e),e}function n2(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["parent"]);i!=null&&p(e,["parent"],i);const o=d(n,["documentName"]);return o!=null&&p(e,["documentName"],o),e}function i2(n,e){const t={},i=d(n,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const o=d(n,["pageToken"]);return e!==void 0&&o!=null&&p(e,["_query","pageToken"],o),t}function s2(n){const e={},t=d(n,["config"]);return t!=null&&i2(t,e),e}function r2(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const o=d(n,["fileSearchStores"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),p(e,["fileSearchStores"],a)}return e}function oA(n,e){const t={},i=d(n,["mimeType"]);e!==void 0&&i!=null&&p(e,["mimeType"],i);const o=d(n,["displayName"]);e!==void 0&&o!=null&&p(e,["displayName"],o);const a=d(n,["customMetadata"]);if(e!==void 0&&a!=null){let f=a;Array.isArray(f)&&(f=f.map(m=>m)),p(e,["customMetadata"],f)}const u=d(n,["chunkingConfig"]);return e!==void 0&&u!=null&&p(e,["chunkingConfig"],u),t}function o2(n){const e={},t=d(n,["fileSearchStoreName"]);t!=null&&p(e,["_url","file_search_store_name"],t);const i=d(n,["config"]);return i!=null&&oA(i,e),e}function a2(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const l2="Content-Type",u2="X-Server-Timeout",c2="User-Agent",ym="x-goog-api-client",d2="1.41.0",f2=`google-genai-sdk/${d2}`,h2="v1beta1",p2="v1beta",m2=5,g2=[408,429,500,502,503,504];class y2{constructor(e){var t,i,o;this.clientOptions=Object.assign({},e),this.customBaseUrl=(t=e.httpOptions)===null||t===void 0?void 0:t.baseUrl,this.clientOptions.vertexai&&(this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:this.clientOptions.apiKey&&(this.clientOptions.project=void 0,this.clientOptions.location=void 0));const a={};if(this.clientOptions.vertexai){if(!this.clientOptions.location&&!this.clientOptions.apiKey&&!this.customBaseUrl&&(this.clientOptions.location="global"),!(this.clientOptions.project&&this.clientOptions.location||this.clientOptions.apiKey)&&!this.customBaseUrl)throw new Error("Authentication is not set up. Please provide either a project and location, or an API key, or a custom base URL.");const f=e.project&&e.location||!!e.apiKey;this.customBaseUrl&&!f?(a.baseUrl=this.customBaseUrl,this.clientOptions.project=void 0,this.clientOptions.location=void 0):this.clientOptions.apiKey||this.clientOptions.location==="global"?a.baseUrl="https://aiplatform.googleapis.com/":this.clientOptions.project&&this.clientOptions.location&&(a.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`),a.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:h2}else{if(!this.clientOptions.apiKey)throw new mu({message:"API key must be set when using the Gemini API.",status:403});a.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:p2,a.baseUrl="https://generativelanguage.googleapis.com/"}a.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=a,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(a,e.httpOptions))}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getCustomBaseUrl(){return this.customBaseUrl}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,i){const o=[this.getRequestUrlInternal(t)];return i&&o.push(this.getBaseResourcePath()),e!==""&&o.push(e),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(e,t){return!(t.baseUrl&&t.baseUrlResourceScope===dm.COLLECTION||this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e,t),o=this.constructUrl(e.path,t,i);if(e.queryParams)for(const[u,f]of Object.entries(e.queryParams))o.searchParams.append(u,String(f));let a={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=e.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,t,o.toString(),e.abortSignal),this.unaryApiCall(o,a,e.httpMethod)}patchHttpOptions(e,t){const i=JSON.parse(JSON.stringify(e));for(const[o,a]of Object.entries(t))typeof a=="object"?i[o]=Object.assign(Object.assign({},i[o]),a):a!==void 0&&(i[o]=a);return i}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e,t),o=this.constructUrl(e.path,t,i);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let a={};return a.body=e.body,a=await this.includeExtraHttpOptionsToRequestInit(a,t,o.toString(),e.abortSignal),this.streamApiCall(o,a,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,i,o){if(t&&t.timeout||o){const a=new AbortController,u=a.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const f=setTimeout(()=>a.abort(),t.timeout);f&&typeof f.unref=="function"&&f.unref()}o&&o.addEventListener("abort",()=>{a.abort()}),e.signal=u}return t&&t.extraBody!==null&&v2(e,t.extraBody),e.headers=await this.getHeadersInternal(t,i),e}async unaryApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async o=>(await WT(o),new fm(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async o=>(await WT(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(e){return di(this,arguments,function*(){var i;const o=(i=e==null?void 0:e.body)===null||i===void 0?void 0:i.getReader(),a=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let u="";const f="data:",m=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:h,value:v}=yield Ie(o.read());if(h){if(u.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const T=a.decode(v,{stream:!0});try{const k=JSON.parse(T);if("error"in k){const O=JSON.parse(JSON.stringify(k.error)),P=O.status,$=O.code,ee=`got status: ${P}. ${JSON.stringify(k)}`;if($>=400&&$<600)throw new mu({message:ee,status:$})}}catch(k){if(k.name==="ApiError")throw k}u+=T;let S=-1,I=0;for(;;){S=-1,I=0;for(const P of m){const $=u.indexOf(P);$!==-1&&(S===-1||$<S)&&(S=$,I=P.length)}if(S===-1)break;const k=u.substring(0,S);u=u.substring(S+I);const O=k.trim();if(O.startsWith(f)){const P=O.substring(f.length).trim();try{const $=new Response(P,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Ie(new fm($))}catch($){throw new Error(`exception parsing stream chunk ${P}. ${$}`)}}}}}finally{o.releaseLock()}})}async apiCall(e,t){var i;if(!this.clientOptions.httpOptions||!this.clientOptions.httpOptions.retryOptions)return fetch(e,t);const o=this.clientOptions.httpOptions.retryOptions;return ab(async()=>{const u=await fetch(e,t);if(u.ok)return u;throw g2.includes(u.status)?new Error(`Retryable HTTP Error: ${u.statusText}`):new OS(`Non-retryable exception ${u.statusText} sending request`)},{retries:((i=o.attempts)!==null&&i!==void 0?i:m2)-1})}getDefaultHeaders(){const e={},t=f2+" "+this.clientOptions.userAgentExtra;return e[c2]=t,e[ym]=t,e[l2]="application/json",e}async getHeadersInternal(e,t){const i=new Headers;if(e&&e.headers){for(const[o,a]of Object.entries(e.headers))i.append(o,a);e.timeout&&e.timeout>0&&i.append(u2,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,t),i}getFileName(e){var t;let i="";return typeof e=="string"&&(i=e.replace(/[/\\]+$/,""),i=(t=i.split(/[/\\]/).pop())!==null&&t!==void 0?t:""),i}async uploadFile(e,t){var i;const o={};t!=null&&(o.mimeType=t.mimeType,o.name=t.name,o.displayName=t.displayName),o.name&&!o.name.startsWith("files/")&&(o.name=`files/${o.name}`);const a=this.clientOptions.uploader,u=await a.stat(e);o.sizeBytes=String(u.size);const f=(i=t==null?void 0:t.mimeType)!==null&&i!==void 0?i:u.type;if(f===void 0||f==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");o.mimeType=f;const m={file:o},h=this.getFileName(e),v=he("upload/v1beta/files",m._url),T=await this.fetchUploadUrl(v,o.sizeBytes,o.mimeType,h,m,t==null?void 0:t.httpOptions);return a.upload(e,T,this)}async uploadFileToFileSearchStore(e,t,i){var o;const a=this.clientOptions.uploader,u=await a.stat(t),f=String(u.size),m=(o=i==null?void 0:i.mimeType)!==null&&o!==void 0?o:u.type;if(m===void 0||m==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const h=`upload/v1beta/${e}:uploadToFileSearchStore`,v=this.getFileName(t),T={};i!=null&&oA(i,T);const S=await this.fetchUploadUrl(h,f,m,v,T,i==null?void 0:i.httpOptions);return a.uploadToFileSearchStore(t,S,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t,i,o,a,u){var f;let m={};u?m=u:m={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t}`,"X-Goog-Upload-Header-Content-Type":`${i}`},o?{"X-Goog-Upload-File-Name":o}:{})};const h=await this.request({path:e,body:JSON.stringify(a),httpMethod:"POST",httpOptions:m});if(!h||!(h!=null&&h.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const v=(f=h==null?void 0:h.headers)===null||f===void 0?void 0:f["x-goog-upload-url"];if(v===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return v}}async function WT(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let i;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await n.json():i={error:{message:await n.text(),code:n.status,status:n.statusText}};const o=JSON.stringify(i);throw t>=400&&t<600?new mu({message:o,status:t}):new Error(o)}}function v2(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const a=JSON.parse(n.body);if(typeof a=="object"&&a!==null&&!Array.isArray(a))t=a;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(a,u){const f=Object.assign({},a);for(const m in u)if(Object.prototype.hasOwnProperty.call(u,m)){const h=u[m],v=f[m];h&&typeof h=="object"&&!Array.isArray(h)&&v&&typeof v=="object"&&!Array.isArray(v)?f[m]=i(v,h):(v&&h&&typeof v!=typeof h&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${m}". Original type: ${typeof v}, New type: ${typeof h}. Overwriting.`),f[m]=h)}return f}const o=i(t,e);n.body=JSON.stringify(o)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const _2="mcp_used/unknown";let T2=!1;function aA(n){for(const e of n)if(E2(e)||typeof e=="object"&&"inputSchema"in e)return!0;return T2}function lA(n){var e;const t=(e=n[ym])!==null&&e!==void 0?e:"";n[ym]=(t+` ${_2}`).trimStart()}function E2(n){return n!==null&&typeof n=="object"&&n instanceof rg}function S2(n){return di(this,arguments,function*(t,i=100){let o,a=0;for(;a<i;){const u=yield Ie(t.listTools({cursor:o}));for(const f of u.tools)yield yield Ie(f),a++;if(!u.nextCursor)break;o=u.nextCursor}})}class rg{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new rg(e,t)}async initialize(){var e,t,i,o;if(this.mcpTools.length>0)return;const a={},u=[];for(const v of this.mcpClients)try{for(var f=!0,m=(t=void 0,fi(S2(v))),h;h=await m.next(),e=h.done,!e;f=!0){o=h.value,f=!1;const T=o;u.push(T);const S=T.name;if(a[S])throw new Error(`Duplicate function name ${S} found in MCP tools. Please ensure function names are unique.`);a[S]=v}}catch(T){t={error:T}}finally{try{!f&&!e&&(i=m.return)&&await i.call(m)}finally{if(t)throw t.error}}this.mcpTools=u,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),jb(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const o=this.functionNameToMcpClient[i.name];let a;this.config.timeout&&(a={timeout:this.config.timeout});const u=await o.callTool({name:i.name,arguments:i.args},void 0,a);t.push({functionResponse:{name:i.name,response:u.isError?{error:u}:u}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function A2(n,e,t){const i=new Bb;let o;t.data instanceof Blob?o=JSON.parse(await t.data.text()):o=JSON.parse(t.data),Object.assign(i,o),e(i)}class w2{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i}async connect(e){var t,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const o=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),u=I2(this.apiClient.getDefaultHeaders()),f=this.apiClient.getApiKey(),m=`${o}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${f}`;let h=()=>{};const v=new Promise(X=>{h=X}),T=e.callbacks,S=function(){h({})},I=this.apiClient,k={onopen:S,onmessage:X=>{A2(I,T.onmessage,X)},onerror:(t=T==null?void 0:T.onerror)!==null&&t!==void 0?t:function(X){},onclose:(i=T==null?void 0:T.onclose)!==null&&i!==void 0?i:function(X){}},O=this.webSocketFactory.create(m,x2(u),k);O.connect(),await v;const ee={setup:{model:Qe(this.apiClient,e.model)}};return O.send(JSON.stringify(ee)),new C2(O,this.apiClient)}}class C2{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=$N(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=KN(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(va.PLAY)}pause(){this.sendPlaybackControl(va.PAUSE)}stop(){this.sendPlaybackControl(va.STOP)}resetContext(){this.sendPlaybackControl(va.RESET_CONTEXT)}close(){this.conn.close()}}function x2(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function I2(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const b2="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function R2(n,e,t){const i=new Gb;let o;t.data instanceof Blob?o=await t.data.text():t.data instanceof ArrayBuffer?o=new TextDecoder().decode(t.data):o=t.data;const a=JSON.parse(o);if(n.isVertexAI()){const u=WN(a);Object.assign(i,u)}else Object.assign(i,a);e(i)}class N2{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i,this.music=new w2(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,i,o,a,u,f;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const m=this.apiClient.getWebsocketBaseUrl(),h=this.apiClient.getApiVersion();let v;const T=this.apiClient.getHeaders();e.config&&e.config.tools&&aA(e.config.tools)&&lA(T);const S=P2(T);if(this.apiClient.isVertexAI()){const D=this.apiClient.getProject(),U=this.apiClient.getLocation(),L=this.apiClient.getApiKey(),B=!!D&&!!U||!!L;this.apiClient.getCustomBaseUrl()&&!B?v=m:(v=`${m}/ws/google.cloud.aiplatform.${h}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(S,v))}else{const D=this.apiClient.getApiKey();let U="BidiGenerateContent",L="key";D!=null&&D.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),h!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),U="BidiGenerateContentConstrained",L="access_token"),v=`${m}/ws/google.ai.generativelanguage.${h}.GenerativeService.${U}?${L}=${D}`}let I=()=>{};const k=new Promise(D=>{I=D}),O=e.callbacks,P=function(){var D;(D=O==null?void 0:O.onopen)===null||D===void 0||D.call(O),I({})},$=this.apiClient,ee={onopen:P,onmessage:D=>{R2($,O.onmessage,D)},onerror:(t=O==null?void 0:O.onerror)!==null&&t!==void 0?t:function(D){},onclose:(i=O==null?void 0:O.onclose)!==null&&i!==void 0?i:function(D){}},X=this.webSocketFactory.create(v,D2(S),ee);X.connect(),await k;let re=Qe(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&re.startsWith("publishers/")){const D=this.apiClient.getProject(),U=this.apiClient.getLocation();D&&U&&(re=`projects/${D}/locations/${U}/`+re)}let ae={};this.apiClient.isVertexAI()&&((o=e.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Bd.AUDIO]}:e.config.responseModalities=[Bd.AUDIO]),!((a=e.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const j=(f=(u=e.config)===null||u===void 0?void 0:u.tools)!==null&&f!==void 0?f:[],R=[];for(const D of j)if(this.isCallableTool(D)){const U=D;R.push(await U.tool())}else R.push(D);R.length>0&&(e.config.tools=R);const M={model:re,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?ae=JN(this.apiClient,M):ae=YN(this.apiClient,M),delete ae.config,X.send(JSON.stringify(ae)),new k2(X,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const M2={turnComplete:!0};class k2{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let i=[];try{i=$n(t.turns),e.isVertexAI()||(i=i.map(o=>hf(o)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:i,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let i=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?i=t.functionResponses:i=[t.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const a of i){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!e.isVertexAI()&&!("id"in a))throw new Error(b2)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},M2),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:QN(e)}:t={realtimeInput:jN(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function D2(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function P2(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const XT=10;function ZT(n){var e,t,i;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let o=!1;for(const u of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(Ea(u)){o=!0;break}if(!o)return!0;const a=(i=n==null?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function Ea(n){return"callTool"in n&&typeof n.callTool=="function"}function L2(n){var e,t,i;return(i=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(o=>Ea(o)))!==null&&i!==void 0?i:!1}function eE(n){var e;const t=[];return!((e=n==null?void 0:n.config)===null||e===void 0)&&e.tools&&n.config.tools.forEach((i,o)=>{if(Ea(i))return;const a=i;a.functionDeclarations&&a.functionDeclarations.length>0&&t.push(o)}),t}function tE(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class V2 extends Es{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var i,o,a,u,f;const m=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!L2(t)||ZT(t.config))return await this.generateContentInternal(m);const h=eE(t);if(h.length>0){const O=h.map(P=>`tools[${P}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${O}.`)}let v,T;const S=$n(m.contents),I=(a=(o=(i=m.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&a!==void 0?a:XT;let k=0;for(;k<I&&(v=await this.generateContentInternal(m),!(!v.functionCalls||v.functionCalls.length===0));){const O=v.candidates[0].content,P=[];for(const $ of(f=(u=t.config)===null||u===void 0?void 0:u.tools)!==null&&f!==void 0?f:[])if(Ea($)){const X=await $.callTool(v.functionCalls);P.push(...X)}k++,T={role:"user",parts:P},m.contents=$n(m.contents),m.contents.push(O),m.contents.push(T),tE(m.config)&&(S.push(O),S.push(T))}return tE(m.config)&&(v.automaticFunctionCallingHistory=S),v},this.generateContentStream=async t=>{var i,o,a,u,f;if(this.maybeMoveToResponseJsonSchem(t),ZT(t.config)){const T=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(T)}const m=eE(t);if(m.length>0){const T=m.map(S=>`tools[${S}]`).join(", ");throw new Error(`Incompatible tools found at ${T}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const h=(a=(o=(i=t==null?void 0:t.config)===null||i===void 0?void 0:i.toolConfig)===null||o===void 0?void 0:o.functionCallingConfig)===null||a===void 0?void 0:a.streamFunctionCallArguments,v=(f=(u=t==null?void 0:t.config)===null||u===void 0?void 0:u.automaticFunctionCalling)===null||f===void 0?void 0:f.disable;if(h&&!v)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(i=>{var o;let a;const u=[];if(i!=null&&i.generatedImages)for(const m of i.generatedImages)m&&(m!=null&&m.safetyAttributes)&&((o=m==null?void 0:m.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?a=m==null?void 0:m.safetyAttributes:u.push(m);let f;return a?f={generatedImages:u,positivePromptSafetyAttributes:a,sdkHttpResponse:i.sdkHttpResponse}:f={generatedImages:u,sdkHttpResponse:i.sdkHttpResponse},f}),this.list=async t=>{var i;const u={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!u.config.queryBase){if(!((i=u.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");u.config.filter="labels.tune-type:*"}return new _o(gs.PAGED_ITEM_MODELS,f=>this.listInternal(f),await this.listInternal(u),u)},this.editImage=async t=>{const i={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(i.referenceImages=t.referenceImages.map(o=>o.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async t=>{let i={numberOfImages:1,mode:"upscale"};t.config&&(i=Object.assign(Object.assign({},i),t.config));const o={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:i};return await this.upscaleImageInternal(o)},this.generateVideos=async t=>{var i,o,a,u,f,m;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=t.video)===null||i===void 0)&&i.uri&&(!((o=t.video)===null||o===void 0)&&o.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((u=(a=t.source)===null||a===void 0?void 0:a.video)===null||u===void 0)&&u.uri&&(!((m=(f=t.source)===null||f===void 0?void 0:f.video)===null||m===void 0)&&m.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,i,o;const a=(t=e.config)===null||t===void 0?void 0:t.tools;if(!a)return e;const u=await Promise.all(a.map(async m=>Ea(m)?await m.tool():m)),f={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:u})};if(f.config.tools=u,e.config&&e.config.tools&&aA(e.config.tools)){const m=(o=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&o!==void 0?o:{};let h=Object.assign({},m);Object.keys(h).length===0&&(h=this.apiClient.getDefaultHeaders()),lA(h),f.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:h})}return f}async initAfcToolsMap(e){var t,i,o;const a=new Map;for(const u of(i=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&i!==void 0?i:[])if(Ea(u)){const f=u,m=await f.tool();for(const h of(o=m.functionDeclarations)!==null&&o!==void 0?o:[]){if(!h.name)throw new Error("Function declaration name is required.");if(a.has(h.name))throw new Error(`Duplicate tool declaration name: ${h.name}`);a.set(h.name,f)}}return a}async processAfcStream(e){var t,i,o;const a=(o=(i=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&o!==void 0?o:XT;let u=!1,f=0;const m=await this.initAfcToolsMap(e);return(function(h,v,T){return di(this,arguments,function*(){for(var S,I,k,O,P,$;f<a;){u&&(f++,u=!1);const ae=yield Ie(h.processParamsMaybeAddMcpUsage(T)),j=yield Ie(h.generateContentStreamInternal(ae)),R=[],M=[];try{for(var ee=!0,X=(I=void 0,fi(j)),re;re=yield Ie(X.next()),S=re.done,!S;ee=!0){O=re.value,ee=!1;const D=O;if(yield yield Ie(D),D.candidates&&(!((P=D.candidates[0])===null||P===void 0)&&P.content)){M.push(D.candidates[0].content);for(const U of($=D.candidates[0].content.parts)!==null&&$!==void 0?$:[])if(f<a&&U.functionCall){if(!U.functionCall.name)throw new Error("Function call name was not returned by the model.");if(v.has(U.functionCall.name)){const L=yield Ie(v.get(U.functionCall.name).callTool([U.functionCall]));R.push(...L)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${v.keys()}, mising tool: ${U.functionCall.name}`)}}}}catch(D){I={error:D}}finally{try{!ee&&!S&&(k=X.return)&&(yield Ie(k.call(X)))}finally{if(I)throw I.error}}if(R.length>0){u=!0;const D=new Wl;D.candidates=[{content:{role:"user",parts:R}}],yield yield Ie(D);const U=[];U.push(...M),U.push({role:"user",parts:R});const L=$n(T.contents).concat(U);T.contents=L}else break}})})(this,m,e)}async generateContentInternal(e){var t,i,o,a;let u,f="",m={};if(this.apiClient.isVertexAI()){const h=$T(this.apiClient,e);return f=he("{model}:generateContent",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=QT(v),S=new Wl;return Object.assign(S,T),S})}else{const h=KT(this.apiClient,e);return f=he("{model}:generateContent",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=jT(v),S=new Wl;return Object.assign(S,T),S})}}async generateContentStreamInternal(e){var t,i,o,a;let u,f="",m={};if(this.apiClient.isVertexAI()){const h=$T(this.apiClient,e);return f=he("{model}:streamGenerateContent?alt=sse",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.requestStream({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),u.then(function(T){return di(this,arguments,function*(){var S,I,k,O;try{for(var P=!0,$=fi(T),ee;ee=yield Ie($.next()),S=ee.done,!S;P=!0){O=ee.value,P=!1;const X=O,re=QT(yield Ie(X.json()),e);re.sdkHttpResponse={headers:X.headers};const ae=new Wl;Object.assign(ae,re),yield yield Ie(ae)}}catch(X){I={error:X}}finally{try{!P&&!S&&(k=$.return)&&(yield Ie(k.call($)))}finally{if(I)throw I.error}}})})}else{const h=KT(this.apiClient,e);return f=he("{model}:streamGenerateContent?alt=sse",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.requestStream({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),u.then(function(T){return di(this,arguments,function*(){var S,I,k,O;try{for(var P=!0,$=fi(T),ee;ee=yield Ie($.next()),S=ee.done,!S;P=!0){O=ee.value,P=!1;const X=O,re=jT(yield Ie(X.json()),e);re.sdkHttpResponse={headers:X.headers};const ae=new Wl;Object.assign(ae,re),yield yield Ie(ae)}}catch(X){I={error:X}}finally{try{!P&&!S&&(k=$.return)&&(yield Ie(k.call($)))}finally{if(I)throw I.error}}})})}}async embedContent(e){var t,i,o,a;let u,f="",m={};if(this.apiClient.isVertexAI()){const h=b1(this.apiClient,e);return f=he("{model}:predict",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=N1(v),S=new NT;return Object.assign(S,T),S})}else{const h=I1(this.apiClient,e);return f=he("{model}:batchEmbedContents",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=R1(v),S=new NT;return Object.assign(S,T),S})}}async generateImagesInternal(e){var t,i,o,a;let u,f="",m={};if(this.apiClient.isVertexAI()){const h=B1(this.apiClient,e);return f=he("{model}:predict",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=q1(v),S=new MT;return Object.assign(S,T),S})}else{const h=G1(this.apiClient,e);return f=he("{model}:predict",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=H1(v),S=new MT;return Object.assign(S,T),S})}}async editImageInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const f=A1(this.apiClient,e);return a=he("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:m.headers},v})),o.then(m=>{const h=w1(m),v=new bb;return Object.assign(v,h),v})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const f=BM(this.apiClient,e);return a=he("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:m.headers},v})),o.then(m=>{const h=HM(m),v=new Rb;return Object.assign(v,h),v})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const f=SM(this.apiClient,e);return a=he("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>{const h=AM(m),v=new Nb;return Object.assign(v,h),v})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const f=RM(this.apiClient,e);return a=he("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>{const h=NM(m),v=new Mb;return Object.assign(v,h),v})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,i,o,a;let u,f="",m={};if(this.apiClient.isVertexAI()){const h=oM(this.apiClient,e);return f=he("{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>gm(v))}else{const h=rM(this.apiClient,e);return f=he("{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>mm(v))}}async listInternal(e){var t,i,o,a;let u,f="",m={};if(this.apiClient.isVertexAI()){const h=mM(this.apiClient,e);return f=he("{models_url}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=yM(v),S=new kT;return Object.assign(S,T),S})}else{const h=pM(this.apiClient,e);return f=he("{models_url}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=gM(v),S=new kT;return Object.assign(S,T),S})}}async update(e){var t,i,o,a;let u,f="",m={};if(this.apiClient.isVertexAI()){const h=FM(this.apiClient,e);return f=he("{model}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>gm(v))}else{const h=OM(this.apiClient,e);return f=he("{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>mm(v))}}async delete(e){var t,i,o,a;let u,f="",m={};if(this.apiClient.isVertexAI()){const h=_1(this.apiClient,e);return f=he("{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=E1(v),S=new DT;return Object.assign(S,T),S})}else{const h=v1(this.apiClient,e);return f=he("{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=T1(v),S=new DT;return Object.assign(S,T),S})}}async countTokens(e){var t,i,o,a;let u,f="",m={};if(this.apiClient.isVertexAI()){const h=m1(this.apiClient,e);return f=he("{model}:countTokens",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=y1(v),S=new PT;return Object.assign(S,T),S})}else{const h=p1(this.apiClient,e);return f=he("{model}:countTokens",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=g1(v),S=new PT;return Object.assign(S,T),S})}}async computeTokens(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const f=a1(this.apiClient,e);return a=he("{model}:computeTokens",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:m.headers},v})),o.then(m=>{const h=l1(m),v=new kb;return Object.assign(v,h),v})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,i,o,a;let u,f="",m={};if(this.apiClient.isVertexAI()){const h=j1(this.apiClient,e);return f=he("{model}:predictLongRunning",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u.then(v=>{const T=K1(v),S=new Hd;return Object.assign(S,T),S})}else{const h=$1(this.apiClient,e);return f=he("{model}:predictLongRunning",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u.then(v=>{const T=J1(v),S=new Hd;return Object.assign(S,T),S})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class U2 extends Es{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=t.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:o,config:{httpOptions:a}});return t._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async get(e){const t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=t.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:o,config:{httpOptions:a}});return t._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async getVideosOperationInternal(e){var t,i,o,a;let u,f="",m={};if(this.apiClient.isVertexAI()){const h=Sb(e);return f=he("{operationName}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),u}else{const h=Eb(e);return f=he("{operationName}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),u}}async fetchPredictVideosOperationInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const f=pb(e);return a=he("{resourceName}:fetchPredictOperation",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function O2(n){const e={},t=d(n,["data"]);if(t!=null&&p(e,["data"],t),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function F2(n){const e={},t=d(n,["parts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(a=>$2(a))),p(e,["parts"],o)}const i=d(n,["role"]);return i!=null&&p(e,["role"],i),e}function G2(n,e,t){const i={},o=d(e,["expireTime"]);t!==void 0&&o!=null&&p(t,["expireTime"],o);const a=d(e,["newSessionExpireTime"]);t!==void 0&&a!=null&&p(t,["newSessionExpireTime"],a);const u=d(e,["uses"]);t!==void 0&&u!=null&&p(t,["uses"],u);const f=d(e,["liveConnectConstraints"]);t!==void 0&&f!=null&&p(t,["bidiGenerateContentSetup"],K2(n,f));const m=d(e,["lockAdditionalFields"]);return t!==void 0&&m!=null&&p(t,["fieldMask"],m),i}function B2(n,e){const t={},i=d(e,["config"]);return i!=null&&p(t,["config"],G2(n,i,t)),t}function H2(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["fileUri"]);t!=null&&p(e,["fileUri"],t);const i=d(n,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function q2(n){const e={},t=d(n,["id"]);t!=null&&p(e,["id"],t);const i=d(n,["args"]);i!=null&&p(e,["args"],i);const o=d(n,["name"]);if(o!=null&&p(e,["name"],o),d(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function z2(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=d(n,["enableWidget"]);return t!=null&&p(e,["enableWidget"],t),e}function Y2(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=d(n,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],t),e}function J2(n,e){const t={},i=d(n,["generationConfig"]);e!==void 0&&i!=null&&p(e,["setup","generationConfig"],i);const o=d(n,["responseModalities"]);e!==void 0&&o!=null&&p(e,["setup","generationConfig","responseModalities"],o);const a=d(n,["temperature"]);e!==void 0&&a!=null&&p(e,["setup","generationConfig","temperature"],a);const u=d(n,["topP"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","topP"],u);const f=d(n,["topK"]);e!==void 0&&f!=null&&p(e,["setup","generationConfig","topK"],f);const m=d(n,["maxOutputTokens"]);e!==void 0&&m!=null&&p(e,["setup","generationConfig","maxOutputTokens"],m);const h=d(n,["mediaResolution"]);e!==void 0&&h!=null&&p(e,["setup","generationConfig","mediaResolution"],h);const v=d(n,["seed"]);e!==void 0&&v!=null&&p(e,["setup","generationConfig","seed"],v);const T=d(n,["speechConfig"]);e!==void 0&&T!=null&&p(e,["setup","generationConfig","speechConfig"],sg(T));const S=d(n,["thinkingConfig"]);e!==void 0&&S!=null&&p(e,["setup","generationConfig","thinkingConfig"],S);const I=d(n,["enableAffectiveDialog"]);e!==void 0&&I!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],I);const k=d(n,["systemInstruction"]);e!==void 0&&k!=null&&p(e,["setup","systemInstruction"],F2(on(k)));const O=d(n,["tools"]);if(e!==void 0&&O!=null){let j=La(O);Array.isArray(j)&&(j=j.map(R=>Q2(Pa(R)))),p(e,["setup","tools"],j)}const P=d(n,["sessionResumption"]);e!==void 0&&P!=null&&p(e,["setup","sessionResumption"],j2(P));const $=d(n,["inputAudioTranscription"]);e!==void 0&&$!=null&&p(e,["setup","inputAudioTranscription"],$);const ee=d(n,["outputAudioTranscription"]);e!==void 0&&ee!=null&&p(e,["setup","outputAudioTranscription"],ee);const X=d(n,["realtimeInputConfig"]);e!==void 0&&X!=null&&p(e,["setup","realtimeInputConfig"],X);const re=d(n,["contextWindowCompression"]);e!==void 0&&re!=null&&p(e,["setup","contextWindowCompression"],re);const ae=d(n,["proactivity"]);if(e!==void 0&&ae!=null&&p(e,["setup","proactivity"],ae),d(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function K2(n,e){const t={},i=d(e,["model"]);i!=null&&p(t,["setup","model"],Qe(n,i));const o=d(e,["config"]);return o!=null&&p(t,["config"],J2(o,t)),t}function $2(n){const e={},t=d(n,["mediaResolution"]);t!=null&&p(e,["mediaResolution"],t);const i=d(n,["codeExecutionResult"]);i!=null&&p(e,["codeExecutionResult"],i);const o=d(n,["executableCode"]);o!=null&&p(e,["executableCode"],o);const a=d(n,["fileData"]);a!=null&&p(e,["fileData"],H2(a));const u=d(n,["functionCall"]);u!=null&&p(e,["functionCall"],q2(u));const f=d(n,["functionResponse"]);f!=null&&p(e,["functionResponse"],f);const m=d(n,["inlineData"]);m!=null&&p(e,["inlineData"],O2(m));const h=d(n,["text"]);h!=null&&p(e,["text"],h);const v=d(n,["thought"]);v!=null&&p(e,["thought"],v);const T=d(n,["thoughtSignature"]);T!=null&&p(e,["thoughtSignature"],T);const S=d(n,["videoMetadata"]);return S!=null&&p(e,["videoMetadata"],S),e}function j2(n){const e={},t=d(n,["handle"]);if(t!=null&&p(e,["handle"],t),d(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Q2(n){const e={};if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=d(n,["computerUse"]);t!=null&&p(e,["computerUse"],t);const i=d(n,["fileSearch"]);i!=null&&p(e,["fileSearch"],i);const o=d(n,["codeExecution"]);if(o!=null&&p(e,["codeExecution"],o),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=d(n,["functionDeclarations"]);if(a!=null){let v=a;Array.isArray(v)&&(v=v.map(T=>T)),p(e,["functionDeclarations"],v)}const u=d(n,["googleMaps"]);u!=null&&p(e,["googleMaps"],z2(u));const f=d(n,["googleSearch"]);f!=null&&p(e,["googleSearch"],Y2(f));const m=d(n,["googleSearchRetrieval"]);m!=null&&p(e,["googleSearchRetrieval"],m);const h=d(n,["urlContext"]);return h!=null&&p(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function W2(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const i=n[t];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const o=Object.keys(i).map(a=>`${t}.${a}`);e.push(...o)}else e.push(t)}return e.join(",")}function X2(n,e){let t=null;const i=n.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const a=i.setup;typeof a=="object"&&a!==null?(n.bidiGenerateContentSetup=a,t=a):delete n.bidiGenerateContentSetup}else i!==void 0&&delete n.bidiGenerateContentSetup;const o=n.fieldMask;if(t){const a=W2(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)a?n.fieldMask=a:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&o!==null&&Array.isArray(o)&&o.length>0){const u=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let f=[];o.length>0&&(f=o.map(h=>u.includes(h)?`generationConfig.${h}`:h));const m=[];a&&m.push(a),f.length>0&&m.push(...f),m.length>0?n.fieldMask=m.join(","):delete n.fieldMask}else delete n.fieldMask}else o!==null&&Array.isArray(o)&&o.length>0?n.fieldMask=o.join(","):delete n.fieldMask;return n}class Z2 extends Es{constructor(e){super(),this.apiClient=e}async create(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const f=B2(this.apiClient,e);a=he("auth_tokens",f._url),u=f._query,delete f.config,delete f._url,delete f._query;const m=X2(f,e.config);return o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>h)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ek(n,e){const t={},i=d(n,["force"]);return e!==void 0&&i!=null&&p(e,["_query","force"],i),t}function tk(n){const e={},t=d(n,["name"]);t!=null&&p(e,["_url","name"],t);const i=d(n,["config"]);return i!=null&&ek(i,e),e}function nk(n){const e={},t=d(n,["name"]);return t!=null&&p(e,["_url","name"],t),e}function ik(n,e){const t={},i=d(n,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const o=d(n,["pageToken"]);return e!==void 0&&o!=null&&p(e,["_query","pageToken"],o),t}function sk(n){const e={},t=d(n,["parent"]);t!=null&&p(e,["_url","parent"],t);const i=d(n,["config"]);return i!=null&&ik(i,e),e}function rk(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const o=d(n,["documents"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(u=>u)),p(e,["documents"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ok extends Es{constructor(e){super(),this.apiClient=e,this.list=async t=>new _o(gs.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:t.parent,config:i.config}),await this.listInternal(t),t)}async get(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=nk(e);return a=he("{name}",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>m)}}async delete(e){var t,i;let o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=tk(e);o=he("{name}",u._url),a=u._query,delete u._url,delete u._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=sk(e);return a=he("{parent}/documents",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>{const h=rk(m),v=new Db;return Object.assign(v,h),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ak extends Es{constructor(e,t=new ok(e)){super(),this.apiClient=e,this.documents=t,this.list=async(i={})=>new _o(gs.PAGED_ITEM_FILE_SEARCH_STORES,o=>this.listInternal(o),await this.listInternal(i),i)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=jM(e);return a=he("fileSearchStores",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>m)}}async get(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=XM(e);return a=he("{name}",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>m)}}async delete(e){var t,i;let o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=WM(e);o=he("{name}",u._url),a=u._query,delete u._url,delete u._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=s2(e);return a=he("fileSearchStores",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>{const h=r2(m),v=new Pb;return Object.assign(v,h),v})}}async uploadToFileSearchStoreInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=o2(e);return a=he("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>{const h=a2(m),v=new Lb;return Object.assign(v,h),v})}}async importFile(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=t2(e);return a=he("{file_search_store_name}:importFile",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),o.then(m=>{const h=e2(m),v=new Zm;return Object.assign(v,h),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let uA=function(){const{crypto:n}=globalThis;if(n!=null&&n.randomUUID)return uA=n.randomUUID.bind(n),n.randomUUID();const e=new Uint8Array(1),t=n?()=>n.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,i=>(+i^t()&15>>+i/4).toString(16))};const lk=()=>uA();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function vm(n){return typeof n=="object"&&n!==null&&("name"in n&&n.name==="AbortError"||"message"in n&&String(n.message).includes("FetchRequestCanceledException"))}const _m=n=>{if(n instanceof Error)return n;if(typeof n=="object"&&n!==null){try{if(Object.prototype.toString.call(n)==="[object Error]"){const e=new Error(n.message,n.cause?{cause:n.cause}:{});return n.stack&&(e.stack=n.stack),n.cause&&!e.cause&&(e.cause=n.cause),n.name&&(e.name=n.name),e}}catch{}try{return new Error(JSON.stringify(n))}catch{}}return new Error(n)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class jn extends Error{}class hn extends jn{constructor(e,t,i,o){super(`${hn.makeMessage(e,t,i)}`),this.status=e,this.headers=o,this.error=t}static makeMessage(e,t,i){const o=t!=null&&t.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):i;return e&&o?`${e} ${o}`:e?`${e} status code (no body)`:o||"(no status code or body)"}static generate(e,t,i,o){if(!e||!o)return new gf({message:i,cause:_m(t)});const a=t;return e===400?new dA(e,a,i,o):e===401?new fA(e,a,i,o):e===403?new hA(e,a,i,o):e===404?new pA(e,a,i,o):e===409?new mA(e,a,i,o):e===422?new gA(e,a,i,o):e===429?new yA(e,a,i,o):e>=500?new vA(e,a,i,o):new hn(e,a,i,o)}}class Tm extends hn{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class gf extends hn{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}class cA extends gf{constructor({message:e}={}){super({message:e??"Request timed out."})}}class dA extends hn{}class fA extends hn{}class hA extends hn{}class pA extends hn{}class mA extends hn{}class gA extends hn{}class yA extends hn{}class vA extends hn{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const uk=/^[a-z][a-z0-9+.-]*:/i,ck=n=>uk.test(n);let Em=n=>(Em=Array.isArray,Em(n));const dk=Em;let fk=dk;const nE=fk;function hk(n){if(!n)return!0;for(const e in n)return!1;return!0}function pk(n,e){return Object.prototype.hasOwnProperty.call(n,e)}const mk=(n,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new jn(`${n} must be an integer`);if(e<0)throw new jn(`${n} must be a positive integer`);return e},gk=n=>{try{return JSON.parse(n)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const yk=n=>new Promise(e=>setTimeout(e,n));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ha="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function vk(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const _k=()=>{var n,e,t,i,o;const a=vk();if(a==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ha,"X-Stainless-OS":sE(Deno.build.os),"X-Stainless-Arch":iE(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(n=Deno.version)===null||n===void 0?void 0:n.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ha,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(a==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ha,"X-Stainless-OS":sE((t=globalThis.process.platform)!==null&&t!==void 0?t:"unknown"),"X-Stainless-Arch":iE((i=globalThis.process.arch)!==null&&i!==void 0?i:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(o=globalThis.process.version)!==null&&o!==void 0?o:"unknown"};const u=Tk();return u?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ha,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${u.browser}`,"X-Stainless-Runtime-Version":u.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ha,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function Tk(){if(typeof navigator>"u"||!navigator)return null;const n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:t}of n){const i=t.exec(navigator.userAgent);if(i){const o=i[1]||0,a=i[2]||0,u=i[3]||0;return{browser:e,version:`${o}.${a}.${u}`}}}return null}const iE=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",sE=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown");let yd;const Ek=()=>yd??(yd=_k());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Sk(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function _A(...n){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...n)}function Ak(n){let e=Symbol.asyncIterator in n?n[Symbol.asyncIterator]():n[Symbol.iterator]();return _A({start(){},async pull(t){const{done:i,value:o}=await e.next();i?t.close():t.enqueue(o)},async cancel(){var t;await((t=e.return)===null||t===void 0?void 0:t.call(e))}})}function TA(n){if(n[Symbol.asyncIterator])return n;const e=n.getReader();return{async next(){try{const t=await e.read();return t!=null&&t.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){const t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function wk(n){var e,t;if(n===null||typeof n!="object")return;if(n[Symbol.asyncIterator]){await((t=(e=n[Symbol.asyncIterator]()).return)===null||t===void 0?void 0:t.call(e));return}const i=n.getReader(),o=i.cancel();i.releaseLock(),await o}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ck=({headers:n,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const EA=()=>{var n;if(typeof File>"u"){const{process:e}=globalThis,t=typeof((n=e==null?void 0:e.versions)===null||n===void 0?void 0:n.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(t?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Hp(n,e,t){return EA(),new File(n,e??"unknown_file",t)}function xk(n){return(typeof n=="object"&&n!==null&&("name"in n&&n.name&&String(n.name)||"url"in n&&n.url&&String(n.url)||"filename"in n&&n.filename&&String(n.filename)||"path"in n&&n.path&&String(n.path))||"").split(/[\\/]/).pop()||void 0}const Ik=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const SA=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",bk=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&SA(n),Rk=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function";async function Nk(n,e,t){if(EA(),n=await n,bk(n))return n instanceof File?n:Hp([await n.arrayBuffer()],n.name);if(Rk(n)){const o=await n.blob();return e||(e=new URL(n.url).pathname.split(/[\\/]/).pop()),Hp(await Sm(o),e,t)}const i=await Sm(n);if(e||(e=xk(n)),!(t!=null&&t.type)){const o=i.find(a=>typeof a=="object"&&"type"in a&&a.type);typeof o=="string"&&(t=Object.assign(Object.assign({},t),{type:o}))}return Hp(i,e,t)}async function Sm(n){var e,t,i,o,a;let u=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)u.push(n);else if(SA(n))u.push(n instanceof Blob?n:await n.arrayBuffer());else if(Ik(n))try{for(var f=!0,m=fi(n),h;h=await m.next(),e=h.done,!e;f=!0){o=h.value,f=!1;const v=o;u.push(...await Sm(v))}}catch(v){t={error:v}}finally{try{!f&&!e&&(i=m.return)&&await i.call(m)}finally{if(t)throw t.error}}else{const v=(a=n==null?void 0:n.constructor)===null||a===void 0?void 0:a.name;throw new Error(`Unexpected data type: ${typeof n}${v?`; constructor: ${v}`:""}${Mk(n)}`)}return u}function Mk(n){return typeof n!="object"||n===null?"":`; props: [${Object.getOwnPropertyNames(n).map(t=>`"${t}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class AA{constructor(e){this._client=e}}AA._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wA(n){return n.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const rE=Object.freeze(Object.create(null)),kk=(n=wA)=>(function(t,...i){if(t.length===1)return t[0];let o=!1;const a=[],u=t.reduce((v,T,S)=>{var I,k,O;/[?#]/.test(T)&&(o=!0);const P=i[S];let $=(o?encodeURIComponent:n)(""+P);return S!==i.length&&(P==null||typeof P=="object"&&P.toString===((O=Object.getPrototypeOf((k=Object.getPrototypeOf((I=P.hasOwnProperty)!==null&&I!==void 0?I:rE))!==null&&k!==void 0?k:rE))===null||O===void 0?void 0:O.toString))&&($=P+"",a.push({start:v.length+T.length,length:$.length,error:`Value of type ${Object.prototype.toString.call(P).slice(8,-1)} is not a valid path parameter`})),v+T+(S===i.length?"":$)},""),f=u.split(/[?#]/,1)[0],m=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let h;for(;(h=m.exec(f))!==null;)a.push({start:h.index,length:h[0].length,error:`Value "${h[0]}" can't be safely passed as a path parameter`});if(a.sort((v,T)=>v.start-T.start),a.length>0){let v=0;const T=a.reduce((S,I)=>{const k=" ".repeat(I.start-v),O="^".repeat(I.length);return v=I.start+I.length,S+k+O},"");throw new jn(`Path parameters result in path with invalid segments:
${a.map(S=>S.error).join(`
`)}
${u}
${T}`)}return u}),vd=kk(wA);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class CA extends AA{create(e,t){var i;const{api_version:o=this._client.apiVersion}=e,a=zd(e,["api_version"]);if("model"in a&&"agent_config"in a)throw new jn("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in a&&"generation_config"in a)throw new jn("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(vd`/${o}/interactions`,Object.assign(Object.assign({body:a},t),{stream:(i=e.stream)!==null&&i!==void 0?i:!1}))}delete(e,t={},i){const{api_version:o=this._client.apiVersion}=t??{};return this._client.delete(vd`/${o}/interactions/${e}`,i)}cancel(e,t={},i){const{api_version:o=this._client.apiVersion}=t??{};return this._client.post(vd`/${o}/interactions/${e}/cancel`,i)}get(e,t={},i){var o;const a=t??{},{api_version:u=this._client.apiVersion}=a,f=zd(a,["api_version"]);return this._client.get(vd`/${u}/interactions/${e}`,Object.assign(Object.assign({query:f},i),{stream:(o=t==null?void 0:t.stream)!==null&&o!==void 0?o:!1}))}}CA._key=Object.freeze(["interactions"]);class xA extends CA{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Dk(n){let e=0;for(const o of n)e+=o.length;const t=new Uint8Array(e);let i=0;for(const o of n)t.set(o,i),i+=o.length;return t}let _d;function og(n){let e;return(_d??(e=new globalThis.TextEncoder,_d=e.encode.bind(e)))(n)}let Td;function oE(n){let e;return(Td??(e=new globalThis.TextDecoder,Td=e.decode.bind(e)))(n)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class yf{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const t=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?og(e):e;this.buffer=Dk([this.buffer,t]);const i=[];let o;for(;(o=Pk(this.buffer,this.carriageReturnIndex))!=null;){if(o.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=o.index;continue}if(this.carriageReturnIndex!=null&&(o.index!==this.carriageReturnIndex+1||o.carriage)){i.push(oE(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const a=this.carriageReturnIndex!==null?o.preceding-1:o.preceding,u=oE(this.buffer.subarray(0,a));i.push(u),this.buffer=this.buffer.subarray(o.index),this.carriageReturnIndex=null}return i}flush(){return this.buffer.length?this.decode(`
`):[]}}yf.NEWLINE_CHARS=new Set([`
`,"\r"]);yf.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function Pk(n,e){for(let o=e??0;o<n.length;o++){if(n[o]===10)return{preceding:o,index:o+1,carriage:!1};if(n[o]===13)return{preceding:o,index:o+1,carriage:!0}}return null}function Lk(n){for(let i=0;i<n.length-1;i++){if(n[i]===10&&n[i+1]===10||n[i]===13&&n[i+1]===13)return i+2;if(n[i]===13&&n[i+1]===10&&i+3<n.length&&n[i+2]===13&&n[i+3]===10)return i+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Yd={off:0,error:200,warn:300,info:400,debug:500},aE=(n,e,t)=>{if(n){if(pk(Yd,n))return n;fn(t).warn(`${e} was set to ${JSON.stringify(n)}, expected one of ${JSON.stringify(Object.keys(Yd))}`)}};function tu(){}function Ed(n,e,t){return!e||Yd[n]>Yd[t]?tu:e[n].bind(e)}const Vk={error:tu,warn:tu,info:tu,debug:tu};let lE=new WeakMap;function fn(n){var e;const t=n.logger,i=(e=n.logLevel)!==null&&e!==void 0?e:"off";if(!t)return Vk;const o=lE.get(t);if(o&&o[0]===i)return o[1];const a={error:Ed("error",t,i),warn:Ed("warn",t,i),info:Ed("info",t,i),debug:Ed("debug",t,i)};return lE.set(t,[i,a]),a}const no=n=>(n.options&&(n.options=Object.assign({},n.options),delete n.options.headers),n.headers&&(n.headers=Object.fromEntries((n.headers instanceof Headers?[...n.headers]:Object.entries(n.headers)).map(([e,t])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":t]))),"retryOfRequestLogID"in n&&(n.retryOfRequestLogID&&(n.retryOf=n.retryOfRequestLogID),delete n.retryOfRequestLogID),n);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _a{constructor(e,t,i){this.iterator=e,this.controller=t,this.client=i}static fromSSEResponse(e,t,i){let o=!1;const a=i?fn(i):console;function u(){return di(this,arguments,function*(){var m,h,v,T;if(o)throw new jn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");o=!0;let S=!1;try{try{for(var I=!0,k=fi(Uk(e,t)),O;O=yield Ie(k.next()),m=O.done,!m;I=!0){T=O.value,I=!1;const P=T;if(!S)if(P.data.startsWith("[DONE]")){S=!0;continue}else try{yield yield Ie(JSON.parse(P.data))}catch($){throw a.error("Could not parse message into JSON:",P.data),a.error("From chunk:",P.raw),$}}}catch(P){h={error:P}}finally{try{!I&&!m&&(v=k.return)&&(yield Ie(v.call(k)))}finally{if(h)throw h.error}}S=!0}catch(P){if(vm(P))return yield Ie(void 0);throw P}finally{S||t.abort()}})}return new _a(u,t,i)}static fromReadableStream(e,t,i){let o=!1;function a(){return di(this,arguments,function*(){var m,h,v,T;const S=new yf,I=TA(e);try{for(var k=!0,O=fi(I),P;P=yield Ie(O.next()),m=P.done,!m;k=!0){T=P.value,k=!1;const $=T;for(const ee of S.decode($))yield yield Ie(ee)}}catch($){h={error:$}}finally{try{!k&&!m&&(v=O.return)&&(yield Ie(v.call(O)))}finally{if(h)throw h.error}}for(const $ of S.flush())yield yield Ie($)})}function u(){return di(this,arguments,function*(){var m,h,v,T;if(o)throw new jn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");o=!0;let S=!1;try{try{for(var I=!0,k=fi(a()),O;O=yield Ie(k.next()),m=O.done,!m;I=!0){T=O.value,I=!1;const P=T;S||P&&(yield yield Ie(JSON.parse(P)))}}catch(P){h={error:P}}finally{try{!I&&!m&&(v=k.return)&&(yield Ie(v.call(k)))}finally{if(h)throw h.error}}S=!0}catch(P){if(vm(P))return yield Ie(void 0);throw P}finally{S||t.abort()}})}return new _a(u,t,i)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],i=this.iterator(),o=a=>({next:()=>{if(a.length===0){const u=i.next();e.push(u),t.push(u)}return a.shift()}});return[new _a(()=>o(e),this.controller,this.client),new _a(()=>o(t),this.controller,this.client)]}toReadableStream(){const e=this;let t;return _A({async start(){t=e[Symbol.asyncIterator]()},async pull(i){try{const{value:o,done:a}=await t.next();if(a)return i.close();const u=og(JSON.stringify(o)+`
`);i.enqueue(u)}catch(o){i.error(o)}},async cancel(){var i;await((i=t.return)===null||i===void 0?void 0:i.call(t))}})}}function Uk(n,e){return di(this,arguments,function*(){var i,o,a,u;if(!n.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new jn("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new jn("Attempted to iterate over a response with no body");const f=new Fk,m=new yf,h=TA(n.body);try{for(var v=!0,T=fi(Ok(h)),S;S=yield Ie(T.next()),i=S.done,!i;v=!0){u=S.value,v=!1;const I=u;for(const k of m.decode(I)){const O=f.decode(k);O&&(yield yield Ie(O))}}}catch(I){o={error:I}}finally{try{!v&&!i&&(a=T.return)&&(yield Ie(a.call(T)))}finally{if(o)throw o.error}}for(const I of m.flush()){const k=f.decode(I);k&&(yield yield Ie(k))}})}function Ok(n){return di(this,arguments,function*(){var t,i,o,a;let u=new Uint8Array;try{for(var f=!0,m=fi(n),h;h=yield Ie(m.next()),t=h.done,!t;f=!0){a=h.value,f=!1;const v=a;if(v==null)continue;const T=v instanceof ArrayBuffer?new Uint8Array(v):typeof v=="string"?og(v):v;let S=new Uint8Array(u.length+T.length);S.set(u),S.set(T,u.length),u=S;let I;for(;(I=Lk(u))!==-1;)yield yield Ie(u.slice(0,I)),u=u.slice(I)}}catch(v){i={error:v}}finally{try{!f&&!t&&(o=m.return)&&(yield Ie(o.call(m)))}finally{if(i)throw i.error}}u.length>0&&(yield yield Ie(u))})}class Fk{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,i,o]=Gk(e,":");return o.startsWith(" ")&&(o=o.substring(1)),t==="event"?this.event=o:t==="data"&&this.data.push(o),null}}function Gk(n,e){const t=n.indexOf(e);return t!==-1?[n.substring(0,t),e,n.substring(t+e.length)]:[n,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function Bk(n,e){const{response:t,requestLogID:i,retryOfRequestLogID:o,startTime:a}=e,u=await(async()=>{var f;if(e.options.stream)return fn(n).debug("response",t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller,n):_a.fromSSEResponse(t,e.controller,n);if(t.status===204)return null;if(e.options.__binaryResponse)return t;const m=t.headers.get("content-type"),h=(f=m==null?void 0:m.split(";")[0])===null||f===void 0?void 0:f.trim();return(h==null?void 0:h.includes("application/json"))||(h==null?void 0:h.endsWith("+json"))?t.headers.get("content-length")==="0"?void 0:await t.json():await t.text()})();return fn(n).debug(`[${i}] response parsed`,no({retryOfRequestLogID:o,url:t.url,status:t.status,body:u,durationMs:Date.now()-a})),u}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ag extends Promise{constructor(e,t,i=Bk){super(o=>{o(null)}),this.responsePromise=t,this.parseResponse=i,this.client=e}_thenUnwrap(e){return new ag(this.client,this.responsePromise,async(t,i)=>e(await this.parseResponse(t,i),i))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const IA=Symbol("brand.privateNullableHeaders");function*Hk(n){if(!n)return;if(IA in n){const{values:i,nulls:o}=n;yield*i.entries();for(const a of o)yield[a,null];return}let e=!1,t;n instanceof Headers?t=n.entries():nE(n)?t=n:(e=!0,t=Object.entries(n??{}));for(let i of t){const o=i[0];if(typeof o!="string")throw new TypeError("expected header name to be a string");const a=nE(i[1])?i[1]:[i[1]];let u=!1;for(const f of a)f!==void 0&&(e&&!u&&(u=!0,yield[o,null]),yield[o,f])}}const Xl=n=>{const e=new Headers,t=new Set;for(const i of n){const o=new Set;for(const[a,u]of Hk(i)){const f=a.toLowerCase();o.has(f)||(e.delete(a),o.add(f)),u===null?(e.delete(a),t.add(f)):(e.append(a,u),t.delete(f))}}return{[IA]:!0,values:e,nulls:t}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const qp=n=>{var e,t,i,o,a,u;if(typeof globalThis.process<"u")return(i=(t=(e=lb)===null||e===void 0?void 0:e[n])===null||t===void 0?void 0:t.trim())!==null&&i!==void 0?i:void 0;if(typeof globalThis.Deno<"u")return(u=(a=(o=globalThis.Deno.env)===null||o===void 0?void 0:o.get)===null||a===void 0?void 0:a.call(o,n))===null||u===void 0?void 0:u.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var bA;class vf{constructor(e){var t,i,o,a,u,f,m,{baseURL:h=qp("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:v=(t=qp("GEMINI_API_KEY"))!==null&&t!==void 0?t:null,apiVersion:T="v1beta"}=e,S=zd(e,["baseURL","apiKey","apiVersion"]);const I=Object.assign(Object.assign({apiKey:v,apiVersion:T},S),{baseURL:h||"https://generativelanguage.googleapis.com"});this.baseURL=I.baseURL,this.timeout=(i=I.timeout)!==null&&i!==void 0?i:vf.DEFAULT_TIMEOUT,this.logger=(o=I.logger)!==null&&o!==void 0?o:console;const k="warn";this.logLevel=k,this.logLevel=(u=(a=aE(I.logLevel,"ClientOptions.logLevel",this))!==null&&a!==void 0?a:aE(qp("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&u!==void 0?u:k,this.fetchOptions=I.fetchOptions,this.maxRetries=(f=I.maxRetries)!==null&&f!==void 0?f:2,this.fetch=(m=I.fetch)!==null&&m!==void 0?m:Sk(),this.encoder=Ck,this._options=I,this.apiKey=v,this.apiVersion=T,this.clientAdapter=I.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:t}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!t.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const t=Xl([e.headers]);if(!(t.values.has("authorization")||t.values.has("x-goog-api-key"))){if(this.apiKey)return Xl([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Xl([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([t,i])=>typeof i<"u").map(([t,i])=>{if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")return`${encodeURIComponent(t)}=${encodeURIComponent(i)}`;if(i===null)return`${encodeURIComponent(t)}=`;throw new jn(`Cannot stringify type ${typeof i}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${ha}`}defaultIdempotencyKey(){return`stainless-node-retry-${lk()}`}makeStatusError(e,t,i,o){return hn.generate(e,t,i,o)}buildURL(e,t,i){const o=!this.baseURLOverridden()&&i||this.baseURL,a=ck(e)?new URL(e):new URL(o+(o.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),u=this.defaultQuery();return hk(u)||(t=Object.assign(Object.assign({},u),t)),typeof t=="object"&&t&&!Array.isArray(t)&&(a.search=this.stringifyQuery(t)),a.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const t=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${t}`}}async prepareRequest(e,{url:t,options:i}){}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,i){return this.request(Promise.resolve(i).then(o=>Object.assign({method:e,path:t},o)))}request(e,t=null){return new ag(this,this.makeRequest(e,t,void 0))}async makeRequest(e,t,i){var o,a,u;const f=await e,m=(o=f.maxRetries)!==null&&o!==void 0?o:this.maxRetries;t==null&&(t=m),await this.prepareOptions(f);const{req:h,url:v,timeout:T}=await this.buildRequest(f,{retryCount:m-t});await this.prepareRequest(h,{url:v,options:f});const S="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),I=i===void 0?"":`, retryOf: ${i}`,k=Date.now();if(fn(this).debug(`[${S}] sending request`,no({retryOfRequestLogID:i,method:f.method,url:v,options:f,headers:h.headers})),!((a=f.signal)===null||a===void 0)&&a.aborted)throw new Tm;const O=new AbortController,P=await this.fetchWithTimeout(v,h,T,O).catch(_m),$=Date.now();if(P instanceof globalThis.Error){const X=`retrying, ${t} attempts remaining`;if(!((u=f.signal)===null||u===void 0)&&u.aborted)throw new Tm;const re=vm(P)||/timed? ?out/i.test(String(P)+("cause"in P?String(P.cause):""));if(t)return fn(this).info(`[${S}] connection ${re?"timed out":"failed"} - ${X}`),fn(this).debug(`[${S}] connection ${re?"timed out":"failed"} (${X})`,no({retryOfRequestLogID:i,url:v,durationMs:$-k,message:P.message})),this.retryRequest(f,t,i??S);throw fn(this).info(`[${S}] connection ${re?"timed out":"failed"} - error; no more retries left`),fn(this).debug(`[${S}] connection ${re?"timed out":"failed"} (error; no more retries left)`,no({retryOfRequestLogID:i,url:v,durationMs:$-k,message:P.message})),re?new cA:new gf({cause:P})}const ee=`[${S}${I}] ${h.method} ${v} ${P.ok?"succeeded":"failed"} with status ${P.status} in ${$-k}ms`;if(!P.ok){const X=await this.shouldRetry(P);if(t&&X){const D=`retrying, ${t} attempts remaining`;return await wk(P.body),fn(this).info(`${ee} - ${D}`),fn(this).debug(`[${S}] response error (${D})`,no({retryOfRequestLogID:i,url:P.url,status:P.status,headers:P.headers,durationMs:$-k})),this.retryRequest(f,t,i??S,P.headers)}const re=X?"error; no more retries left":"error; not retryable";fn(this).info(`${ee} - ${re}`);const ae=await P.text().catch(D=>_m(D).message),j=gk(ae),R=j?void 0:ae;throw fn(this).debug(`[${S}] response error (${re})`,no({retryOfRequestLogID:i,url:P.url,status:P.status,headers:P.headers,message:R,durationMs:Date.now()-k})),this.makeStatusError(P.status,j,R,P.headers)}return fn(this).info(ee),fn(this).debug(`[${S}] response start`,no({retryOfRequestLogID:i,url:P.url,status:P.status,headers:P.headers,durationMs:$-k})),{response:P,options:f,controller:O,requestLogID:S,retryOfRequestLogID:i,startTime:k}}async fetchWithTimeout(e,t,i,o){const a=t||{},{signal:u,method:f}=a,m=zd(a,["signal","method"]),h=this._makeAbort(o);u&&u.addEventListener("abort",h,{once:!0});const v=setTimeout(h,i),T=globalThis.ReadableStream&&m.body instanceof globalThis.ReadableStream||typeof m.body=="object"&&m.body!==null&&Symbol.asyncIterator in m.body,S=Object.assign(Object.assign(Object.assign({signal:o.signal},T?{duplex:"half"}:{}),{method:"GET"}),m);f&&(S.method=f.toUpperCase());try{return await this.fetch.call(void 0,e,S)}finally{clearTimeout(v)}}async shouldRetry(e){const t=e.headers.get("x-should-retry");return t==="true"?!0:t==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,t,i,o){var a;let u;const f=o==null?void 0:o.get("retry-after-ms");if(f){const h=parseFloat(f);Number.isNaN(h)||(u=h)}const m=o==null?void 0:o.get("retry-after");if(m&&!u){const h=parseFloat(m);Number.isNaN(h)?u=Date.parse(m)-Date.now():u=h*1e3}if(!(u&&0<=u&&u<60*1e3)){const h=(a=e.maxRetries)!==null&&a!==void 0?a:this.maxRetries;u=this.calculateDefaultRetryTimeoutMillis(t,h)}return await yk(u),this.makeRequest(e,t-1,i)}calculateDefaultRetryTimeoutMillis(e,t){const a=t-e,u=Math.min(.5*Math.pow(2,a),8),f=1-Math.random()*.25;return u*f*1e3}async buildRequest(e,{retryCount:t=0}={}){var i,o,a;const u=Object.assign({},e),{method:f,path:m,query:h,defaultBaseURL:v}=u,T=this.buildURL(m,h,v);"timeout"in u&&mk("timeout",u.timeout),u.timeout=(i=u.timeout)!==null&&i!==void 0?i:this.timeout;const{bodyHeaders:S,body:I}=this.buildBody({options:u}),k=await this.buildHeaders({options:e,method:f,bodyHeaders:S,retryCount:t});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:f,headers:k},u.signal&&{signal:u.signal}),globalThis.ReadableStream&&I instanceof globalThis.ReadableStream&&{duplex:"half"}),I&&{body:I}),(o=this.fetchOptions)!==null&&o!==void 0?o:{}),(a=u.fetchOptions)!==null&&a!==void 0?a:{}),url:T,timeout:u.timeout}}async buildHeaders({options:e,method:t,bodyHeaders:i,retryCount:o}){let a={};this.idempotencyHeader&&t!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=e.idempotencyKey);const u=await this.authHeaders(e);let f=Xl([a,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(o)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),Ek()),this._options.defaultHeaders,i,e.headers,u]);return this.validateHeaders(f),f.values}_makeAbort(e){return()=>e.abort()}buildBody({options:{body:e,headers:t}}){if(!e)return{bodyHeaders:void 0,body:void 0};const i=Xl([t]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&i.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:Ak(e)}:this.encoder({body:e,headers:i})}}vf.DEFAULT_TIMEOUT=6e4;class Yt extends vf{constructor(){super(...arguments),this.interactions=new xA(this)}}bA=Yt;Yt.GeminiNextGenAPIClient=bA;Yt.GeminiNextGenAPIClientError=jn;Yt.APIError=hn;Yt.APIConnectionError=gf;Yt.APIConnectionTimeoutError=cA;Yt.APIUserAbortError=Tm;Yt.NotFoundError=pA;Yt.ConflictError=mA;Yt.RateLimitError=yA;Yt.BadRequestError=dA;Yt.AuthenticationError=fA;Yt.InternalServerError=vA;Yt.PermissionDeniedError=hA;Yt.UnprocessableEntityError=gA;Yt.toFile=Nk;Yt.Interactions=xA;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function qk(n,e){const t={},i=d(n,["name"]);return i!=null&&p(t,["_url","name"],i),t}function zk(n,e){const t={},i=d(n,["name"]);return i!=null&&p(t,["_url","name"],i),t}function Yk(n,e){const t={},i=d(n,["sdkHttpResponse"]);return i!=null&&p(t,["sdkHttpResponse"],i),t}function Jk(n,e){const t={},i=d(n,["sdkHttpResponse"]);return i!=null&&p(t,["sdkHttpResponse"],i),t}function Kk(n,e,t){const i={};if(d(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const o=d(n,["tunedModelDisplayName"]);if(e!==void 0&&o!=null&&p(e,["displayName"],o),d(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const a=d(n,["epochCount"]);e!==void 0&&a!=null&&p(e,["tuningTask","hyperparameters","epochCount"],a);const u=d(n,["learningRateMultiplier"]);if(u!=null&&p(i,["tuningTask","hyperparameters","learningRateMultiplier"],u),d(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(d(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(d(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");if(d(n,["tuningMode"])!==void 0)throw new Error("tuningMode parameter is not supported in Gemini API.");if(d(n,["customBaseModel"])!==void 0)throw new Error("customBaseModel parameter is not supported in Gemini API.");const f=d(n,["batchSize"]);e!==void 0&&f!=null&&p(e,["tuningTask","hyperparameters","batchSize"],f);const m=d(n,["learningRate"]);if(e!==void 0&&m!=null&&p(e,["tuningTask","hyperparameters","learningRate"],m),d(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(d(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");if(d(n,["baseTeacherModel"])!==void 0)throw new Error("baseTeacherModel parameter is not supported in Gemini API.");if(d(n,["tunedTeacherModelSource"])!==void 0)throw new Error("tunedTeacherModelSource parameter is not supported in Gemini API.");if(d(n,["sftLossWeightMultiplier"])!==void 0)throw new Error("sftLossWeightMultiplier parameter is not supported in Gemini API.");if(d(n,["outputUri"])!==void 0)throw new Error("outputUri parameter is not supported in Gemini API.");if(d(n,["encryptionSpec"])!==void 0)throw new Error("encryptionSpec parameter is not supported in Gemini API.");return i}function $k(n,e,t){const i={};let o=d(t,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const j=d(n,["validationDataset"]);e!==void 0&&j!=null&&p(e,["supervisedTuningSpec"],zp(j))}else if(o==="PREFERENCE_TUNING"){const j=d(n,["validationDataset"]);e!==void 0&&j!=null&&p(e,["preferenceOptimizationSpec"],zp(j))}else if(o==="DISTILLATION"){const j=d(n,["validationDataset"]);e!==void 0&&j!=null&&p(e,["distillationSpec"],zp(j))}const a=d(n,["tunedModelDisplayName"]);e!==void 0&&a!=null&&p(e,["tunedModelDisplayName"],a);const u=d(n,["description"]);e!==void 0&&u!=null&&p(e,["description"],u);let f=d(t,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const j=d(n,["epochCount"]);e!==void 0&&j!=null&&p(e,["supervisedTuningSpec","hyperParameters","epochCount"],j)}else if(f==="PREFERENCE_TUNING"){const j=d(n,["epochCount"]);e!==void 0&&j!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],j)}else if(f==="DISTILLATION"){const j=d(n,["epochCount"]);e!==void 0&&j!=null&&p(e,["distillationSpec","hyperParameters","epochCount"],j)}let m=d(t,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const j=d(n,["learningRateMultiplier"]);e!==void 0&&j!=null&&p(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],j)}else if(m==="PREFERENCE_TUNING"){const j=d(n,["learningRateMultiplier"]);e!==void 0&&j!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],j)}else if(m==="DISTILLATION"){const j=d(n,["learningRateMultiplier"]);e!==void 0&&j!=null&&p(e,["distillationSpec","hyperParameters","learningRateMultiplier"],j)}let h=d(t,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const j=d(n,["exportLastCheckpointOnly"]);e!==void 0&&j!=null&&p(e,["supervisedTuningSpec","exportLastCheckpointOnly"],j)}else if(h==="PREFERENCE_TUNING"){const j=d(n,["exportLastCheckpointOnly"]);e!==void 0&&j!=null&&p(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],j)}else if(h==="DISTILLATION"){const j=d(n,["exportLastCheckpointOnly"]);e!==void 0&&j!=null&&p(e,["distillationSpec","exportLastCheckpointOnly"],j)}let v=d(t,["config","method"]);if(v===void 0&&(v="SUPERVISED_FINE_TUNING"),v==="SUPERVISED_FINE_TUNING"){const j=d(n,["adapterSize"]);e!==void 0&&j!=null&&p(e,["supervisedTuningSpec","hyperParameters","adapterSize"],j)}else if(v==="PREFERENCE_TUNING"){const j=d(n,["adapterSize"]);e!==void 0&&j!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],j)}else if(v==="DISTILLATION"){const j=d(n,["adapterSize"]);e!==void 0&&j!=null&&p(e,["distillationSpec","hyperParameters","adapterSize"],j)}let T=d(t,["config","method"]);if(T===void 0&&(T="SUPERVISED_FINE_TUNING"),T==="SUPERVISED_FINE_TUNING"){const j=d(n,["tuningMode"]);e!==void 0&&j!=null&&p(e,["supervisedTuningSpec","tuningMode"],j)}const S=d(n,["customBaseModel"]);e!==void 0&&S!=null&&p(e,["customBaseModel"],S);let I=d(t,["config","method"]);if(I===void 0&&(I="SUPERVISED_FINE_TUNING"),I==="SUPERVISED_FINE_TUNING"){const j=d(n,["batchSize"]);e!==void 0&&j!=null&&p(e,["supervisedTuningSpec","hyperParameters","batchSize"],j)}let k=d(t,["config","method"]);if(k===void 0&&(k="SUPERVISED_FINE_TUNING"),k==="SUPERVISED_FINE_TUNING"){const j=d(n,["learningRate"]);e!==void 0&&j!=null&&p(e,["supervisedTuningSpec","hyperParameters","learningRate"],j)}const O=d(n,["labels"]);e!==void 0&&O!=null&&p(e,["labels"],O);const P=d(n,["beta"]);e!==void 0&&P!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","beta"],P);const $=d(n,["baseTeacherModel"]);e!==void 0&&$!=null&&p(e,["distillationSpec","baseTeacherModel"],$);const ee=d(n,["tunedTeacherModelSource"]);e!==void 0&&ee!=null&&p(e,["distillationSpec","tunedTeacherModelSource"],ee);const X=d(n,["sftLossWeightMultiplier"]);e!==void 0&&X!=null&&p(e,["distillationSpec","hyperParameters","sftLossWeightMultiplier"],X);const re=d(n,["outputUri"]);e!==void 0&&re!=null&&p(e,["outputUri"],re);const ae=d(n,["encryptionSpec"]);return e!==void 0&&ae!=null&&p(e,["encryptionSpec"],ae),i}function jk(n,e){const t={},i=d(n,["baseModel"]);i!=null&&p(t,["baseModel"],i);const o=d(n,["preTunedModel"]);o!=null&&p(t,["preTunedModel"],o);const a=d(n,["trainingDataset"]);a!=null&&oD(a);const u=d(n,["config"]);return u!=null&&Kk(u,t),t}function Qk(n,e){const t={},i=d(n,["baseModel"]);i!=null&&p(t,["baseModel"],i);const o=d(n,["preTunedModel"]);o!=null&&p(t,["preTunedModel"],o);const a=d(n,["trainingDataset"]);a!=null&&aD(a,t,e);const u=d(n,["config"]);return u!=null&&$k(u,t,e),t}function Wk(n,e){const t={},i=d(n,["name"]);return i!=null&&p(t,["_url","name"],i),t}function Xk(n,e){const t={},i=d(n,["name"]);return i!=null&&p(t,["_url","name"],i),t}function Zk(n,e,t){const i={},o=d(n,["pageSize"]);e!==void 0&&o!=null&&p(e,["_query","pageSize"],o);const a=d(n,["pageToken"]);e!==void 0&&a!=null&&p(e,["_query","pageToken"],a);const u=d(n,["filter"]);return e!==void 0&&u!=null&&p(e,["_query","filter"],u),i}function eD(n,e,t){const i={},o=d(n,["pageSize"]);e!==void 0&&o!=null&&p(e,["_query","pageSize"],o);const a=d(n,["pageToken"]);e!==void 0&&a!=null&&p(e,["_query","pageToken"],a);const u=d(n,["filter"]);return e!==void 0&&u!=null&&p(e,["_query","filter"],u),i}function tD(n,e){const t={},i=d(n,["config"]);return i!=null&&Zk(i,t),t}function nD(n,e){const t={},i=d(n,["config"]);return i!=null&&eD(i,t),t}function iD(n,e){const t={},i=d(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const o=d(n,["nextPageToken"]);o!=null&&p(t,["nextPageToken"],o);const a=d(n,["tunedModels"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(f=>RA(f))),p(t,["tuningJobs"],u)}return t}function sD(n,e){const t={},i=d(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const o=d(n,["nextPageToken"]);o!=null&&p(t,["nextPageToken"],o);const a=d(n,["tuningJobs"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(f=>Am(f))),p(t,["tuningJobs"],u)}return t}function rD(n,e){const t={},i=d(n,["name"]);i!=null&&p(t,["model"],i);const o=d(n,["name"]);return o!=null&&p(t,["endpoint"],o),t}function oD(n,e){const t={};if(d(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(d(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=d(n,["examples"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),p(t,["examples","examples"],o)}return t}function aD(n,e,t){const i={};let o=d(t,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const u=d(n,["gcsUri"]);e!==void 0&&u!=null&&p(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(o==="PREFERENCE_TUNING"){const u=d(n,["gcsUri"]);e!==void 0&&u!=null&&p(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}else if(o==="DISTILLATION"){const u=d(n,["gcsUri"]);e!==void 0&&u!=null&&p(e,["distillationSpec","promptDatasetUri"],u)}let a=d(t,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const u=d(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&p(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(a==="PREFERENCE_TUNING"){const u=d(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&p(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}else if(a==="DISTILLATION"){const u=d(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&p(e,["distillationSpec","promptDatasetUri"],u)}if(d(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function RA(n,e){const t={},i=d(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const o=d(n,["name"]);o!=null&&p(t,["name"],o);const a=d(n,["state"]);a!=null&&p(t,["state"],YS(a));const u=d(n,["createTime"]);u!=null&&p(t,["createTime"],u);const f=d(n,["tuningTask","startTime"]);f!=null&&p(t,["startTime"],f);const m=d(n,["tuningTask","completeTime"]);m!=null&&p(t,["endTime"],m);const h=d(n,["updateTime"]);h!=null&&p(t,["updateTime"],h);const v=d(n,["description"]);v!=null&&p(t,["description"],v);const T=d(n,["baseModel"]);T!=null&&p(t,["baseModel"],T);const S=d(n,["_self"]);return S!=null&&p(t,["tunedModel"],rD(S)),t}function Am(n,e){const t={},i=d(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const o=d(n,["name"]);o!=null&&p(t,["name"],o);const a=d(n,["state"]);a!=null&&p(t,["state"],YS(a));const u=d(n,["createTime"]);u!=null&&p(t,["createTime"],u);const f=d(n,["startTime"]);f!=null&&p(t,["startTime"],f);const m=d(n,["endTime"]);m!=null&&p(t,["endTime"],m);const h=d(n,["updateTime"]);h!=null&&p(t,["updateTime"],h);const v=d(n,["error"]);v!=null&&p(t,["error"],v);const T=d(n,["description"]);T!=null&&p(t,["description"],T);const S=d(n,["baseModel"]);S!=null&&p(t,["baseModel"],S);const I=d(n,["tunedModel"]);I!=null&&p(t,["tunedModel"],I);const k=d(n,["preTunedModel"]);k!=null&&p(t,["preTunedModel"],k);const O=d(n,["supervisedTuningSpec"]);O!=null&&p(t,["supervisedTuningSpec"],O);const P=d(n,["preferenceOptimizationSpec"]);P!=null&&p(t,["preferenceOptimizationSpec"],P);const $=d(n,["distillationSpec"]);$!=null&&p(t,["distillationSpec"],$);const ee=d(n,["tuningDataStats"]);ee!=null&&p(t,["tuningDataStats"],ee);const X=d(n,["encryptionSpec"]);X!=null&&p(t,["encryptionSpec"],X);const re=d(n,["partnerModelTuningSpec"]);re!=null&&p(t,["partnerModelTuningSpec"],re);const ae=d(n,["customBaseModel"]);ae!=null&&p(t,["customBaseModel"],ae);const j=d(n,["experiment"]);j!=null&&p(t,["experiment"],j);const R=d(n,["labels"]);R!=null&&p(t,["labels"],R);const M=d(n,["outputUri"]);M!=null&&p(t,["outputUri"],M);const D=d(n,["pipelineJob"]);D!=null&&p(t,["pipelineJob"],D);const U=d(n,["serviceAccount"]);U!=null&&p(t,["serviceAccount"],U);const L=d(n,["tunedModelDisplayName"]);L!=null&&p(t,["tunedModelDisplayName"],L);const B=d(n,["veoTuningSpec"]);return B!=null&&p(t,["veoTuningSpec"],B),t}function lD(n,e){const t={},i=d(n,["sdkHttpResponse"]);i!=null&&p(t,["sdkHttpResponse"],i);const o=d(n,["name"]);o!=null&&p(t,["name"],o);const a=d(n,["metadata"]);a!=null&&p(t,["metadata"],a);const u=d(n,["done"]);u!=null&&p(t,["done"],u);const f=d(n,["error"]);return f!=null&&p(t,["error"],f),t}function zp(n,e){const t={},i=d(n,["gcsUri"]);i!=null&&p(t,["validationDatasetUri"],i);const o=d(n,["vertexDatasetResource"]);return o!=null&&p(t,["validationDatasetUri"],o),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class uD extends Es{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new _o(gs.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(t),t),this.get=async t=>await this.getInternal(t),this.tune=async t=>{var i;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const o={tunedModelName:t.baseModel};!((i=t.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(o.checkpointId=t.config.preTunedModelCheckpointId);const a=Object.assign(Object.assign({},t),{preTunedModel:o});return a.baseModel=void 0,await this.tuneInternal(a)}else{const o=Object.assign({},t);return await this.tuneInternal(o)}else{const o=Object.assign({},t),a=await this.tuneMldevInternal(o);let u="";return a.metadata!==void 0&&a.metadata.tunedModel!==void 0?u=a.metadata.tunedModel:a.name!==void 0&&a.name.includes("/operations/")&&(u=a.name.split("/operations/")[0]),{name:u,state:cm.JOB_STATE_QUEUED}}}}async getInternal(e){var t,i,o,a;let u,f="",m={};if(this.apiClient.isVertexAI()){const h=Xk(e);return f=he("{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>Am(v))}else{const h=Wk(e);return f=he("{name}",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>RA(v))}}async listInternal(e){var t,i,o,a;let u,f="",m={};if(this.apiClient.isVertexAI()){const h=nD(e);return f=he("tuningJobs",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=sD(v),S=new LT;return Object.assign(S,T),S})}else{const h=tD(e);return f=he("tunedModels",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=iD(v),S=new LT;return Object.assign(S,T),S})}}async cancel(e){var t,i,o,a;let u,f="",m={};if(this.apiClient.isVertexAI()){const h=zk(e);return f=he("{name}:cancel",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=Jk(v),S=new VT;return Object.assign(S,T),S})}else{const h=qk(e);return f=he("{name}:cancel",h._url),m=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),u.then(v=>{const T=Yk(v),S=new VT;return Object.assign(S,T),S})}}async tuneInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI()){const f=Qk(e,e);return a=he("tuningJobs",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:m.headers},v})),o.then(m=>Am(m))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,i;let o,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=jk(e);return a=he("tunedModels",f._url),u=f._query,delete f._url,delete f._query,o=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:m.headers},v})),o.then(m=>lD(m))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class cD{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const dD=1024*1024*8,fD=3,hD=1e3,pD=2,Jd="x-goog-upload-status";async function mD(n,e,t){var i;const o=await NA(n,e,t),a=await(o==null?void 0:o.json());if(((i=o==null?void 0:o.headers)===null||i===void 0?void 0:i[Jd])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return a.file}async function gD(n,e,t){var i;const o=await NA(n,e,t),a=await(o==null?void 0:o.json());if(((i=o==null?void 0:o.headers)===null||i===void 0?void 0:i[Jd])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const u=FS(a),f=new eg;return Object.assign(f,u),f}async function NA(n,e,t){var i,o;let a=0,u=0,f=new fm(new Response),m="upload";for(a=n.size;u<a;){const h=Math.min(dD,a-u),v=n.slice(u,u+h);u+h>=a&&(m+=", finalize");let T=0,S=hD;for(;T<fD&&(f=await t.request({path:"",body:v,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":m,"X-Goog-Upload-Offset":String(u),"Content-Length":String(h)}}}),!(!((i=f==null?void 0:f.headers)===null||i===void 0)&&i[Jd]));)T++,await vD(S),S=S*pD;if(u+=h,((o=f==null?void 0:f.headers)===null||o===void 0?void 0:o[Jd])!=="active")break;if(a<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return f}async function yD(n){return{size:n.size,type:n.type}}function vD(n){return new Promise(e=>setTimeout(e,n))}class _D{async upload(e,t,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await mD(e,t,i)}async uploadToFileSearchStore(e,t,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await gD(e,t,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await yD(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class TD{create(e,t,i){return new ED(e,t,i)}}class ED{constructor(e,t,i){this.url=e,this.headers=t,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const uE="x-goog-api-key";class SD{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(e.get(uE)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(uE,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const AD="gl-node/";class wD{get interactions(){var e;if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const t=this.httpOptions;t!=null&&t.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const i=new Yt({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:t==null?void 0:t.timeout,maxRetries:(e=t==null?void 0:t.retryOptions)===null||e===void 0?void 0:e.attempts});return this._interactions=i.interactions,this._interactions}constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const i=fb(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const o=new SD(this.apiKey);this.apiClient=new y2({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:AD+"web",uploader:new _D,downloader:new cD}),this.models=new V2(this.apiClient),this.live=new N2(this.apiClient,o,new TD),this.batches=new HR(this.apiClient),this.chats=new AN(this.models,this.apiClient),this.caches=new TN(this.apiClient),this.files=new LN(this.apiClient),this.operations=new U2(this.apiClient),this.authTokens=new Z2(this.apiClient),this.tunings=new uD(this.apiClient),this.fileSearchStores=new ak(this.apiClient)}}const To=new wD({apiKey:"AIzaSyA4_p3gpwtcg1OamOhJD8zBnGmUYlQG82E"}),CD={type:de.OBJECT,properties:{coinName:{type:de.STRING,description:"Name of the cryptocurrency pair, e.g. BTC/USDT"},timeframe:{type:de.STRING,description:"Chart timeframe, e.g. 4H, 1D"},trend:{type:de.STRING,enum:[ui.BULLISH,ui.BEARISH,ui.NEUTRAL],description:"Current market trend"},patterns:{type:de.ARRAY,items:{type:de.STRING},description:"List of identified chart patterns"},keyLevels:{type:de.OBJECT,properties:{support:{type:de.ARRAY,items:{type:de.STRING},description:"List of support price levels"},resistance:{type:de.ARRAY,items:{type:de.STRING},description:"List of resistance price levels"}},required:["support","resistance"]},assessment:{type:de.STRING,description:"A natural, human-like paragraph describing the technical analysis, context, and potential moves. Do not use bullet points."},confidence:{type:de.NUMBER,description:"Confidence score from 0 to 100"}},required:["coinName","timeframe","trend","patterns","keyLevels","assessment","confidence"]},xD={type:de.OBJECT,properties:{sentiment:{type:de.STRING,enum:["Bullish","Bearish","Mixed"]},marketMood:{type:de.STRING,description:"Short descriptive phrase e.g. 'Bitcoin Dominance Squeeze'"},topPerformers:{type:de.ARRAY,items:{type:de.OBJECT,properties:{ticker:{type:de.STRING},change:{type:de.STRING,description:"Percentage change e.g. +5.2%"}},required:["ticker","change"]}},laggards:{type:de.ARRAY,items:{type:de.OBJECT,properties:{ticker:{type:de.STRING},change:{type:de.STRING,description:"Percentage change e.g. -2.1%"}},required:["ticker","change"]}},summary:{type:de.STRING,description:"Money flow observation"},socialPost:{type:de.STRING,description:"Full social media draft"}},required:["sentiment","marketMood","topPerformers","laggards","summary","socialPost"]},ID={type:de.OBJECT,properties:{topic:{type:de.STRING,description:"The topic being analyzed"},impactLevel:{type:de.STRING,enum:["High","Medium","Low"],description:"Potential market impact"},marketSentiment:{type:de.STRING,enum:["Hawkish","Dovish","Neutral","Volatile"],description:"Sentiment bias"},affectedAssets:{type:de.ARRAY,items:{type:de.STRING},description:"List of up to 3 tickers affected"},tradingStrategy:{type:de.STRING,description:"Short actionable strategy directive"},keyTakeaway:{type:de.STRING,description:"One sentence bottom line for traders"},socialPost:{type:de.STRING,description:"The final social media post text"}},required:["topic","impactLevel","marketSentiment","affectedAssets","tradingStrategy","keyTakeaway","socialPost"]},bD={type:de.OBJECT,properties:{marketOverview:{type:de.STRING,description:"A 2-sentence summary of the overall market mood."},news:{type:de.ARRAY,items:{type:de.OBJECT,properties:{title:{type:de.STRING},summary:{type:de.STRING},sentiment:{type:de.STRING,enum:["Bullish","Bearish","Neutral"]},timestamp:{type:de.STRING,description:"Relative time e.g. '2h ago'"}},required:["title","summary","sentiment","timestamp"]}},upcomingEvents:{type:de.ARRAY,items:{type:de.OBJECT,properties:{event:{type:de.STRING},date:{type:de.STRING},importance:{type:de.STRING,enum:["High","Medium","Low"]},expectedImpact:{type:de.STRING}},required:["event","date","importance","expectedImpact"]}}},required:["marketOverview","news","upcomingEvents"]},RD={type:de.OBJECT,properties:{coin:{type:de.STRING,description:"Ticker"},timeframe:{type:de.STRING,description:"Timeframe"},direction:{type:de.STRING,enum:["Long","Short"]},entry:{type:de.STRING},stopLoss:{type:de.STRING},stats:{type:de.OBJECT,properties:{winRate:{type:de.STRING},netPnL:{type:de.STRING},winLossRatio:{type:de.STRING},confidenceScore:{type:de.STRING,description:"The confidence score or signal strength extracted from the image"}},required:["winRate","netPnL","winLossRatio","confidenceScore"]},targets:{type:de.ARRAY,items:{type:de.STRING}},formattedPost:{type:de.STRING,description:"The fully formatted social post string"}},required:["coin","timeframe","direction","entry","stopLoss","stats","targets","formattedPost"]},ND={type:de.OBJECT,properties:{ticker:{type:de.STRING,description:"The tickers found (e.g. 'BTC & ETH')"},gainDescription:{type:de.STRING,description:"Short summary of wins including profit % (e.g. 'All Targets Hit (+15%)')"},numberOfTargetsHit:{type:de.INTEGER,description:"Integer representing max TP hit (0-4)"},totalProfitPercentage:{type:de.STRING,description:"The ROI percentage string (e.g. +145%)"},socialPost:{type:de.STRING,description:"The celebratory social media post"}},required:["ticker","gainDescription","numberOfTargetsHit","totalProfitPercentage","socialPost"]},Ua=n=>n.replace(/```json/g,"").replace(/```/g,"").trim(),MD=async(n,e)=>{try{const t=n.split(",")[1]||n,o=(await To.models.generateContent({model:vo,contents:{parts:[{inlineData:{mimeType:e,data:t}},{text:JI}]},config:{responseMimeType:"application/json",responseSchema:CD,systemInstruction:"You are an expert crypto day trader. You speak concisely using technical terminology. You avoid fluff, robotic transitions, and stating the obvious. Your analysis is sharp, confident, and actionable.",temperature:.3}})).text;if(!o)throw new Error("No analysis generated from the model.");return JSON.parse(Ua(o))}catch(t){throw console.error("Gemini Analysis Failed:",t),new Error("Failed to analyze the chart. Please try a clearer image or try again later.")}},kD=async(n,e)=>{try{const t=n.split(",")[1]||n,o=(await To.models.generateContent({model:vo,contents:{parts:[{inlineData:{mimeType:e,data:t}},{text:KI}]},config:{responseMimeType:"application/json",responseSchema:xD,systemInstruction:"You are a crypto market analyst. You analyze heatmaps and price lists to determine overall sentiment and flow. You are concise and professional.",temperature:.4}})).text;if(!o)throw new Error("No analysis generated.");return JSON.parse(Ua(o))}catch(t){throw console.error("Market Overview Analysis Failed:",t),new Error("Failed to analyze market heatmap.")}},DD=async n=>{try{const t=(await To.models.generateContent({model:vo,contents:{parts:[{text:`Topic: ${n}. 

 ${$I}`}]},config:{responseMimeType:"application/json",responseSchema:ID,systemInstruction:"You are a cynical, experienced macro trader. You analyze economic news for its liquidity impact. You are concise.",temperature:.4}})).text;if(!t)throw new Error("No news analysis generated.");return JSON.parse(Ua(t))}catch(e){throw console.error("News Analysis Failed:",e),new Error("Failed to analyze topic.")}},PD=async()=>{var n,e,t,i;try{const a=`Current Date and Time: ${new Date().toLocaleString("en-US",{timeZoneName:"short"})}.

${jI}`,u=await To.models.generateContent({model:vo,contents:{parts:[{text:a}]},config:{tools:[{googleSearch:{}}],responseMimeType:"application/json",responseSchema:bD}}),f=u.text;if(!f)throw new Error("No market pulse generated.");const m=((i=(t=(e=(n=u.candidates)==null?void 0:n[0])==null?void 0:e.groundingMetadata)==null?void 0:t.groundingChunks)==null?void 0:i.map(h=>{var v,T;return{title:((v=h.web)==null?void 0:v.title)||"Source",uri:((T=h.web)==null?void 0:T.uri)||""}}).filter(h=>h.uri))||[];return{data:JSON.parse(Ua(f)),sources:m}}catch(o){throw console.error("Market Pulse Failed:",o),new Error("Failed to fetch market data. Please try again.")}},LD=async n=>{try{const t=(await To.models.generateContent({model:vo,contents:{parts:[{text:`${QI}

${JSON.stringify(n)}`}]},config:{temperature:.7}})).text;if(!t)throw new Error("Failed to generate post.");return t.trim()}catch(e){throw console.error("Binance Post Generation Failed:",e),new Error("Failed to create post.")}},VD=async(n,e)=>{try{const t=n.split(",")[1]||n,o=(await To.models.generateContent({model:vo,contents:{parts:[{inlineData:{mimeType:e,data:t}},{text:WI}]},config:{responseMimeType:"application/json",responseSchema:RD,systemInstruction:"You are a specialized trading bot that extracts numerical data from chart screenshots and formats them into signals.",temperature:.1}})).text;if(!o)throw new Error("No signal analysis generated.");return JSON.parse(Ua(o))}catch(t){throw console.error("Signal Analysis Failed:",t),new Error("Failed to extract signal data. Ensure metrics are visible on the chart.")}},UD=async n=>{try{const e=n.map(o=>({inlineData:{mimeType:o.mimeType,data:o.base64.split(",")[1]||o.base64}})),i=(await To.models.generateContent({model:vo,contents:{parts:[...e,{text:XI}]},config:{responseMimeType:"application/json",responseSchema:ND,systemInstruction:"You are a crypto social media manager. Your task is to verify wins. PRIORITIZE extracting data from 'Long Printed' or 'Short Printed' labels if visible. You must be PRECISE with TP levels and ACCURATE with Profit %. You must write UNIQUE, non-repetitive captions by picking different tones/vibes.",temperature:.8}})).text;if(!i)throw new Error("No analysis generated.");return JSON.parse(Ua(i))}catch(e){throw console.error("Praise Analysis Failed:",e),new Error("Failed to generate hype post.")}},OD=()=>{var ge;const[n,e]=be.useState(""),[t,i]=be.useState(!1),[o,a]=be.useState(null),[u,f]=be.useState(!1),[m,h]=be.useState(null),[v,T]=be.useState([]),[S,I]=be.useState(!0),[k,O]=be.useState(null),[P,$]=be.useState(null),[ee,X]=be.useState(!1),[re,ae]=be.useState(null),[j,R]=be.useState(!1);be.useEffect(()=>{M()},[]);const M=async()=>{I(!0),O(null);try{const{data:fe,sources:Y}=await PD();h(fe),T(Y)}catch{O("Failed to load market data.")}finally{I(!1)}},D=async fe=>{if(fe.preventDefault(),!!n.trim()){i(!0),a(null);try{const Y=await DD(n);a(Y)}catch(Y){console.error(Y),alert("Failed to analyze topic. Please try again.")}finally{i(!1)}}},U=async()=>{if(o)try{await navigator.clipboard.writeText(`${o.socialPost}

#Macro #Crypto
${Ia}`),f(!0),setTimeout(()=>f(!1),2e3)}catch(fe){console.error("Failed to copy",fe)}},L=async fe=>{$(fe),ae(null),X(!0);try{const Y=await LD(fe);ae(Y)}catch(Y){console.error(Y),ae("Error generating post. Please try again.")}finally{X(!1)}},B=async()=>{if(re)try{await navigator.clipboard.writeText(re),R(!0),setTimeout(()=>R(!1),2e3)}catch(fe){console.error(fe)}},N=()=>{$(null),ae(null)};return A.jsxs("div",{className:"max-w-7xl mx-auto space-y-16 relative pb-12 animate-slide-up",children:[A.jsxs("section",{children:[A.jsxs("div",{className:"flex justify-between items-center mb-8 px-2",children:[A.jsxs("h2",{className:"text-3xl font-bold text-slate-800 dark:text-white flex items-center gap-3",children:[A.jsx("span",{className:"text-3xl",children:""})," Global Market Pulse"]}),A.jsx(vt,{variant:"outline",onClick:M,isLoading:S,className:"text-xs uppercase tracking-wider",children:"Live Update"})]}),S?A.jsxs("div",{className:"glass-panel rounded-3xl p-20 text-center",children:[A.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-4 border-cyan-500 border-t-transparent mb-6"}),A.jsx("p",{className:"text-cyan-600 dark:text-cyan-200 font-medium animate-pulse",children:"Scanning institutional data sources..."})]}):k?A.jsxs("div",{className:"glass-panel border-rose-500/30 bg-rose-100 dark:bg-rose-500/5 p-8 rounded-3xl text-center text-rose-600 dark:text-rose-200",children:[k,A.jsx("div",{className:"mt-4",children:A.jsx(vt,{onClick:M,variant:"outline",className:"border-rose-500/50 hover:bg-rose-500/10",children:"Try Again"})})]}):m?A.jsxs("div",{className:"space-y-10",children:[A.jsxs("div",{className:"glass-panel p-10 rounded-3xl bg-gradient-to-r from-indigo-50 to-slate-100 dark:from-indigo-900/60 dark:to-slate-900/60 border-indigo-200 dark:border-indigo-500/30 relative overflow-hidden group",children:[A.jsx("div",{className:"absolute top-0 right-0 w-80 h-80 bg-indigo-500/10 dark:bg-indigo-500/20 rounded-full blur-[100px] -mr-20 -mt-20 pointer-events-none group-hover:bg-indigo-500/20 dark:group-hover:bg-indigo-500/30 transition-colors duration-1000"}),A.jsx("h3",{className:"text-indigo-600 dark:text-indigo-300 text-[10px] font-bold uppercase tracking-[0.2em] mb-4 relative z-10",children:"Market Mood"}),A.jsx("p",{className:"text-2xl text-slate-800 dark:text-white font-medium leading-relaxed relative z-10 max-w-4xl",children:m.marketOverview})]}),A.jsxs("div",{children:[A.jsxs("h3",{className:"text-xl font-bold text-slate-800 dark:text-white mb-6 flex items-center gap-2 px-2",children:[" Breaking Headlines ",A.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider text-slate-500 bg-black/5 dark:bg-white/5 px-2 py-0.5 rounded ml-2 border border-black/5 dark:border-white/5",children:"Click to post"})]}),A.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:m.news.map((fe,Y)=>A.jsxs("div",{onClick:()=>L(fe),className:"glass-panel rounded-2xl p-6 hover:border-cyan-500/40 hover:bg-white dark:hover:bg-slate-800/80 transition-all cursor-pointer group flex flex-col h-full hover:-translate-y-1 duration-300 hover:shadow-[0_0_20px_rgba(6,182,212,0.1)]",children:[A.jsxs("div",{className:"flex justify-between items-start mb-5",children:[A.jsx("span",{className:`text-[10px] font-bold px-2.5 py-1 rounded uppercase tracking-wider border ${fe.sentiment==="Bullish"?"bg-emerald-100 dark:bg-emerald-500/10 text-emerald-600 dark:text-emerald-400 border-emerald-500/30":fe.sentiment==="Bearish"?"bg-rose-100 dark:bg-rose-500/10 text-rose-600 dark:text-rose-400 border-rose-500/30":"bg-slate-100 dark:bg-slate-500/10 text-slate-500 dark:text-slate-400 border-slate-500/30"}`,children:fe.sentiment}),A.jsx("span",{className:"text-[10px] text-slate-500 font-mono font-bold",children:fe.timestamp})]}),A.jsx("h4",{className:"text-slate-800 dark:text-white font-bold mb-3 group-hover:text-cyan-600 dark:group-hover:text-cyan-300 transition-colors line-clamp-2 text-lg tracking-tight",children:fe.title}),A.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 leading-relaxed mb-6 flex-grow line-clamp-3 font-light",children:fe.summary}),A.jsx("div",{className:"pt-4 border-t border-slate-200 dark:border-white/5 flex justify-end",children:A.jsxs("span",{className:"text-[10px] font-bold text-cyan-600 dark:text-cyan-400 opacity-0 group-hover:opacity-100 transition-all transform translate-y-2 group-hover:translate-y-0 flex items-center gap-1 uppercase tracking-wider",children:["GENERATE POST ",A.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 8l4 4m0 0l-4 4m4-4H3"})})]})})]},Y))})]}),A.jsxs("div",{children:[A.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white mb-6 flex items-center gap-2 px-2",children:" Calendar (7 Days)"}),A.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:m.upcomingEvents.map((fe,Y)=>A.jsxs("div",{onClick:()=>L(fe),className:"glass-panel rounded-2xl p-5 hover:border-fuchsia-500/40 hover:bg-white dark:hover:bg-slate-800/80 transition-all cursor-pointer group flex gap-5 items-center hover:shadow-[0_0_20px_rgba(217,70,239,0.1)]",children:[A.jsx("div",{className:"bg-slate-100 dark:bg-slate-900 rounded-xl p-3 text-center min-w-[70px] flex flex-col justify-center border border-slate-200 dark:border-white/5 group-hover:border-fuchsia-500/30 transition-colors",children:A.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400 font-bold block uppercase tracking-wider",children:fe.date.split(" ")[0]||"DATE"})}),A.jsxs("div",{className:"flex-1",children:[A.jsx("h4",{className:"text-slate-800 dark:text-white font-bold text-sm mb-1.5 group-hover:text-fuchsia-600 dark:group-hover:text-fuchsia-300 transition-colors",children:fe.event}),A.jsx("div",{className:"flex gap-2 items-center",children:A.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded border uppercase font-bold tracking-wider ${fe.importance==="High"?"border-rose-500/30 text-rose-600 dark:text-rose-400 bg-rose-100 dark:bg-rose-500/10":fe.importance==="Medium"?"border-amber-500/30 text-amber-600 dark:text-amber-400 bg-amber-100 dark:bg-amber-500/10":"border-slate-500/30 text-slate-600 dark:text-slate-400 bg-slate-100 dark:bg-slate-500/10"}`,children:fe.importance})})]})]},Y))})]})]}):null]}),A.jsxs("section",{className:"mt-20",children:[A.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-white mb-8 flex items-center gap-2 px-2",children:" Deep Dive Research"}),A.jsx("div",{className:"glass-panel rounded-3xl p-3 mb-10 flex items-center",children:A.jsxs("form",{onSubmit:D,className:"flex gap-3 w-full",children:[A.jsx("input",{type:"text",value:n,onChange:fe=>e(fe.target.value),placeholder:"Query specific narratives (e.g. 'Ethereum ETF flows', 'Solana Network congestion')",className:"flex-1 bg-transparent border-none rounded-xl px-6 py-4 text-slate-800 dark:text-white placeholder-slate-500 focus:ring-0 text-lg font-light",disabled:t}),A.jsx(vt,{type:"submit",isLoading:t,disabled:!n.trim(),className:"rounded-xl shadow-none px-10",children:"Analyze"})]})}),o&&A.jsxs("div",{className:"space-y-6 animate-slide-up glass-panel p-10 rounded-3xl",children:[A.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:[A.jsxs("div",{className:"bg-slate-100 dark:bg-slate-900/50 p-6 rounded-2xl border border-slate-200 dark:border-white/5 text-center",children:[A.jsx("span",{className:"text-slate-500 text-[10px] uppercase tracking-[0.2em] font-bold",children:"Impact"}),A.jsxs("div",{className:`text-2xl font-black mt-2 ${o.impactLevel==="High"?"text-rose-600 dark:text-rose-400":o.impactLevel==="Medium"?"text-amber-600 dark:text-amber-400":"text-slate-500 dark:text-slate-300"}`,children:[o.impactLevel," "]})]}),A.jsxs("div",{className:"bg-slate-100 dark:bg-slate-900/50 p-6 rounded-2xl border border-slate-200 dark:border-white/5 text-center",children:[A.jsx("span",{className:"text-slate-500 text-[10px] uppercase tracking-[0.2em] font-bold",children:"Bias"}),A.jsx("div",{className:"text-2xl font-black mt-2 text-indigo-600 dark:text-indigo-400",children:o.marketSentiment})]}),A.jsxs("div",{className:"col-span-2 bg-slate-100 dark:bg-slate-900/50 p-6 rounded-2xl border border-slate-200 dark:border-white/5 flex flex-col justify-center",children:[A.jsx("span",{className:"text-slate-500 text-[10px] uppercase tracking-[0.2em] font-bold mb-3",children:"Assets in Play"}),A.jsx("div",{className:"flex flex-wrap gap-2",children:((ge=o.affectedAssets)==null?void 0:ge.map((fe,Y)=>A.jsx("span",{className:"px-3 py-1 bg-slate-200 dark:bg-slate-800 rounded-lg text-xs text-slate-700 dark:text-white border border-slate-300 dark:border-slate-700 font-mono font-bold",children:fe},Y)))||A.jsx("span",{className:"text-slate-500 text-sm",children:"General Market"})})]})]}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[A.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-500/10 border border-indigo-200 dark:border-indigo-500/20 p-8 rounded-2xl",children:[A.jsx("h3",{className:"text-indigo-600 dark:text-indigo-400 font-bold mb-2 text-[10px] uppercase tracking-[0.2em]",children:"Strategy Directive"}),A.jsx("p",{className:"text-slate-800 dark:text-white font-bold text-2xl",children:o.tradingStrategy})]}),A.jsxs("div",{className:"bg-slate-100 dark:bg-slate-900/50 border border-slate-200 dark:border-white/5 p-8 rounded-2xl",children:[A.jsx("h3",{className:"text-slate-500 dark:text-slate-400 font-bold mb-2 text-[10px] uppercase tracking-[0.2em]",children:"Key Takeaway"}),A.jsx("p",{className:"text-slate-700 dark:text-slate-200 text-sm leading-relaxed",children:o.keyTakeaway})]})]}),A.jsxs("div",{className:"bg-slate-200/50 dark:bg-black/30 rounded-2xl p-1 border border-slate-200 dark:border-white/5",children:[A.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-slate-200 dark:border-white/5",children:[A.jsx("h3",{className:"text-xs font-bold text-slate-500 dark:text-slate-300 uppercase tracking-widest",children:"Generated Post"}),A.jsx(vt,{onClick:U,variant:"ghost",className:"text-xs py-1 px-4 h-auto uppercase tracking-wider",children:u?"Copied! ":"Copy"})]}),A.jsx("textarea",{value:o.socialPost,readOnly:!0,className:"w-full h-64 bg-transparent border-none p-6 font-mono text-sm text-slate-700 dark:text-slate-300 focus:ring-0 resize-none leading-relaxed"})]})]})]}),P&&A.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-xl p-4 animate-fade-in",children:A.jsxs("div",{className:"glass-panel border-white/10 rounded-3xl w-full max-w-lg shadow-2xl overflow-hidden bg-white dark:bg-[#0a0a0f]",children:[A.jsxs("div",{className:"p-6 border-b border-slate-200 dark:border-white/10 flex justify-between items-center bg-slate-50 dark:bg-slate-900/50",children:[A.jsxs("h3",{className:"text-lg font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[A.jsx("span",{className:"text-yellow-500 dark:text-yellow-400",children:""})," Binance Square"]}),A.jsx("button",{onClick:N,className:"text-slate-500 dark:text-slate-400 hover:text-slate-800 dark:hover:text-white transition-colors",children:A.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),A.jsx("div",{className:"p-8",children:ee?A.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[A.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-yellow-500 border-t-transparent mb-6"}),A.jsx("p",{className:"text-slate-500 dark:text-slate-300 animate-pulse font-medium",children:"Crafting content..."})]}):A.jsxs("div",{className:"space-y-6",children:[A.jsx("textarea",{className:"w-full h-80 bg-slate-100 dark:bg-black/30 border border-slate-200 dark:border-white/10 rounded-2xl p-5 font-mono text-sm text-slate-800 dark:text-slate-200 focus:ring-2 focus:ring-yellow-500/50 focus:border-yellow-500/50 focus:outline-none leading-relaxed resize-none",value:re||"",readOnly:!0}),A.jsxs("div",{className:"flex gap-4",children:[A.jsx(vt,{onClick:B,className:"w-full bg-yellow-400 dark:bg-yellow-500 hover:bg-yellow-300 dark:hover:bg-yellow-400 text-black font-bold border-none shadow-[0_0_20px_rgba(234,179,8,0.3)]",children:j?"Copied! ":"Copy Post"}),A.jsx(vt,{onClick:()=>L(P),variant:"outline",children:"Regenerate"})]})]})})]})})]})},FD=({data:n,onReset:e})=>{const[t,i]=be.useState(!1),o=async()=>{try{await navigator.clipboard.writeText(n.formattedPost),i(!0),setTimeout(()=>i(!1),2e3)}catch(u){console.error("Failed to copy text: ",u)}},a=n.stats.netPnL&&!n.stats.netPnL.includes("-");return A.jsxs("div",{className:"space-y-8 animate-slide-up pb-12",children:[A.jsxs("div",{className:"flex justify-between items-center px-4",children:[A.jsxs("div",{children:[A.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-white tracking-tight",children:"Strategy Signal"}),A.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:"Extracted metrics from image"})]}),A.jsx("div",{className:"flex gap-3",children:A.jsx(vt,{variant:"outline",onClick:e,className:"text-xs",children:"New Signal"})})]}),A.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[A.jsxs("div",{className:"space-y-6",children:[A.jsxs("div",{className:"glass-panel rounded-3xl p-8 relative overflow-hidden group border-t-4 border-t-fuchsia-500",children:[A.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-fuchsia-500/10 dark:bg-fuchsia-500/20 rounded-full blur-[50px] -mr-10 -mt-10 transition-opacity group-hover:opacity-100 opacity-50"}),A.jsx("h3",{className:"text-[10px] uppercase text-fuchsia-600 dark:text-fuchsia-300 font-bold mb-6 tracking-widest",children:"System Performance"}),A.jsxs("div",{className:"grid grid-cols-2 gap-y-8 gap-x-4",children:[A.jsxs("div",{children:[A.jsx("div",{className:"text-[10px] text-slate-500 mb-1 font-bold uppercase tracking-wider",children:"Win Rate"}),A.jsx("div",{className:"text-3xl font-black text-emerald-600 dark:text-emerald-400",children:n.stats.winRate})]}),A.jsxs("div",{children:[A.jsx("div",{className:"text-[10px] text-slate-500 mb-1 font-bold uppercase tracking-wider",children:"Confidence"}),A.jsx("div",{className:"text-3xl font-black text-cyan-600 dark:text-cyan-400",children:n.stats.confidenceScore})]}),a&&A.jsxs("div",{children:[A.jsx("div",{className:"text-[10px] text-slate-500 mb-1 font-bold uppercase tracking-wider",children:"Net PnL"}),A.jsx("div",{className:"text-3xl font-black text-emerald-600 dark:text-emerald-400",children:n.stats.netPnL})]}),A.jsxs("div",{children:[A.jsx("div",{className:"text-[10px] text-slate-500 mb-1 font-bold uppercase tracking-wider",children:"W/L Ratio"}),A.jsx("div",{className:"text-3xl font-black text-slate-800 dark:text-white",children:n.stats.winLossRatio})]})]})]}),A.jsxs("div",{className:"glass-panel rounded-3xl p-8",children:[A.jsx("h3",{className:"text-[10px] uppercase text-slate-500 dark:text-slate-400 font-bold mb-6 tracking-widest",children:"Execution Plan"}),A.jsxs("div",{className:"space-y-4 font-mono text-sm",children:[A.jsxs("div",{className:"flex justify-between p-3 bg-slate-100 dark:bg-slate-900/50 rounded-xl border border-slate-200 dark:border-white/5",children:[A.jsx("span",{className:"text-slate-500 dark:text-slate-400",children:"Entry"}),A.jsx("span",{className:"text-slate-800 dark:text-white font-bold",children:n.entry})]}),A.jsxs("div",{className:"flex justify-between p-3 bg-rose-50 dark:bg-rose-500/10 border border-rose-200 dark:border-rose-500/20 rounded-xl",children:[A.jsx("span",{className:"text-rose-600 dark:text-rose-400",children:"Stop Loss"}),A.jsx("span",{className:"text-rose-500 dark:text-rose-300 font-bold",children:n.stopLoss})]}),A.jsx("div",{className:"space-y-2 pt-2",children:n.targets.map((u,f)=>A.jsxs("div",{className:"flex justify-between p-2 px-3 border-b border-slate-100 dark:border-white/5 last:border-0",children:[A.jsxs("span",{className:"text-slate-500 text-xs font-bold",children:["TP",f+1]}),A.jsx("span",{className:"text-emerald-600 dark:text-emerald-400 font-bold",children:u})]},f))})]})]})]}),A.jsxs("div",{className:"lg:col-span-2",children:[A.jsxs("div",{className:"glass-panel rounded-3xl p-1 bg-gradient-to-br from-slate-100 to-slate-200 dark:from-slate-900 dark:to-black h-full flex flex-col",children:[A.jsxs("div",{className:"bg-slate-200/50 dark:bg-white/5 rounded-t-[20px] p-4 border-b border-slate-200 dark:border-white/5 flex justify-between items-center",children:[A.jsxs("div",{className:"flex gap-2",children:[A.jsx("div",{className:"w-3 h-3 rounded-full bg-rose-500/50"}),A.jsx("div",{className:"w-3 h-3 rounded-full bg-amber-500/50"}),A.jsx("div",{className:"w-3 h-3 rounded-full bg-emerald-500/50"})]}),A.jsx(vt,{variant:"ghost",onClick:o,className:"text-xs py-1 h-auto uppercase tracking-wider",children:t?"Copied":"Copy Output"})]}),A.jsx("div",{className:"p-8 flex-grow font-mono text-sm leading-relaxed text-slate-700 dark:text-slate-300 whitespace-pre-wrap selection:bg-cyan-500/30",children:n.formattedPost})]}),A.jsx("div",{className:"text-center text-xs text-slate-500 dark:text-slate-600 mt-6 uppercase tracking-widest",children:Ia})]})]})]})},GD=({data:n,onReset:e})=>{const[t,i]=be.useState(!1),o=async()=>{try{await navigator.clipboard.writeText(n.socialPost),i(!0),setTimeout(()=>i(!1),2e3)}catch(a){console.error("Failed to copy text: ",a)}};return A.jsxs("div",{className:"space-y-8 animate-slide-up max-w-6xl mx-auto pb-12",children:[A.jsxs("div",{className:"flex justify-between items-center px-4",children:[A.jsxs("div",{children:[A.jsxs("h2",{className:"text-3xl font-bold text-slate-800 dark:text-white flex items-center gap-3",children:["Signal Confirmed ",A.jsx("span",{className:"text-3xl",children:""})]}),A.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:"Win verification complete."})]}),A.jsx(vt,{variant:"outline",onClick:e,className:"text-xs",children:"Analyze Next"})]}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 items-stretch",children:[A.jsxs("div",{className:"relative group",children:[A.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-emerald-500 via-cyan-500 to-teal-500 rounded-3xl blur-lg opacity-40 group-hover:opacity-60 transition duration-1000 animate-pulse"}),A.jsxs("div",{className:"relative glass-panel rounded-3xl p-10 h-full flex flex-col justify-center items-center text-center border border-emerald-500/20",children:[A.jsxs("span",{className:"px-4 py-1.5 rounded-full bg-emerald-100 dark:bg-emerald-500/10 text-emerald-600 dark:text-emerald-400 text-[10px] font-bold uppercase tracking-[0.2em] border border-emerald-200 dark:border-emerald-500/30 mb-8 shadow-[0_0_15px_rgba(16,185,129,0.2)]",children:[n.ticker," Verified"]}),A.jsx("div",{className:"mb-4 text-slate-500 dark:text-slate-400 text-xs uppercase tracking-[0.2em] font-bold",children:"Realized Gain"}),A.jsx("div",{className:"text-7xl md:text-9xl font-black text-transparent bg-clip-text bg-gradient-to-br from-emerald-400 via-teal-500 to-cyan-500 dark:from-emerald-300 dark:via-teal-200 dark:to-cyan-400 drop-shadow-[0_0_30px_rgba(52,211,153,0.4)]",children:n.totalProfitPercentage}),A.jsxs("div",{className:"mt-12 w-full max-w-sm",children:[A.jsxs("div",{className:"flex justify-between text-[10px] text-slate-500 mb-3 font-bold tracking-wider",children:[A.jsx("span",{children:"ENTRY"}),A.jsxs("span",{children:["TARGET ",n.numberOfTargetsHit]})]}),A.jsxs("div",{className:"h-4 bg-slate-200 dark:bg-slate-900 rounded-full overflow-hidden border border-slate-300 dark:border-white/5 relative shadow-inner",children:[A.jsx("div",{className:"absolute top-0 left-0 h-full bg-gradient-to-r from-emerald-500 to-cyan-400",style:{width:`${n.numberOfTargetsHit/4*100}%`,boxShadow:"0 0 10px rgba(34,211,238,0.5)"}}),A.jsx("div",{className:"absolute top-0 left-1/4 h-full w-px bg-white dark:bg-slate-900"}),A.jsx("div",{className:"absolute top-0 left-2/4 h-full w-px bg-white dark:bg-slate-900"}),A.jsx("div",{className:"absolute top-0 left-3/4 h-full w-px bg-white dark:bg-slate-900"})]}),A.jsx("div",{className:"mt-4 text-sm text-emerald-700 dark:text-emerald-200 font-medium bg-emerald-50 dark:bg-emerald-500/5 py-2 rounded-lg border border-emerald-200 dark:border-emerald-500/10",children:n.gainDescription})]})]})]}),A.jsxs("div",{className:"flex flex-col",children:[A.jsxs("div",{className:"glass-panel rounded-3xl p-1 flex-grow flex flex-col bg-gradient-to-br from-slate-100 to-slate-200 dark:from-slate-900 dark:to-black",children:[A.jsxs("div",{className:"p-5 border-b border-slate-200 dark:border-white/5 flex justify-between items-center bg-slate-200/50 dark:bg-white/5 rounded-t-[20px]",children:[A.jsx("h3",{className:"text-xs font-bold text-cyan-600 dark:text-cyan-300 uppercase tracking-widest",children:"Generated Tweet"}),A.jsx(vt,{onClick:o,className:"text-xs py-1.5 px-4 h-auto uppercase tracking-wider",children:t?"Copied! ":"Copy"})]}),A.jsx("div",{className:"p-8 flex-grow",children:A.jsx("textarea",{value:n.socialPost,readOnly:!0,className:"w-full h-full min-h-[400px] bg-transparent border-none resize-none focus:ring-0 text-slate-700 dark:text-slate-300 font-mono text-base leading-relaxed"})})]}),A.jsx("div",{className:"text-center text-xs text-slate-500 dark:text-slate-600 mt-6 uppercase tracking-widest",children:Ia})]})]})]})},BD=({data:n,onReset:e})=>{const[t,i]=be.useState(!1),o=async()=>{try{await navigator.clipboard.writeText(n.socialPost),i(!0),setTimeout(()=>i(!1),2e3)}catch(m){console.error("Failed to copy text: ",m)}},a=m=>{switch(m){case"Bullish":return"text-emerald-600 dark:text-emerald-400 border-emerald-500/30 bg-emerald-100 dark:bg-emerald-500/10 shadow-[0_0_15px_rgba(16,185,129,0.1)]";case"Bearish":return"text-rose-600 dark:text-rose-400 border-rose-500/30 bg-rose-100 dark:bg-rose-500/10 shadow-[0_0_15px_rgba(244,63,94,0.1)]";default:return"text-amber-600 dark:text-amber-400 border-amber-500/30 bg-amber-100 dark:bg-amber-500/10"}},u=n.topPerformers||[],f=n.laggards||[];return A.jsxs("div",{className:"space-y-6 animate-slide-up pb-12",children:[A.jsxs("div",{className:"glass-panel rounded-3xl p-8 flex flex-col md:flex-row justify-between items-center gap-6 border-t border-t-white/10",children:[A.jsxs("div",{children:[A.jsx("h2",{className:"text-4xl font-bold text-slate-800 dark:text-white tracking-tight mb-4",children:"Market Overview"}),A.jsxs("div",{className:"flex flex-wrap gap-3",children:[A.jsxs("span",{className:`px-5 py-2 rounded-full text-sm font-bold border flex items-center gap-2 uppercase tracking-wider ${a(n.sentiment)}`,children:[n.sentiment==="Bullish"&&"",n.sentiment==="Bearish"&&"",n.sentiment==="Mixed"&&"",n.sentiment]}),A.jsx("span",{className:"px-5 py-2 rounded-full text-sm font-bold border border-slate-300 dark:border-slate-700 bg-slate-100 dark:bg-slate-800/50 text-indigo-600 dark:text-indigo-300",children:n.marketMood})]})]}),A.jsxs("div",{className:"flex gap-4",children:[A.jsx(vt,{variant:"outline",onClick:e,children:"New Analysis"}),A.jsx(vt,{onClick:o,children:t?"Copied!":"Copy Update"})]})]}),A.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[A.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[A.jsxs("div",{className:"glass-panel rounded-3xl p-8 border-l-4 border-l-cyan-500",children:[A.jsx("h3",{className:"text-xs font-bold text-cyan-600 dark:text-cyan-400 uppercase tracking-widest mb-4",children:"Money Flow Analysis"}),A.jsx("p",{className:"text-xl font-light text-slate-700 dark:text-white leading-relaxed",children:n.summary})]}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[A.jsxs("div",{className:"glass-panel rounded-3xl p-6",children:[A.jsxs("h3",{className:"text-[10px] font-bold text-emerald-600 dark:text-emerald-400 uppercase tracking-widest mb-6 flex items-center gap-2",children:[A.jsx("span",{className:"w-2 h-2 rounded-full bg-emerald-500 animate-pulse"}),"Top Strength"]}),A.jsx("div",{className:"space-y-3",children:u.length>0?u.map((m,h)=>A.jsxs("div",{className:"flex justify-between items-center p-3 rounded-xl bg-emerald-50 dark:bg-emerald-500/5 border border-emerald-200 dark:border-emerald-500/10 hover:bg-emerald-100 dark:hover:bg-emerald-500/10 transition-colors",children:[A.jsx("span",{className:"font-bold text-slate-700 dark:text-slate-200 font-mono",children:m.ticker}),A.jsx("span",{className:"font-mono font-bold text-emerald-600 dark:text-emerald-400",children:m.change})]},h)):A.jsx("span",{className:"text-slate-500 text-sm italic",children:"No significant gainers found."})})]}),A.jsxs("div",{className:"glass-panel rounded-3xl p-6",children:[A.jsxs("h3",{className:"text-[10px] font-bold text-rose-600 dark:text-rose-400 uppercase tracking-widest mb-6 flex items-center gap-2",children:[A.jsx("span",{className:"w-2 h-2 rounded-full bg-rose-500 animate-pulse"}),"Weakness"]}),A.jsx("div",{className:"space-y-3",children:f.length>0?f.map((m,h)=>A.jsxs("div",{className:"flex justify-between items-center p-3 rounded-xl bg-rose-50 dark:bg-rose-500/5 border border-rose-200 dark:border-rose-500/10 hover:bg-rose-100 dark:hover:bg-rose-500/10 transition-colors",children:[A.jsx("span",{className:"font-bold text-slate-700 dark:text-slate-200 font-mono",children:m.ticker}),A.jsx("span",{className:"font-mono font-bold text-rose-600 dark:text-rose-400",children:m.change})]},h)):A.jsx("span",{className:"text-slate-500 text-sm italic",children:"No significant losers found."})})]})]})]}),A.jsxs("div",{className:"glass-panel rounded-3xl p-1 bg-gradient-to-br from-slate-100 to-white dark:from-slate-900/80 dark:to-black/80 h-full flex flex-col",children:[A.jsxs("div",{className:"bg-slate-200/50 dark:bg-white/5 rounded-t-[20px] p-4 border-b border-slate-200 dark:border-white/5 flex justify-between items-center",children:[A.jsx("h3",{className:"text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase tracking-widest",children:"Social Update"}),A.jsx(vt,{variant:"ghost",onClick:o,className:"text-xs py-1 h-auto uppercase tracking-wider",children:t?"Copied":"Copy"})]}),A.jsx("textarea",{value:n.socialPost,readOnly:!0,className:"w-full flex-grow min-h-[400px] bg-transparent border-none p-6 font-mono text-sm text-slate-700 dark:text-slate-300 resize-none focus:ring-0 leading-relaxed"})]})]}),A.jsx("p",{className:"text-center text-xs text-slate-500 dark:text-slate-600 mt-4 uppercase tracking-widest",children:Ia})]})},HD=({onLaunch:n})=>{const e=(t,i)=>{t.preventDefault();const o=document.getElementById(i);if(o){const f=o.getBoundingClientRect().top+window.pageYOffset-100;window.scrollTo({top:f,behavior:"smooth"})}};return A.jsxs("div",{className:"relative animate-fade-in",children:[A.jsx("nav",{className:"fixed top-6 left-1/2 -translate-x-1/2 w-[92%] max-w-6xl z-50",children:A.jsxs("div",{className:"glass-panel rounded-2xl px-6 py-4 flex items-center justify-between shadow-xl border-white/20 dark:border-white/10",children:[A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsxs("div",{className:"relative",children:[A.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-cyan-400 to-indigo-500 rounded-lg blur opacity-40"}),A.jsx("div",{className:"relative bg-white dark:bg-slate-900 p-2 rounded-lg border border-slate-200 dark:border-white/10",children:A.jsx("svg",{className:"w-6 h-6 text-indigo-600 dark:text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})})]}),A.jsxs("span",{className:"text-xl font-bold tracking-tight text-slate-800 dark:text-white",children:["CryptoChart",A.jsx("span",{className:"text-cyan-600 dark:text-cyan-400",children:".AI"})]})]}),A.jsxs("div",{className:"hidden md:flex items-center gap-8 text-sm font-medium text-slate-600 dark:text-slate-400",children:[A.jsx("a",{href:"#features",onClick:t=>e(t,"features"),className:"hover:text-cyan-600 dark:hover:text-white transition-colors cursor-pointer",children:"Features"}),A.jsx("a",{href:"#how-it-works",onClick:t=>e(t,"how-it-works"),className:"hover:text-cyan-600 dark:hover:text-white transition-colors cursor-pointer",children:"How it Works"}),A.jsx("button",{onClick:n,className:"text-slate-900 dark:text-white hover:text-cyan-600 dark:hover:text-cyan-400 transition-colors",children:"Sign In"}),A.jsx(vt,{onClick:n,className:"px-6 py-2 h-auto text-xs uppercase tracking-wider shadow-lg shadow-cyan-500/20",children:"Launch App"})]})]})}),A.jsxs("section",{className:"pt-48 pb-20 md:pt-60 md:pb-32 px-4 text-center max-w-5xl mx-auto relative z-10",children:[A.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-indigo-50 dark:bg-indigo-500/10 border border-indigo-200 dark:border-indigo-500/30 text-indigo-600 dark:text-indigo-300 text-xs font-bold uppercase tracking-widest mb-8 animate-slide-up",children:[A.jsx("span",{className:"w-2 h-2 rounded-full bg-indigo-500 animate-pulse"}),"AI-Powered Technical Analysis v3.0"]}),A.jsxs("h1",{className:"text-5xl md:text-8xl font-black text-slate-900 dark:text-white tracking-tight mb-8 leading-[1.1] animate-slide-up",style:{animationDelay:"0.1s"},children:["Stop Gambling. ",A.jsx("br",{}),A.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-cyan-500 via-indigo-500 to-fuchsia-500",children:"Start Trading."})]}),A.jsx("p",{className:"text-lg md:text-xl text-slate-600 dark:text-slate-400 max-w-2xl mx-auto mb-12 leading-relaxed animate-slide-up",style:{animationDelay:"0.2s"},children:"Instant pattern recognition, sentiment analysis, and liquidity detection. Upload any chart and get institutional-grade insights in seconds."}),A.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4 animate-slide-up",style:{animationDelay:"0.3s"},children:[A.jsx(vt,{onClick:n,className:"w-full sm:w-auto px-12 py-5 text-lg shadow-[0_0_40px_rgba(6,182,212,0.4)] hover:shadow-[0_0_60px_rgba(6,182,212,0.6)] hover:scale-105",children:"Launch Terminal "}),A.jsxs("div",{className:"flex items-center gap-4 text-sm text-slate-500 dark:text-slate-400 px-6",children:[A.jsx("div",{className:"flex -space-x-2",children:[1,2,3].map(t=>A.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-200 dark:bg-slate-700 border-2 border-white dark:border-black flex items-center justify-center text-[10px]",children:t===1?"":t===2?"":""},t))}),A.jsx("span",{children:"10,000+ Charts Analyzed"})]})]})]}),A.jsx("section",{id:"features",className:"py-20 px-4 relative z-10",children:A.jsxs("div",{className:"max-w-7xl mx-auto",children:[A.jsxs("div",{className:"text-center mb-16",children:[A.jsx("h2",{className:"text-3xl md:text-5xl font-bold text-slate-900 dark:text-white mb-4",children:"Unfair Advantage"}),A.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Everything you need to trade like a hedge fund."})]}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[A.jsxs("div",{className:"glass-panel p-8 rounded-3xl group hover:-translate-y-2 transition-transform duration-300",children:[A.jsx("div",{className:"w-14 h-14 rounded-2xl bg-cyan-100 dark:bg-cyan-500/10 flex items-center justify-center mb-6 text-3xl group-hover:scale-110 transition-transform",children:""}),A.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white mb-3",children:"Instant Technicals"}),A.jsx("p",{className:"text-slate-600 dark:text-slate-400 leading-relaxed",children:"Identify support, resistance, and chart patterns (Flags, Wedges, Head & Shoulders) automatically. No more drawing lines manually."})]}),A.jsxs("div",{className:"glass-panel p-8 rounded-3xl group hover:-translate-y-2 transition-transform duration-300 border-indigo-500/20",children:[A.jsx("div",{className:"w-14 h-14 rounded-2xl bg-indigo-100 dark:bg-indigo-500/10 flex items-center justify-center mb-6 text-3xl group-hover:scale-110 transition-transform",children:""}),A.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white mb-3",children:"Alpha Decoding"}),A.jsx("p",{className:"text-slate-600 dark:text-slate-400 leading-relaxed",children:"Upload screenshots of signals or dashboards. We extract the win-rate, PnL, and targets to verify if a strategy is actually profitable."})]}),A.jsxs("div",{className:"glass-panel p-8 rounded-3xl group hover:-translate-y-2 transition-transform duration-300",children:[A.jsx("div",{className:"w-14 h-14 rounded-2xl bg-fuchsia-100 dark:bg-fuchsia-500/10 flex items-center justify-center mb-6 text-3xl group-hover:scale-110 transition-transform",children:""}),A.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white mb-3",children:"Market Pulse"}),A.jsx("p",{className:"text-slate-600 dark:text-slate-400 leading-relaxed",children:"Real-time sentiment analysis on news headlines. Understand if the macro environment is Hawkish or Dovish before you enter a trade."})]})]})]})}),A.jsx("section",{id:"how-it-works",className:"py-20 border-y border-slate-200 dark:border-white/5 bg-white/50 dark:bg-black/20 backdrop-blur-sm",children:A.jsxs("div",{className:"max-w-7xl mx-auto px-4 text-center",children:[A.jsx("h2",{className:"text-3xl md:text-5xl font-bold text-slate-900 dark:text-white mb-16",children:"How It Works"}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-12 relative",children:[A.jsx("div",{className:"hidden md:block absolute top-12 left-[16%] right-[16%] h-0.5 bg-gradient-to-r from-transparent via-slate-300 dark:via-slate-700 to-transparent z-0"}),A.jsxs("div",{className:"relative z-10",children:[A.jsx("div",{className:"w-24 h-24 mx-auto bg-white dark:bg-slate-900 rounded-full border border-slate-200 dark:border-white/10 flex items-center justify-center text-4xl mb-6 shadow-xl",children:""}),A.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white mb-2",children:"1. Snap"}),A.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Take a screenshot of any chart or news."})]}),A.jsxs("div",{className:"relative z-10",children:[A.jsx("div",{className:"w-24 h-24 mx-auto bg-white dark:bg-slate-900 rounded-full border border-slate-200 dark:border-white/10 flex items-center justify-center text-4xl mb-6 shadow-xl",children:""}),A.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white mb-2",children:"2. Upload"}),A.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Drop it into the AI terminal."})]}),A.jsxs("div",{className:"relative z-10",children:[A.jsx("div",{className:"w-24 h-24 mx-auto bg-white dark:bg-slate-900 rounded-full border border-slate-200 dark:border-white/10 flex items-center justify-center text-4xl mb-6 shadow-xl",children:""}),A.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white mb-2",children:"3. Profit"}),A.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Get instant actionable insights."})]})]})]})}),A.jsx("section",{className:"py-16",children:A.jsxs("div",{className:"max-w-7xl mx-auto px-4 flex flex-wrap justify-around gap-8 text-center",children:[A.jsxs("div",{children:[A.jsx("div",{className:"text-3xl md:text-5xl font-black text-slate-900 dark:text-white mb-1",children:"94%"}),A.jsx("div",{className:"text-xs font-bold uppercase tracking-widest text-slate-500",children:"Pattern Accuracy"})]}),A.jsxs("div",{children:[A.jsx("div",{className:"text-3xl md:text-5xl font-black text-slate-900 dark:text-white mb-1",children:"< 5s"}),A.jsx("div",{className:"text-xs font-bold uppercase tracking-widest text-slate-500",children:"Analysis Time"})]}),A.jsxs("div",{children:[A.jsx("div",{className:"text-3xl md:text-5xl font-black text-slate-900 dark:text-white mb-1",children:"24/7"}),A.jsx("div",{className:"text-xs font-bold uppercase tracking-widest text-slate-500",children:"Market Coverage"})]})]})}),A.jsx("section",{className:"py-24 px-4 text-center",children:A.jsxs("div",{className:"max-w-4xl mx-auto",children:[A.jsx("h2",{className:"text-3xl md:text-5xl font-bold text-slate-900 dark:text-white mb-8 tracking-tight",children:"Ready to see the matrix?"}),A.jsx(vt,{onClick:n,className:"px-16 py-6 text-xl shadow-[0_0_50px_rgba(79,70,229,0.4)]",children:"Get Started for Free"}),A.jsx("p",{className:"mt-6 text-sm text-slate-500 dark:text-slate-400",children:"No credit card required. Works with any chart screenshot."})]})}),A.jsx("footer",{className:"py-8 border-t border-slate-200 dark:border-white/5 text-center text-slate-500 text-sm",children:A.jsx("p",{children:" 2024 CryptoChart.AI - Intelligent Market Analysis"})})]})},qD=()=>{};var cE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MA=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let o=n.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},zD=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const o=n[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const a=n[t++];e[i++]=String.fromCharCode((o&31)<<6|a&63)}else if(o>239&&o<365){const a=n[t++],u=n[t++],f=n[t++],m=((o&7)<<18|(a&63)<<12|(u&63)<<6|f&63)-65536;e[i++]=String.fromCharCode(55296+(m>>10)),e[i++]=String.fromCharCode(56320+(m&1023))}else{const a=n[t++],u=n[t++];e[i++]=String.fromCharCode((o&15)<<12|(a&63)<<6|u&63)}}return e.join("")},kA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<n.length;o+=3){const a=n[o],u=o+1<n.length,f=u?n[o+1]:0,m=o+2<n.length,h=m?n[o+2]:0,v=a>>2,T=(a&3)<<4|f>>4;let S=(f&15)<<2|h>>6,I=h&63;m||(I=64,u||(S=64)),i.push(t[v],t[T],t[S],t[I])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(MA(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):zD(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<n.length;){const a=t[n.charAt(o++)],f=o<n.length?t[n.charAt(o)]:0;++o;const h=o<n.length?t[n.charAt(o)]:64;++o;const T=o<n.length?t[n.charAt(o)]:64;if(++o,a==null||f==null||h==null||T==null)throw new YD;const S=a<<2|f>>4;if(i.push(S),h!==64){const I=f<<4&240|h>>2;if(i.push(I),T!==64){const k=h<<6&192|T;i.push(k)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class YD extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const JD=function(n){const e=MA(n);return kA.encodeByteArray(e,!0)},Kd=function(n){return JD(n).replace(/\./g,"")},DA=function(n){try{return kA.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KD(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $D=()=>KD().__FIREBASE_DEFAULTS__,jD=()=>{if(typeof process>"u"||typeof cE>"u")return;const n=cE.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},QD=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&DA(n[1]);return e&&JSON.parse(e)},_f=()=>{try{return qD()||$D()||jD()||QD()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},PA=n=>{var e,t;return(t=(e=_f())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},WD=n=>{const e=PA(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},LA=()=>{var n;return(n=_f())==null?void 0:n.config},VA=n=>{var e;return(e=_f())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XD{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oa(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function UA(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZD(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Kd(JSON.stringify(t)),Kd(JSON.stringify(u)),""].join(".")}const lu={};function eP(){const n={prod:[],emulator:[]};for(const e of Object.keys(lu))lu[e]?n.emulator.push(e):n.prod.push(e);return n}function tP(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let dE=!1;function OA(n,e){if(typeof window>"u"||typeof document>"u"||!Oa(window.location.host)||lu[n]===e||lu[n]||dE)return;lu[n]=e;function t(S){return`__firebase__banner__${S}`}const i="__firebase__banner",a=eP().prod.length>0;function u(){const S=document.getElementById(i);S&&S.remove()}function f(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function m(S,I){S.setAttribute("width","24"),S.setAttribute("id",I),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function h(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{dE=!0,u()},S}function v(S,I){S.setAttribute("id",I),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function T(){const S=tP(i),I=t("text"),k=document.getElementById(I)||document.createElement("span"),O=t("learnmore"),P=document.getElementById(O)||document.createElement("a"),$=t("preprendIcon"),ee=document.getElementById($)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const X=S.element;f(X),v(P,O);const re=h();m(ee,$),X.append(ee,k,P,re),document.body.appendChild(X)}a?(k.innerText="Preview backend disconnected.",ee.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ee.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,k.innerText="Preview backend running in this workspace."),k.setAttribute("id",I)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function an(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function nP(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(an())}function iP(){var e;const n=(e=_f())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function sP(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function rP(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function oP(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function aP(){const n=an();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function lP(){return!iP()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function uP(){try{return typeof indexedDB=="object"}catch{return!1}}function cP(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var a;e(((a=o.error)==null?void 0:a.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dP="FirebaseError";class As extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=dP,Object.setPrototypeOf(this,As.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ru.prototype.create)}}class Ru{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,a=this.errors[e],u=a?fP(a,i):"Error",f=`${this.serviceName}: ${u} (${o}).`;return new As(o,f,i)}}function fP(n,e){return n.replace(hP,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const hP=/\{\$([^}]+)}/g;function pP(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function uo(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const a=n[o],u=e[o];if(fE(a)&&fE(u)){if(!uo(a,u))return!1}else if(a!==u)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function fE(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nu(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function nu(n){const e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,a]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(a)}}),e}function iu(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function mP(n,e){const t=new gP(n,e);return t.subscribe.bind(t)}class gP{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");yP(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=Yp),o.error===void 0&&(o.error=Yp),o.complete===void 0&&(o.complete=Yp);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function yP(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Yp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ln(n){return n&&n._delegate?n._delegate:n}class co{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const io="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vP{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new XD;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(TP(e))try{this.getOrInitializeService({instanceIdentifier:io})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:o});i.resolve(a)}catch{}}}}clearInstance(e=io){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=io){return this.instances.has(e)}getOptions(e=io){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[a,u]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(a);i===f&&u.resolve(o)}return o}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(i)??new Set;o.add(e),this.onInitCallbacks.set(i,o);const a=this.instances.get(i);return a&&e(a,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:_P(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=io){return this.component?this.component.multipleInstances?e:io:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function _P(n){return n===io?void 0:n}function TP(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EP{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new vP(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Be;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Be||(Be={}));const SP={debug:Be.DEBUG,verbose:Be.VERBOSE,info:Be.INFO,warn:Be.WARN,error:Be.ERROR,silent:Be.SILENT},AP=Be.INFO,wP={[Be.DEBUG]:"log",[Be.VERBOSE]:"log",[Be.INFO]:"info",[Be.WARN]:"warn",[Be.ERROR]:"error"},CP=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),o=wP[e];if(o)console[o](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class lg{constructor(e){this.name=e,this._logLevel=AP,this._logHandler=CP,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Be))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?SP[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Be.DEBUG,...e),this._logHandler(this,Be.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Be.VERBOSE,...e),this._logHandler(this,Be.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Be.INFO,...e),this._logHandler(this,Be.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Be.WARN,...e),this._logHandler(this,Be.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Be.ERROR,...e),this._logHandler(this,Be.ERROR,...e)}}const xP=(n,e)=>e.some(t=>n instanceof t);let hE,pE;function IP(){return hE||(hE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function bP(){return pE||(pE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const FA=new WeakMap,wm=new WeakMap,GA=new WeakMap,Jp=new WeakMap,ug=new WeakMap;function RP(n){const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("success",a),n.removeEventListener("error",u)},a=()=>{t(cr(n.result)),o()},u=()=>{i(n.error),o()};n.addEventListener("success",a),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&FA.set(t,n)}).catch(()=>{}),ug.set(e,n),e}function NP(n){if(wm.has(n))return;const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",u),n.removeEventListener("abort",u)},a=()=>{t(),o()},u=()=>{i(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",a),n.addEventListener("error",u),n.addEventListener("abort",u)});wm.set(n,e)}let Cm={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return wm.get(n);if(e==="objectStoreNames")return n.objectStoreNames||GA.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return cr(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function MP(n){Cm=n(Cm)}function kP(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(Kp(this),e,...t);return GA.set(i,e.sort?e.sort():[e]),cr(i)}:bP().includes(n)?function(...e){return n.apply(Kp(this),e),cr(FA.get(this))}:function(...e){return cr(n.apply(Kp(this),e))}}function DP(n){return typeof n=="function"?kP(n):(n instanceof IDBTransaction&&NP(n),xP(n,IP())?new Proxy(n,Cm):n)}function cr(n){if(n instanceof IDBRequest)return RP(n);if(Jp.has(n))return Jp.get(n);const e=DP(n);return e!==n&&(Jp.set(n,e),ug.set(e,n)),e}const Kp=n=>ug.get(n);function PP(n,e,{blocked:t,upgrade:i,blocking:o,terminated:a}={}){const u=indexedDB.open(n,e),f=cr(u);return i&&u.addEventListener("upgradeneeded",m=>{i(cr(u.result),m.oldVersion,m.newVersion,cr(u.transaction),m)}),t&&u.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),f.then(m=>{a&&m.addEventListener("close",()=>a()),o&&m.addEventListener("versionchange",h=>o(h.oldVersion,h.newVersion,h))}).catch(()=>{}),f}const LP=["get","getKey","getAll","getAllKeys","count"],VP=["put","add","delete","clear"],$p=new Map;function mE(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if($p.get(e))return $p.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=VP.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||LP.includes(t)))return;const a=async function(u,...f){const m=this.transaction(u,o?"readwrite":"readonly");let h=m.store;return i&&(h=h.index(f.shift())),(await Promise.all([h[t](...f),o&&m.done]))[0]};return $p.set(e,a),a}MP(n=>({...n,get:(e,t,i)=>mE(e,t)||n.get(e,t,i),has:(e,t)=>!!mE(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UP{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(OP(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function OP(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const xm="@firebase/app",gE="0.14.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ys=new lg("@firebase/app"),FP="@firebase/app-compat",GP="@firebase/analytics-compat",BP="@firebase/analytics",HP="@firebase/app-check-compat",qP="@firebase/app-check",zP="@firebase/auth",YP="@firebase/auth-compat",JP="@firebase/database",KP="@firebase/data-connect",$P="@firebase/database-compat",jP="@firebase/functions",QP="@firebase/functions-compat",WP="@firebase/installations",XP="@firebase/installations-compat",ZP="@firebase/messaging",eL="@firebase/messaging-compat",tL="@firebase/performance",nL="@firebase/performance-compat",iL="@firebase/remote-config",sL="@firebase/remote-config-compat",rL="@firebase/storage",oL="@firebase/storage-compat",aL="@firebase/firestore",lL="@firebase/ai",uL="@firebase/firestore-compat",cL="firebase",dL="12.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Im="[DEFAULT]",fL={[xm]:"fire-core",[FP]:"fire-core-compat",[BP]:"fire-analytics",[GP]:"fire-analytics-compat",[qP]:"fire-app-check",[HP]:"fire-app-check-compat",[zP]:"fire-auth",[YP]:"fire-auth-compat",[JP]:"fire-rtdb",[KP]:"fire-data-connect",[$P]:"fire-rtdb-compat",[jP]:"fire-fn",[QP]:"fire-fn-compat",[WP]:"fire-iid",[XP]:"fire-iid-compat",[ZP]:"fire-fcm",[eL]:"fire-fcm-compat",[tL]:"fire-perf",[nL]:"fire-perf-compat",[iL]:"fire-rc",[sL]:"fire-rc-compat",[rL]:"fire-gcs",[oL]:"fire-gcs-compat",[aL]:"fire-fst",[uL]:"fire-fst-compat",[lL]:"fire-vertex","fire-js":"fire-js",[cL]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $d=new Map,hL=new Map,bm=new Map;function yE(n,e){try{n.container.addComponent(e)}catch(t){ys.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ba(n){const e=n.name;if(bm.has(e))return ys.debug(`There were multiple attempts to register component ${e}.`),!1;bm.set(e,n);for(const t of $d.values())yE(t,n);for(const t of hL.values())yE(t,n);return!0}function cg(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function kn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pL={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},dr=new Ru("app","Firebase",pL);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mL{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new co("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw dr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fa=dL;function BA(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i={name:Im,automaticDataCollectionEnabled:!0,...e},o=i.name;if(typeof o!="string"||!o)throw dr.create("bad-app-name",{appName:String(o)});if(t||(t=LA()),!t)throw dr.create("no-options");const a=$d.get(o);if(a){if(uo(t,a.options)&&uo(i,a.config))return a;throw dr.create("duplicate-app",{appName:o})}const u=new EP(o);for(const m of bm.values())u.addComponent(m);const f=new mL(t,i,u);return $d.set(o,f),f}function HA(n=Im){const e=$d.get(n);if(!e&&n===Im&&LA())return BA();if(!e)throw dr.create("no-app",{appName:n});return e}function fr(n,e,t){let i=fL[n]??n;t&&(i+=`-${t}`);const o=i.match(/\s|\//),a=e.match(/\s|\//);if(o||a){const u=[`Unable to register library "${i}" with version "${e}":`];o&&u.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&a&&u.push("and"),a&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ys.warn(u.join(" "));return}ba(new co(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gL="firebase-heartbeat-database",yL=1,gu="firebase-heartbeat-store";let jp=null;function qA(){return jp||(jp=PP(gL,yL,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(gu)}catch(t){console.warn(t)}}}}).catch(n=>{throw dr.create("idb-open",{originalErrorMessage:n.message})})),jp}async function vL(n){try{const t=(await qA()).transaction(gu),i=await t.objectStore(gu).get(zA(n));return await t.done,i}catch(e){if(e instanceof As)ys.warn(e.message);else{const t=dr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ys.warn(t.message)}}}async function vE(n,e){try{const i=(await qA()).transaction(gu,"readwrite");await i.objectStore(gu).put(e,zA(n)),await i.done}catch(t){if(t instanceof As)ys.warn(t.message);else{const i=dr.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});ys.warn(i.message)}}}function zA(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _L=1024,TL=30;class EL{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new AL(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=_E();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(u=>u.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:o}),this._heartbeatsCache.heartbeats.length>TL){const u=wL(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){ys.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=_E(),{heartbeatsToSend:i,unsentEntries:o}=SL(this._heartbeatsCache.heartbeats),a=Kd(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return ys.warn(t),""}}}function _E(){return new Date().toISOString().substring(0,10)}function SL(n,e=_L){const t=[];let i=n.slice();for(const o of n){const a=t.find(u=>u.agent===o.agent);if(a){if(a.dates.push(o.date),TE(t)>e){a.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),TE(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class AL{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return uP()?cP().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await vL(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return vE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return vE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function TE(n){return Kd(JSON.stringify({version:2,heartbeats:n})).length}function wL(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CL(n){ba(new co("platform-logger",e=>new UP(e),"PRIVATE")),ba(new co("heartbeat",e=>new EL(e),"PRIVATE")),fr(xm,gE,n),fr(xm,gE,"esm2020"),fr("fire-js","")}CL("");function YA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const xL=YA,JA=new Ru("auth","Firebase",YA());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jd=new lg("@firebase/auth");function IL(n,...e){jd.logLevel<=Be.WARN&&jd.warn(`Auth (${Fa}): ${n}`,...e)}function Md(n,...e){jd.logLevel<=Be.ERROR&&jd.error(`Auth (${Fa}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qn(n,...e){throw fg(n,...e)}function hi(n,...e){return fg(n,...e)}function dg(n,e,t){const i={...xL(),[e]:t};return new Ru("auth","Firebase",i).create(e,{appName:n.name})}function ms(n){return dg(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function bL(n,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&Qn(n,"argument-error"),dg(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function fg(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return JA.create(n,...e)}function we(n,e,...t){if(!n)throw fg(e,...t)}function hs(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Md(e),new Error(e)}function vs(n,e){n||hs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rm(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function RL(){return EE()==="http:"||EE()==="https:"}function EE(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NL(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(RL()||rP()||"connection"in navigator)?navigator.onLine:!0}function ML(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mu{constructor(e,t){this.shortDelay=e,this.longDelay=t,vs(t>e,"Short delay should be less than long delay!"),this.isMobile=nP()||oP()}get(){return NL()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hg(n,e){vs(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KA{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;hs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;hs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;hs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kL={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DL=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],PL=new Mu(3e4,6e4);function ws(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Cs(n,e,t,i,o={}){return $A(n,o,async()=>{let a={},u={};i&&(e==="GET"?u=i:a={body:JSON.stringify(i)});const f=Nu({key:n.config.apiKey,...u}).slice(1),m=await n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);const h={method:e,headers:m,...a};return sP()||(h.referrerPolicy="no-referrer"),n.emulatorConfig&&Oa(n.emulatorConfig.host)&&(h.credentials="include"),KA.fetch()(await jA(n,n.config.apiHost,t,f),h)})}async function $A(n,e,t){n._canInitEmulator=!1;const i={...kL,...e};try{const o=new VL(n),a=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const u=await a.json();if("needConfirmation"in u)throw Sd(n,"account-exists-with-different-credential",u);if(a.ok&&!("errorMessage"in u))return u;{const f=a.ok?u.errorMessage:u.error.message,[m,h]=f.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw Sd(n,"credential-already-in-use",u);if(m==="EMAIL_EXISTS")throw Sd(n,"email-already-in-use",u);if(m==="USER_DISABLED")throw Sd(n,"user-disabled",u);const v=i[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw dg(n,v,h);Qn(n,v)}}catch(o){if(o instanceof As)throw o;Qn(n,"network-request-failed",{message:String(o)})}}async function ku(n,e,t,i,o={}){const a=await Cs(n,e,t,i,o);return"mfaPendingCredential"in a&&Qn(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function jA(n,e,t,i){const o=`${e}${t}?${i}`,a=n,u=a.config.emulator?hg(n.config,o):`${n.config.apiScheme}://${o}`;return DL.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(u).toString():u}function LL(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class VL{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(hi(this.auth,"network-request-failed")),PL.get())})}}function Sd(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=hi(n,e,i);return o.customData._tokenResponse=t,o}function SE(n){return n!==void 0&&n.enterprise!==void 0}class UL{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return LL(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function OL(n,e){return Cs(n,"GET","/v2/recaptchaConfig",ws(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FL(n,e){return Cs(n,"POST","/v1/accounts:delete",e)}async function Qd(n,e){return Cs(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uu(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function GL(n,e=!1){const t=ln(n),i=await t.getIdToken(e),o=pg(i);we(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const a=typeof o.firebase=="object"?o.firebase:void 0,u=a==null?void 0:a.sign_in_provider;return{claims:o,token:i,authTime:uu(Qp(o.auth_time)),issuedAtTime:uu(Qp(o.iat)),expirationTime:uu(Qp(o.exp)),signInProvider:u||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Qp(n){return Number(n)*1e3}function pg(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return Md("JWT malformed, contained fewer than 3 sections"),null;try{const o=DA(t);return o?JSON.parse(o):(Md("Failed to decode base64 JWT payload"),null)}catch(o){return Md("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function AE(n){const e=pg(n);return we(e,"internal-error"),we(typeof e.exp<"u","internal-error"),we(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yu(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof As&&BL(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function BL({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HL{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nm{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=uu(this.lastLoginAt),this.creationTime=uu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wd(n){var T;const e=n.auth,t=await n.getIdToken(),i=await yu(n,Qd(e,{idToken:t}));we(i==null?void 0:i.users.length,e,"internal-error");const o=i.users[0];n._notifyReloadListener(o);const a=(T=o.providerUserInfo)!=null&&T.length?QA(o.providerUserInfo):[],u=zL(n.providerData,a),f=n.isAnonymous,m=!(n.email&&o.passwordHash)&&!(u!=null&&u.length),h=f?m:!1,v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Nm(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(n,v)}async function qL(n){const e=ln(n);await Wd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function zL(n,e){return[...n.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function QA(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YL(n,e){const t=await $A(n,{},async()=>{const i=Nu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:a}=n.config,u=await jA(n,o,"/v1/token",`key=${a}`),f=await n._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:f,body:i};return n.emulatorConfig&&Oa(n.emulatorConfig.host)&&(m.credentials="include"),KA.fetch()(u,m)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function JL(n,e){return Cs(n,"POST","/v2/accounts:revokeToken",ws(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){we(e.idToken,"internal-error"),we(typeof e.idToken<"u","internal-error"),we(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):AE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){we(e.length!==0,"internal-error");const t=AE(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(we(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:a}=await YL(e,t);this.updateTokensAndExpiration(i,o,Number(a))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:a}=t,u=new Sa;return i&&(we(typeof i=="string","internal-error",{appName:e}),u.refreshToken=i),o&&(we(typeof o=="string","internal-error",{appName:e}),u.accessToken=o),a&&(we(typeof a=="number","internal-error",{appName:e}),u.expirationTime=a),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Sa,this.toJSON())}_performRefresh(){return hs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function or(n,e){we(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class ci{constructor({uid:e,auth:t,stsTokenManager:i,...o}){this.providerId="firebase",this.proactiveRefresh=new HL(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Nm(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await yu(this,this.stsTokenManager.getToken(this.auth,e));return we(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return GL(this,e)}reload(){return qL(this)}_assign(e){this!==e&&(we(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ci({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){we(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Wd(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(kn(this.auth.app))return Promise.reject(ms(this.auth));const e=await this.getIdToken();return await yu(this,FL(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,o=t.email??void 0,a=t.phoneNumber??void 0,u=t.photoURL??void 0,f=t.tenantId??void 0,m=t._redirectEventId??void 0,h=t.createdAt??void 0,v=t.lastLoginAt??void 0,{uid:T,emailVerified:S,isAnonymous:I,providerData:k,stsTokenManager:O}=t;we(T&&O,e,"internal-error");const P=Sa.fromJSON(this.name,O);we(typeof T=="string",e,"internal-error"),or(i,e.name),or(o,e.name),we(typeof S=="boolean",e,"internal-error"),we(typeof I=="boolean",e,"internal-error"),or(a,e.name),or(u,e.name),or(f,e.name),or(m,e.name),or(h,e.name),or(v,e.name);const $=new ci({uid:T,auth:e,email:o,emailVerified:S,displayName:i,isAnonymous:I,photoURL:u,phoneNumber:a,tenantId:f,stsTokenManager:P,createdAt:h,lastLoginAt:v});return k&&Array.isArray(k)&&($.providerData=k.map(ee=>({...ee}))),m&&($._redirectEventId=m),$}static async _fromIdTokenResponse(e,t,i=!1){const o=new Sa;o.updateFromServerResponse(t);const a=new ci({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await Wd(a),a}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];we(o.localId!==void 0,"internal-error");const a=o.providerUserInfo!==void 0?QA(o.providerUserInfo):[],u=!(o.email&&o.passwordHash)&&!(a!=null&&a.length),f=new Sa;f.updateFromIdToken(i);const m=new ci({uid:o.localId,auth:e,stsTokenManager:f,isAnonymous:u}),h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Nm(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(a!=null&&a.length)};return Object.assign(m,h),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wE=new Map;function ps(n){vs(n instanceof Function,"Expected a class definition");let e=wE.get(n);return e?(vs(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,wE.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}WA.type="NONE";const CE=WA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kd(n,e,t){return`firebase:${n}:${e}:${t}`}class Aa{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:a}=this.auth;this.fullUserKey=kd(this.userKey,o.apiKey,a),this.fullPersistenceKey=kd("persistence",o.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Qd(this.auth,{idToken:e}).catch(()=>{});return t?ci._fromGetAccountInfoResponse(this.auth,t,e):null}return ci._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Aa(ps(CE),e,i);const o=(await Promise.all(t.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let a=o[0]||ps(CE);const u=kd(i,e.config.apiKey,e.name);let f=null;for(const h of t)try{const v=await h._get(u);if(v){let T;if(typeof v=="string"){const S=await Qd(e,{idToken:v}).catch(()=>{});if(!S)break;T=await ci._fromGetAccountInfoResponse(e,S,v)}else T=ci._fromJSON(e,v);h!==a&&(f=T),a=h;break}}catch{}const m=o.filter(h=>h._shouldAllowMigration);return!a._shouldAllowMigration||!m.length?new Aa(a,e,i):(a=m[0],f&&await a._set(u,f.toJSON()),await Promise.all(t.map(async h=>{if(h!==a)try{await h._remove(u)}catch{}})),new Aa(a,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xE(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(tw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(XA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(iw(e))return"Blackberry";if(sw(e))return"Webos";if(ZA(e))return"Safari";if((e.includes("chrome/")||ew(e))&&!e.includes("edge/"))return"Chrome";if(nw(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function XA(n=an()){return/firefox\//i.test(n)}function ZA(n=an()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ew(n=an()){return/crios\//i.test(n)}function tw(n=an()){return/iemobile/i.test(n)}function nw(n=an()){return/android/i.test(n)}function iw(n=an()){return/blackberry/i.test(n)}function sw(n=an()){return/webos/i.test(n)}function mg(n=an()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function KL(n=an()){var e;return mg(n)&&!!((e=window.navigator)!=null&&e.standalone)}function $L(){return aP()&&document.documentMode===10}function rw(n=an()){return mg(n)||nw(n)||sw(n)||iw(n)||/windows phone/i.test(n)||tw(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ow(n,e=[]){let t;switch(n){case"Browser":t=xE(an());break;case"Worker":t=`${xE(an())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Fa}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jL{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=a=>new Promise((u,f)=>{try{const m=e(a);u(m)}catch(m){f(m)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QL(n,e={}){return Cs(n,"GET","/v2/passwordPolicy",ws(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WL=6;class XL{constructor(e){var i;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??WL,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZL{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new IE(this),this.idTokenSubscription=new IE(this),this.beforeStateQueue=new jL(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=JA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ps(t)),this._initializationPromise=this.queue(async()=>{var i,o,a;if(!this._deleted&&(this.persistenceManager=await Aa.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((a=this.currentUser)==null?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Qd(this,{idToken:e}),i=await ci._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var a;if(kn(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(f,f))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(a=this.redirectUser)==null?void 0:a._redirectEventId,f=i==null?void 0:i._redirectEventId,m=await this.tryRedirectSignIn(e);(!u||u===f)&&(m!=null&&m.user)&&(i=m.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(u){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return we(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Wd(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=ML()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(kn(this.app))return Promise.reject(ms(this));const t=e?ln(e):null;return t&&we(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&we(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return kn(this.app)?Promise.reject(ms(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return kn(this.app)?Promise.reject(ms(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ps(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await QL(this),t=new XL(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ru("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await JL(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ps(e)||this._popupRedirectResolver;we(t,this,"argument-error"),this.redirectPersistenceManager=await Aa.create(this,[ps(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let u=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(we(f,this,"internal-error"),f.then(()=>{u||a(this.currentUser)}),typeof t=="function"){const m=e.addObserver(t,i,o);return()=>{u=!0,m()}}else{const m=e.addObserver(t);return()=>{u=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return we(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ow(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var t;if(kn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&IL(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function xs(n){return ln(n)}class IE{constructor(e){this.auth=e,this.observer=null,this.addObserver=mP(t=>this.observer=t)}get next(){return we(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function eV(n){Tf=n}function aw(n){return Tf.loadJS(n)}function tV(){return Tf.recaptchaEnterpriseScript}function nV(){return Tf.gapiScript}function iV(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class sV{constructor(){this.enterprise=new rV}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class rV{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const oV="recaptcha-enterprise",lw="NO_RECAPTCHA";class aV{constructor(e){this.type=oV,this.auth=xs(e)}async verify(e="verify",t=!1){async function i(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(u,f)=>{OL(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(m=>{if(m.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const h=new UL(m);return a.tenantId==null?a._agentRecaptchaConfig=h:a._tenantRecaptchaConfigs[a.tenantId]=h,u(h.siteKey)}}).catch(m=>{f(m)})})}function o(a,u,f){const m=window.grecaptcha;SE(m)?m.enterprise.ready(()=>{m.enterprise.execute(a,{action:e}).then(h=>{u(h)}).catch(()=>{u(lw)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new sV().execute("siteKey",{action:"verify"}):new Promise((a,u)=>{i(this.auth).then(f=>{if(!t&&SE(window.grecaptcha))o(f,a,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let m=tV();m.length!==0&&(m+=f),aw(m).then(()=>{o(f,a,u)}).catch(h=>{u(h)})}}).catch(f=>{u(f)})})}}async function bE(n,e,t,i=!1,o=!1){const a=new aV(n);let u;if(o)u=lw;else try{u=await a.verify(t)}catch{u=await a.verify(t,!0)}const f={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in f){const m=f.phoneEnrollmentInfo.phoneNumber,h=f.phoneEnrollmentInfo.recaptchaToken;Object.assign(f,{phoneEnrollmentInfo:{phoneNumber:m,recaptchaToken:h,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in f){const m=f.phoneSignInInfo.recaptchaToken;Object.assign(f,{phoneSignInInfo:{recaptchaToken:m,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return f}return i?Object.assign(f,{captchaResp:u}):Object.assign(f,{captchaResponse:u}),Object.assign(f,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(f,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),f}async function Xd(n,e,t,i,o){var a;if((a=n._getRecaptchaConfig())!=null&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await bE(n,e,t,t==="getOobCode");return i(n,u)}else return i(n,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await bE(n,e,t,t==="getOobCode");return i(n,f)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lV(n,e){const t=cg(n,"auth");if(t.isInitialized()){const o=t.getImmediate(),a=t.getOptions();if(uo(a,e??{}))return o;Qn(o,"already-initialized")}return t.initialize({options:e})}function uV(n,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(ps);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function cV(n,e,t){const i=xs(n);we(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,a=uw(e),{host:u,port:f}=dV(e),m=f===null?"":`:${f}`,h={url:`${a}//${u}${m}/`},v=Object.freeze({host:u,port:f,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){we(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),we(uo(h,i.config.emulator)&&uo(v,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=h,i.emulatorConfig=v,i.settings.appVerificationDisabledForTesting=!0,Oa(u)?(UA(`${a}//${u}${m}`),OA("Auth",!0)):fV()}function uw(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function dV(n){const e=uw(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const a=o[1];return{host:a,port:RE(i.substr(a.length+1))}}else{const[a,u]=i.split(":");return{host:a,port:RE(u)}}}function RE(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function fV(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gg{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return hs("not implemented")}_getIdTokenResponse(e){return hs("not implemented")}_linkToIdToken(e,t){return hs("not implemented")}_getReauthenticationResolver(e){return hs("not implemented")}}async function hV(n,e){return Cs(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pV(n,e){return ku(n,"POST","/v1/accounts:signInWithPassword",ws(n,e))}async function mV(n,e){return Cs(n,"POST","/v1/accounts:sendOobCode",ws(n,e))}async function gV(n,e){return mV(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yV(n,e){return ku(n,"POST","/v1/accounts:signInWithEmailLink",ws(n,e))}async function vV(n,e){return ku(n,"POST","/v1/accounts:signInWithEmailLink",ws(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu extends gg{constructor(e,t,i,o=null){super("password",i),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new vu(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new vu(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Xd(e,t,"signInWithPassword",pV);case"emailLink":return yV(e,{email:this._email,oobCode:this._password});default:Qn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Xd(e,i,"signUpPassword",hV);case"emailLink":return vV(e,{idToken:t,email:this._email,oobCode:this._password});default:Qn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wa(n,e){return ku(n,"POST","/v1/accounts:signInWithIdp",ws(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _V="http://localhost";class fo extends gg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new fo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Qn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o,...a}=t;if(!i||!o)return null;const u=new fo(i,o);return u.idToken=a.idToken||void 0,u.accessToken=a.accessToken||void 0,u.secret=a.secret,u.nonce=a.nonce,u.pendingToken=a.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return wa(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,wa(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,wa(e,t)}buildRequest(){const e={requestUri:_V,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Nu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TV(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function EV(n){const e=nu(iu(n)).link,t=e?nu(iu(e)).deep_link_id:null,i=nu(iu(n)).deep_link_id;return(i?nu(iu(i)).link:null)||i||t||e||n}class yg{constructor(e){const t=nu(iu(e)),i=t.apiKey??null,o=t.oobCode??null,a=TV(t.mode??null);we(i&&o&&a,"argument-error"),this.apiKey=i,this.operation=a,this.code=o,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=EV(e);try{return new yg(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(){this.providerId=Ga.PROVIDER_ID}static credential(e,t){return vu._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=yg.parseLink(t);return we(i,"argument-error"),vu._fromEmailAndCode(e,i.code,i.tenantId)}}Ga.PROVIDER_ID="password";Ga.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ga.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vg{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Du extends vg{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar extends Du{constructor(){super("facebook.com")}static credential(e){return fo._fromParams({providerId:ar.PROVIDER_ID,signInMethod:ar.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ar.credentialFromTaggedObject(e)}static credentialFromError(e){return ar.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ar.credential(e.oauthAccessToken)}catch{return null}}}ar.FACEBOOK_SIGN_IN_METHOD="facebook.com";ar.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds extends Du{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return fo._fromParams({providerId:ds.PROVIDER_ID,signInMethod:ds.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ds.credentialFromTaggedObject(e)}static credentialFromError(e){return ds.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return ds.credential(t,i)}catch{return null}}}ds.GOOGLE_SIGN_IN_METHOD="google.com";ds.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs extends Du{constructor(){super("github.com")}static credential(e){return fo._fromParams({providerId:fs.PROVIDER_ID,signInMethod:fs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fs.credentialFromTaggedObject(e)}static credentialFromError(e){return fs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return fs.credential(e.oauthAccessToken)}catch{return null}}}fs.GITHUB_SIGN_IN_METHOD="github.com";fs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr extends Du{constructor(){super("twitter.com")}static credential(e,t){return fo._fromParams({providerId:lr.PROVIDER_ID,signInMethod:lr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return lr.credentialFromTaggedObject(e)}static credentialFromError(e){return lr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return lr.credential(t,i)}catch{return null}}}lr.TWITTER_SIGN_IN_METHOD="twitter.com";lr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SV(n,e){return ku(n,"POST","/v1/accounts:signUp",ws(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const a=await ci._fromIdTokenResponse(e,i,o),u=NE(i);return new ho({user:a,providerId:u,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=NE(i);return new ho({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function NE(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zd extends As{constructor(e,t,i,o){super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,Zd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new Zd(e,t,i,o)}}function cw(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Zd._fromErrorAndOperation(n,a,e,i):a})}async function AV(n,e,t=!1){const i=await yu(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return ho._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wV(n,e,t=!1){const{auth:i}=n;if(kn(i.app))return Promise.reject(ms(i));const o="reauthenticate";try{const a=await yu(n,cw(i,o,e,n),t);we(a.idToken,i,"internal-error");const u=pg(a.idToken);we(u,i,"internal-error");const{sub:f}=u;return we(n.uid===f,i,"user-mismatch"),ho._forOperation(n,o,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&Qn(i,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dw(n,e,t=!1){if(kn(n.app))return Promise.reject(ms(n));const i="signIn",o=await cw(n,i,e),a=await ho._fromIdTokenResponse(n,i,o);return t||await n._updateCurrentUser(a.user),a}async function CV(n,e){return dw(xs(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fw(n){const e=xs(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function xV(n,e,t){const i=xs(n);await Xd(i,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",gV)}async function IV(n,e,t){if(kn(n.app))return Promise.reject(ms(n));const i=xs(n),u=await Xd(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",SV).catch(m=>{throw m.code==="auth/password-does-not-meet-requirements"&&fw(n),m}),f=await ho._fromIdTokenResponse(i,"signIn",u);return await i._updateCurrentUser(f.user),f}function bV(n,e,t){return kn(n.app)?Promise.reject(ms(n)):CV(ln(n),Ga.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&fw(n),i})}function RV(n,e,t,i){return ln(n).onIdTokenChanged(e,t,i)}function NV(n,e,t){return ln(n).beforeAuthStateChanged(e,t)}function MV(n,e,t,i){return ln(n).onAuthStateChanged(e,t,i)}function kV(n){return ln(n).signOut()}const ef="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hw{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(ef,"1"),this.storage.removeItem(ef),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DV=1e3,PV=10;class pw extends hw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=rw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,f,m)=>{this.notifyListeners(u,m)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const u=this.storage.getItem(i);!t&&this.localCache[i]===u||this.notifyListeners(i,u)},a=this.storage.getItem(i);$L()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,PV):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},DV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}pw.type="LOCAL";const LV=pw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mw extends hw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}mw.type="SESSION";const gw=mw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VV(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new Ef(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:a}=t.data,u=this.handlersMap[o];if(!(u!=null&&u.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const f=Array.from(u).map(async h=>h(t.origin,a)),m=await VV(f);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:m})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ef.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _g(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UV{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let a,u;return new Promise((f,m)=>{const h=_g("",20);o.port1.start();const v=setTimeout(()=>{m(new Error("unsupported_event"))},i);u={messageChannel:o,onMessage(T){const S=T;if(S.data.eventId===h)switch(S.data.status){case"ack":clearTimeout(v),a=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),f(S.data.response);break;default:clearTimeout(v),clearTimeout(a),m(new Error("invalid_response"));break}}},this.handlers.add(u),o.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:h,data:t},[o.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fi(){return window}function OV(n){Fi().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yw(){return typeof Fi().WorkerGlobalScope<"u"&&typeof Fi().importScripts=="function"}async function FV(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function GV(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function BV(){return yw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vw="firebaseLocalStorageDb",HV=1,tf="firebaseLocalStorage",_w="fbase_key";class Pu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Sf(n,e){return n.transaction([tf],e?"readwrite":"readonly").objectStore(tf)}function qV(){const n=indexedDB.deleteDatabase(vw);return new Pu(n).toPromise()}function Mm(){const n=indexedDB.open(vw,HV);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(tf,{keyPath:_w})}catch(o){t(o)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(tf)?e(i):(i.close(),await qV(),e(await Mm()))})})}async function ME(n,e,t){const i=Sf(n,!0).put({[_w]:e,value:t});return new Pu(i).toPromise()}async function zV(n,e){const t=Sf(n,!1).get(e),i=await new Pu(t).toPromise();return i===void 0?null:i.value}function kE(n,e){const t=Sf(n,!0).delete(e);return new Pu(t).toPromise()}const YV=800,JV=3;class Tw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Mm(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>JV)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return yw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ef._getInstance(BV()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,i;if(this.activeServiceWorker=await FV(),!this.activeServiceWorker)return;this.sender=new UV(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||GV()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Mm();return await ME(e,ef,"1"),await kE(e,ef),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>ME(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>zV(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>kE(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const a=Sf(o,!1).getAll();return new Pu(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:a}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(a)&&(this.notifyListeners(o,a),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),YV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Tw.type="LOCAL";const KV=Tw;new Mu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ew(n,e){return e?ps(e):(we(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tg extends gg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return wa(e,this._buildIdpRequest())}_linkToIdToken(e,t){return wa(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return wa(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function $V(n){return dw(n.auth,new Tg(n),n.bypassAuthState)}function jV(n){const{auth:e,user:t}=n;return we(t,e,"internal-error"),wV(t,new Tg(n),n.bypassAuthState)}async function QV(n){const{auth:e,user:t}=n;return we(t,e,"internal-error"),AV(t,new Tg(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sw{constructor(e,t,i,o,a=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:a,error:u,type:f}=e;if(u){this.reject(u);return}const m={auth:this.auth,requestUri:t,sessionId:i,tenantId:a||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(m))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return $V;case"linkViaPopup":case"linkViaRedirect":return QV;case"reauthViaPopup":case"reauthViaRedirect":return jV;default:Qn(this.auth,"internal-error")}}resolve(e){vs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){vs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WV=new Mu(2e3,1e4);async function DE(n,e,t){if(kn(n.app))return Promise.reject(hi(n,"operation-not-supported-in-this-environment"));const i=xs(n);bL(n,e,vg);const o=Ew(i,t);return new oo(i,"signInViaPopup",e,o).executeNotNull()}class oo extends Sw{constructor(e,t,i,o,a){super(e,t,o,a),this.provider=i,this.authWindow=null,this.pollId=null,oo.currentPopupAction&&oo.currentPopupAction.cancel(),oo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return we(e,this.auth,"internal-error"),e}async onExecution(){vs(this.filter.length===1,"Popup operations only handle one event");const e=_g();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(hi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(hi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,oo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if((i=(t=this.authWindow)==null?void 0:t.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(hi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,WV.get())};e()}}oo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XV="pendingRedirect",Dd=new Map;class ZV extends Sw{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Dd.get(this.auth._key());if(!e){try{const i=await e4(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Dd.set(this.auth._key(),e)}return this.bypassAuthState||Dd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function e4(n,e){const t=i4(e),i=n4(n);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function t4(n,e){Dd.set(n._key(),e)}function n4(n){return ps(n._redirectPersistence)}function i4(n){return kd(XV,n.config.apiKey,n.name)}async function s4(n,e,t=!1){if(kn(n.app))return Promise.reject(ms(n));const i=xs(n),o=Ew(i,e),u=await new ZV(i,o,t).execute();return u&&!t&&(delete u.user._redirectEventId,await i._persistUserIfCurrent(u.user),await i._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r4=600*1e3;class o4{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!a4(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!Aw(e)){const o=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";t.onError(hi(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=r4&&this.cachedEventUids.clear(),this.cachedEventUids.has(PE(e))}saveEventToCache(e){this.cachedEventUids.add(PE(e)),this.lastProcessedEventTime=Date.now()}}function PE(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Aw({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function a4(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Aw(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l4(n,e={}){return Cs(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,c4=/^https?/;async function d4(n){if(n.config.emulator)return;const{authorizedDomains:e}=await l4(n);for(const t of e)try{if(f4(t))return}catch{}Qn(n,"unauthorized-domain")}function f4(n){const e=Rm(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===i}if(!c4.test(t))return!1;if(u4.test(n))return i===n;const o=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h4=new Mu(3e4,6e4);function LE(){const n=Fi().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function p4(n){return new Promise((e,t)=>{var o,a,u;function i(){LE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{LE(),t(hi(n,"network-request-failed"))},timeout:h4.get()})}if((a=(o=Fi().gapi)==null?void 0:o.iframes)!=null&&a.Iframe)e(gapi.iframes.getContext());else if((u=Fi().gapi)!=null&&u.load)i();else{const f=iV("iframefcb");return Fi()[f]=()=>{gapi.load?i():t(hi(n,"network-request-failed"))},aw(`${nV()}?onload=${f}`).catch(m=>t(m))}}).catch(e=>{throw Pd=null,e})}let Pd=null;function m4(n){return Pd=Pd||p4(n),Pd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g4=new Mu(5e3,15e3),y4="__/auth/iframe",v4="emulator/auth/iframe",_4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},T4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function E4(n){const e=n.config;we(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?hg(e,v4):`https://${n.config.authDomain}/${y4}`,i={apiKey:e.apiKey,appName:n.name,v:Fa},o=T4.get(n.config.apiHost);o&&(i.eid=o);const a=n._getFrameworks();return a.length&&(i.fw=a.join(",")),`${t}?${Nu(i).slice(1)}`}async function S4(n){const e=await m4(n),t=Fi().gapi;return we(t,n,"internal-error"),e.open({where:document.body,url:E4(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:_4,dontclear:!0},i=>new Promise(async(o,a)=>{await i.restyle({setHideOnLeave:!1});const u=hi(n,"network-request-failed"),f=Fi().setTimeout(()=>{a(u)},g4.get());function m(){Fi().clearTimeout(f),o(i)}i.ping(m).then(m,()=>{a(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},w4=500,C4=600,x4="_blank",I4="http://localhost";class VE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function b4(n,e,t,i=w4,o=C4){const a=Math.max((window.screen.availHeight-o)/2,0).toString(),u=Math.max((window.screen.availWidth-i)/2,0).toString();let f="";const m={...A4,width:i.toString(),height:o.toString(),top:a,left:u},h=an().toLowerCase();t&&(f=ew(h)?x4:t),XA(h)&&(e=e||I4,m.scrollbars="yes");const v=Object.entries(m).reduce((S,[I,k])=>`${S}${I}=${k},`,"");if(KL(h)&&f!=="_self")return R4(e||"",f),new VE(null);const T=window.open(e||"",f,v);we(T,n,"popup-blocked");try{T.focus()}catch{}return new VE(T)}function R4(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N4="__/auth/handler",M4="emulator/auth/handler",k4=encodeURIComponent("fac");async function UE(n,e,t,i,o,a){we(n.config.authDomain,n,"auth-domain-config-required"),we(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:Fa,eventId:o};if(e instanceof vg){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",pP(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,T]of Object.entries({}))u[v]=T}if(e instanceof Du){const v=e.getScopes().filter(T=>T!=="");v.length>0&&(u.scopes=v.join(","))}n.tenantId&&(u.tid=n.tenantId);const f=u;for(const v of Object.keys(f))f[v]===void 0&&delete f[v];const m=await n._getAppCheckToken(),h=m?`#${k4}=${encodeURIComponent(m)}`:"";return`${D4(n)}?${Nu(f).slice(1)}${h}`}function D4({config:n}){return n.emulator?hg(n,M4):`https://${n.authDomain}/${N4}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wp="webStorageSupport";class P4{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=gw,this._completeRedirectFn=s4,this._overrideRedirectResult=t4}async _openPopup(e,t,i,o){var u;vs((u=this.eventManagers[e._key()])==null?void 0:u.manager,"_initialize() not called before _openPopup()");const a=await UE(e,t,i,Rm(),o);return b4(e,a,_g())}async _openRedirect(e,t,i,o){await this._originValidation(e);const a=await UE(e,t,i,Rm(),o);return OV(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:a}=this.eventManagers[t];return o?Promise.resolve(o):(vs(a,"If manager is not set, promise should be"),a)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await S4(e),i=new o4(e);return t.register("authEvent",o=>(we(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Wp,{type:Wp},o=>{var u;const a=(u=o==null?void 0:o[0])==null?void 0:u[Wp];a!==void 0&&t(!!a),Qn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=d4(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return rw()||ZA()||mg()}}const L4=P4;var OE="@firebase/auth",FE="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V4{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){we(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U4(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function O4(n){ba(new co("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:u,authDomain:f}=i.options;we(u&&!u.includes(":"),"invalid-api-key",{appName:i.name});const m={apiKey:u,authDomain:f,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ow(n)},h=new ZL(i,o,a,m);return uV(h,t),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),ba(new co("auth-internal",e=>{const t=xs(e.getProvider("auth").getImmediate());return(i=>new V4(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),fr(OE,FE,U4(n)),fr(OE,FE,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F4=300,G4=VA("authIdTokenMaxAge")||F4;let GE=null;const B4=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>G4)return;const o=t==null?void 0:t.token;GE!==o&&(GE=o,await fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function H4(n=HA()){const e=cg(n,"auth");if(e.isInitialized())return e.getImmediate();const t=lV(n,{popupRedirectResolver:L4,persistence:[KV,LV,gw]}),i=VA("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(i,location.origin);if(location.origin===a.origin){const u=B4(a.toString());NV(t,u,()=>u(t.currentUser)),RV(t,f=>u(f))}}const o=PA("auth");return o&&cV(t,`http://${o}`),t}function q4(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}eV({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=o=>{const a=hi("internal-error");a.customData=o,t(a)},i.type="text/javascript",i.charset="UTF-8",q4().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});O4("Browser");var BE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var hr,ww;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,M){function D(){}D.prototype=M.prototype,R.F=M.prototype,R.prototype=new D,R.prototype.constructor=R,R.D=function(U,L,B){for(var N=Array(arguments.length-2),ge=2;ge<arguments.length;ge++)N[ge-2]=arguments[ge];return M.prototype[L].apply(U,N)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(R,M,D){D||(D=0);const U=Array(16);if(typeof M=="string")for(var L=0;L<16;++L)U[L]=M.charCodeAt(D++)|M.charCodeAt(D++)<<8|M.charCodeAt(D++)<<16|M.charCodeAt(D++)<<24;else for(L=0;L<16;++L)U[L]=M[D++]|M[D++]<<8|M[D++]<<16|M[D++]<<24;M=R.g[0],D=R.g[1],L=R.g[2];let B=R.g[3],N;N=M+(B^D&(L^B))+U[0]+3614090360&4294967295,M=D+(N<<7&4294967295|N>>>25),N=B+(L^M&(D^L))+U[1]+3905402710&4294967295,B=M+(N<<12&4294967295|N>>>20),N=L+(D^B&(M^D))+U[2]+606105819&4294967295,L=B+(N<<17&4294967295|N>>>15),N=D+(M^L&(B^M))+U[3]+3250441966&4294967295,D=L+(N<<22&4294967295|N>>>10),N=M+(B^D&(L^B))+U[4]+4118548399&4294967295,M=D+(N<<7&4294967295|N>>>25),N=B+(L^M&(D^L))+U[5]+1200080426&4294967295,B=M+(N<<12&4294967295|N>>>20),N=L+(D^B&(M^D))+U[6]+2821735955&4294967295,L=B+(N<<17&4294967295|N>>>15),N=D+(M^L&(B^M))+U[7]+4249261313&4294967295,D=L+(N<<22&4294967295|N>>>10),N=M+(B^D&(L^B))+U[8]+1770035416&4294967295,M=D+(N<<7&4294967295|N>>>25),N=B+(L^M&(D^L))+U[9]+2336552879&4294967295,B=M+(N<<12&4294967295|N>>>20),N=L+(D^B&(M^D))+U[10]+4294925233&4294967295,L=B+(N<<17&4294967295|N>>>15),N=D+(M^L&(B^M))+U[11]+2304563134&4294967295,D=L+(N<<22&4294967295|N>>>10),N=M+(B^D&(L^B))+U[12]+1804603682&4294967295,M=D+(N<<7&4294967295|N>>>25),N=B+(L^M&(D^L))+U[13]+4254626195&4294967295,B=M+(N<<12&4294967295|N>>>20),N=L+(D^B&(M^D))+U[14]+2792965006&4294967295,L=B+(N<<17&4294967295|N>>>15),N=D+(M^L&(B^M))+U[15]+1236535329&4294967295,D=L+(N<<22&4294967295|N>>>10),N=M+(L^B&(D^L))+U[1]+4129170786&4294967295,M=D+(N<<5&4294967295|N>>>27),N=B+(D^L&(M^D))+U[6]+3225465664&4294967295,B=M+(N<<9&4294967295|N>>>23),N=L+(M^D&(B^M))+U[11]+643717713&4294967295,L=B+(N<<14&4294967295|N>>>18),N=D+(B^M&(L^B))+U[0]+3921069994&4294967295,D=L+(N<<20&4294967295|N>>>12),N=M+(L^B&(D^L))+U[5]+3593408605&4294967295,M=D+(N<<5&4294967295|N>>>27),N=B+(D^L&(M^D))+U[10]+38016083&4294967295,B=M+(N<<9&4294967295|N>>>23),N=L+(M^D&(B^M))+U[15]+3634488961&4294967295,L=B+(N<<14&4294967295|N>>>18),N=D+(B^M&(L^B))+U[4]+3889429448&4294967295,D=L+(N<<20&4294967295|N>>>12),N=M+(L^B&(D^L))+U[9]+568446438&4294967295,M=D+(N<<5&4294967295|N>>>27),N=B+(D^L&(M^D))+U[14]+3275163606&4294967295,B=M+(N<<9&4294967295|N>>>23),N=L+(M^D&(B^M))+U[3]+4107603335&4294967295,L=B+(N<<14&4294967295|N>>>18),N=D+(B^M&(L^B))+U[8]+1163531501&4294967295,D=L+(N<<20&4294967295|N>>>12),N=M+(L^B&(D^L))+U[13]+2850285829&4294967295,M=D+(N<<5&4294967295|N>>>27),N=B+(D^L&(M^D))+U[2]+4243563512&4294967295,B=M+(N<<9&4294967295|N>>>23),N=L+(M^D&(B^M))+U[7]+1735328473&4294967295,L=B+(N<<14&4294967295|N>>>18),N=D+(B^M&(L^B))+U[12]+2368359562&4294967295,D=L+(N<<20&4294967295|N>>>12),N=M+(D^L^B)+U[5]+4294588738&4294967295,M=D+(N<<4&4294967295|N>>>28),N=B+(M^D^L)+U[8]+2272392833&4294967295,B=M+(N<<11&4294967295|N>>>21),N=L+(B^M^D)+U[11]+1839030562&4294967295,L=B+(N<<16&4294967295|N>>>16),N=D+(L^B^M)+U[14]+4259657740&4294967295,D=L+(N<<23&4294967295|N>>>9),N=M+(D^L^B)+U[1]+2763975236&4294967295,M=D+(N<<4&4294967295|N>>>28),N=B+(M^D^L)+U[4]+1272893353&4294967295,B=M+(N<<11&4294967295|N>>>21),N=L+(B^M^D)+U[7]+4139469664&4294967295,L=B+(N<<16&4294967295|N>>>16),N=D+(L^B^M)+U[10]+3200236656&4294967295,D=L+(N<<23&4294967295|N>>>9),N=M+(D^L^B)+U[13]+681279174&4294967295,M=D+(N<<4&4294967295|N>>>28),N=B+(M^D^L)+U[0]+3936430074&4294967295,B=M+(N<<11&4294967295|N>>>21),N=L+(B^M^D)+U[3]+3572445317&4294967295,L=B+(N<<16&4294967295|N>>>16),N=D+(L^B^M)+U[6]+76029189&4294967295,D=L+(N<<23&4294967295|N>>>9),N=M+(D^L^B)+U[9]+3654602809&4294967295,M=D+(N<<4&4294967295|N>>>28),N=B+(M^D^L)+U[12]+3873151461&4294967295,B=M+(N<<11&4294967295|N>>>21),N=L+(B^M^D)+U[15]+530742520&4294967295,L=B+(N<<16&4294967295|N>>>16),N=D+(L^B^M)+U[2]+3299628645&4294967295,D=L+(N<<23&4294967295|N>>>9),N=M+(L^(D|~B))+U[0]+4096336452&4294967295,M=D+(N<<6&4294967295|N>>>26),N=B+(D^(M|~L))+U[7]+1126891415&4294967295,B=M+(N<<10&4294967295|N>>>22),N=L+(M^(B|~D))+U[14]+2878612391&4294967295,L=B+(N<<15&4294967295|N>>>17),N=D+(B^(L|~M))+U[5]+4237533241&4294967295,D=L+(N<<21&4294967295|N>>>11),N=M+(L^(D|~B))+U[12]+1700485571&4294967295,M=D+(N<<6&4294967295|N>>>26),N=B+(D^(M|~L))+U[3]+2399980690&4294967295,B=M+(N<<10&4294967295|N>>>22),N=L+(M^(B|~D))+U[10]+4293915773&4294967295,L=B+(N<<15&4294967295|N>>>17),N=D+(B^(L|~M))+U[1]+2240044497&4294967295,D=L+(N<<21&4294967295|N>>>11),N=M+(L^(D|~B))+U[8]+1873313359&4294967295,M=D+(N<<6&4294967295|N>>>26),N=B+(D^(M|~L))+U[15]+4264355552&4294967295,B=M+(N<<10&4294967295|N>>>22),N=L+(M^(B|~D))+U[6]+2734768916&4294967295,L=B+(N<<15&4294967295|N>>>17),N=D+(B^(L|~M))+U[13]+1309151649&4294967295,D=L+(N<<21&4294967295|N>>>11),N=M+(L^(D|~B))+U[4]+4149444226&4294967295,M=D+(N<<6&4294967295|N>>>26),N=B+(D^(M|~L))+U[11]+3174756917&4294967295,B=M+(N<<10&4294967295|N>>>22),N=L+(M^(B|~D))+U[2]+718787259&4294967295,L=B+(N<<15&4294967295|N>>>17),N=D+(B^(L|~M))+U[9]+3951481745&4294967295,R.g[0]=R.g[0]+M&4294967295,R.g[1]=R.g[1]+(L+(N<<21&4294967295|N>>>11))&4294967295,R.g[2]=R.g[2]+L&4294967295,R.g[3]=R.g[3]+B&4294967295}i.prototype.v=function(R,M){M===void 0&&(M=R.length);const D=M-this.blockSize,U=this.C;let L=this.h,B=0;for(;B<M;){if(L==0)for(;B<=D;)o(this,R,B),B+=this.blockSize;if(typeof R=="string"){for(;B<M;)if(U[L++]=R.charCodeAt(B++),L==this.blockSize){o(this,U),L=0;break}}else for(;B<M;)if(U[L++]=R[B++],L==this.blockSize){o(this,U),L=0;break}}this.h=L,this.o+=M},i.prototype.A=function(){var R=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);R[0]=128;for(var M=1;M<R.length-8;++M)R[M]=0;M=this.o*8;for(var D=R.length-8;D<R.length;++D)R[D]=M&255,M/=256;for(this.v(R),R=Array(16),M=0,D=0;D<4;++D)for(let U=0;U<32;U+=8)R[M++]=this.g[D]>>>U&255;return R};function a(R,M){var D=f;return Object.prototype.hasOwnProperty.call(D,R)?D[R]:D[R]=M(R)}function u(R,M){this.h=M;const D=[];let U=!0;for(let L=R.length-1;L>=0;L--){const B=R[L]|0;U&&B==M||(D[L]=B,U=!1)}this.g=D}var f={};function m(R){return-128<=R&&R<128?a(R,function(M){return new u([M|0],M<0?-1:0)}):new u([R|0],R<0?-1:0)}function h(R){if(isNaN(R)||!isFinite(R))return T;if(R<0)return P(h(-R));const M=[];let D=1;for(let U=0;R>=D;U++)M[U]=R/D|0,D*=4294967296;return new u(M,0)}function v(R,M){if(R.length==0)throw Error("number format error: empty string");if(M=M||10,M<2||36<M)throw Error("radix out of range: "+M);if(R.charAt(0)=="-")return P(v(R.substring(1),M));if(R.indexOf("-")>=0)throw Error('number format error: interior "-" character');const D=h(Math.pow(M,8));let U=T;for(let B=0;B<R.length;B+=8){var L=Math.min(8,R.length-B);const N=parseInt(R.substring(B,B+L),M);L<8?(L=h(Math.pow(M,L)),U=U.j(L).add(h(N))):(U=U.j(D),U=U.add(h(N)))}return U}var T=m(0),S=m(1),I=m(16777216);n=u.prototype,n.m=function(){if(O(this))return-P(this).m();let R=0,M=1;for(let D=0;D<this.g.length;D++){const U=this.i(D);R+=(U>=0?U:4294967296+U)*M,M*=4294967296}return R},n.toString=function(R){if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(k(this))return"0";if(O(this))return"-"+P(this).toString(R);const M=h(Math.pow(R,6));var D=this;let U="";for(;;){const L=re(D,M).g;D=$(D,L.j(M));let B=((D.g.length>0?D.g[0]:D.h)>>>0).toString(R);if(D=L,k(D))return B+U;for(;B.length<6;)B="0"+B;U=B+U}},n.i=function(R){return R<0?0:R<this.g.length?this.g[R]:this.h};function k(R){if(R.h!=0)return!1;for(let M=0;M<R.g.length;M++)if(R.g[M]!=0)return!1;return!0}function O(R){return R.h==-1}n.l=function(R){return R=$(this,R),O(R)?-1:k(R)?0:1};function P(R){const M=R.g.length,D=[];for(let U=0;U<M;U++)D[U]=~R.g[U];return new u(D,~R.h).add(S)}n.abs=function(){return O(this)?P(this):this},n.add=function(R){const M=Math.max(this.g.length,R.g.length),D=[];let U=0;for(let L=0;L<=M;L++){let B=U+(this.i(L)&65535)+(R.i(L)&65535),N=(B>>>16)+(this.i(L)>>>16)+(R.i(L)>>>16);U=N>>>16,B&=65535,N&=65535,D[L]=N<<16|B}return new u(D,D[D.length-1]&-2147483648?-1:0)};function $(R,M){return R.add(P(M))}n.j=function(R){if(k(this)||k(R))return T;if(O(this))return O(R)?P(this).j(P(R)):P(P(this).j(R));if(O(R))return P(this.j(P(R)));if(this.l(I)<0&&R.l(I)<0)return h(this.m()*R.m());const M=this.g.length+R.g.length,D=[];for(var U=0;U<2*M;U++)D[U]=0;for(U=0;U<this.g.length;U++)for(let L=0;L<R.g.length;L++){const B=this.i(U)>>>16,N=this.i(U)&65535,ge=R.i(L)>>>16,fe=R.i(L)&65535;D[2*U+2*L]+=N*fe,ee(D,2*U+2*L),D[2*U+2*L+1]+=B*fe,ee(D,2*U+2*L+1),D[2*U+2*L+1]+=N*ge,ee(D,2*U+2*L+1),D[2*U+2*L+2]+=B*ge,ee(D,2*U+2*L+2)}for(R=0;R<M;R++)D[R]=D[2*R+1]<<16|D[2*R];for(R=M;R<2*M;R++)D[R]=0;return new u(D,0)};function ee(R,M){for(;(R[M]&65535)!=R[M];)R[M+1]+=R[M]>>>16,R[M]&=65535,M++}function X(R,M){this.g=R,this.h=M}function re(R,M){if(k(M))throw Error("division by zero");if(k(R))return new X(T,T);if(O(R))return M=re(P(R),M),new X(P(M.g),P(M.h));if(O(M))return M=re(R,P(M)),new X(P(M.g),M.h);if(R.g.length>30){if(O(R)||O(M))throw Error("slowDivide_ only works with positive integers.");for(var D=S,U=M;U.l(R)<=0;)D=ae(D),U=ae(U);var L=j(D,1),B=j(U,1);for(U=j(U,2),D=j(D,2);!k(U);){var N=B.add(U);N.l(R)<=0&&(L=L.add(D),B=N),U=j(U,1),D=j(D,1)}return M=$(R,L.j(M)),new X(L,M)}for(L=T;R.l(M)>=0;){for(D=Math.max(1,Math.floor(R.m()/M.m())),U=Math.ceil(Math.log(D)/Math.LN2),U=U<=48?1:Math.pow(2,U-48),B=h(D),N=B.j(M);O(N)||N.l(R)>0;)D-=U,B=h(D),N=B.j(M);k(B)&&(B=S),L=L.add(B),R=$(R,N)}return new X(L,R)}n.B=function(R){return re(this,R).h},n.and=function(R){const M=Math.max(this.g.length,R.g.length),D=[];for(let U=0;U<M;U++)D[U]=this.i(U)&R.i(U);return new u(D,this.h&R.h)},n.or=function(R){const M=Math.max(this.g.length,R.g.length),D=[];for(let U=0;U<M;U++)D[U]=this.i(U)|R.i(U);return new u(D,this.h|R.h)},n.xor=function(R){const M=Math.max(this.g.length,R.g.length),D=[];for(let U=0;U<M;U++)D[U]=this.i(U)^R.i(U);return new u(D,this.h^R.h)};function ae(R){const M=R.g.length+1,D=[];for(let U=0;U<M;U++)D[U]=R.i(U)<<1|R.i(U-1)>>>31;return new u(D,R.h)}function j(R,M){const D=M>>5;M%=32;const U=R.g.length-D,L=[];for(let B=0;B<U;B++)L[B]=M>0?R.i(B+D)>>>M|R.i(B+D+1)<<32-M:R.i(B+D);return new u(L,R.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,ww=i,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=h,u.fromString=v,hr=u}).apply(typeof BE<"u"?BE:typeof self<"u"?self:typeof window<"u"?window:{});var Ad=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Cw,su,xw,Ld,km,Iw,bw,Rw;(function(){var n,e=Object.defineProperty;function t(g){g=[typeof globalThis=="object"&&globalThis,g,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ad=="object"&&Ad];for(var E=0;E<g.length;++E){var C=g[E];if(C&&C.Math==Math)return C}throw Error("Cannot find global object")}var i=t(this);function o(g,E){if(E)e:{var C=i;g=g.split(".");for(var b=0;b<g.length-1;b++){var q=g[b];if(!(q in C))break e;C=C[q]}g=g[g.length-1],b=C[g],E=E(b),E!=b&&E!=null&&e(C,g,{configurable:!0,writable:!0,value:E})}}o("Symbol.dispose",function(g){return g||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(g){return g||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(g){return g||function(E){var C=[],b;for(b in E)Object.prototype.hasOwnProperty.call(E,b)&&C.push([b,E[b]]);return C}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},u=this||self;function f(g){var E=typeof g;return E=="object"&&g!=null||E=="function"}function m(g,E,C){return g.call.apply(g.bind,arguments)}function h(g,E,C){return h=m,h.apply(null,arguments)}function v(g,E){var C=Array.prototype.slice.call(arguments,1);return function(){var b=C.slice();return b.push.apply(b,arguments),g.apply(this,b)}}function T(g,E){function C(){}C.prototype=E.prototype,g.Z=E.prototype,g.prototype=new C,g.prototype.constructor=g,g.Ob=function(b,q,Q){for(var le=Array(arguments.length-2),De=2;De<arguments.length;De++)le[De-2]=arguments[De];return E.prototype[q].apply(b,le)}}var S=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?g=>g&&AsyncContext.Snapshot.wrap(g):g=>g;function I(g){const E=g.length;if(E>0){const C=Array(E);for(let b=0;b<E;b++)C[b]=g[b];return C}return[]}function k(g,E){for(let b=1;b<arguments.length;b++){const q=arguments[b];var C=typeof q;if(C=C!="object"?C:q?Array.isArray(q)?"array":C:"null",C=="array"||C=="object"&&typeof q.length=="number"){C=g.length||0;const Q=q.length||0;g.length=C+Q;for(let le=0;le<Q;le++)g[C+le]=q[le]}else g.push(q)}}class O{constructor(E,C){this.i=E,this.j=C,this.h=0,this.g=null}get(){let E;return this.h>0?(this.h--,E=this.g,this.g=E.next,E.next=null):E=this.i(),E}}function P(g){u.setTimeout(()=>{throw g},0)}function $(){var g=R;let E=null;return g.g&&(E=g.g,g.g=g.g.next,g.g||(g.h=null),E.next=null),E}class ee{constructor(){this.h=this.g=null}add(E,C){const b=X.get();b.set(E,C),this.h?this.h.next=b:this.g=b,this.h=b}}var X=new O(()=>new re,g=>g.reset());class re{constructor(){this.next=this.g=this.h=null}set(E,C){this.h=E,this.g=C,this.next=null}reset(){this.next=this.g=this.h=null}}let ae,j=!1,R=new ee,M=()=>{const g=Promise.resolve(void 0);ae=()=>{g.then(D)}};function D(){for(var g;g=$();){try{g.h.call(g.g)}catch(C){P(C)}var E=X;E.j(g),E.h<100&&(E.h++,g.next=E.g,E.g=g)}j=!1}function U(){this.u=this.u,this.C=this.C}U.prototype.u=!1,U.prototype.dispose=function(){this.u||(this.u=!0,this.N())},U.prototype[Symbol.dispose]=function(){this.dispose()},U.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function L(g,E){this.type=g,this.g=this.target=E,this.defaultPrevented=!1}L.prototype.h=function(){this.defaultPrevented=!0};var B=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var g=!1,E=Object.defineProperty({},"passive",{get:function(){g=!0}});try{const C=()=>{};u.addEventListener("test",C,E),u.removeEventListener("test",C,E)}catch{}return g})();function N(g){return/^[\s\xa0]*$/.test(g)}function ge(g,E){L.call(this,g?g.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,g&&this.init(g,E)}T(ge,L),ge.prototype.init=function(g,E){const C=this.type=g.type,b=g.changedTouches&&g.changedTouches.length?g.changedTouches[0]:null;this.target=g.target||g.srcElement,this.g=E,E=g.relatedTarget,E||(C=="mouseover"?E=g.fromElement:C=="mouseout"&&(E=g.toElement)),this.relatedTarget=E,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0),this.button=g.button,this.key=g.key||"",this.ctrlKey=g.ctrlKey,this.altKey=g.altKey,this.shiftKey=g.shiftKey,this.metaKey=g.metaKey,this.pointerId=g.pointerId||0,this.pointerType=g.pointerType,this.state=g.state,this.i=g,g.defaultPrevented&&ge.Z.h.call(this)},ge.prototype.h=function(){ge.Z.h.call(this);const g=this.i;g.preventDefault?g.preventDefault():g.returnValue=!1};var fe="closure_listenable_"+(Math.random()*1e6|0),Y=0;function ue(g,E,C,b,q){this.listener=g,this.proxy=null,this.src=E,this.type=C,this.capture=!!b,this.ha=q,this.key=++Y,this.da=this.fa=!1}function pe(g){g.da=!0,g.listener=null,g.proxy=null,g.src=null,g.ha=null}function ke(g,E,C){for(const b in g)E.call(C,g[b],b,g)}function Ke(g,E){for(const C in g)E.call(void 0,g[C],C,g)}function G(g){const E={};for(const C in g)E[C]=g[C];return E}const ne="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ce(g,E){let C,b;for(let q=1;q<arguments.length;q++){b=arguments[q];for(C in b)g[C]=b[C];for(let Q=0;Q<ne.length;Q++)C=ne[Q],Object.prototype.hasOwnProperty.call(b,C)&&(g[C]=b[C])}}function ye(g){this.src=g,this.g={},this.h=0}ye.prototype.add=function(g,E,C,b,q){const Q=g.toString();g=this.g[Q],g||(g=this.g[Q]=[],this.h++);const le=Le(g,E,b,q);return le>-1?(E=g[le],C||(E.fa=!1)):(E=new ue(E,this.src,Q,!!b,q),E.fa=C,g.push(E)),E};function xe(g,E){const C=E.type;if(C in g.g){var b=g.g[C],q=Array.prototype.indexOf.call(b,E,void 0),Q;(Q=q>=0)&&Array.prototype.splice.call(b,q,1),Q&&(pe(E),g.g[C].length==0&&(delete g.g[C],g.h--))}}function Le(g,E,C,b){for(let q=0;q<g.length;++q){const Q=g[q];if(!Q.da&&Q.listener==E&&Q.capture==!!C&&Q.ha==b)return q}return-1}var Ye="closure_lm_"+(Math.random()*1e6|0),Lt={};function dt(g,E,C,b,q){if(Array.isArray(E)){for(let Q=0;Q<E.length;Q++)dt(g,E[Q],C,b,q);return null}return C=Ka(C),g&&g[fe]?g.J(E,C,f(b)?!!b.capture:!1,q):wr(g,E,C,!1,b,q)}function wr(g,E,C,b,q,Q){if(!E)throw Error("Invalid event type");const le=f(q)?!!q.capture:!!q;let De=Cr(g);if(De||(g[Ye]=De=new ye(g)),C=De.add(E,C,b,le,Q),C.proxy)return C;if(b=Ao(),C.proxy=b,b.src=g,b.listener=C,g.addEventListener)B||(q=le),q===void 0&&(q=!1),g.addEventListener(E.toString(),b,q);else if(g.attachEvent)g.attachEvent(gi(E.toString()),b);else if(g.addListener&&g.removeListener)g.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return C}function Ao(){function g(C){return E.call(g.src,g.listener,C)}const E=Ya;return g}function wo(g,E,C,b,q){if(Array.isArray(E))for(var Q=0;Q<E.length;Q++)wo(g,E[Q],C,b,q);else b=f(b)?!!b.capture:!!b,C=Ka(C),g&&g[fe]?(g=g.i,Q=String(E).toString(),Q in g.g&&(E=g.g[Q],C=Le(E,C,b,q),C>-1&&(pe(E[C]),Array.prototype.splice.call(E,C,1),E.length==0&&(delete g.g[Q],g.h--)))):g&&(g=Cr(g))&&(E=g.g[E.toString()],g=-1,E&&(g=Le(E,C,b,q)),(C=g>-1?E[g]:null)&&Co(C))}function Co(g){if(typeof g!="number"&&g&&!g.da){var E=g.src;if(E&&E[fe])xe(E.i,g);else{var C=g.type,b=g.proxy;E.removeEventListener?E.removeEventListener(C,b,g.capture):E.detachEvent?E.detachEvent(gi(C),b):E.addListener&&E.removeListener&&E.removeListener(b),(C=Cr(E))?(xe(C,g),C.h==0&&(C.src=null,E[Ye]=null)):pe(g)}}}function gi(g){return g in Lt?Lt[g]:Lt[g]="on"+g}function Ya(g,E){if(g.da)g=!0;else{E=new ge(E,this);const C=g.listener,b=g.ha||g.src;g.fa&&Co(g),g=C.call(b,E)}return g}function Cr(g){return g=g[Ye],g instanceof ye?g:null}var Ja="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ka(g){return typeof g=="function"?g:(g[Ja]||(g[Ja]=function(E){return g.handleEvent(E)}),g[Ja])}function wt(){U.call(this),this.i=new ye(this),this.M=this,this.G=null}T(wt,U),wt.prototype[fe]=!0,wt.prototype.removeEventListener=function(g,E,C,b){wo(this,g,E,C,b)};function Vt(g,E){var C,b=g.G;if(b)for(C=[];b;b=b.G)C.push(b);if(g=g.M,b=E.type||E,typeof E=="string")E=new L(E,g);else if(E instanceof L)E.target=E.target||g;else{var q=E;E=new L(b,g),ce(E,q)}q=!0;let Q,le;if(C)for(le=C.length-1;le>=0;le--)Q=E.g=C[le],q=Is(Q,b,!0,E)&&q;if(Q=E.g=g,q=Is(Q,b,!0,E)&&q,q=Is(Q,b,!1,E)&&q,C)for(le=0;le<C.length;le++)Q=E.g=C[le],q=Is(Q,b,!1,E)&&q}wt.prototype.N=function(){if(wt.Z.N.call(this),this.i){var g=this.i;for(const E in g.g){const C=g.g[E];for(let b=0;b<C.length;b++)pe(C[b]);delete g.g[E],g.h--}}this.G=null},wt.prototype.J=function(g,E,C,b){return this.i.add(String(g),E,!1,C,b)},wt.prototype.K=function(g,E,C,b){return this.i.add(String(g),E,!0,C,b)};function Is(g,E,C,b){if(E=g.i.g[String(E)],!E)return!0;E=E.concat();let q=!0;for(let Q=0;Q<E.length;++Q){const le=E[Q];if(le&&!le.da&&le.capture==C){const De=le.listener,Tt=le.ha||le.src;le.fa&&xe(g.i,le),q=De.call(Tt,b)!==!1&&q}}return q&&!b.defaultPrevented}function Of(g,E){if(typeof g!="function")if(g&&typeof g.handleEvent=="function")g=h(g.handleEvent,g);else throw Error("Invalid listener argument");return Number(E)>2147483647?-1:u.setTimeout(g,E||0)}function Bu(g){g.g=Of(()=>{g.g=null,g.i&&(g.i=!1,Bu(g))},g.l);const E=g.h;g.h=null,g.m.apply(null,E)}class un extends U{constructor(E,C){super(),this.m=E,this.l=C,this.h=null,this.i=!1,this.g=null}j(E){this.h=arguments,this.g?this.i=!0:Bu(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function xr(g){U.call(this),this.h=g,this.g={}}T(xr,U);var $a=[];function ja(g){ke(g.g,function(E,C){this.g.hasOwnProperty(C)&&Co(E)},g),g.g={}}xr.prototype.N=function(){xr.Z.N.call(this),ja(this)},xr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var bs=u.JSON.stringify,Ff=u.JSON.parse,Hu=class{stringify(g){return u.JSON.stringify(g,void 0)}parse(g){return u.JSON.parse(g,void 0)}};function qu(){}function zu(){}var Wn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Jt(){L.call(this,"d")}T(Jt,L);function Pn(){L.call(this,"c")}T(Pn,L);var _t={},Yu=null;function xo(){return Yu=Yu||new wt}_t.Ia="serverreachability";function Ju(g){L.call(this,_t.Ia,g)}T(Ju,L);function yi(g){const E=xo();Vt(E,new Ju(E))}_t.STAT_EVENT="statevent";function Ir(g,E){L.call(this,_t.STAT_EVENT,g),this.stat=E}T(Ir,L);function Ct(g){const E=xo();Vt(E,new Ir(E,g))}_t.Ja="timingevent";function vi(g,E){L.call(this,_t.Ja,g),this.size=E}T(vi,L);function _i(g,E){if(typeof g!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){g()},E)}function Xn(){this.g=!0}Xn.prototype.ua=function(){this.g=!1};function Gf(g,E,C,b,q,Q){g.info(function(){if(g.g)if(Q){var le="",De=Q.split("&");for(let We=0;We<De.length;We++){var Tt=De[We].split("=");if(Tt.length>1){const ft=Tt[0];Tt=Tt[1];const On=ft.split("_");le=On.length>=2&&On[1]=="type"?le+(ft+"="+Tt+"&"):le+(ft+"=redacted&")}}}else le=null;else le=Q;return"XMLHTTP REQ ("+b+") [attempt "+q+"]: "+E+`
`+C+`
`+le})}function Ku(g,E,C,b,q,Q,le){g.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+q+"]: "+E+`
`+C+`
`+Q+" "+le})}function Ti(g,E,C,b){g.info(function(){return"XMLHTTP TEXT ("+E+"): "+Bf(g,C)+(b?" "+b:"")})}function br(g,E){g.info(function(){return"TIMEOUT: "+E})}Xn.prototype.info=function(){};function Bf(g,E){if(!g.g)return E;if(!E)return null;try{const Q=JSON.parse(E);if(Q){for(g=0;g<Q.length;g++)if(Array.isArray(Q[g])){var C=Q[g];if(!(C.length<2)){var b=C[1];if(Array.isArray(b)&&!(b.length<1)){var q=b[0];if(q!="noop"&&q!="stop"&&q!="close")for(let le=1;le<b.length;le++)b[le]=""}}}}return bs(Q)}catch{return E}}var Rr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Qa={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Wa;function Nr(){}T(Nr,qu),Nr.prototype.g=function(){return new XMLHttpRequest},Wa=new Nr;function Ji(g){return encodeURIComponent(String(g))}function $u(g){var E=1;g=g.split(":");const C=[];for(;E>0&&g.length;)C.push(g.shift()),E--;return g.length&&C.push(g.join(":")),C}function Zn(g,E,C,b){this.j=g,this.i=E,this.l=C,this.S=b||1,this.V=new xr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ei}function ei(){this.i=null,this.g="",this.h=!1}var xt={},Bt={};function Ei(g,E,C){g.M=1,g.A=Mr(bt(E)),g.u=C,g.R=!0,Io(g,null)}function Io(g,E){g.F=Date.now(),Si(g),g.B=bt(g.A);var C=g.B,b=g.S;Array.isArray(b)||(b=[String(b)]),Mo(C.i,"t",b),g.C=0,C=g.j.L,g.h=new ei,g.g=uc(g.j,C?E:null,!g.u),g.P>0&&(g.O=new un(h(g.Y,g,g.g),g.P)),E=g.V,C=g.g,b=g.ba;var q="readystatechange";Array.isArray(q)||(q&&($a[0]=q.toString()),q=$a);for(let Q=0;Q<q.length;Q++){const le=dt(C,q[Q],b||E.handleEvent,!1,E.h||E);if(!le)break;E.g[le.key]=le}E=g.J?G(g.J):{},g.u?(g.v||(g.v="POST"),E["Content-Type"]="application/x-www-form-urlencoded",g.g.ea(g.B,g.v,g.u,E)):(g.v="GET",g.g.ea(g.B,g.v,null,E)),yi(),Gf(g.i,g.v,g.B,g.l,g.S,g.u)}Zn.prototype.ba=function(g){g=g.target;const E=this.O;E&&ii(g)==3?E.j():this.Y(g)},Zn.prototype.Y=function(g){try{if(g==this.g)e:{const De=ii(this.g),Tt=this.g.ya(),We=this.g.ca();if(!(De<3)&&(De!=3||this.g&&(this.h.h||this.g.la()||Kt(this.g)))){this.K||De!=4||Tt==7||(Tt==8||We<=0?yi(3):yi(2)),Ai(this);var E=this.g.ca();this.X=E;var C=Hf(this);if(this.o=E==200,Ku(this.i,this.v,this.B,this.l,this.S,De,E),this.o){if(this.U&&!this.L){t:{if(this.g){var b,q=this.g;if((b=q.g?q.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(b)){var Q=b;break t}}Q=null}if(g=Q)Ti(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,wi(this,g);else{this.o=!1,this.m=3,Ct(12),An(this),Ln(this);break e}}if(this.R){g=!0;let ft;for(;!this.K&&this.C<C.length;)if(ft=Qu(this,C),ft==Bt){De==4&&(this.m=4,Ct(14),g=!1),Ti(this.i,this.l,null,"[Incomplete Response]");break}else if(ft==xt){this.m=4,Ct(15),Ti(this.i,this.l,C,"[Invalid Chunk]"),g=!1;break}else Ti(this.i,this.l,ft,null),wi(this,ft);if(ju(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),De!=4||C.length!=0||this.h.h||(this.m=1,Ct(16),g=!1),this.o=this.o&&g,!g)Ti(this.i,this.l,C,"[Invalid Chunked Response]"),An(this),Ln(this);else if(C.length>0&&!this.W){this.W=!0;var le=this.j;le.g==this&&le.aa&&!le.P&&(le.j.info("Great, no buffering proxy detected. Bytes received: "+C.length),fl(le),le.P=!0,Ct(11))}}else Ti(this.i,this.l,C,null),wi(this,C);De==4&&An(this),this.o&&!this.K&&(De==4?rc(this.j,this):(this.o=!1,Si(this)))}else $i(this.g),E==400&&C.indexOf("Unknown SID")>0?(this.m=3,Ct(12)):(this.m=0,Ct(13)),An(this),Ln(this)}}}catch{}finally{}};function Hf(g){if(!ju(g))return g.g.la();const E=Kt(g.g);if(E==="")return"";let C="";const b=E.length,q=ii(g.g)==4;if(!g.h.i){if(typeof TextDecoder>"u")return An(g),Ln(g),"";g.h.i=new u.TextDecoder}for(let Q=0;Q<b;Q++)g.h.h=!0,C+=g.h.i.decode(E[Q],{stream:!(q&&Q==b-1)});return E.length=0,g.h.g+=C,g.C=0,g.h.g}function ju(g){return g.g?g.v=="GET"&&g.M!=2&&g.j.Aa:!1}function Qu(g,E){var C=g.C,b=E.indexOf(`
`,C);return b==-1?Bt:(C=Number(E.substring(C,b)),isNaN(C)?xt:(b+=1,b+C>E.length?Bt:(E=E.slice(b,b+C),g.C=b+C,E)))}Zn.prototype.cancel=function(){this.K=!0,An(this)};function Si(g){g.T=Date.now()+g.H,bo(g,g.H)}function bo(g,E){if(g.D!=null)throw Error("WatchDog timer not null");g.D=_i(h(g.aa,g),E)}function Ai(g){g.D&&(u.clearTimeout(g.D),g.D=null)}Zn.prototype.aa=function(){this.D=null;const g=Date.now();g-this.T>=0?(br(this.i,this.B),this.M!=2&&(yi(),Ct(17)),An(this),this.m=2,Ln(this)):bo(this,this.T-g)};function Ln(g){g.j.I==0||g.K||rc(g.j,g)}function An(g){Ai(g);var E=g.O;E&&typeof E.dispose=="function"&&E.dispose(),g.O=null,ja(g.V),g.g&&(E=g.g,g.g=null,E.abort(),E.dispose())}function wi(g,E){try{var C=g.j;if(C.I!=0&&(C.g==g||xi(C.h,g))){if(!g.L&&xi(C.h,g)&&C.I==3){try{var b=C.Ba.g.parse(E)}catch{b=null}if(Array.isArray(b)&&b.length==3){var q=b;if(q[0]==0){e:if(!C.v){if(C.g)if(C.g.F+3e3<g.F)Vo(C),Vs(C);else break e;Or(C),Ct(18)}}else C.xa=q[1],0<C.xa-C.K&&q[2]<37500&&C.F&&C.A==0&&!C.C&&(C.C=_i(h(C.Va,C),6e3));Ci(C.h)<=1&&C.ta&&(C.ta=void 0)}else ki(C,11)}else if((g.L||C.g==g)&&Vo(C),!N(E))for(q=C.Ba.g.parse(E),E=0;E<q.length;E++){let We=q[E];const ft=We[0];if(!(ft<=C.K))if(C.K=ft,We=We[1],C.I==2)if(We[0]=="c"){C.M=We[1],C.ba=We[2];const On=We[3];On!=null&&(C.ka=On,C.j.info("VER="+C.ka));const Di=We[4];Di!=null&&(C.za=Di,C.j.info("SVER="+C.za));const si=We[5];si!=null&&typeof si=="number"&&si>0&&(b=1.5*si,C.O=b,C.j.info("backChannelRequestTimeoutMs_="+b)),b=C;const ri=g.g;if(ri){const Fr=ri.g?ri.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Fr){var Q=b.h;Q.g||Fr.indexOf("spdy")==-1&&Fr.indexOf("quic")==-1&&Fr.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(el(Q,Q.h),Q.h=null))}if(b.G){const Uo=ri.g?ri.g.getResponseHeader("X-HTTP-Session-Id"):null;Uo&&(b.wa=Uo,et(b.J,b.G,Uo))}}C.I=3,C.l&&C.l.ra(),C.aa&&(C.T=Date.now()-g.F,C.j.info("Handshake RTT: "+C.T+"ms")),b=C;var le=g;if(b.na=lc(b,b.L?b.ba:null,b.W),le.L){tl(b.h,le);var De=le,Tt=b.O;Tt&&(De.H=Tt),De.D&&(Ai(De),Si(De)),b.g=le}else ic(b);C.i.length>0&&Mi(C)}else We[0]!="stop"&&We[0]!="close"||ki(C,7);else C.I==3&&(We[0]=="stop"||We[0]=="close"?We[0]=="stop"?ki(C,7):cl(C):We[0]!="noop"&&C.l&&C.l.qa(We),C.A=0)}}yi(4)}catch{}}var It=class{constructor(g,E){this.g=g,this.map=E}};function Xa(g){this.l=g||10,u.PerformanceNavigationTiming?(g=u.performance.getEntriesByType("navigation"),g=g.length>0&&(g[0].nextHopProtocol=="hq"||g[0].nextHopProtocol=="h2")):g=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=g?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Za(g){return g.h?!0:g.g?g.g.size>=g.j:!1}function Ci(g){return g.h?1:g.g?g.g.size:0}function xi(g,E){return g.h?g.h==E:g.g?g.g.has(E):!1}function el(g,E){g.g?g.g.add(E):g.h=E}function tl(g,E){g.h&&g.h==E?g.h=null:g.g&&g.g.has(E)&&g.g.delete(E)}Xa.prototype.cancel=function(){if(this.i=nl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const g of this.g.values())g.cancel();this.g.clear()}};function nl(g){if(g.h!=null)return g.i.concat(g.h.G);if(g.g!=null&&g.g.size!==0){let E=g.i;for(const C of g.g.values())E=E.concat(C.G);return E}return I(g.i)}var Wu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ro(g,E){if(g){g=g.split("&");for(let C=0;C<g.length;C++){const b=g[C].indexOf("=");let q,Q=null;b>=0?(q=g[C].substring(0,b),Q=g[C].substring(b+1)):q=g[C],E(q,Q?decodeURIComponent(Q.replace(/\+/g," ")):"")}}}function wn(g){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let E;g instanceof wn?(this.l=g.l,Ht(this,g.j),this.o=g.o,this.g=g.g,Rs(this,g.u),this.h=g.h,il(this,tc(g.i)),this.m=g.m):g&&(E=String(g).match(Wu))?(this.l=!1,Ht(this,E[1]||"",!0),this.o=Ii(E[2]||""),this.g=Ii(E[3]||"",!0),Rs(this,E[4]),this.h=Ii(E[5]||"",!0),il(this,E[6]||"",!0),this.m=Ii(E[7]||"")):(this.l=!1,this.i=new Ms(null,this.l))}wn.prototype.toString=function(){const g=[];var E=this.j;E&&g.push(kr(E,No,!0),":");var C=this.g;return(C||E=="file")&&(g.push("//"),(E=this.o)&&g.push(kr(E,No,!0),"@"),g.push(Ji(C).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C=this.u,C!=null&&g.push(":",String(C))),(C=this.h)&&(this.g&&C.charAt(0)!="/"&&g.push("/"),g.push(kr(C,C.charAt(0)=="/"?sl:Xu,!0))),(C=this.i.toString())&&g.push("?",C),(C=this.m)&&g.push("#",kr(C,Zu)),g.join("")},wn.prototype.resolve=function(g){const E=bt(this);let C=!!g.j;C?Ht(E,g.j):C=!!g.o,C?E.o=g.o:C=!!g.g,C?E.g=g.g:C=g.u!=null;var b=g.h;if(C)Rs(E,g.u);else if(C=!!g.h){if(b.charAt(0)!="/")if(this.g&&!this.h)b="/"+b;else{var q=E.h.lastIndexOf("/");q!=-1&&(b=E.h.slice(0,q+1)+b)}if(q=b,q==".."||q==".")b="";else if(q.indexOf("./")!=-1||q.indexOf("/.")!=-1){b=q.lastIndexOf("/",0)==0,q=q.split("/");const Q=[];for(let le=0;le<q.length;){const De=q[le++];De=="."?b&&le==q.length&&Q.push(""):De==".."?((Q.length>1||Q.length==1&&Q[0]!="")&&Q.pop(),b&&le==q.length&&Q.push("")):(Q.push(De),b=!0)}b=Q.join("/")}else b=q}return C?E.h=b:C=g.i.toString()!=="",C?il(E,tc(g.i)):C=!!g.m,C&&(E.m=g.m),E};function bt(g){return new wn(g)}function Ht(g,E,C){g.j=C?Ii(E,!0):E,g.j&&(g.j=g.j.replace(/:$/,""))}function Rs(g,E){if(E){if(E=Number(E),isNaN(E)||E<0)throw Error("Bad port number "+E);g.u=E}else g.u=null}function il(g,E,C){E instanceof Ms?(g.i=E,ko(g.i,g.l)):(C||(E=kr(E,Ns)),g.i=new Ms(E,g.l))}function et(g,E,C){g.i.set(E,C)}function Mr(g){return et(g,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),g}function Ii(g,E){return g?E?decodeURI(g.replace(/%25/g,"%2525")):decodeURIComponent(g):""}function kr(g,E,C){return typeof g=="string"?(g=encodeURI(g).replace(E,pn),C&&(g=g.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g):null}function pn(g){return g=g.charCodeAt(0),"%"+(g>>4&15).toString(16)+(g&15).toString(16)}var No=/[#\/\?@]/g,Xu=/[#\?:]/g,sl=/[#\?]/g,Ns=/[#\?@]/g,Zu=/#/g;function Ms(g,E){this.h=this.g=null,this.i=g||null,this.j=!!E}function mn(g){g.g||(g.g=new Map,g.h=0,g.i&&Ro(g.i,function(E,C){g.add(decodeURIComponent(E.replace(/\+/g," ")),C)}))}n=Ms.prototype,n.add=function(g,E){mn(this),this.i=null,g=ks(this,g);let C=this.g.get(g);return C||this.g.set(g,C=[]),C.push(E),this.h+=1,this};function ec(g,E){mn(g),E=ks(g,E),g.g.has(E)&&(g.i=null,g.h-=g.g.get(E).length,g.g.delete(E))}function rl(g,E){return mn(g),E=ks(g,E),g.g.has(E)}n.forEach=function(g,E){mn(this),this.g.forEach(function(C,b){C.forEach(function(q){g.call(E,q,b,this)},this)},this)};function ol(g,E){mn(g);let C=[];if(typeof E=="string")rl(g,E)&&(C=C.concat(g.g.get(ks(g,E))));else for(g=Array.from(g.g.values()),E=0;E<g.length;E++)C=C.concat(g[E]);return C}n.set=function(g,E){return mn(this),this.i=null,g=ks(this,g),rl(this,g)&&(this.h-=this.g.get(g).length),this.g.set(g,[E]),this.h+=1,this},n.get=function(g,E){return g?(g=ol(this,g),g.length>0?String(g[0]):E):E};function Mo(g,E,C){ec(g,E),C.length>0&&(g.i=null,g.g.set(ks(g,E),I(C)),g.h+=C.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const g=[],E=Array.from(this.g.keys());for(let b=0;b<E.length;b++){var C=E[b];const q=Ji(C);C=ol(this,C);for(let Q=0;Q<C.length;Q++){let le=q;C[Q]!==""&&(le+="="+Ji(C[Q])),g.push(le)}}return this.i=g.join("&")};function tc(g){const E=new Ms;return E.i=g.i,g.g&&(E.g=new Map(g.g),E.h=g.h),E}function ks(g,E){return E=String(E),g.j&&(E=E.toLowerCase()),E}function ko(g,E){E&&!g.j&&(mn(g),g.i=null,g.g.forEach(function(C,b){const q=b.toLowerCase();b!=q&&(ec(this,b),Mo(this,q,C))},g)),g.j=E}function ti(g,E){const C=new Xn;if(u.Image){const b=new Image;b.onload=v(Vn,C,"TestLoadImage: loaded",!0,E,b),b.onerror=v(Vn,C,"TestLoadImage: error",!1,E,b),b.onabort=v(Vn,C,"TestLoadImage: abort",!1,E,b),b.ontimeout=v(Vn,C,"TestLoadImage: timeout",!1,E,b),u.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=g}else E(!1)}function al(g,E){const C=new Xn,b=new AbortController,q=setTimeout(()=>{b.abort(),Vn(C,"TestPingServer: timeout",!1,E)},1e4);fetch(g,{signal:b.signal}).then(Q=>{clearTimeout(q),Q.ok?Vn(C,"TestPingServer: ok",!0,E):Vn(C,"TestPingServer: server error",!1,E)}).catch(()=>{clearTimeout(q),Vn(C,"TestPingServer: error",!1,E)})}function Vn(g,E,C,b,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),b(C)}catch{}}function Ds(){this.g=new Hu}function bi(g){this.i=g.Sb||null,this.h=g.ab||!1}T(bi,qu),bi.prototype.g=function(){return new Dr(this.i,this.h)};function Dr(g,E){wt.call(this),this.H=g,this.o=E,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}T(Dr,wt),n=Dr.prototype,n.open=function(g,E){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=g,this.D=E,this.readyState=1,ni(this)},n.send=function(g){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const E={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};g&&(E.body=g),(this.H||u).fetch(new Request(this.D,E)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ps(this)),this.readyState=0},n.Pa=function(g){if(this.g&&(this.l=g,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=g.headers,this.readyState=2,ni(this)),this.g&&(this.readyState=3,ni(this),this.g)))if(this.responseType==="arraybuffer")g.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in g){if(this.j=g.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Do(this)}else g.text().then(this.Oa.bind(this),this.ga.bind(this))};function Do(g){g.j.read().then(g.Ma.bind(g)).catch(g.ga.bind(g))}n.Ma=function(g){if(this.g){if(this.o&&g.value)this.response.push(g.value);else if(!this.o){var E=g.value?g.value:new Uint8Array(0);(E=this.B.decode(E,{stream:!g.done}))&&(this.response=this.responseText+=E)}g.done?Ps(this):ni(this),this.readyState==3&&Do(this)}},n.Oa=function(g){this.g&&(this.response=this.responseText=g,Ps(this))},n.Na=function(g){this.g&&(this.response=g,Ps(this))},n.ga=function(){this.g&&Ps(this)};function Ps(g){g.readyState=4,g.l=null,g.j=null,g.B=null,ni(g)}n.setRequestHeader=function(g,E){this.A.append(g,E)},n.getResponseHeader=function(g){return this.h&&this.h.get(g.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const g=[],E=this.h.entries();for(var C=E.next();!C.done;)C=C.value,g.push(C[0]+": "+C[1]),C=E.next();return g.join(`\r
`)};function ni(g){g.onreadystatechange&&g.onreadystatechange.call(g)}Object.defineProperty(Dr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(g){this.m=g?"include":"same-origin"}});function Un(g){let E="";return ke(g,function(C,b){E+=b,E+=":",E+=C,E+=`\r
`}),E}function Pr(g,E,C){e:{for(b in C){var b=!1;break e}b=!0}b||(C=Un(C),typeof g=="string"?C!=null&&Ji(C):et(g,E,C))}function it(g){wt.call(this),this.headers=new Map,this.L=g||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}T(it,wt);var Ri=/^https?$/i,ll=["POST","PUT"];n=it.prototype,n.Fa=function(g){this.H=g},n.ea=function(g,E,C,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+g);E=E?E.toUpperCase():"GET",this.D=g,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Wa.g(),this.g.onreadystatechange=S(h(this.Ca,this));try{this.B=!0,this.g.open(E,String(g),!0),this.B=!1}catch(Q){Lr(this,Q);return}if(g=C||"",C=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var q in b)C.set(q,b[q]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(const Q of b.keys())C.set(Q,b.get(Q));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(C.keys()).find(Q=>Q.toLowerCase()=="content-type"),q=u.FormData&&g instanceof u.FormData,!(Array.prototype.indexOf.call(ll,E,void 0)>=0)||b||q||C.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,le]of C)this.g.setRequestHeader(Q,le);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(g),this.v=!1}catch(Q){Lr(this,Q)}};function Lr(g,E){g.h=!1,g.g&&(g.j=!0,g.g.abort(),g.j=!1),g.l=E,g.o=5,ul(g),Ki(g)}function ul(g){g.A||(g.A=!0,Vt(g,"complete"),Vt(g,"error"))}n.abort=function(g){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=g||7,Vt(this,"complete"),Vt(this,"abort"),Ki(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ki(this,!0)),it.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Vr(this):this.Xa())},n.Xa=function(){Vr(this)};function Vr(g){if(g.h&&typeof a<"u"){if(g.v&&ii(g)==4)setTimeout(g.Ca.bind(g),0);else if(Vt(g,"readystatechange"),ii(g)==4){g.h=!1;try{const Q=g.ca();e:switch(Q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var E=!0;break e;default:E=!1}var C;if(!(C=E)){var b;if(b=Q===0){let le=String(g.D).match(Wu)[1]||null;!le&&u.self&&u.self.location&&(le=u.self.location.protocol.slice(0,-1)),b=!Ri.test(le?le.toLowerCase():"")}C=b}if(C)Vt(g,"complete"),Vt(g,"success");else{g.o=6;try{var q=ii(g)>2?g.g.statusText:""}catch{q=""}g.l=q+" ["+g.ca()+"]",ul(g)}}finally{Ki(g)}}}}function Ki(g,E){if(g.g){g.m&&(clearTimeout(g.m),g.m=null);const C=g.g;g.g=null,E||Vt(g,"ready");try{C.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function ii(g){return g.g?g.g.readyState:0}n.ca=function(){try{return ii(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(g){if(this.g){var E=this.g.responseText;return g&&E.indexOf(g)==0&&(E=E.substring(g.length)),Ff(E)}};function Kt(g){try{if(!g.g)return null;if("response"in g.g)return g.g.response;switch(g.F){case"":case"text":return g.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in g.g)return g.g.mozResponseArrayBuffer}return null}catch{return null}}function $i(g){const E={};g=(g.g&&ii(g)>=2&&g.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<g.length;b++){if(N(g[b]))continue;var C=$u(g[b]);const q=C[0];if(C=C[1],typeof C!="string")continue;C=C.trim();const Q=E[q]||[];E[q]=Q,Q.push(C)}Ke(E,function(b){return b.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ni(g,E,C){return C&&C.internalChannelParams&&C.internalChannelParams[g]||E}function Ls(g){this.za=0,this.i=[],this.j=new Xn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ni("failFast",!1,g),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ni("baseRetryDelayMs",5e3,g),this.Za=Ni("retryDelaySeedMs",1e4,g),this.Ta=Ni("forwardChannelMaxRetries",2,g),this.va=Ni("forwardChannelRequestTimeoutMs",2e4,g),this.ma=g&&g.xmlHttpFactory||void 0,this.Ua=g&&g.Rb||void 0,this.Aa=g&&g.useFetchStreams||!1,this.O=void 0,this.L=g&&g.supportsCrossDomainXhr||!1,this.M="",this.h=new Xa(g&&g.concurrentRequestLimit),this.Ba=new Ds,this.S=g&&g.fastHandshake||!1,this.R=g&&g.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=g&&g.Pb||!1,g&&g.ua&&this.j.ua(),g&&g.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&g&&g.detectBufferingProxy||!1,this.ia=void 0,g&&g.longPollingTimeout&&g.longPollingTimeout>0&&(this.ia=g.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Ls.prototype,n.ka=8,n.I=1,n.connect=function(g,E,C,b){Ct(0),this.W=g,this.H=E||{},C&&b!==void 0&&(this.H.OSID=C,this.H.OAID=b),this.F=this.X,this.J=lc(this,null,this.W),Mi(this)};function cl(g){if(Po(g),g.I==3){var E=g.V++,C=bt(g.J);if(et(C,"SID",g.M),et(C,"RID",E),et(C,"TYPE","terminate"),Ur(g,C),E=new Zn(g,g.j,E),E.M=2,E.A=Mr(bt(C)),C=!1,u.navigator&&u.navigator.sendBeacon)try{C=u.navigator.sendBeacon(E.A.toString(),"")}catch{}!C&&u.Image&&(new Image().src=E.A,C=!0),C||(E.g=uc(E.j,null),E.g.ea(E.A)),E.F=Date.now(),Si(E)}ac(g)}function Vs(g){g.g&&(fl(g),g.g.cancel(),g.g=null)}function Po(g){Vs(g),g.v&&(u.clearTimeout(g.v),g.v=null),Vo(g),g.h.cancel(),g.m&&(typeof g.m=="number"&&u.clearTimeout(g.m),g.m=null)}function Mi(g){if(!Za(g.h)&&!g.m){g.m=!0;var E=g.Ea;ae||M(),j||(ae(),j=!0),R.add(E,g),g.D=0}}function Lo(g,E){return Ci(g.h)>=g.h.j-(g.m?1:0)?!1:g.m?(g.i=E.G.concat(g.i),!0):g.I==1||g.I==2||g.D>=(g.Sa?0:g.Ta)?!1:(g.m=_i(h(g.Ea,g,E),oc(g,g.D)),g.D++,!0)}n.Ea=function(g){if(this.m)if(this.m=null,this.I==1){if(!g){this.V=Math.floor(Math.random()*1e5),g=this.V++;const q=new Zn(this,this.j,g);let Q=this.o;if(this.U&&(Q?(Q=G(Q),ce(Q,this.U)):Q=this.U),this.u!==null||this.R||(q.J=Q,Q=null),this.S)e:{for(var E=0,C=0;C<this.i.length;C++){t:{var b=this.i[C];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break t}b=void 0}if(b===void 0)break;if(E+=b,E>4096){E=C;break e}if(E===4096||C===this.i.length-1){E=C+1;break e}}E=1e3}else E=1e3;E=nc(this,q,E),C=bt(this.J),et(C,"RID",g),et(C,"CVER",22),this.G&&et(C,"X-HTTP-Session-Id",this.G),Ur(this,C),Q&&(this.R?E="headers="+Ji(Un(Q))+"&"+E:this.u&&Pr(C,this.u,Q)),el(this.h,q),this.Ra&&et(C,"TYPE","init"),this.S?(et(C,"$req",E),et(C,"SID","null"),q.U=!0,Ei(q,C,null)):Ei(q,C,E),this.I=2}}else this.I==3&&(g?dl(this,g):this.i.length==0||Za(this.h)||dl(this))};function dl(g,E){var C;E?C=E.l:C=g.V++;const b=bt(g.J);et(b,"SID",g.M),et(b,"RID",C),et(b,"AID",g.K),Ur(g,b),g.u&&g.o&&Pr(b,g.u,g.o),C=new Zn(g,g.j,C,g.D+1),g.u===null&&(C.J=g.o),E&&(g.i=E.G.concat(g.i)),E=nc(g,C,1e3),C.H=Math.round(g.va*.5)+Math.round(g.va*.5*Math.random()),el(g.h,C),Ei(C,b,E)}function Ur(g,E){g.H&&ke(g.H,function(C,b){et(E,b,C)}),g.l&&ke({},function(C,b){et(E,b,C)})}function nc(g,E,C){C=Math.min(g.i.length,C);const b=g.l?h(g.l.Ka,g.l,g):null;e:{var q=g.i;let De=-1;for(;;){const Tt=["count="+C];De==-1?C>0?(De=q[0].g,Tt.push("ofs="+De)):De=0:Tt.push("ofs="+De);let We=!0;for(let ft=0;ft<C;ft++){var Q=q[ft].g;const On=q[ft].map;if(Q-=De,Q<0)De=Math.max(0,q[ft].g-100),We=!1;else try{Q="req"+Q+"_"||"";try{var le=On instanceof Map?On:Object.entries(On);for(const[Di,si]of le){let ri=si;f(si)&&(ri=bs(si)),Tt.push(Q+Di+"="+encodeURIComponent(ri))}}catch(Di){throw Tt.push(Q+"type="+encodeURIComponent("_badmap")),Di}}catch{b&&b(On)}}if(We){le=Tt.join("&");break e}}le=void 0}return g=g.i.splice(0,C),E.G=g,le}function ic(g){if(!g.g&&!g.v){g.Y=1;var E=g.Da;ae||M(),j||(ae(),j=!0),R.add(E,g),g.A=0}}function Or(g){return g.g||g.v||g.A>=3?!1:(g.Y++,g.v=_i(h(g.Da,g),oc(g,g.A)),g.A++,!0)}n.Da=function(){if(this.v=null,sc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var g=4*this.T;this.j.info("BP detection timer enabled: "+g),this.B=_i(h(this.Wa,this),g)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ct(10),Vs(this),sc(this))};function fl(g){g.B!=null&&(u.clearTimeout(g.B),g.B=null)}function sc(g){g.g=new Zn(g,g.j,"rpc",g.Y),g.u===null&&(g.g.J=g.o),g.g.P=0;var E=bt(g.na);et(E,"RID","rpc"),et(E,"SID",g.M),et(E,"AID",g.K),et(E,"CI",g.F?"0":"1"),!g.F&&g.ia&&et(E,"TO",g.ia),et(E,"TYPE","xmlhttp"),Ur(g,E),g.u&&g.o&&Pr(E,g.u,g.o),g.O&&(g.g.H=g.O);var C=g.g;g=g.ba,C.M=1,C.A=Mr(bt(E)),C.u=null,C.R=!0,Io(C,g)}n.Va=function(){this.C!=null&&(this.C=null,Vs(this),Or(this),Ct(19))};function Vo(g){g.C!=null&&(u.clearTimeout(g.C),g.C=null)}function rc(g,E){var C=null;if(g.g==E){Vo(g),fl(g),g.g=null;var b=2}else if(xi(g.h,E))C=E.G,tl(g.h,E),b=1;else return;if(g.I!=0){if(E.o)if(b==1){C=E.u?E.u.length:0,E=Date.now()-E.F;var q=g.D;b=xo(),Vt(b,new vi(b,C)),Mi(g)}else ic(g);else if(q=E.m,q==3||q==0&&E.X>0||!(b==1&&Lo(g,E)||b==2&&Or(g)))switch(C&&C.length>0&&(E=g.h,E.i=E.i.concat(C)),q){case 1:ki(g,5);break;case 4:ki(g,10);break;case 3:ki(g,6);break;default:ki(g,2)}}}function oc(g,E){let C=g.Qa+Math.floor(Math.random()*g.Za);return g.isActive()||(C*=2),C*E}function ki(g,E){if(g.j.info("Error code "+E),E==2){var C=h(g.bb,g),b=g.Ua;const q=!b;b=new wn(b||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Ht(b,"https"),Mr(b),q?ti(b.toString(),C):al(b.toString(),C)}else Ct(2);g.I=0,g.l&&g.l.pa(E),ac(g),Po(g)}n.bb=function(g){g?(this.j.info("Successfully pinged google.com"),Ct(2)):(this.j.info("Failed to ping google.com"),Ct(1))};function ac(g){if(g.I=0,g.ja=[],g.l){const E=nl(g.h);(E.length!=0||g.i.length!=0)&&(k(g.ja,E),k(g.ja,g.i),g.h.i.length=0,I(g.i),g.i.length=0),g.l.oa()}}function lc(g,E,C){var b=C instanceof wn?bt(C):new wn(C);if(b.g!="")E&&(b.g=E+"."+b.g),Rs(b,b.u);else{var q=u.location;b=q.protocol,E=E?E+"."+q.hostname:q.hostname,q=+q.port;const Q=new wn(null);b&&Ht(Q,b),E&&(Q.g=E),q&&Rs(Q,q),C&&(Q.h=C),b=Q}return C=g.G,E=g.wa,C&&E&&et(b,C,E),et(b,"VER",g.ka),Ur(g,b),b}function uc(g,E,C){if(E&&!g.L)throw Error("Can't create secondary domain capable XhrIo object.");return E=g.Aa&&!g.ma?new it(new bi({ab:C})):new it(g.ma),E.Fa(g.L),E}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function cc(){}n=cc.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Us(){}Us.prototype.g=function(g,E){return new cn(g,E)};function cn(g,E){wt.call(this),this.g=new Ls(E),this.l=g,this.h=E&&E.messageUrlParams||null,g=E&&E.messageHeaders||null,E&&E.clientProtocolHeaderRequired&&(g?g["X-Client-Protocol"]="webchannel":g={"X-Client-Protocol":"webchannel"}),this.g.o=g,g=E&&E.initMessageHeaders||null,E&&E.messageContentType&&(g?g["X-WebChannel-Content-Type"]=E.messageContentType:g={"X-WebChannel-Content-Type":E.messageContentType}),E&&E.sa&&(g?g["X-WebChannel-Client-Profile"]=E.sa:g={"X-WebChannel-Client-Profile":E.sa}),this.g.U=g,(g=E&&E.Qb)&&!N(g)&&(this.g.u=g),this.A=E&&E.supportsCrossDomainXhr||!1,this.v=E&&E.sendRawJson||!1,(E=E&&E.httpSessionIdParam)&&!N(E)&&(this.g.G=E,g=this.h,g!==null&&E in g&&(g=this.h,E in g&&delete g[E])),this.j=new ji(this)}T(cn,wt),cn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},cn.prototype.close=function(){cl(this.g)},cn.prototype.o=function(g){var E=this.g;if(typeof g=="string"){var C={};C.__data__=g,g=C}else this.v&&(C={},C.__data__=bs(g),g=C);E.i.push(new It(E.Ya++,g)),E.I==3&&Mi(E)},cn.prototype.N=function(){this.g.l=null,delete this.j,cl(this.g),delete this.g,cn.Z.N.call(this)};function dc(g){Jt.call(this),g.__headers__&&(this.headers=g.__headers__,this.statusCode=g.__status__,delete g.__headers__,delete g.__status__);var E=g.__sm__;if(E){e:{for(const C in E){g=C;break e}g=void 0}(this.i=g)&&(g=this.i,E=E!==null&&g in E?E[g]:void 0),this.data=E}else this.data=g}T(dc,Jt);function fc(){Pn.call(this),this.status=1}T(fc,Pn);function ji(g){this.g=g}T(ji,cc),ji.prototype.ra=function(){Vt(this.g,"a")},ji.prototype.qa=function(g){Vt(this.g,new dc(g))},ji.prototype.pa=function(g){Vt(this.g,new fc)},ji.prototype.oa=function(){Vt(this.g,"b")},Us.prototype.createWebChannel=Us.prototype.g,cn.prototype.send=cn.prototype.o,cn.prototype.open=cn.prototype.m,cn.prototype.close=cn.prototype.close,Rw=function(){return new Us},bw=function(){return xo()},Iw=_t,km={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Rr.NO_ERROR=0,Rr.TIMEOUT=8,Rr.HTTP_ERROR=6,Ld=Rr,Qa.COMPLETE="complete",xw=Qa,zu.EventType=Wn,Wn.OPEN="a",Wn.CLOSE="b",Wn.ERROR="c",Wn.MESSAGE="d",wt.prototype.listen=wt.prototype.J,su=zu,it.prototype.listenOnce=it.prototype.K,it.prototype.getLastError=it.prototype.Ha,it.prototype.getLastErrorCode=it.prototype.ya,it.prototype.getStatus=it.prototype.ca,it.prototype.getResponseJson=it.prototype.La,it.prototype.getResponseText=it.prototype.la,it.prototype.send=it.prototype.ea,it.prototype.setWithCredentials=it.prototype.Fa,Cw=it}).apply(typeof Ad<"u"?Ad:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}sn.UNAUTHENTICATED=new sn(null),sn.GOOGLE_CREDENTIALS=new sn("google-credentials-uid"),sn.FIRST_PARTY=new sn("first-party-uid"),sn.MOCK_USER=new sn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ba="12.9.0";function z4(n){Ba=n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const po=new lg("@firebase/firestore");function pa(){return po.logLevel}function me(n,...e){if(po.logLevel<=Be.DEBUG){const t=e.map(Eg);po.debug(`Firestore (${Ba}): ${n}`,...t)}}function _s(n,...e){if(po.logLevel<=Be.ERROR){const t=e.map(Eg);po.error(`Firestore (${Ba}): ${n}`,...t)}}function mo(n,...e){if(po.logLevel<=Be.WARN){const t=e.map(Eg);po.warn(`Firestore (${Ba}): ${n}`,...t)}}function Eg(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ce(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,Nw(n,i,t)}function Nw(n,e,t){let i=`FIRESTORE (${Ba}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw _s(i),new Error(i)}function Ze(n,e,t,i){let o="Unexpected state";typeof t=="string"?o=t:i=t,n||Nw(e,o,i)}function Me(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Te extends As{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mw{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Y4{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(sn.UNAUTHENTICATED)))}shutdown(){}}class J4{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class K4{constructor(e){this.t=e,this.currentUser=sn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ze(this.o===void 0,42304);let i=this.i;const o=m=>this.i!==i?(i=this.i,t(m)):Promise.resolve();let a=new pr;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new pr,e.enqueueRetryable((()=>o(this.currentUser)))};const u=()=>{const m=a;e.enqueueRetryable((async()=>{await m.promise,await o(this.currentUser)}))},f=m=>{me("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((m=>f(m))),setTimeout((()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?f(m):(me("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new pr)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(me("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ze(typeof i.accessToken=="string",31837,{l:i}),new Mw(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ze(e===null||typeof e=="string",2055,{h:e}),new sn(e)}}class $4{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=sn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class j4{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new $4(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(sn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class HE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Q4{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,kn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ze(this.o===void 0,3512);const i=a=>{a.error!=null&&me("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const u=a.token!==this.m;return this.m=a.token,me("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>i(a)))};const o=a=>{me("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>o(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?o(a):me("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new HE(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Ze(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new HE(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W4(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=W4(40);for(let a=0;a<o.length;++a)i.length<20&&o[a]<t&&(i+=e.charAt(o[a]%62))}return i}}function He(n,e){return n<e?-1:n>e?1:0}function Dm(n,e){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++){const o=n.charAt(i),a=e.charAt(i);if(o!==a)return Xp(o)===Xp(a)?He(o,a):Xp(o)?1:-1}return He(n.length,e.length)}const X4=55296,Z4=57343;function Xp(n){const e=n.charCodeAt(0);return e>=X4&&e<=Z4}function Ra(n,e,t){return n.length===e.length&&n.every(((i,o)=>t(i,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qE="__name__";class Oi{constructor(e,t,i){t===void 0?t=0:t>e.length&&Ce(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&Ce(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Oi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Oi?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const a=Oi.compareSegments(e.get(o),t.get(o));if(a!==0)return a}return He(e.length,t.length)}static compareSegments(e,t){const i=Oi.isNumericId(e),o=Oi.isNumericId(t);return i&&!o?-1:!i&&o?1:i&&o?Oi.extractNumericId(e).compare(Oi.extractNumericId(t)):Dm(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return hr.fromString(e.substring(4,e.length-2))}}class pt extends Oi{construct(e,t,i){return new pt(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new Te(oe.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((o=>o.length>0)))}return new pt(t)}static emptyPath(){return new pt([])}}const eU=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Zt extends Oi{construct(e,t,i){return new Zt(e,t,i)}static isValidIdentifier(e){return eU.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Zt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===qE}static keyField(){return new Zt([qE])}static fromServerFormat(e){const t=[];let i="",o=0;const a=()=>{if(i.length===0)throw new Te(oe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let u=!1;for(;o<e.length;){const f=e[o];if(f==="\\"){if(o+1===e.length)throw new Te(oe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[o+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new Te(oe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=m,o+=2}else f==="`"?(u=!u,o++):f!=="."||u?(i+=f,o++):(a(),o++)}if(a(),u)throw new Te(oe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Zt(t)}static emptyPath(){return new Zt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{constructor(e){this.path=e}static fromPath(e){return new Se(pt.fromString(e))}static fromName(e){return new Se(pt.fromString(e).popFirst(5))}static empty(){return new Se(pt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&pt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return pt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Se(new pt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tU(n,e,t){if(!t)throw new Te(oe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function nU(n,e,t,i){if(e===!0&&i===!0)throw new Te(oe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function zE(n){if(!Se.isDocumentKey(n))throw new Te(oe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function kw(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Ag(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ce(12329,{type:typeof n})}function go(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Te(oe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Ag(n);throw new Te(oe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pt(n,e){const t={typeString:n};return e&&(t.value=e),t}function Lu(n,e){if(!kw(n))throw new Te(oe.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const o=e[i].typeString,a="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const u=n[i];if(o&&typeof u!==o){t=`JSON field '${i}' must be a ${o}.`;break}if(a!==void 0&&u!==a.value){t=`Expected '${i}' field to equal '${a.value}'`;break}}if(t)throw new Te(oe.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YE=-62135596800,JE=1e6;class ct{static now(){return ct.fromMillis(Date.now())}static fromDate(e){return ct.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*JE);return new ct(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Te(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Te(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<YE)throw new Te(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Te(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/JE}_compareTo(e){return this.seconds===e.seconds?He(this.nanoseconds,e.nanoseconds):He(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ct._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Lu(e,ct._jsonSchema))return new ct(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-YE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ct._jsonSchemaVersion="firestore/timestamp/1.0",ct._jsonSchema={type:Pt("string",ct._jsonSchemaVersion),seconds:Pt("number"),nanoseconds:Pt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{static fromTimestamp(e){return new Re(e)}static min(){return new Re(new ct(0,0))}static max(){return new Re(new ct(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _u=-1;function iU(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,o=Re.fromTimestamp(i===1e9?new ct(t+1,0):new ct(t,i));return new mr(o,Se.empty(),e)}function sU(n){return new mr(n.readTime,n.key,_u)}class mr{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new mr(Re.min(),Se.empty(),_u)}static max(){return new mr(Re.max(),Se.empty(),_u)}}function rU(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Se.comparator(n.documentKey,e.documentKey),t!==0?t:He(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oU="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class aU{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ha(n){if(n.code!==oe.FAILED_PRECONDITION||n.message!==oU)throw n;me("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ce(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new se(((i,o)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(i,o)},this.catchCallback=a=>{this.wrapFailure(t,a).next(i,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof se?t:se.resolve(t)}catch(t){return se.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):se.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):se.reject(t)}static resolve(e){return new se(((t,i)=>{t(e)}))}static reject(e){return new se(((t,i)=>{i(e)}))}static waitFor(e){return new se(((t,i)=>{let o=0,a=0,u=!1;e.forEach((f=>{++o,f.next((()=>{++a,u&&a===o&&t()}),(m=>i(m)))})),u=!0,a===o&&t()}))}static or(e){let t=se.resolve(!1);for(const i of e)t=t.next((o=>o?se.resolve(o):i()));return t}static forEach(e,t){const i=[];return e.forEach(((o,a)=>{i.push(t.call(this,o,a))})),this.waitFor(i)}static mapArray(e,t){return new se(((i,o)=>{const a=e.length,u=new Array(a);let f=0;for(let m=0;m<a;m++){const h=m;t(e[h]).next((v=>{u[h]=v,++f,f===a&&i(u)}),(v=>o(v)))}}))}static doWhile(e,t){return new se(((i,o)=>{const a=()=>{e()===!0?t().next((()=>{a()}),o):i()};a()}))}}function lU(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function qa(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Af{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Af.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wg=-1;function wf(n){return n==null}function nf(n){return n===0&&1/n==-1/0}function uU(n){return typeof n=="number"&&Number.isInteger(n)&&!nf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dw="";function cU(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=KE(e)),e=dU(n.get(t),e);return KE(e)}function dU(n,e){let t=e;const i=n.length;for(let o=0;o<i;o++){const a=n.charAt(o);switch(a){case"\0":t+="";break;case Dw:t+="";break;default:t+=a}}return t}function KE(n){return n+Dw+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $E(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Sr(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Pw(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e,t){this.comparator=e,this.root=t||Xt.EMPTY}insert(e,t){return new mt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Xt.BLACK,null,null))}remove(e){return new mt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Xt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new wd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new wd(this.root,e,this.comparator,!1)}getReverseIterator(){return new wd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new wd(this.root,e,this.comparator,!0)}}class wd{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?i(e.key,t):1,t&&o&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Xt{constructor(e,t,i,o,a){this.key=e,this.value=t,this.color=i??Xt.RED,this.left=o??Xt.EMPTY,this.right=a??Xt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,a){return new Xt(e??this.key,t??this.value,i??this.color,o??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const a=i(e,o.key);return o=a<0?o.copy(null,null,null,o.left.insert(e,t,i),null):a===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Xt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Xt.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Xt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Xt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ce(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ce(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ce(27949);return e+(this.isRed()?0:1)}}Xt.EMPTY=null,Xt.RED=!0,Xt.BLACK=!1;Xt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ce(57766)}get value(){throw Ce(16141)}get color(){throw Ce(16727)}get left(){throw Ce(29726)}get right(){throw Ce(36894)}copy(e,t,i,o,a){return this}insert(e,t,i){return new Xt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e){this.comparator=e,this.data=new mt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new jE(this.data.getIterator())}getIteratorFrom(e){return new jE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof Gt)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=i.getNext().key;if(this.comparator(o,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Gt(this.comparator);return t.data=e,t}}class jE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e){this.fields=e,e.sort(Zt.comparator)}static empty(){return new Dn([])}unionWith(e){let t=new Gt(Zt.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Dn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ra(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new Lw("Invalid base64 string: "+a):a}})(e);return new en(t)}static fromUint8Array(e){const t=(function(o){let a="";for(let u=0;u<o.length;++u)a+=String.fromCharCode(o[u]);return a})(e);return new en(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return He(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}en.EMPTY_BYTE_STRING=new en("");const fU=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function gr(n){if(Ze(!!n,39018),typeof n=="string"){let e=0;const t=fU.exec(n);if(Ze(!!t,46558,{timestamp:n}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:At(n.seconds),nanos:At(n.nanos)}}function At(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function yr(n){return typeof n=="string"?en.fromBase64String(n):en.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vw="server_timestamp",Uw="__type__",Ow="__previous_value__",Fw="__local_write_time__";function Cg(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[Uw])==null?void 0:i.stringValue)===Vw}function Cf(n){const e=n.mapValue.fields[Ow];return Cg(e)?Cf(e):e}function Tu(n){const e=gr(n.mapValue.fields[Fw].timestampValue);return new ct(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hU{constructor(e,t,i,o,a,u,f,m,h,v,T){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=f,this.longPollingOptions=m,this.useFetchStreams=h,this.isUsingEmulator=v,this.apiKey=T}}const sf="(default)";class Eu{constructor(e,t){this.projectId=e,this.database=t||sf}static empty(){return new Eu("","")}get isDefaultDatabase(){return this.database===sf}isEqual(e){return e instanceof Eu&&e.projectId===this.projectId&&e.database===this.database}}function pU(n,e){if(!Object.prototype.hasOwnProperty.apply(n.options,["projectId"]))throw new Te(oe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Eu(n.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gw="__type__",mU="__max__",Cd={mapValue:{}},Bw="__vector__",rf="value";function vr(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Cg(n)?4:yU(n)?9007199254740991:gU(n)?10:11:Ce(28295,{value:n})}function zi(n,e){if(n===e)return!0;const t=vr(n);if(t!==vr(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Tu(n).isEqual(Tu(e));case 3:return(function(o,a){if(typeof o.timestampValue=="string"&&typeof a.timestampValue=="string"&&o.timestampValue.length===a.timestampValue.length)return o.timestampValue===a.timestampValue;const u=gr(o.timestampValue),f=gr(a.timestampValue);return u.seconds===f.seconds&&u.nanos===f.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(o,a){return yr(o.bytesValue).isEqual(yr(a.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(o,a){return At(o.geoPointValue.latitude)===At(a.geoPointValue.latitude)&&At(o.geoPointValue.longitude)===At(a.geoPointValue.longitude)})(n,e);case 2:return(function(o,a){if("integerValue"in o&&"integerValue"in a)return At(o.integerValue)===At(a.integerValue);if("doubleValue"in o&&"doubleValue"in a){const u=At(o.doubleValue),f=At(a.doubleValue);return u===f?nf(u)===nf(f):isNaN(u)&&isNaN(f)}return!1})(n,e);case 9:return Ra(n.arrayValue.values||[],e.arrayValue.values||[],zi);case 10:case 11:return(function(o,a){const u=o.mapValue.fields||{},f=a.mapValue.fields||{};if($E(u)!==$E(f))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(f[m]===void 0||!zi(u[m],f[m])))return!1;return!0})(n,e);default:return Ce(52216,{left:n})}}function Su(n,e){return(n.values||[]).find((t=>zi(t,e)))!==void 0}function Na(n,e){if(n===e)return 0;const t=vr(n),i=vr(e);if(t!==i)return He(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return He(n.booleanValue,e.booleanValue);case 2:return(function(a,u){const f=At(a.integerValue||a.doubleValue),m=At(u.integerValue||u.doubleValue);return f<m?-1:f>m?1:f===m?0:isNaN(f)?isNaN(m)?0:-1:1})(n,e);case 3:return QE(n.timestampValue,e.timestampValue);case 4:return QE(Tu(n),Tu(e));case 5:return Dm(n.stringValue,e.stringValue);case 6:return(function(a,u){const f=yr(a),m=yr(u);return f.compareTo(m)})(n.bytesValue,e.bytesValue);case 7:return(function(a,u){const f=a.split("/"),m=u.split("/");for(let h=0;h<f.length&&h<m.length;h++){const v=He(f[h],m[h]);if(v!==0)return v}return He(f.length,m.length)})(n.referenceValue,e.referenceValue);case 8:return(function(a,u){const f=He(At(a.latitude),At(u.latitude));return f!==0?f:He(At(a.longitude),At(u.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return WE(n.arrayValue,e.arrayValue);case 10:return(function(a,u){var S,I,k,O;const f=a.fields||{},m=u.fields||{},h=(S=f[rf])==null?void 0:S.arrayValue,v=(I=m[rf])==null?void 0:I.arrayValue,T=He(((k=h==null?void 0:h.values)==null?void 0:k.length)||0,((O=v==null?void 0:v.values)==null?void 0:O.length)||0);return T!==0?T:WE(h,v)})(n.mapValue,e.mapValue);case 11:return(function(a,u){if(a===Cd.mapValue&&u===Cd.mapValue)return 0;if(a===Cd.mapValue)return 1;if(u===Cd.mapValue)return-1;const f=a.fields||{},m=Object.keys(f),h=u.fields||{},v=Object.keys(h);m.sort(),v.sort();for(let T=0;T<m.length&&T<v.length;++T){const S=Dm(m[T],v[T]);if(S!==0)return S;const I=Na(f[m[T]],h[v[T]]);if(I!==0)return I}return He(m.length,v.length)})(n.mapValue,e.mapValue);default:throw Ce(23264,{he:t})}}function QE(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return He(n,e);const t=gr(n),i=gr(e),o=He(t.seconds,i.seconds);return o!==0?o:He(t.nanos,i.nanos)}function WE(n,e){const t=n.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const a=Na(t[o],i[o]);if(a)return a}return He(t.length,i.length)}function Ma(n){return Pm(n)}function Pm(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=gr(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return yr(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Se.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",o=!0;for(const a of t.values||[])o?o=!1:i+=",",i+=Pm(a);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let o="{",a=!0;for(const u of i)a?a=!1:o+=",",o+=`${u}:${Pm(t.fields[u])}`;return o+"}"})(n.mapValue):Ce(61005,{value:n})}function Vd(n){switch(vr(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Cf(n);return e?16+Vd(e):16;case 5:return 2*n.stringValue.length;case 6:return yr(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((o,a)=>o+Vd(a)),0)})(n.arrayValue);case 10:case 11:return(function(i){let o=0;return Sr(i.fields,((a,u)=>{o+=a.length+Vd(u)})),o})(n.mapValue);default:throw Ce(13486,{value:n})}}function Lm(n){return!!n&&"integerValue"in n}function xg(n){return!!n&&"arrayValue"in n}function XE(n){return!!n&&"nullValue"in n}function ZE(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Ud(n){return!!n&&"mapValue"in n}function gU(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[Gw])==null?void 0:i.stringValue)===Bw}function cu(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Sr(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=cu(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=cu(n.arrayValue.values[t]);return e}return{...n}}function yU(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===mU}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e){this.value=e}static empty(){return new Sn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Ud(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=cu(t)}setAll(e){let t=Zt.emptyPath(),i={},o=[];e.forEach(((u,f)=>{if(!t.isImmediateParentOf(f)){const m=this.getFieldsMap(t);this.applyChanges(m,i,o),i={},o=[],t=f.popLast()}u?i[f.lastSegment()]=cu(u):o.push(f.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,i,o)}delete(e){const t=this.field(e.popLast());Ud(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return zi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];Ud(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){Sr(t,((o,a)=>e[o]=a));for(const o of i)delete e[o]}clone(){return new Sn(cu(this.value))}}function Hw(n){const e=[];return Sr(n.fields,((t,i)=>{const o=new Zt([t]);if(Ud(i)){const a=Hw(i.mapValue).fields;if(a.length===0)e.push(o);else for(const u of a)e.push(o.child(u))}else e.push(o)})),new Dn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e,t,i,o,a,u,f){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=a,this.data=u,this.documentState=f}static newInvalidDocument(e){return new rn(e,0,Re.min(),Re.min(),Re.min(),Sn.empty(),0)}static newFoundDocument(e,t,i,o){return new rn(e,1,t,Re.min(),i,o,0)}static newNoDocument(e,t){return new rn(e,2,t,Re.min(),Re.min(),Sn.empty(),0)}static newUnknownDocument(e,t){return new rn(e,3,t,Re.min(),Re.min(),Sn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Sn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Sn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof rn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new rn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class of{constructor(e,t){this.position=e,this.inclusive=t}}function eS(n,e,t){let i=0;for(let o=0;o<n.position.length;o++){const a=e[o],u=n.position[o];if(a.field.isKeyField()?i=Se.comparator(Se.fromName(u.referenceValue),t.key):i=Na(u,t.data.field(a.field)),a.dir==="desc"&&(i*=-1),i!==0)break}return i}function tS(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!zi(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af{constructor(e,t="asc"){this.field=e,this.dir=t}}function vU(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qw{}class Ot extends qw{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new TU(e,t,i):t==="array-contains"?new AU(e,i):t==="in"?new wU(e,i):t==="not-in"?new CU(e,i):t==="array-contains-any"?new xU(e,i):new Ot(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new EU(e,i):new SU(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Na(t,this.value)):t!==null&&vr(this.value)===vr(t)&&this.matchesComparison(Na(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ce(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Yi extends qw{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Yi(e,t)}matches(e){return zw(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function zw(n){return n.op==="and"}function Yw(n){return _U(n)&&zw(n)}function _U(n){for(const e of n.filters)if(e instanceof Yi)return!1;return!0}function Vm(n){if(n instanceof Ot)return n.field.canonicalString()+n.op.toString()+Ma(n.value);if(Yw(n))return n.filters.map((e=>Vm(e))).join(",");{const e=n.filters.map((t=>Vm(t))).join(",");return`${n.op}(${e})`}}function Jw(n,e){return n instanceof Ot?(function(i,o){return o instanceof Ot&&i.op===o.op&&i.field.isEqual(o.field)&&zi(i.value,o.value)})(n,e):n instanceof Yi?(function(i,o){return o instanceof Yi&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((a,u,f)=>a&&Jw(u,o.filters[f])),!0):!1})(n,e):void Ce(19439)}function Kw(n){return n instanceof Ot?(function(t){return`${t.field.canonicalString()} ${t.op} ${Ma(t.value)}`})(n):n instanceof Yi?(function(t){return t.op.toString()+" {"+t.getFilters().map(Kw).join(" ,")+"}"})(n):"Filter"}class TU extends Ot{constructor(e,t,i){super(e,t,i),this.key=Se.fromName(i.referenceValue)}matches(e){const t=Se.comparator(e.key,this.key);return this.matchesComparison(t)}}class EU extends Ot{constructor(e,t){super(e,"in",t),this.keys=$w("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class SU extends Ot{constructor(e,t){super(e,"not-in",t),this.keys=$w("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function $w(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((i=>Se.fromName(i.referenceValue)))}class AU extends Ot{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return xg(t)&&Su(t.arrayValue,this.value)}}class wU extends Ot{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Su(this.value.arrayValue,t)}}class CU extends Ot{constructor(e,t){super(e,"not-in",t)}matches(e){if(Su(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Su(this.value.arrayValue,t)}}class xU extends Ot{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!xg(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>Su(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IU{constructor(e,t=null,i=[],o=[],a=null,u=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=a,this.startAt=u,this.endAt=f,this.Te=null}}function nS(n,e=null,t=[],i=[],o=null,a=null,u=null){return new IU(n,e,t,i,o,a,u)}function Ig(n){const e=Me(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>Vm(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(a){return a.field.canonicalString()+a.dir})(i))).join(","),wf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>Ma(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>Ma(i))).join(",")),e.Te=t}return e.Te}function bg(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!vU(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Jw(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!tS(n.startAt,e.startAt)&&tS(n.endAt,e.endAt)}function Um(n){return Se.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xf{constructor(e,t=null,i=[],o=[],a=null,u="F",f=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=a,this.limitType=u,this.startAt=f,this.endAt=m,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function bU(n,e,t,i,o,a,u,f){return new xf(n,e,t,i,o,a,u,f)}function Rg(n){return new xf(n)}function iS(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function RU(n){return Se.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function NU(n){return n.collectionGroup!==null}function du(n){const e=Me(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),t.add(a.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let f=new Gt(Zt.comparator);return u.filters.forEach((m=>{m.getFlattenedFilters().forEach((h=>{h.isInequality()&&(f=f.add(h.field))}))})),f})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new af(a,i))})),t.has(Zt.keyField().canonicalString())||e.Ie.push(new af(Zt.keyField(),i))}return e.Ie}function Gi(n){const e=Me(n);return e.Ee||(e.Ee=MU(e,du(n))),e.Ee}function MU(n,e){if(n.limitType==="F")return nS(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((o=>{const a=o.dir==="desc"?"asc":"desc";return new af(o.field,a)}));const t=n.endAt?new of(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new of(n.startAt.position,n.startAt.inclusive):null;return nS(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function Om(n,e,t){return new xf(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function If(n,e){return bg(Gi(n),Gi(e))&&n.limitType===e.limitType}function jw(n){return`${Ig(Gi(n))}|lt:${n.limitType}`}function ma(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((o=>Kw(o))).join(", ")}]`),wf(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((o=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(o))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((o=>Ma(o))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((o=>Ma(o))).join(",")),`Target(${i})`})(Gi(n))}; limitType=${n.limitType})`}function bf(n,e){return e.isFoundDocument()&&(function(i,o){const a=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(a):Se.isDocumentKey(i.path)?i.path.isEqual(a):i.path.isImmediateParentOf(a)})(n,e)&&(function(i,o){for(const a of du(i))if(!a.field.isKeyField()&&o.data.field(a.field)===null)return!1;return!0})(n,e)&&(function(i,o){for(const a of i.filters)if(!a.matches(o))return!1;return!0})(n,e)&&(function(i,o){return!(i.startAt&&!(function(u,f,m){const h=eS(u,f,m);return u.inclusive?h<=0:h<0})(i.startAt,du(i),o)||i.endAt&&!(function(u,f,m){const h=eS(u,f,m);return u.inclusive?h>=0:h>0})(i.endAt,du(i),o))})(n,e)}function kU(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Qw(n){return(e,t)=>{let i=!1;for(const o of du(n)){const a=DU(o,e,t);if(a!==0)return a;i=i||o.field.isKeyField()}return 0}}function DU(n,e,t){const i=n.field.isKeyField()?Se.comparator(e.key,t.key):(function(a,u,f){const m=u.data.field(a),h=f.data.field(a);return m!==null&&h!==null?Na(m,h):Ce(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Ce(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,a]of i)if(this.equalsFn(o,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let a=0;a<o.length;a++)if(this.equalsFn(o[a][0],e))return void(o[a]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Sr(this.inner,((t,i)=>{for(const[o,a]of i)e(o,a)}))}isEmpty(){return Pw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PU=new mt(Se.comparator);function Ts(){return PU}const Ww=new mt(Se.comparator);function ru(...n){let e=Ww;for(const t of n)e=e.insert(t.key,t);return e}function Xw(n){let e=Ww;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function ao(){return fu()}function Zw(){return fu()}function fu(){return new Eo((n=>n.toString()),((n,e)=>n.isEqual(e)))}const LU=new mt(Se.comparator),VU=new Gt(Se.comparator);function qe(...n){let e=VU;for(const t of n)e=e.add(t);return e}const UU=new Gt(He);function OU(){return UU}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ng(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:nf(e)?"-0":e}}function eC(n){return{integerValue:""+n}}function tC(n,e){return uU(e)?eC(e):Ng(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{constructor(){this._=void 0}}function FU(n,e,t){return n instanceof Au?(function(o,a){const u={fields:{[Uw]:{stringValue:Vw},[Fw]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return a&&Cg(a)&&(a=Cf(a)),a&&(u.fields[Ow]=a),{mapValue:u}})(t,e):n instanceof wu?iC(n,e):n instanceof Cu?sC(n,e):(function(o,a){const u=nC(o,a),f=sS(u)+sS(o.Ae);return Lm(u)&&Lm(o.Ae)?eC(f):Ng(o.serializer,f)})(n,e)}function GU(n,e,t){return n instanceof wu?iC(n,e):n instanceof Cu?sC(n,e):t}function nC(n,e){return n instanceof xu?(function(i){return Lm(i)||(function(a){return!!a&&"doubleValue"in a})(i)})(e)?e:{integerValue:0}:null}class Au extends Rf{}class wu extends Rf{constructor(e){super(),this.elements=e}}function iC(n,e){const t=rC(e);for(const i of n.elements)t.some((o=>zi(o,i)))||t.push(i);return{arrayValue:{values:t}}}class Cu extends Rf{constructor(e){super(),this.elements=e}}function sC(n,e){let t=rC(e);for(const i of n.elements)t=t.filter((o=>!zi(o,i)));return{arrayValue:{values:t}}}class xu extends Rf{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function sS(n){return At(n.integerValue||n.doubleValue)}function rC(n){return xg(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{constructor(e,t){this.field=e,this.transform=t}}function BU(n,e){return n.field.isEqual(e.field)&&(function(i,o){return i instanceof wu&&o instanceof wu||i instanceof Cu&&o instanceof Cu?Ra(i.elements,o.elements,zi):i instanceof xu&&o instanceof xu?zi(i.Ae,o.Ae):i instanceof Au&&o instanceof Au})(n.transform,e.transform)}class HU{constructor(e,t){this.version=e,this.transformResults=t}}class Bi{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Bi}static exists(e){return new Bi(void 0,e)}static updateTime(e){return new Bi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Od(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Nf{}function aC(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new uC(n.key,Bi.none()):new Vu(n.key,n.data,Bi.none());{const t=n.data,i=Sn.empty();let o=new Gt(Zt.comparator);for(let a of e.fields)if(!o.has(a)){let u=t.field(a);u===null&&a.length>1&&(a=a.popLast(),u=t.field(a)),u===null?i.delete(a):i.set(a,u),o=o.add(a)}return new Ar(n.key,i,new Dn(o.toArray()),Bi.none())}}function qU(n,e,t){n instanceof Vu?(function(o,a,u){const f=o.value.clone(),m=oS(o.fieldTransforms,a,u.transformResults);f.setAll(m),a.convertToFoundDocument(u.version,f).setHasCommittedMutations()})(n,e,t):n instanceof Ar?(function(o,a,u){if(!Od(o.precondition,a))return void a.convertToUnknownDocument(u.version);const f=oS(o.fieldTransforms,a,u.transformResults),m=a.data;m.setAll(lC(o)),m.setAll(f),a.convertToFoundDocument(u.version,m).setHasCommittedMutations()})(n,e,t):(function(o,a,u){a.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function hu(n,e,t,i){return n instanceof Vu?(function(a,u,f,m){if(!Od(a.precondition,u))return f;const h=a.value.clone(),v=aS(a.fieldTransforms,m,u);return h.setAll(v),u.convertToFoundDocument(u.version,h).setHasLocalMutations(),null})(n,e,t,i):n instanceof Ar?(function(a,u,f,m){if(!Od(a.precondition,u))return f;const h=aS(a.fieldTransforms,m,u),v=u.data;return v.setAll(lC(a)),v.setAll(h),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),f===null?null:f.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((T=>T.field)))})(n,e,t,i):(function(a,u,f){return Od(a.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):f})(n,e,t)}function zU(n,e){let t=null;for(const i of n.fieldTransforms){const o=e.data.field(i.field),a=nC(i.transform,o||null);a!=null&&(t===null&&(t=Sn.empty()),t.set(i.field,a))}return t||null}function rS(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&Ra(i,o,((a,u)=>BU(a,u)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Vu extends Nf{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Ar extends Nf{constructor(e,t,i,o,a=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function lC(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function oS(n,e,t){const i=new Map;Ze(n.length===t.length,32656,{Ve:t.length,de:n.length});for(let o=0;o<t.length;o++){const a=n[o],u=a.transform,f=e.data.field(a.field);i.set(a.field,GU(u,f,t[o]))}return i}function aS(n,e,t){const i=new Map;for(const o of n){const a=o.transform,u=t.data.field(o.field);i.set(o.field,FU(a,u,e))}return i}class uC extends Nf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class YU extends Nf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JU{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const a=this.mutations[o];a.key.isEqual(e.key)&&qU(a,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=hu(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=hu(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=Zw();return this.mutations.forEach((o=>{const a=e.get(o.key),u=a.overlayedDocument;let f=this.applyToLocalView(u,a.mutatedFields);f=t.has(o.key)?null:f;const m=aC(u,f);m!==null&&i.set(o.key,m),u.isValidDocument()||u.convertToNoDocument(Re.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),qe())}isEqual(e){return this.batchId===e.batchId&&Ra(this.mutations,e.mutations,((t,i)=>rS(t,i)))&&Ra(this.baseMutations,e.baseMutations,((t,i)=>rS(t,i)))}}class Mg{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){Ze(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let o=(function(){return LU})();const a=e.mutations;for(let u=0;u<a.length;u++)o=o.insert(a[u].key,i[u].version);return new Mg(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KU{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $U{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Dt,Je;function jU(n){switch(n){case oe.OK:return Ce(64938);case oe.CANCELLED:case oe.UNKNOWN:case oe.DEADLINE_EXCEEDED:case oe.RESOURCE_EXHAUSTED:case oe.INTERNAL:case oe.UNAVAILABLE:case oe.UNAUTHENTICATED:return!1;case oe.INVALID_ARGUMENT:case oe.NOT_FOUND:case oe.ALREADY_EXISTS:case oe.PERMISSION_DENIED:case oe.FAILED_PRECONDITION:case oe.ABORTED:case oe.OUT_OF_RANGE:case oe.UNIMPLEMENTED:case oe.DATA_LOSS:return!0;default:return Ce(15467,{code:n})}}function cC(n){if(n===void 0)return _s("GRPC error has no .code"),oe.UNKNOWN;switch(n){case Dt.OK:return oe.OK;case Dt.CANCELLED:return oe.CANCELLED;case Dt.UNKNOWN:return oe.UNKNOWN;case Dt.DEADLINE_EXCEEDED:return oe.DEADLINE_EXCEEDED;case Dt.RESOURCE_EXHAUSTED:return oe.RESOURCE_EXHAUSTED;case Dt.INTERNAL:return oe.INTERNAL;case Dt.UNAVAILABLE:return oe.UNAVAILABLE;case Dt.UNAUTHENTICATED:return oe.UNAUTHENTICATED;case Dt.INVALID_ARGUMENT:return oe.INVALID_ARGUMENT;case Dt.NOT_FOUND:return oe.NOT_FOUND;case Dt.ALREADY_EXISTS:return oe.ALREADY_EXISTS;case Dt.PERMISSION_DENIED:return oe.PERMISSION_DENIED;case Dt.FAILED_PRECONDITION:return oe.FAILED_PRECONDITION;case Dt.ABORTED:return oe.ABORTED;case Dt.OUT_OF_RANGE:return oe.OUT_OF_RANGE;case Dt.UNIMPLEMENTED:return oe.UNIMPLEMENTED;case Dt.DATA_LOSS:return oe.DATA_LOSS;default:return Ce(39323,{code:n})}}(Je=Dt||(Dt={}))[Je.OK=0]="OK",Je[Je.CANCELLED=1]="CANCELLED",Je[Je.UNKNOWN=2]="UNKNOWN",Je[Je.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Je[Je.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Je[Je.NOT_FOUND=5]="NOT_FOUND",Je[Je.ALREADY_EXISTS=6]="ALREADY_EXISTS",Je[Je.PERMISSION_DENIED=7]="PERMISSION_DENIED",Je[Je.UNAUTHENTICATED=16]="UNAUTHENTICATED",Je[Je.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Je[Je.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Je[Je.ABORTED=10]="ABORTED",Je[Je.OUT_OF_RANGE=11]="OUT_OF_RANGE",Je[Je.UNIMPLEMENTED=12]="UNIMPLEMENTED",Je[Je.INTERNAL=13]="INTERNAL",Je[Je.UNAVAILABLE=14]="UNAVAILABLE",Je[Je.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QU(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WU=new hr([4294967295,4294967295],0);function lS(n){const e=QU().encode(n),t=new ww;return t.update(e),new Uint8Array(t.digest())}function uS(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new hr([t,i],0),new hr([o,a],0)]}class kg{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new ou(`Invalid padding: ${t}`);if(i<0)throw new ou(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new ou(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new ou(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=hr.fromNumber(this.ge)}ye(e,t,i){let o=e.add(t.multiply(hr.fromNumber(i)));return o.compare(WU)===1&&(o=new hr([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=lS(e),[i,o]=uS(t);for(let a=0;a<this.hashCount;a++){const u=this.ye(i,o,a);if(!this.we(u))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),u=new kg(a,o,t);return i.forEach((f=>u.insert(f))),u}insert(e){if(this.ge===0)return;const t=lS(e),[i,o]=uS(t);for(let a=0;a<this.hashCount;a++){const u=this.ye(i,o,a);this.be(u)}}be(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class ou extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf{constructor(e,t,i,o,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,Uu.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Mf(Re.min(),o,new mt(He),Ts(),qe())}}class Uu{constructor(e,t,i,o,a){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Uu(i,t,qe(),qe(),qe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fd{constructor(e,t,i,o){this.Se=e,this.removedTargetIds=t,this.key=i,this.De=o}}class dC{constructor(e,t){this.targetId=e,this.Ce=t}}class fC{constructor(e,t,i=en.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class cS{constructor(){this.ve=0,this.Fe=dS(),this.Me=en.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=qe(),t=qe(),i=qe();return this.Fe.forEach(((o,a)=>{switch(a){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:Ce(38017,{changeType:a})}})),new Uu(this.Me,this.xe,e,t,i)}Ke(){this.Oe=!1,this.Fe=dS()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,Ze(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class XU{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ts(),this.He=xd(),this.Je=xd(),this.Ze=new mt(He)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.We(),i.Ne||i.Ke(),i.Le(e.resumeToken);break;case 2:i.We(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.Qe(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:Ce(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,i=e.Ce.count,o=this.ot(t);if(o){const a=o.target;if(Um(a))if(i===0){const u=new Se(a.path);this.et(t,u,rn.newNoDocument(u,Re.min()))}else Ze(i===1,20013,{expectedCount:i});else{const u=this._t(t);if(u!==i){const f=this.ut(e),m=f?this.ct(f,e,u):1;if(m!==0){this.it(t);const h=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,h)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:a=0}=t;let u,f;try{u=yr(i).toUint8Array()}catch(m){if(m instanceof Lw)return mo("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{f=new kg(u,o,a)}catch(m){return mo(m instanceof ou?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return f.ge===0?null:f}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let o=0;return i.forEach((a=>{const u=this.Ge.ht(),f=`projects/${u.projectId}/databases/${u.database}/documents/${a.path.canonicalString()}`;e.mightContain(f)||(this.et(t,a,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((a,u)=>{const f=this.ot(u);if(f){if(a.current&&Um(f.target)){const m=new Se(f.target.path);this.It(m).has(u)||this.Et(u,m)||this.et(u,m,rn.newNoDocument(m,e))}a.Be&&(t.set(u,a.ke()),a.Ke())}}));let i=qe();this.Je.forEach(((a,u)=>{let f=!0;u.forEachWhile((m=>{const h=this.ot(m);return!h||h.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(i=i.add(a))})),this.je.forEach(((a,u)=>u.setReadTime(e)));const o=new Mf(e,t,this.Ze,this.je,i);return this.je=Ts(),this.He=xd(),this.Je=xd(),this.Ze=new mt(He),o}Ye(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,i),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.qe(t,1):o.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new cS,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new Gt(He),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new Gt(He),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||me("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new cS),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function xd(){return new mt(Se.comparator)}function dS(){return new mt(Se.comparator)}const ZU={asc:"ASCENDING",desc:"DESCENDING"},e3={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},t3={and:"AND",or:"OR"};class n3{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Fm(n,e){return n.useProto3Json||wf(e)?e:{value:e}}function lf(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function hC(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function i3(n,e){return lf(n,e.toTimestamp())}function Hi(n){return Ze(!!n,49232),Re.fromTimestamp((function(t){const i=gr(t);return new ct(i.seconds,i.nanos)})(n))}function Dg(n,e){return Gm(n,e).canonicalString()}function Gm(n,e){const t=(function(o){return new pt(["projects",o.projectId,"databases",o.database])})(n).child("documents");return e===void 0?t:t.child(e)}function pC(n){const e=pt.fromString(n);return Ze(_C(e),10190,{key:e.toString()}),e}function Bm(n,e){return Dg(n.databaseId,e.path)}function Zp(n,e){const t=pC(e);if(t.get(1)!==n.databaseId.projectId)throw new Te(oe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Te(oe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Se(gC(t))}function mC(n,e){return Dg(n.databaseId,e)}function s3(n){const e=pC(n);return e.length===4?pt.emptyPath():gC(e)}function Hm(n){return new pt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function gC(n){return Ze(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function fS(n,e,t){return{name:Bm(n,e),fields:t.value.mapValue.fields}}function r3(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Ce(39313,{state:h})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],a=(function(h,v){return h.useProto3Json?(Ze(v===void 0||typeof v=="string",58123),en.fromBase64String(v||"")):(Ze(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),en.fromUint8Array(v||new Uint8Array))})(n,e.targetChange.resumeToken),u=e.targetChange.cause,f=u&&(function(h){const v=h.code===void 0?oe.UNKNOWN:cC(h.code);return new Te(v,h.message||"")})(u);t=new fC(i,o,a,f||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=Zp(n,i.document.name),a=Hi(i.document.updateTime),u=i.document.createTime?Hi(i.document.createTime):Re.min(),f=new Sn({mapValue:{fields:i.document.fields}}),m=rn.newFoundDocument(o,a,u,f),h=i.targetIds||[],v=i.removedTargetIds||[];t=new Fd(h,v,m.key,m)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=Zp(n,i.document),a=i.readTime?Hi(i.readTime):Re.min(),u=rn.newNoDocument(o,a),f=i.removedTargetIds||[];t=new Fd([],f,u.key,u)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=Zp(n,i.document),a=i.removedTargetIds||[];t=new Fd([],a,o,null)}else{if(!("filter"in e))return Ce(11601,{Vt:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:a}=i,u=new $U(o,a),f=i.targetId;t=new dC(f,u)}}return t}function o3(n,e){let t;if(e instanceof Vu)t={update:fS(n,e.key,e.value)};else if(e instanceof uC)t={delete:Bm(n,e.key)};else if(e instanceof Ar)t={update:fS(n,e.key,e.data),updateMask:m3(e.fieldMask)};else{if(!(e instanceof YU))return Ce(16599,{dt:e.type});t={verify:Bm(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(a,u){const f=u.transform;if(f instanceof Au)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof wu)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof Cu)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof xu)return{fieldPath:u.field.canonicalString(),increment:f.Ae};throw Ce(20930,{transform:u.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(o,a){return a.updateTime!==void 0?{updateTime:i3(o,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Ce(27497)})(n,e.precondition)),t}function a3(n,e){return n&&n.length>0?(Ze(e!==void 0,14353),n.map((t=>(function(o,a){let u=o.updateTime?Hi(o.updateTime):Hi(a);return u.isEqual(Re.min())&&(u=Hi(a)),new HU(u,o.transformResults||[])})(t,e)))):[]}function l3(n,e){return{documents:[mC(n,e.path)]}}function u3(n,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=mC(n,o);const a=(function(h){if(h.length!==0)return vC(Yi.create(h,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const u=(function(h){if(h.length!==0)return h.map((v=>(function(S){return{field:ga(S.field),direction:f3(S.dir)}})(v)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const f=Fm(n,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{ft:t,parent:o}}function c3(n){let e=s3(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){Ze(i===1,65062);const v=t.from[0];v.allDescendants?o=v.collectionId:e=e.child(v.collectionId)}let a=[];t.where&&(a=(function(T){const S=yC(T);return S instanceof Yi&&Yw(S)?S.getFilters():[S]})(t.where));let u=[];t.orderBy&&(u=(function(T){return T.map((S=>(function(k){return new af(ya(k.field),(function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(k.direction))})(S)))})(t.orderBy));let f=null;t.limit&&(f=(function(T){let S;return S=typeof T=="object"?T.value:T,wf(S)?null:S})(t.limit));let m=null;t.startAt&&(m=(function(T){const S=!!T.before,I=T.values||[];return new of(I,S)})(t.startAt));let h=null;return t.endAt&&(h=(function(T){const S=!T.before,I=T.values||[];return new of(I,S)})(t.endAt)),bU(e,o,u,a,f,"F",m,h)}function d3(n,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ce(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function yC(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=ya(t.unaryFilter.field);return Ot.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=ya(t.unaryFilter.field);return Ot.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=ya(t.unaryFilter.field);return Ot.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=ya(t.unaryFilter.field);return Ot.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ce(61313);default:return Ce(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Ot.create(ya(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ce(58110);default:return Ce(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Yi.create(t.compositeFilter.filters.map((i=>yC(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ce(1026)}})(t.compositeFilter.op))})(n):Ce(30097,{filter:n})}function f3(n){return ZU[n]}function h3(n){return e3[n]}function p3(n){return t3[n]}function ga(n){return{fieldPath:n.canonicalString()}}function ya(n){return Zt.fromServerFormat(n.fieldPath)}function vC(n){return n instanceof Ot?(function(t){if(t.op==="=="){if(ZE(t.value))return{unaryFilter:{field:ga(t.field),op:"IS_NAN"}};if(XE(t.value))return{unaryFilter:{field:ga(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(ZE(t.value))return{unaryFilter:{field:ga(t.field),op:"IS_NOT_NAN"}};if(XE(t.value))return{unaryFilter:{field:ga(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ga(t.field),op:h3(t.op),value:t.value}}})(n):n instanceof Yi?(function(t){const i=t.getFilters().map((o=>vC(o)));return i.length===1?i[0]:{compositeFilter:{op:p3(t.op),filters:i}}})(n):Ce(54877,{filter:n})}function m3(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function _C(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}function TC(n){return!!n&&typeof n._toProto=="function"&&n._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur{constructor(e,t,i,o,a=Re.min(),u=Re.min(),f=en.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=f,this.expectedCount=m}withSequenceNumber(e){return new ur(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ur(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ur(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ur(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g3{constructor(e){this.yt=e}}function y3(n){const e=c3({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Om(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v3{constructor(){this.Sn=new _3}addToCollectionParentIndex(e,t){return this.Sn.add(t),se.resolve()}getCollectionParents(e,t){return se.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return se.resolve()}deleteFieldIndex(e,t){return se.resolve()}deleteAllFieldIndexes(e){return se.resolve()}createTargetIndexes(e,t){return se.resolve()}getDocumentsMatchingTarget(e,t){return se.resolve(null)}getIndexType(e,t){return se.resolve(0)}getFieldIndexes(e,t){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,t){return se.resolve(mr.min())}getMinOffsetFromCollectionGroup(e,t){return se.resolve(mr.min())}updateCollectionGroup(e,t,i){return se.resolve()}updateIndexEntries(e,t){return se.resolve()}}class _3{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new Gt(pt.comparator),a=!o.has(i);return this.index[t]=o.add(i),a}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new Gt(pt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},EC=41943040;class En{static withCacheSize(e){return new En(e,En.DEFAULT_COLLECTION_PERCENTILE,En.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */En.DEFAULT_COLLECTION_PERCENTILE=10,En.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,En.DEFAULT=new En(EC,En.DEFAULT_COLLECTION_PERCENTILE,En.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),En.DISABLED=new En(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new ka(0)}static ar(){return new ka(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pS="LruGarbageCollector",T3=1048576;function mS([n,e],[t,i]){const o=He(n,t);return o===0?He(e,i):o}class E3{constructor(e){this.Pr=e,this.buffer=new Gt(mS),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();mS(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class S3{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){me(pS,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){qa(t)?me(pS,"Ignoring IndexedDB error during garbage collection: ",t):await Ha(t)}await this.Ar(3e5)}))}}class A3{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return se.resolve(Af.ce);const i=new E3(t);return this.Vr.forEachTarget(e,(o=>i.Er(o.sequenceNumber))).next((()=>this.Vr.mr(e,(o=>i.Er(o))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.Vr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(me("LruGarbageCollector","Garbage collection skipped; disabled"),se.resolve(hS)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(me("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),hS):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let i,o,a,u,f,m,h;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(me("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),o=this.params.maximumSequenceNumbersToCollect):o=T,u=Date.now(),this.nthSequenceNumber(e,o)))).next((T=>(i=T,f=Date.now(),this.removeTargets(e,i,t)))).next((T=>(a=T,m=Date.now(),this.removeOrphanedDocuments(e,i)))).next((T=>(h=Date.now(),pa()<=Be.DEBUG&&me("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-v}ms
	Determined least recently used ${o} in `+(f-u)+`ms
	Removed ${a} targets in `+(m-f)+`ms
	Removed ${T} documents in `+(h-m)+`ms
Total Duration: ${h-v}ms`),se.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:a,documentsRemoved:T}))))}}function w3(n,e){return new A3(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C3{constructor(){this.changes=new Eo((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,rn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?se.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x3{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I3{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(i!==null&&hu(i.mutation,o,Dn.empty(),ct.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,qe()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=qe()){const o=ao();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,i).next((a=>{let u=ru();return a.forEach(((f,m)=>{u=u.insert(f,m.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const i=ao();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,qe())))}populateOverlays(e,t,i){const o=[];return i.forEach((a=>{t.has(a)||o.push(a)})),this.documentOverlayCache.getOverlays(e,o).next((a=>{a.forEach(((u,f)=>{t.set(u,f)}))}))}computeViews(e,t,i,o){let a=Ts();const u=fu(),f=(function(){return fu()})();return t.forEach(((m,h)=>{const v=i.get(h.key);o.has(h.key)&&(v===void 0||v.mutation instanceof Ar)?a=a.insert(h.key,h):v!==void 0?(u.set(h.key,v.mutation.getFieldMask()),hu(v.mutation,h,v.mutation.getFieldMask(),ct.now())):u.set(h.key,Dn.empty())})),this.recalculateAndSaveOverlays(e,a).next((m=>(m.forEach(((h,v)=>u.set(h,v))),t.forEach(((h,v)=>f.set(h,new x3(v,u.get(h)??null)))),f)))}recalculateAndSaveOverlays(e,t){const i=fu();let o=new mt(((u,f)=>u-f)),a=qe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const f of u)f.keys().forEach((m=>{const h=t.get(m);if(h===null)return;let v=i.get(m)||Dn.empty();v=f.applyToLocalView(h,v),i.set(m,v);const T=(o.get(f.batchId)||qe()).add(m);o=o.insert(f.batchId,T)}))})).next((()=>{const u=[],f=o.getReverseIterator();for(;f.hasNext();){const m=f.getNext(),h=m.key,v=m.value,T=Zw();v.forEach((S=>{if(!a.has(S)){const I=aC(t.get(S),i.get(S));I!==null&&T.set(S,I),a=a.add(S)}})),u.push(this.documentOverlayCache.saveOverlays(e,h,T))}return se.waitFor(u)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,o){return RU(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):NU(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next((a=>{const u=o-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-a.size):se.resolve(ao());let f=_u,m=a;return u.next((h=>se.forEach(h,((v,T)=>(f<T.largestBatchId&&(f=T.largestBatchId),a.get(v)?se.resolve():this.remoteDocumentCache.getEntry(e,v).next((S=>{m=m.insert(v,S)}))))).next((()=>this.populateOverlays(e,h,a))).next((()=>this.computeViews(e,m,h,qe()))).next((v=>({batchId:f,changes:Xw(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Se(t)).next((i=>{let o=ru();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const a=t.collectionGroup;let u=ru();return this.indexManager.getCollectionParents(e,a).next((f=>se.forEach(f,(m=>{const h=(function(T,S){return new xf(S,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(t,m.child(a));return this.getDocumentsMatchingCollectionQuery(e,h,i,o).next((v=>{v.forEach(((T,S)=>{u=u.insert(T,S)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,i,o){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((u=>(a=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,a,o)))).next((u=>{a.forEach(((m,h)=>{const v=h.getKey();u.get(v)===null&&(u=u.insert(v,rn.newInvalidDocument(v)))}));let f=ru();return u.forEach(((m,h)=>{const v=a.get(m);v!==void 0&&hu(v.mutation,h,Dn.empty(),ct.now()),bf(t,h)&&(f=f.insert(m,h))})),f}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b3{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return se.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:Hi(o.createTime)}})(t)),se.resolve()}getNamedQuery(e,t){return se.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(o){return{name:o.name,query:y3(o.bundledQuery),readTime:Hi(o.readTime)}})(t)),se.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R3{constructor(){this.overlays=new mt(Se.comparator),this.Lr=new Map}getOverlay(e,t){return se.resolve(this.overlays.get(t))}getOverlays(e,t){const i=ao();return se.forEach(t,(o=>this.getOverlay(e,o).next((a=>{a!==null&&i.set(o,a)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((o,a)=>{this.bt(e,t,a)})),se.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.Lr.get(i);return o!==void 0&&(o.forEach((a=>this.overlays=this.overlays.remove(a))),this.Lr.delete(i)),se.resolve()}getOverlaysForCollection(e,t,i){const o=ao(),a=t.length+1,u=new Se(t.child("")),f=this.overlays.getIteratorFrom(u);for(;f.hasNext();){const m=f.getNext().value,h=m.getKey();if(!t.isPrefixOf(h.path))break;h.path.length===a&&m.largestBatchId>i&&o.set(m.getKey(),m)}return se.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let a=new mt(((h,v)=>h-v));const u=this.overlays.getIterator();for(;u.hasNext();){const h=u.getNext().value;if(h.getKey().getCollectionGroup()===t&&h.largestBatchId>i){let v=a.get(h.largestBatchId);v===null&&(v=ao(),a=a.insert(h.largestBatchId,v)),v.set(h.getKey(),h)}}const f=ao(),m=a.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach(((h,v)=>f.set(h,v))),!(f.size()>=o)););return se.resolve(f)}bt(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const u=this.Lr.get(o.largestBatchId).delete(i.key);this.Lr.set(o.largestBatchId,u)}this.overlays=this.overlays.insert(i.key,new KU(t,i));let a=this.Lr.get(t);a===void 0&&(a=qe(),this.Lr.set(t,a)),this.Lr.set(t,a.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N3{constructor(){this.sessionToken=en.EMPTY_BYTE_STRING}getSessionToken(e){return se.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,se.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pg{constructor(){this.kr=new Gt(zt.Kr),this.qr=new Gt(zt.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const i=new zt(e,t);this.kr=this.kr.add(i),this.qr=this.qr.add(i)}$r(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Wr(new zt(e,t))}Qr(e,t){e.forEach((i=>this.removeReference(i,t)))}Gr(e){const t=new Se(new pt([])),i=new zt(t,e),o=new zt(t,e+1),a=[];return this.qr.forEachInRange([i,o],(u=>{this.Wr(u),a.push(u.key)})),a}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new Se(new pt([])),i=new zt(t,e),o=new zt(t,e+1);let a=qe();return this.qr.forEachInRange([i,o],(u=>{a=a.add(u.key)})),a}containsKey(e){const t=new zt(e,0),i=this.kr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class zt{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return Se.comparator(e.key,t.key)||He(e.Hr,t.Hr)}static Ur(e,t){return He(e.Hr,t.Hr)||Se.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M3{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new Gt(zt.Kr)}checkEmpty(e){return se.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const a=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new JU(a,t,i,o);this.mutationQueue.push(u);for(const f of o)this.Jr=this.Jr.add(new zt(f.key,a)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return se.resolve(u)}lookupMutationBatch(e,t){return se.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.Xr(i),a=o<0?0:o;return se.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(this.mutationQueue.length===0?wg:this.Yn-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new zt(t,0),o=new zt(t,Number.POSITIVE_INFINITY),a=[];return this.Jr.forEachInRange([i,o],(u=>{const f=this.Zr(u.Hr);a.push(f)})),se.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Gt(He);return t.forEach((o=>{const a=new zt(o,0),u=new zt(o,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([a,u],(f=>{i=i.add(f.Hr)}))})),se.resolve(this.Yr(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let a=i;Se.isDocumentKey(a)||(a=a.child(""));const u=new zt(new Se(a),0);let f=new Gt(He);return this.Jr.forEachWhile((m=>{const h=m.key.path;return!!i.isPrefixOf(h)&&(h.length===o&&(f=f.add(m.Hr)),!0)}),u),se.resolve(this.Yr(f))}Yr(e){const t=[];return e.forEach((i=>{const o=this.Zr(i);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){Ze(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Jr;return se.forEach(t.mutations,(o=>{const a=new zt(o.key,t.batchId);return i=i.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Jr=i}))}nr(e){}containsKey(e,t){const i=new zt(t,0),o=this.Jr.firstAfterOrEqual(i);return se.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,se.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k3{constructor(e){this.ti=e,this.docs=(function(){return new mt(Se.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),a=o?o.size:0,u=this.ti(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:u}),this.size+=u-a,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return se.resolve(i?i.document.mutableCopy():rn.newInvalidDocument(t))}getEntries(e,t){let i=Ts();return t.forEach((o=>{const a=this.docs.get(o);i=i.insert(o,a?a.document.mutableCopy():rn.newInvalidDocument(o))})),se.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let a=Ts();const u=t.path,f=new Se(u.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(f);for(;m.hasNext();){const{key:h,value:{document:v}}=m.getNext();if(!u.isPrefixOf(h.path))break;h.path.length>u.length+1||rU(sU(v),i)<=0||(o.has(v.key)||bf(t,v))&&(a=a.insert(v.key,v.mutableCopy()))}return se.resolve(a)}getAllFromCollectionGroup(e,t,i,o){Ce(9500)}ni(e,t){return se.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new D3(this)}getSize(e){return se.resolve(this.size)}}class D3 extends C3{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?t.push(this.Mr.addEntry(e,o)):this.Mr.removeEntry(i)})),se.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P3{constructor(e){this.persistence=e,this.ri=new Eo((t=>Ig(t)),bg),this.lastRemoteSnapshotVersion=Re.min(),this.highestTargetId=0,this.ii=0,this.si=new Pg,this.targetCount=0,this.oi=ka._r()}forEachTarget(e,t){return this.ri.forEach(((i,o)=>t(o))),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.ii&&(this.ii=t),se.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new ka(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,se.resolve()}updateTargetData(e,t){return this.lr(t),se.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,t,i){let o=0;const a=[];return this.ri.forEach(((u,f)=>{f.sequenceNumber<=t&&i.get(f.targetId)===null&&(this.ri.delete(u),a.push(this.removeMatchingKeysForTargetId(e,f.targetId)),o++)})),se.waitFor(a).next((()=>o))}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,t){const i=this.ri.get(t)||null;return se.resolve(i)}addMatchingKeys(e,t,i){return this.si.$r(t,i),se.resolve()}removeMatchingKeys(e,t,i){this.si.Qr(t,i);const o=this.persistence.referenceDelegate,a=[];return o&&t.forEach((u=>{a.push(o.markPotentiallyOrphaned(e,u))})),se.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),se.resolve()}getMatchingKeysForTargetId(e,t){const i=this.si.jr(t);return se.resolve(i)}containsKey(e,t){return se.resolve(this.si.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SC{constructor(e,t){this._i={},this.overlays={},this.ai=new Af(0),this.ui=!1,this.ui=!0,this.ci=new N3,this.referenceDelegate=e(this),this.li=new P3(this),this.indexManager=new v3,this.remoteDocumentCache=(function(o){return new k3(o)})((i=>this.referenceDelegate.hi(i))),this.serializer=new g3(t),this.Pi=new b3(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new R3,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this._i[e.toKey()];return i||(i=new M3(t,this.referenceDelegate),this._i[e.toKey()]=i),i}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,i){me("MemoryPersistence","Starting transaction:",e);const o=new L3(this.ai.next());return this.referenceDelegate.Ti(),i(o).next((a=>this.referenceDelegate.Ii(o).next((()=>a)))).toPromise().then((a=>(o.raiseOnCommittedEvent(),a)))}Ei(e,t){return se.or(Object.values(this._i).map((i=>()=>i.containsKey(e,t))))}}class L3 extends aU{constructor(e){super(),this.currentSequenceNumber=e}}class Lg{constructor(e){this.persistence=e,this.Ri=new Pg,this.Ai=null}static Vi(e){return new Lg(e)}get di(){if(this.Ai)return this.Ai;throw Ce(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.di.delete(i.toString()),se.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.di.add(i.toString()),se.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),se.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((o=>this.di.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((a=>this.di.add(a.toString())))})).next((()=>i.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.di,(i=>{const o=Se.fromPath(i);return this.mi(e,o).next((a=>{a||t.removeEntry(o,Re.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((i=>{i?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return se.or([()=>se.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class uf{constructor(e,t){this.persistence=e,this.fi=new Eo((i=>cU(i.path)),((i,o)=>i.isEqual(o))),this.garbageCollector=w3(this,t)}static Vi(e,t){return new uf(e,t)}Ti(){}Ii(e){return se.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((o=>i+o))))}pr(e){let t=0;return this.mr(e,(i=>{t++})).next((()=>t))}mr(e,t){return se.forEach(this.fi,((i,o)=>this.wr(e,i,o).next((a=>a?se.resolve():t(o)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const o=this.persistence.getRemoteDocumentCache(),a=o.newChangeBuffer();return o.ni(e,(u=>this.wr(e,u,t).next((f=>{f||(i++,a.removeEntry(u,Re.min()))})))).next((()=>a.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),se.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.fi.set(i,e.currentSequenceNumber),se.resolve()}removeReference(e,t,i){return this.fi.set(i,e.currentSequenceNumber),se.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),se.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Vd(e.data.value)),t}wr(e,t,i){return se.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.fi.get(t);return se.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vg{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.Ts=i,this.Is=o}static Es(e,t){let i=qe(),o=qe();for(const a of t.docChanges)switch(a.type){case 0:i=i.add(a.doc.key);break;case 1:o=o.add(a.doc.key)}return new Vg(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V3{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U3{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return lP()?8:lU(an())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,o){const a={result:null};return this.gs(e,t).next((u=>{a.result=u})).next((()=>{if(!a.result)return this.ps(e,t,o,i).next((u=>{a.result=u}))})).next((()=>{if(a.result)return;const u=new V3;return this.ys(e,t,u).next((f=>{if(a.result=f,this.As)return this.ws(e,t,u,f.size)}))})).next((()=>a.result))}ws(e,t,i,o){return i.documentReadCount<this.Vs?(pa()<=Be.DEBUG&&me("QueryEngine","SDK will not create cache indexes for query:",ma(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),se.resolve()):(pa()<=Be.DEBUG&&me("QueryEngine","Query:",ma(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.ds*o?(pa()<=Be.DEBUG&&me("QueryEngine","The SDK decides to create cache indexes for query:",ma(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Gi(t))):se.resolve())}gs(e,t){if(iS(t))return se.resolve(null);let i=Gi(t);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=Om(t,null,"F"),i=Gi(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((a=>{const u=qe(...a);return this.fs.getDocuments(e,u).next((f=>this.indexManager.getMinOffset(e,i).next((m=>{const h=this.bs(t,f);return this.Ss(t,h,u,m.readTime)?this.gs(e,Om(t,null,"F")):this.Ds(e,h,t,m)}))))})))))}ps(e,t,i,o){return iS(t)||o.isEqual(Re.min())?se.resolve(null):this.fs.getDocuments(e,i).next((a=>{const u=this.bs(t,a);return this.Ss(t,u,i,o)?se.resolve(null):(pa()<=Be.DEBUG&&me("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),ma(t)),this.Ds(e,u,t,iU(o,_u)).next((f=>f)))}))}bs(e,t){let i=new Gt(Qw(e));return t.forEach(((o,a)=>{bf(e,a)&&(i=i.add(a))})),i}Ss(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(o)>0)}ys(e,t,i){return pa()<=Be.DEBUG&&me("QueryEngine","Using full collection scan to execute query:",ma(t)),this.fs.getDocumentsMatchingQuery(e,t,mr.min(),i)}Ds(e,t,i,o){return this.fs.getDocumentsMatchingQuery(e,i,o).next((a=>(t.forEach((u=>{a=a.insert(u.key,u)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ug="LocalStore",O3=3e8;class F3{constructor(e,t,i,o){this.persistence=e,this.Cs=t,this.serializer=o,this.vs=new mt(He),this.Fs=new Eo((a=>Ig(a)),bg),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(i)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new I3(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function G3(n,e,t,i){return new F3(n,e,t,i)}async function AC(n,e){const t=Me(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next((a=>(o=a,t.Os(e),t.mutationQueue.getAllMutationBatches(i)))).next((a=>{const u=[],f=[];let m=qe();for(const h of o){u.push(h.batchId);for(const v of h.mutations)m=m.add(v.key)}for(const h of a){f.push(h.batchId);for(const v of h.mutations)m=m.add(v.key)}return t.localDocuments.getDocuments(i,m).next((h=>({Ns:h,removedBatchIds:u,addedBatchIds:f})))}))}))}function B3(n,e){const t=Me(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),a=t.xs.newChangeBuffer({trackRemovals:!0});return(function(f,m,h,v){const T=h.batch,S=T.keys();let I=se.resolve();return S.forEach((k=>{I=I.next((()=>v.getEntry(m,k))).next((O=>{const P=h.docVersions.get(k);Ze(P!==null,48541),O.version.compareTo(P)<0&&(T.applyToRemoteDocument(O,h),O.isValidDocument()&&(O.setReadTime(h.commitVersion),v.addEntry(O)))}))})),I.next((()=>f.mutationQueue.removeMutationBatch(m,T)))})(t,i,e,a).next((()=>a.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(f){let m=qe();for(let h=0;h<f.mutationResults.length;++h)f.mutationResults[h].transformResults.length>0&&(m=m.add(f.batch.mutations[h].key));return m})(e)))).next((()=>t.localDocuments.getDocuments(i,o)))}))}function wC(n){const e=Me(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function H3(n,e){const t=Me(n),i=e.snapshotVersion;let o=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const u=t.xs.newChangeBuffer({trackRemovals:!0});o=t.vs;const f=[];e.targetChanges.forEach(((v,T)=>{const S=o.get(T);if(!S)return;f.push(t.li.removeMatchingKeys(a,v.removedDocuments,T).next((()=>t.li.addMatchingKeys(a,v.addedDocuments,T))));let I=S.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(T)!==null?I=I.withResumeToken(en.EMPTY_BYTE_STRING,Re.min()).withLastLimboFreeSnapshotVersion(Re.min()):v.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(v.resumeToken,i)),o=o.insert(T,I),(function(O,P,$){return O.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-O.snapshotVersion.toMicroseconds()>=O3?!0:$.addedDocuments.size+$.modifiedDocuments.size+$.removedDocuments.size>0})(S,I,v)&&f.push(t.li.updateTargetData(a,I))}));let m=Ts(),h=qe();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(a,v))})),f.push(q3(a,u,e.documentUpdates).next((v=>{m=v.Bs,h=v.Ls}))),!i.isEqual(Re.min())){const v=t.li.getLastRemoteSnapshotVersion(a).next((T=>t.li.setTargetsMetadata(a,a.currentSequenceNumber,i)));f.push(v)}return se.waitFor(f).next((()=>u.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,m,h))).next((()=>m))})).then((a=>(t.vs=o,a)))}function q3(n,e,t){let i=qe(),o=qe();return t.forEach((a=>i=i.add(a))),e.getEntries(n,i).next((a=>{let u=Ts();return t.forEach(((f,m)=>{const h=a.get(f);m.isFoundDocument()!==h.isFoundDocument()&&(o=o.add(f)),m.isNoDocument()&&m.version.isEqual(Re.min())?(e.removeEntry(f,m.readTime),u=u.insert(f,m)):!h.isValidDocument()||m.version.compareTo(h.version)>0||m.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(m),u=u.insert(f,m)):me(Ug,"Ignoring outdated watch update for ",f,". Current version:",h.version," Watch version:",m.version)})),{Bs:u,Ls:o}}))}function z3(n,e){const t=Me(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=wg),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function Y3(n,e){const t=Me(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return t.li.getTargetData(i,e).next((a=>a?(o=a,se.resolve(o)):t.li.allocateTargetId(i).next((u=>(o=new ur(e,u,"TargetPurposeListen",i.currentSequenceNumber),t.li.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=t.vs.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.vs=t.vs.insert(i.targetId,i),t.Fs.set(e,i.targetId)),i}))}async function qm(n,e,t){const i=Me(n),o=i.vs.get(e),a=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",a,(u=>i.persistence.referenceDelegate.removeTarget(u,o)))}catch(u){if(!qa(u))throw u;me(Ug,`Failed to update sequence numbers for target ${e}: ${u}`)}i.vs=i.vs.remove(e),i.Fs.delete(o.target)}function gS(n,e,t){const i=Me(n);let o=Re.min(),a=qe();return i.persistence.runTransaction("Execute query","readwrite",(u=>(function(m,h,v){const T=Me(m),S=T.Fs.get(v);return S!==void 0?se.resolve(T.vs.get(S)):T.li.getTargetData(h,v)})(i,u,Gi(e)).next((f=>{if(f)return o=f.lastLimboFreeSnapshotVersion,i.li.getMatchingKeysForTargetId(u,f.targetId).next((m=>{a=m}))})).next((()=>i.Cs.getDocumentsMatchingQuery(u,e,t?o:Re.min(),t?a:qe()))).next((f=>(J3(i,kU(e),f),{documents:f,ks:a})))))}function J3(n,e,t){let i=n.Ms.get(e)||Re.min();t.forEach(((o,a)=>{a.readTime.compareTo(i)>0&&(i=a.readTime)})),n.Ms.set(e,i)}class yS{constructor(){this.activeTargetIds=OU()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class K3{constructor(){this.vo=new yS,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,i){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new yS,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $3{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vS="ConnectivityMonitor";class _S{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){me(vS,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){me(vS,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Id=null;function zm(){return Id===null?Id=(function(){return 268435456+Math.round(2147483648*Math.random())})():Id++,"0x"+Id.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const em="RestConnection",j3={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class Q3{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${i}/databases/${o}`,this.$o=this.databaseId.database===sf?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Wo(e,t,i,o,a){const u=zm(),f=this.Qo(e,t.toUriEncodedString());me(em,`Sending RPC '${e}' ${u}:`,f,i);const m={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(m,o,a);const{host:h}=new URL(f),v=Oa(h);return this.zo(e,f,m,i,v).then((T=>(me(em,`Received RPC '${e}' ${u}: `,T),T)),(T=>{throw mo(em,`RPC '${e}' ${u} failed with error: `,T,"url: ",f,"request:",i),T}))}jo(e,t,i,o,a,u){return this.Wo(e,t,i,o,a)}Go(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ba})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,a)=>e[a]=o)),i&&i.headers.forEach(((o,a)=>e[a]=o))}Qo(e,t){const i=j3[e];let o=`${this.qo}/v1/${t}:${i}`;return this.databaseInfo.apiKey&&(o=`${o}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),o}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W3{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nn="WebChannelConnection",Zl=(n,e,t)=>{n.listen(e,(i=>{try{t(i)}catch(o){setTimeout((()=>{throw o}),0)}}))};class Ca extends Q3{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Ca.c_){const e=bw();Zl(e,Iw.STAT_EVENT,(t=>{t.stat===km.PROXY?me(nn,"STAT_EVENT: detected buffering proxy"):t.stat===km.NOPROXY&&me(nn,"STAT_EVENT: detected no buffering proxy")})),Ca.c_=!0}}zo(e,t,i,o,a){const u=zm();return new Promise(((f,m)=>{const h=new Cw;h.setWithCredentials(!0),h.listenOnce(xw.COMPLETE,(()=>{try{switch(h.getLastErrorCode()){case Ld.NO_ERROR:const T=h.getResponseJson();me(nn,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(T)),f(T);break;case Ld.TIMEOUT:me(nn,`RPC '${e}' ${u} timed out`),m(new Te(oe.DEADLINE_EXCEEDED,"Request time out"));break;case Ld.HTTP_ERROR:const S=h.getStatus();if(me(nn,`RPC '${e}' ${u} failed with status:`,S,"response text:",h.getResponseText()),S>0){let I=h.getResponseJson();Array.isArray(I)&&(I=I[0]);const k=I==null?void 0:I.error;if(k&&k.status&&k.message){const O=(function($){const ee=$.toLowerCase().replace(/_/g,"-");return Object.values(oe).indexOf(ee)>=0?ee:oe.UNKNOWN})(k.status);m(new Te(O,k.message))}else m(new Te(oe.UNKNOWN,"Server responded with status "+h.getStatus()))}else m(new Te(oe.UNAVAILABLE,"Connection failed."));break;default:Ce(9055,{l_:e,streamId:u,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{me(nn,`RPC '${e}' ${u} completed.`)}}));const v=JSON.stringify(o);me(nn,`RPC '${e}' ${u} sending request:`,o),h.send(t,"POST",v,i,15)}))}T_(e,t,i){const o=zm(),a=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=this.createWebChannelTransport(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(f.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(f.useFetchStreams=!0),this.Go(f.initMessageHeaders,t,i),f.encodeInitMessageHeaders=!0;const h=a.join("");me(nn,`Creating RPC '${e}' stream ${o}: ${h}`,f);const v=u.createWebChannel(h,f);this.I_(v);let T=!1,S=!1;const I=new W3({Ho:k=>{S?me(nn,`Not sending because RPC '${e}' stream ${o} is closed:`,k):(T||(me(nn,`Opening RPC '${e}' stream ${o} transport.`),v.open(),T=!0),me(nn,`RPC '${e}' stream ${o} sending:`,k),v.send(k))},Jo:()=>v.close()});return Zl(v,su.EventType.OPEN,(()=>{S||(me(nn,`RPC '${e}' stream ${o} transport opened.`),I.i_())})),Zl(v,su.EventType.CLOSE,(()=>{S||(S=!0,me(nn,`RPC '${e}' stream ${o} transport closed`),I.o_(),this.E_(v))})),Zl(v,su.EventType.ERROR,(k=>{S||(S=!0,mo(nn,`RPC '${e}' stream ${o} transport errored. Name:`,k.name,"Message:",k.message),I.o_(new Te(oe.UNAVAILABLE,"The operation could not be completed")))})),Zl(v,su.EventType.MESSAGE,(k=>{var O;if(!S){const P=k.data[0];Ze(!!P,16349);const $=P,ee=($==null?void 0:$.error)||((O=$[0])==null?void 0:O.error);if(ee){me(nn,`RPC '${e}' stream ${o} received error:`,ee);const X=ee.status;let re=(function(R){const M=Dt[R];if(M!==void 0)return cC(M)})(X),ae=ee.message;X==="NOT_FOUND"&&ae.includes("database")&&ae.includes("does not exist")&&ae.includes(this.databaseId.database)&&mo(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),re===void 0&&(re=oe.INTERNAL,ae="Unknown error status: "+X+" with message "+ee.message),S=!0,I.o_(new Te(re,ae)),v.close()}else me(nn,`RPC '${e}' stream ${o} received:`,P),I.__(P)}})),Ca.u_(),setTimeout((()=>{I.s_()}),0),I}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,i){super.Go(e,t,i),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return Rw()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X3(n){return new Ca(n)}function tm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kf(n){return new n3(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ca.c_=!1;class CC{constructor(e,t,i=1e3,o=1.5,a=6e4){this.Ci=e,this.timerId=t,this.R_=i,this.A_=o,this.V_=a,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),i=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-i);o>0&&me("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TS="PersistentStream";class xC{constructor(e,t,i,o,a,u,f,m){this.Ci=e,this.b_=i,this.S_=o,this.connection=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=f,this.listener=m,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new CC(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===oe.RESOURCE_EXHAUSTED?(_s(t.toString()),_s("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===oe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.D_===t&&this.G_(i,o)}),(i=>{e((()=>{const o=new Te(oe.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(o)}))}))}G_(e,t){const i=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.Yo((()=>{i((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((o=>{i((()=>this.z_(o)))})),this.stream.onMessage((o=>{i((()=>++this.F_==1?this.H_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return me(TS,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(me(TS,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Z3 extends xC{constructor(e,t,i,o,a,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,u),this.serializer=a}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=r3(this.serializer,e),i=(function(a){if(!("targetChange"in a))return Re.min();const u=a.targetChange;return u.targetIds&&u.targetIds.length?Re.min():u.readTime?Hi(u.readTime):Re.min()})(e);return this.listener.J_(t,i)}Z_(e){const t={};t.database=Hm(this.serializer),t.addTarget=(function(a,u){let f;const m=u.target;if(f=Um(m)?{documents:l3(a,m)}:{query:u3(a,m).ft},f.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){f.resumeToken=hC(a,u.resumeToken);const h=Fm(a,u.expectedCount);h!==null&&(f.expectedCount=h)}else if(u.snapshotVersion.compareTo(Re.min())>0){f.readTime=lf(a,u.snapshotVersion.toTimestamp());const h=Fm(a,u.expectedCount);h!==null&&(f.expectedCount=h)}return f})(this.serializer,e);const i=d3(this.serializer,e);i&&(t.labels=i),this.K_(t)}X_(e){const t={};t.database=Hm(this.serializer),t.removeTarget=e,this.K_(t)}}class eO extends xC{constructor(e,t,i,o,a,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,u),this.serializer=a}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return Ze(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ze(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ze(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=a3(e.writeResults,e.commitTime),i=Hi(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=Hm(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>o3(this.serializer,i)))};this.K_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tO{}class nO extends tO{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new Te(oe.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,u])=>this.connection.Wo(e,Gm(t,i),o,a,u))).catch((a=>{throw a.name==="FirebaseError"?(a.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Te(oe.UNKNOWN,a.toString())}))}jo(e,t,i,o,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,f])=>this.connection.jo(e,Gm(t,i),o,u,f,a))).catch((u=>{throw u.name==="FirebaseError"?(u.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Te(oe.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function iO(n,e,t,i){return new nO(n,e,t,i)}class sO{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(_s(t),this.aa=!1):me("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yo="RemoteStore";class rO{constructor(e,t,i,o,a){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=a,this.Aa.Mo((u=>{i.enqueueAndForget((async()=>{So(this)&&(me(yo,"Restarting streams for network reachability change."),await(async function(m){const h=Me(m);h.Ea.add(4),await Ou(h),h.Va.set("Unknown"),h.Ea.delete(4),await Df(h)})(this))}))})),this.Va=new sO(i,o)}}async function Df(n){if(So(n))for(const e of n.Ra)await e(!0)}async function Ou(n){for(const e of n.Ra)await e(!1)}function IC(n,e){const t=Me(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Bg(t)?Gg(t):za(t).O_()&&Fg(t,e))}function Og(n,e){const t=Me(n),i=za(t);t.Ia.delete(e),i.O_()&&bC(t,e),t.Ia.size===0&&(i.O_()?i.L_():So(t)&&t.Va.set("Unknown"))}function Fg(n,e){if(n.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Re.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}za(n).Z_(e)}function bC(n,e){n.da.$e(e),za(n).X_(e)}function Gg(n){n.da=new XU({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),za(n).start(),n.Va.ua()}function Bg(n){return So(n)&&!za(n).x_()&&n.Ia.size>0}function So(n){return Me(n).Ea.size===0}function RC(n){n.da=void 0}async function oO(n){n.Va.set("Online")}async function aO(n){n.Ia.forEach(((e,t)=>{Fg(n,e)}))}async function lO(n,e){RC(n),Bg(n)?(n.Va.ha(e),Gg(n)):n.Va.set("Unknown")}async function uO(n,e,t){if(n.Va.set("Online"),e instanceof fC&&e.state===2&&e.cause)try{await(async function(o,a){const u=a.cause;for(const f of a.targetIds)o.Ia.has(f)&&(await o.remoteSyncer.rejectListen(f,u),o.Ia.delete(f),o.da.removeTarget(f))})(n,e)}catch(i){me(yo,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await cf(n,i)}else if(e instanceof Fd?n.da.Xe(e):e instanceof dC?n.da.st(e):n.da.tt(e),!t.isEqual(Re.min()))try{const i=await wC(n.localStore);t.compareTo(i)>=0&&await(function(a,u){const f=a.da.Tt(u);return f.targetChanges.forEach(((m,h)=>{if(m.resumeToken.approximateByteSize()>0){const v=a.Ia.get(h);v&&a.Ia.set(h,v.withResumeToken(m.resumeToken,u))}})),f.targetMismatches.forEach(((m,h)=>{const v=a.Ia.get(m);if(!v)return;a.Ia.set(m,v.withResumeToken(en.EMPTY_BYTE_STRING,v.snapshotVersion)),bC(a,m);const T=new ur(v.target,m,h,v.sequenceNumber);Fg(a,T)})),a.remoteSyncer.applyRemoteEvent(f)})(n,t)}catch(i){me(yo,"Failed to raise snapshot:",i),await cf(n,i)}}async function cf(n,e,t){if(!qa(e))throw e;n.Ea.add(1),await Ou(n),n.Va.set("Offline"),t||(t=()=>wC(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{me(yo,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Df(n)}))}function NC(n,e){return e().catch((t=>cf(n,t,e)))}async function Pf(n){const e=Me(n),t=_r(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:wg;for(;cO(e);)try{const o=await z3(e.localStore,i);if(o===null){e.Ta.length===0&&t.L_();break}i=o.batchId,dO(e,o)}catch(o){await cf(e,o)}MC(e)&&kC(e)}function cO(n){return So(n)&&n.Ta.length<10}function dO(n,e){n.Ta.push(e);const t=_r(n);t.O_()&&t.Y_&&t.ea(e.mutations)}function MC(n){return So(n)&&!_r(n).x_()&&n.Ta.length>0}function kC(n){_r(n).start()}async function fO(n){_r(n).ra()}async function hO(n){const e=_r(n);for(const t of n.Ta)e.ea(t.mutations)}async function pO(n,e,t){const i=n.Ta.shift(),o=Mg.from(i,e,t);await NC(n,(()=>n.remoteSyncer.applySuccessfulWrite(o))),await Pf(n)}async function mO(n,e){e&&_r(n).Y_&&await(async function(i,o){if((function(u){return jU(u)&&u!==oe.ABORTED})(o.code)){const a=i.Ta.shift();_r(i).B_(),await NC(i,(()=>i.remoteSyncer.rejectFailedWrite(a.batchId,o))),await Pf(i)}})(n,e),MC(n)&&kC(n)}async function ES(n,e){const t=Me(n);t.asyncQueue.verifyOperationInProgress(),me(yo,"RemoteStore received new credentials");const i=So(t);t.Ea.add(3),await Ou(t),i&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Df(t)}async function gO(n,e){const t=Me(n);e?(t.Ea.delete(2),await Df(t)):e||(t.Ea.add(2),await Ou(t),t.Va.set("Unknown"))}function za(n){return n.ma||(n.ma=(function(t,i,o){const a=Me(t);return a.sa(),new Z3(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)})(n.datastore,n.asyncQueue,{Zo:oO.bind(null,n),Yo:aO.bind(null,n),t_:lO.bind(null,n),J_:uO.bind(null,n)}),n.Ra.push((async e=>{e?(n.ma.B_(),Bg(n)?Gg(n):n.Va.set("Unknown")):(await n.ma.stop(),RC(n))}))),n.ma}function _r(n){return n.fa||(n.fa=(function(t,i,o){const a=Me(t);return a.sa(),new eO(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),Yo:fO.bind(null,n),t_:mO.bind(null,n),ta:hO.bind(null,n),na:pO.bind(null,n)}),n.Ra.push((async e=>{e?(n.fa.B_(),await Pf(n)):(await n.fa.stop(),n.Ta.length>0&&(me(yo,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hg{constructor(e,t,i,o,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=a,this.deferred=new pr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,a){const u=Date.now()+i,f=new Hg(e,t,u,o,a);return f.start(i),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Te(oe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function qg(n,e){if(_s("AsyncQueue",`${e}: ${n}`),qa(n))return new Te(oe.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{static emptySet(e){return new xa(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||Se.comparator(t.key,i.key):(t,i)=>Se.comparator(t.key,i.key),this.keyedMap=ru(),this.sortedSet=new mt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof xa)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=i.getNext().key;if(!o.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new xa;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SS{constructor(){this.ga=new mt(Se.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ce(63341,{Vt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class Da{constructor(e,t,i,o,a,u,f,m,h){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=f,this.excludesMetadataChanges=m,this.hasCachedResults=h}static fromInitialDocuments(e,t,i,o,a){const u=[];return t.forEach((f=>{u.push({type:0,doc:f})})),new Da(e,t,xa.emptySet(t),u,i,o,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&If(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yO{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class vO{constructor(){this.queries=AS(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const o=Me(t),a=o.queries;o.queries=AS(),a.forEach(((u,f)=>{for(const m of f.ba)m.onError(i)}))})(this,new Te(oe.ABORTED,"Firestore shutting down"))}}function AS(){return new Eo((n=>jw(n)),If)}async function _O(n,e){const t=Me(n);let i=3;const o=e.query;let a=t.queries.get(o);a?!a.Sa()&&e.Da()&&(i=2):(a=new yO,i=e.Da()?0:1);try{switch(i){case 0:a.wa=await t.onListen(o,!0);break;case 1:a.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(u){const f=qg(u,`Initialization of query '${ma(e.query)}' failed`);return void e.onError(f)}t.queries.set(o,a),a.ba.push(e),e.va(t.onlineState),a.wa&&e.Fa(a.wa)&&zg(t)}async function TO(n,e){const t=Me(n),i=e.query;let o=3;const a=t.queries.get(i);if(a){const u=a.ba.indexOf(e);u>=0&&(a.ba.splice(u,1),a.ba.length===0?o=e.Da()?0:1:!a.Sa()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function EO(n,e){const t=Me(n);let i=!1;for(const o of e){const a=o.query,u=t.queries.get(a);if(u){for(const f of u.ba)f.Fa(o)&&(i=!0);u.wa=o}}i&&zg(t)}function SO(n,e,t){const i=Me(n),o=i.queries.get(e);if(o)for(const a of o.ba)a.onError(t);i.queries.delete(e)}function zg(n){n.Ca.forEach((e=>{e.next()}))}var Ym,wS;(wS=Ym||(Ym={})).Ma="default",wS.Cache="cache";class AO{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new Da(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.Ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Da.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Ym.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(e){this.key=e}}class PC{constructor(e){this.key=e}}class wO{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=qe(),this.mutatedKeys=qe(),this.eu=Qw(e),this.tu=new xa(this.eu)}get nu(){return this.Za}ru(e,t){const i=t?t.iu:new SS,o=t?t.tu:this.tu;let a=t?t.mutatedKeys:this.mutatedKeys,u=o,f=!1;const m=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,h=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((v,T)=>{const S=o.get(v),I=bf(this.query,T)?T:null,k=!!S&&this.mutatedKeys.has(S.key),O=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let P=!1;S&&I?S.data.isEqual(I.data)?k!==O&&(i.track({type:3,doc:I}),P=!0):this.su(S,I)||(i.track({type:2,doc:I}),P=!0,(m&&this.eu(I,m)>0||h&&this.eu(I,h)<0)&&(f=!0)):!S&&I?(i.track({type:0,doc:I}),P=!0):S&&!I&&(i.track({type:1,doc:S}),P=!0,(m||h)&&(f=!0)),P&&(I?(u=u.add(I),a=O?a.add(v):a.delete(v)):(u=u.delete(v),a=a.delete(v)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const v=this.query.limitType==="F"?u.last():u.first();u=u.delete(v.key),a=a.delete(v.key),i.track({type:1,doc:v})}return{tu:u,iu:i,Ss:f,mutatedKeys:a}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((v,T)=>(function(I,k){const O=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ce(20277,{Vt:P})}};return O(I)-O(k)})(v.type,T.type)||this.eu(v.doc,T.doc))),this.ou(i),o=o??!1;const f=t&&!o?this._u():[],m=this.Ya.size===0&&this.current&&!o?1:0,h=m!==this.Xa;return this.Xa=m,u.length!==0||h?{snapshot:new Da(this.query,e.tu,a,u,e.mutatedKeys,m===0,h,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new SS,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=qe(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Ya=this.Ya.add(i.key))}));const t=[];return e.forEach((i=>{this.Ya.has(i)||t.push(new PC(i))})),this.Ya.forEach((i=>{e.has(i)||t.push(new DC(i))})),t}cu(e){this.Za=e.ks,this.Ya=qe();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Da.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Yg="SyncEngine";class CO{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class xO{constructor(e){this.key=e,this.hu=!1}}class IO{constructor(e,t,i,o,a,u){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new Eo((f=>jw(f)),If),this.Iu=new Map,this.Eu=new Set,this.Ru=new mt(Se.comparator),this.Au=new Map,this.Vu=new Pg,this.du={},this.mu=new Map,this.fu=ka.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function bO(n,e,t=!0){const i=GC(n);let o;const a=i.Tu.get(e);return a?(i.sharedClientState.addLocalQueryTarget(a.targetId),o=a.view.lu()):o=await LC(i,e,t,!0),o}async function RO(n,e){const t=GC(n);await LC(t,e,!0,!1)}async function LC(n,e,t,i){const o=await Y3(n.localStore,Gi(e)),a=o.targetId,u=n.sharedClientState.addLocalQueryTarget(a,t);let f;return i&&(f=await NO(n,e,a,u==="current",o.resumeToken)),n.isPrimaryClient&&t&&IC(n.remoteStore,o),f}async function NO(n,e,t,i,o){n.pu=(T,S,I)=>(async function(O,P,$,ee){let X=P.view.ru($);X.Ss&&(X=await gS(O.localStore,P.query,!1).then((({documents:R})=>P.view.ru(R,X))));const re=ee&&ee.targetChanges.get(P.targetId),ae=ee&&ee.targetMismatches.get(P.targetId)!=null,j=P.view.applyChanges(X,O.isPrimaryClient,re,ae);return xS(O,P.targetId,j.au),j.snapshot})(n,T,S,I);const a=await gS(n.localStore,e,!0),u=new wO(e,a.ks),f=u.ru(a.documents),m=Uu.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",o),h=u.applyChanges(f,n.isPrimaryClient,m);xS(n,t,h.au);const v=new CO(e,t,u);return n.Tu.set(e,v),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),h.snapshot}async function MO(n,e,t){const i=Me(n),o=i.Tu.get(e),a=i.Iu.get(o.targetId);if(a.length>1)return i.Iu.set(o.targetId,a.filter((u=>!If(u,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await qm(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),t&&Og(i.remoteStore,o.targetId),Jm(i,o.targetId)})).catch(Ha)):(Jm(i,o.targetId),await qm(i.localStore,o.targetId,!0))}async function kO(n,e){const t=Me(n),i=t.Tu.get(e),o=t.Iu.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),Og(t.remoteStore,i.targetId))}async function DO(n,e,t){const i=GO(n);try{const o=await(function(u,f){const m=Me(u),h=ct.now(),v=f.reduce(((I,k)=>I.add(k.key)),qe());let T,S;return m.persistence.runTransaction("Locally write mutations","readwrite",(I=>{let k=Ts(),O=qe();return m.xs.getEntries(I,v).next((P=>{k=P,k.forEach((($,ee)=>{ee.isValidDocument()||(O=O.add($))}))})).next((()=>m.localDocuments.getOverlayedDocuments(I,k))).next((P=>{T=P;const $=[];for(const ee of f){const X=zU(ee,T.get(ee.key).overlayedDocument);X!=null&&$.push(new Ar(ee.key,X,Hw(X.value.mapValue),Bi.exists(!0)))}return m.mutationQueue.addMutationBatch(I,h,$,f)})).next((P=>{S=P;const $=P.applyToLocalDocumentSet(T,O);return m.documentOverlayCache.saveOverlays(I,P.batchId,$)}))})).then((()=>({batchId:S.batchId,changes:Xw(T)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(u,f,m){let h=u.du[u.currentUser.toKey()];h||(h=new mt(He)),h=h.insert(f,m),u.du[u.currentUser.toKey()]=h})(i,o.batchId,t),await Fu(i,o.changes),await Pf(i.remoteStore)}catch(o){const a=qg(o,"Failed to persist write");t.reject(a)}}async function VC(n,e){const t=Me(n);try{const i=await H3(t.localStore,e);e.targetChanges.forEach(((o,a)=>{const u=t.Au.get(a);u&&(Ze(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?u.hu=!0:o.modifiedDocuments.size>0?Ze(u.hu,14607):o.removedDocuments.size>0&&(Ze(u.hu,42227),u.hu=!1))})),await Fu(t,i,e)}catch(i){await Ha(i)}}function CS(n,e,t){const i=Me(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.Tu.forEach(((a,u)=>{const f=u.view.va(e);f.snapshot&&o.push(f.snapshot)})),(function(u,f){const m=Me(u);m.onlineState=f;let h=!1;m.queries.forEach(((v,T)=>{for(const S of T.ba)S.va(f)&&(h=!0)})),h&&zg(m)})(i.eventManager,e),o.length&&i.Pu.J_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function PO(n,e,t){const i=Me(n);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Au.get(e),a=o&&o.key;if(a){let u=new mt(Se.comparator);u=u.insert(a,rn.newNoDocument(a,Re.min()));const f=qe().add(a),m=new Mf(Re.min(),new Map,new mt(He),u,f);await VC(i,m),i.Ru=i.Ru.remove(a),i.Au.delete(e),Jg(i)}else await qm(i.localStore,e,!1).then((()=>Jm(i,e,t))).catch(Ha)}async function LO(n,e){const t=Me(n),i=e.batch.batchId;try{const o=await B3(t.localStore,e);OC(t,i,null),UC(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Fu(t,o)}catch(o){await Ha(o)}}async function VO(n,e,t){const i=Me(n);try{const o=await(function(u,f){const m=Me(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let v;return m.mutationQueue.lookupMutationBatch(h,f).next((T=>(Ze(T!==null,37113),v=T.keys(),m.mutationQueue.removeMutationBatch(h,T)))).next((()=>m.mutationQueue.performConsistencyCheck(h))).next((()=>m.documentOverlayCache.removeOverlaysForBatchId(h,v,f))).next((()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,v))).next((()=>m.localDocuments.getDocuments(h,v)))}))})(i.localStore,e);OC(i,e,t),UC(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Fu(i,o)}catch(o){await Ha(o)}}function UC(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function OC(n,e,t){const i=Me(n);let o=i.du[i.currentUser.toKey()];if(o){const a=o.get(e);a&&(t?a.reject(t):a.resolve(),o=o.remove(e)),i.du[i.currentUser.toKey()]=o}}function Jm(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Iu.get(e))n.Tu.delete(i),t&&n.Pu.yu(i,t);n.Iu.delete(e),n.isPrimaryClient&&n.Vu.Gr(e).forEach((i=>{n.Vu.containsKey(i)||FC(n,i)}))}function FC(n,e){n.Eu.delete(e.path.canonicalString());const t=n.Ru.get(e);t!==null&&(Og(n.remoteStore,t),n.Ru=n.Ru.remove(e),n.Au.delete(t),Jg(n))}function xS(n,e,t){for(const i of t)i instanceof DC?(n.Vu.addReference(i.key,e),UO(n,i)):i instanceof PC?(me(Yg,"Document no longer in limbo: "+i.key),n.Vu.removeReference(i.key,e),n.Vu.containsKey(i.key)||FC(n,i.key)):Ce(19791,{wu:i})}function UO(n,e){const t=e.key,i=t.path.canonicalString();n.Ru.get(t)||n.Eu.has(i)||(me(Yg,"New document in limbo: "+t),n.Eu.add(i),Jg(n))}function Jg(n){for(;n.Eu.size>0&&n.Ru.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Se(pt.fromString(e)),i=n.fu.next();n.Au.set(i,new xO(t)),n.Ru=n.Ru.insert(t,i),IC(n.remoteStore,new ur(Gi(Rg(t.path)),i,"TargetPurposeLimboResolution",Af.ce))}}async function Fu(n,e,t){const i=Me(n),o=[],a=[],u=[];i.Tu.isEmpty()||(i.Tu.forEach(((f,m)=>{u.push(i.pu(m,e,t).then((h=>{var v;if((h||t)&&i.isPrimaryClient){const T=h?!h.fromCache:(v=t==null?void 0:t.targetChanges.get(m.targetId))==null?void 0:v.current;i.sharedClientState.updateQueryState(m.targetId,T?"current":"not-current")}if(h){o.push(h);const T=Vg.Es(m.targetId,h);a.push(T)}})))})),await Promise.all(u),i.Pu.J_(o),await(async function(m,h){const v=Me(m);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>se.forEach(h,(S=>se.forEach(S.Ts,(I=>v.persistence.referenceDelegate.addReference(T,S.targetId,I))).next((()=>se.forEach(S.Is,(I=>v.persistence.referenceDelegate.removeReference(T,S.targetId,I)))))))))}catch(T){if(!qa(T))throw T;me(Ug,"Failed to update sequence numbers: "+T)}for(const T of h){const S=T.targetId;if(!T.fromCache){const I=v.vs.get(S),k=I.snapshotVersion,O=I.withLastLimboFreeSnapshotVersion(k);v.vs=v.vs.insert(S,O)}}})(i.localStore,a))}async function OO(n,e){const t=Me(n);if(!t.currentUser.isEqual(e)){me(Yg,"User change. New user:",e.toKey());const i=await AC(t.localStore,e);t.currentUser=e,(function(a,u){a.mu.forEach((f=>{f.forEach((m=>{m.reject(new Te(oe.CANCELLED,u))}))})),a.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Fu(t,i.Ns)}}function FO(n,e){const t=Me(n),i=t.Au.get(e);if(i&&i.hu)return qe().add(i.key);{let o=qe();const a=t.Iu.get(e);if(!a)return o;for(const u of a){const f=t.Tu.get(u);o=o.unionWith(f.view.nu)}return o}}function GC(n){const e=Me(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=VC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=FO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=PO.bind(null,e),e.Pu.J_=EO.bind(null,e.eventManager),e.Pu.yu=SO.bind(null,e.eventManager),e}function GO(n){const e=Me(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=LO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=VO.bind(null,e),e}class df{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=kf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return G3(this.persistence,new U3,e.initialUser,this.serializer)}Cu(e){return new SC(Lg.Vi,this.serializer)}Du(e){return new K3}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}df.provider={build:()=>new df};class BO extends df{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Ze(this.persistence.referenceDelegate instanceof uf,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new S3(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?En.withCacheSize(this.cacheSizeBytes):En.DEFAULT;return new SC((i=>uf.Vi(i,t)),this.serializer)}}class Km{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>CS(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=OO.bind(null,this.syncEngine),await gO(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new vO})()}createDatastore(e){const t=kf(e.databaseInfo.databaseId),i=X3(e.databaseInfo);return iO(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,o,a,u,f){return new rO(i,o,a,u,f)})(this.localStore,this.datastore,e.asyncQueue,(t=>CS(this.syncEngine,t,0)),(function(){return _S.v()?new _S:new $3})())}createSyncEngine(e,t){return(function(o,a,u,f,m,h,v){const T=new IO(o,a,u,f,m,h);return v&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const a=Me(o);me(yo,"RemoteStore shutting down."),a.Ea.add(5),await Ou(a),a.Aa.shutdown(),a.Va.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}Km.provider={build:()=>new Km};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HO{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):_s("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tr="FirestoreClient";class qO{constructor(e,t,i,o,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this._databaseInfo=o,this.user=sn.UNAUTHENTICATED,this.clientId=Sg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(i,(async u=>{me(Tr,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(i,(u=>(me(Tr,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new pr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=qg(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function nm(n,e){n.asyncQueue.verifyOperationInProgress(),me(Tr,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async o=>{i.isEqual(o)||(await AC(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function IS(n,e){n.asyncQueue.verifyOperationInProgress();const t=await zO(n);me(Tr,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>ES(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,o)=>ES(e.remoteStore,o))),n._onlineComponents=e}async function zO(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){me(Tr,"Using user provided OfflineComponentProvider");try{await nm(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===oe.FAILED_PRECONDITION||o.code===oe.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;mo("Error using user provided cache. Falling back to memory cache: "+t),await nm(n,new df)}}else me(Tr,"Using default OfflineComponentProvider"),await nm(n,new BO(void 0));return n._offlineComponents}async function BC(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(me(Tr,"Using user provided OnlineComponentProvider"),await IS(n,n._uninitializedComponentsProvider._online)):(me(Tr,"Using default OnlineComponentProvider"),await IS(n,new Km))),n._onlineComponents}function YO(n){return BC(n).then((e=>e.syncEngine))}async function JO(n){const e=await BC(n),t=e.eventManager;return t.onListen=bO.bind(null,e.syncEngine),t.onUnlisten=MO.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=RO.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=kO.bind(null,e.syncEngine),t}function KO(n,e,t={}){const i=new pr;return n.asyncQueue.enqueueAndForget((async()=>(function(a,u,f,m,h){const v=new HO({next:S=>{v.Nu(),u.enqueueAndForget((()=>TO(a,T)));const I=S.docs.has(f);!I&&S.fromCache?h.reject(new Te(oe.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&S.fromCache&&m&&m.source==="server"?h.reject(new Te(oe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(S)},error:S=>h.reject(S)}),T=new AO(Rg(f.path),v,{includeMetadataChanges:!0,Ka:!0});return _O(a,T)})(await JO(n),n.asyncQueue,e,t,i))),i.promise}function $O(n,e){const t=new pr;return n.asyncQueue.enqueueAndForget((async()=>DO(await YO(n),e,t))),t.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HC(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jO="ComponentProvider",bS=new Map;function QO(n,e,t,i,o){return new hU(n,e,t,o.host,o.ssl,o.experimentalForceLongPolling,o.experimentalAutoDetectLongPolling,HC(o.experimentalLongPollingOptions),o.useFetchStreams,o.isUsingEmulator,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qC="firestore.googleapis.com",RS=!0;class NS{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Te(oe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=qC,this.ssl=RS}else this.host=e.host,this.ssl=e.ssl??RS;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=EC;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<T3)throw new Te(oe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}nU("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=HC(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Te(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Te(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Te(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Kg{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new NS({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Te(oe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Te(oe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new NS(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new Y4;switch(i.type){case"firstParty":return new j4(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Te(oe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=bS.get(t);i&&(me(jO,"Removing Datastore"),bS.delete(t),i.terminate())})(this),Promise.resolve()}}function WO(n,e,t,i={}){var h;n=go(n,Kg);const o=Oa(e),a=n._getSettings(),u={...a,emulatorOptions:n._getEmulatorOptions()},f=`${e}:${t}`;o&&(UA(`https://${f}`),OA("Firestore",!0)),a.host!==qC&&a.host!==f&&mo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m={...a,host:f,ssl:o,emulatorOptions:i};if(!uo(m,u)&&(n._setSettings(m),i.mockUserToken)){let v,T;if(typeof i.mockUserToken=="string")v=i.mockUserToken,T=sn.MOCK_USER;else{v=ZD(i.mockUserToken,(h=n._app)==null?void 0:h.options.projectId);const S=i.mockUserToken.sub||i.mockUserToken.user_id;if(!S)throw new Te(oe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new sn(S)}n._authCredentials=new J4(new Mw(v,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $g{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new $g(this.firestore,e,this._query)}}class Ft{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Iu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ft(this.firestore,e,this._key)}toJSON(){return{type:Ft._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Lu(t,Ft._jsonSchema))return new Ft(e,i||null,new Se(pt.fromString(t.referencePath)))}}Ft._jsonSchemaVersion="firestore/documentReference/1.0",Ft._jsonSchema={type:Pt("string",Ft._jsonSchemaVersion),referencePath:Pt("string")};class Iu extends $g{constructor(e,t,i){super(e,t,Rg(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ft(this.firestore,null,new Se(e))}withConverter(e){return new Iu(this.firestore,e,this._path)}}function $m(n,e,...t){if(n=ln(n),arguments.length===1&&(e=Sg.newId()),tU("doc","path",e),n instanceof Kg){const i=pt.fromString(e,...t);return zE(i),new Ft(n,null,new Se(i))}{if(!(n instanceof Ft||n instanceof Iu))throw new Te(oe.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(pt.fromString(e,...t));return zE(i),new Ft(n.firestore,n instanceof Iu?n.converter:null,new Se(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MS="AsyncQueue";class kS{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new CC(this,"async_queue_retry"),this._c=()=>{const i=tm();i&&me(MS,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=tm();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=tm();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new pr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!qa(e))throw e;me(MS,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,_s("INTERNAL UNHANDLED ERROR: ",DS(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=Hg.createAndSchedule(this,e,t,i,(a=>this.hc(a)));return this.tc.push(o),o}uc(){this.nc&&Ce(47125,{Pc:DS(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function DS(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Lf extends Kg{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new kS,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new kS(e),this._firestoreClient=void 0,await e}}}function XO(n,e){const t=typeof n=="object"?n:HA(),i=typeof n=="string"?n:sf,o=cg(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const a=WD("firestore");a&&WO(o,...a)}return o}function zC(n){if(n._terminated)throw new Te(oe.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||ZO(n),n._firestoreClient}function ZO(n){var i,o,a,u;const e=n._freezeSettings(),t=QO(n._databaseId,((i=n._app)==null?void 0:i.options.appId)||"",n._persistenceKey,(o=n._app)==null?void 0:o.options.apiKey,e);n._componentsProvider||(a=e.localCache)!=null&&a._offlineComponentProvider&&((u=e.localCache)!=null&&u._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new qO(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(m){const h=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(h),_online:h}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Kn(en.fromBase64String(e))}catch(t){throw new Te(oe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Kn(en.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Kn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Lu(e,Kn._jsonSchema))return Kn.fromBase64String(e.bytes)}}Kn._jsonSchemaVersion="firestore/bytes/1.0",Kn._jsonSchema={type:Pt("string",Kn._jsonSchemaVersion),bytes:Pt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jg{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Te(oe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Zt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gu{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Te(oe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Te(oe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return He(this._lat,e._lat)||He(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:qi._jsonSchemaVersion}}static fromJSON(e){if(Lu(e,qi._jsonSchema))return new qi(e.latitude,e.longitude)}}qi._jsonSchemaVersion="firestore/geoPoint/1.0",qi._jsonSchema={type:Pt("string",qi._jsonSchemaVersion),latitude:Pt("number"),longitude:Pt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let a=0;a<i.length;++a)if(i[a]!==o[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:pi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Lu(e,pi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new pi(e.vectorValues);throw new Te(oe.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}pi._jsonSchemaVersion="firestore/vectorValue/1.0",pi._jsonSchema={type:Pt("string",pi._jsonSchemaVersion),vectorValues:Pt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e5=/^__.*__$/;class t5{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Ar(e,this.data,this.fieldMask,t,this.fieldTransforms):new Vu(e,this.data,t,this.fieldTransforms)}}class YC{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Ar(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function JC(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ce(40011,{dataSource:n})}}class Qg{constructor(e,t,i,o,a,u){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,a===void 0&&this.validatePath(),this.fieldTransforms=a||[],this.fieldMask=u||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new Qg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var o;const t=(o=this.path)==null?void 0:o.child(e),i=this.contextWith({path:t,arrayElement:!1});return i.validatePathSegment(e),i}childContextForFieldPath(e){var o;const t=(o=this.path)==null?void 0:o.child(e),i=this.contextWith({path:t,arrayElement:!1});return i.validatePath(),i}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return ff(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(JC(this.dataSource)&&e5.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class n5{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||kf(e)}createContext(e,t,i,o=!1){return new Qg({dataSource:e,methodName:t,targetDoc:i,path:Zt.emptyPath(),arrayElement:!1,hasConverter:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function KC(n){const e=n._freezeSettings(),t=kf(n._databaseId);return new n5(n._databaseId,!!e.ignoreUndefinedProperties,t)}function i5(n,e,t,i,o,a={}){const u=n.createContext(a.merge||a.mergeFields?2:0,e,t,o);Zg("Data must be an object, but it was:",u,i);const f=$C(i,u);let m,h;if(a.merge)m=new Dn(u.fieldMask),h=u.fieldTransforms;else if(a.mergeFields){const v=[];for(const T of a.mergeFields){const S=bu(e,T,t);if(!u.contains(S))throw new Te(oe.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);WC(v,S)||v.push(S)}m=new Dn(v),h=u.fieldTransforms.filter((T=>m.covers(T.field)))}else m=null,h=u.fieldTransforms;return new t5(new Sn(f),m,h)}class Vf extends Gu{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Vf}}class Wg extends Gu{_toFieldTransform(e){return new oC(e.path,new Au)}isEqual(e){return e instanceof Wg}}class Xg extends Gu{constructor(e,t){super(e),this.Vc=t}_toFieldTransform(e){const t=new xu(e.serializer,tC(e.serializer,this.Vc));return new oC(e.path,t)}isEqual(e){return e instanceof Xg&&this.Vc===e.Vc}}function s5(n,e,t,i){const o=n.createContext(1,e,t);Zg("Data must be an object, but it was:",o,i);const a=[],u=Sn.empty();Sr(i,((m,h)=>{const v=QC(e,m,t);h=ln(h);const T=o.childContextForFieldPath(v);if(h instanceof Vf)a.push(v);else{const S=Uf(h,T);S!=null&&(a.push(v),u.set(v,S))}}));const f=new Dn(a);return new YC(u,f,o.fieldTransforms)}function r5(n,e,t,i,o,a){const u=n.createContext(1,e,t),f=[bu(e,i,t)],m=[o];if(a.length%2!=0)throw new Te(oe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<a.length;S+=2)f.push(bu(e,a[S])),m.push(a[S+1]);const h=[],v=Sn.empty();for(let S=f.length-1;S>=0;--S)if(!WC(h,f[S])){const I=f[S];let k=m[S];k=ln(k);const O=u.childContextForFieldPath(I);if(k instanceof Vf)h.push(I);else{const P=Uf(k,O);P!=null&&(h.push(I),v.set(I,P))}}const T=new Dn(h);return new YC(v,T,u.fieldTransforms)}function Uf(n,e){if(jC(n=ln(n)))return Zg("Unsupported field value:",e,n),$C(n,e);if(n instanceof Gu)return(function(i,o){if(!JC(o.dataSource))throw o.createError(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.createError(`${i._methodName}() is not currently supported inside arrays`);const a=i._toFieldTransform(o);a&&o.fieldTransforms.push(a)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(i,o){const a=[];let u=0;for(const f of i){let m=Uf(f,o.childContextForArray(u));m==null&&(m={nullValue:"NULL_VALUE"}),a.push(m),u++}return{arrayValue:{values:a}}})(n,e)}return(function(i,o){if((i=ln(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return tC(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const a=ct.fromDate(i);return{timestampValue:lf(o.serializer,a)}}if(i instanceof ct){const a=new ct(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:lf(o.serializer,a)}}if(i instanceof qi)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Kn)return{bytesValue:hC(o.serializer,i._byteString)};if(i instanceof Ft){const a=o.databaseId,u=i.firestore._databaseId;if(!u.isEqual(a))throw o.createError(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Dg(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof pi)return(function(u,f){const m=u instanceof pi?u.toArray():u;return{mapValue:{fields:{[Gw]:{stringValue:Bw},[rf]:{arrayValue:{values:m.map((v=>{if(typeof v!="number")throw f.createError("VectorValues must only contain numeric values.");return Ng(f.serializer,v)}))}}}}}})(i,o);if(TC(i))return i._toProto(o.serializer);throw o.createError(`Unsupported field value: ${Ag(i)}`)})(n,e)}function $C(n,e){const t={};return Pw(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Sr(n,((i,o)=>{const a=Uf(o,e.childContextForField(i));a!=null&&(t[i]=a)})),{mapValue:{fields:t}}}function jC(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof ct||n instanceof qi||n instanceof Kn||n instanceof Ft||n instanceof Gu||n instanceof pi||TC(n))}function Zg(n,e,t){if(!jC(t)||!kw(t)){const i=Ag(t);throw i==="an object"?e.createError(n+" a custom object"):e.createError(n+" "+i)}}function bu(n,e,t){if((e=ln(e))instanceof jg)return e._internalPath;if(typeof e=="string")return QC(n,e);throw ff("Field path arguments must be of type string or ",n,!1,void 0,t)}const o5=new RegExp("[~\\*/\\[\\]]");function QC(n,e,t){if(e.search(o5)>=0)throw ff(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new jg(...e.split("."))._internalPath}catch{throw ff(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function ff(n,e,t,i,o){const a=i&&!i.isEmpty(),u=o!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let m="";return(a||u)&&(m+=" (found",a&&(m+=` in field ${i}`),u&&(m+=` in document ${o}`),m+=")"),new Te(oe.INVALID_ARGUMENT,f+n+m)}function WC(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a5{convertValue(e,t="none"){switch(vr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return At(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(yr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ce(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Sr(e,((o,a)=>{i[o]=this.convertValue(a,t)})),i}convertVectorValue(e){var i,o,a;const t=(a=(o=(i=e.fields)==null?void 0:i[rf].arrayValue)==null?void 0:o.values)==null?void 0:a.map((u=>At(u.doubleValue)));return new pi(t)}convertGeoPoint(e){return new qi(At(e.latitude),At(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Cf(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Tu(e));default:return null}}convertTimestamp(e){const t=gr(e);return new ct(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=pt.fromString(e);Ze(_C(i),9688,{name:e});const o=new Eu(i.get(1),i.get(3)),a=new Se(i.popFirst(5));return o.isEqual(t)||_s(`Document ${a} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l5 extends a5{constructor(e){super(),this.firestore=e}convertBytes(e){return new Kn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ft(this.firestore,null,t)}}function im(){return new Wg("serverTimestamp")}function u5(n){return new Xg("increment",n)}const PS="@firebase/firestore",LS="4.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC{constructor(e,t,i,o,a){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Ft(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new c5(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const t=this._document.data.field(bu("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class c5 extends XC{data(){return super.data()}}function d5(n,e,t){let i;return i=n?n.toFirestore(e):e,i}class au{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class lo extends XC{constructor(e,t,i,o,a,u){super(e,t,i,o,u),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Gd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(bu("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Te(oe.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=lo._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}lo._jsonSchemaVersion="firestore/documentSnapshot/1.0",lo._jsonSchema={type:Pt("string",lo._jsonSchemaVersion),bundleSource:Pt("string","DocumentSnapshot"),bundleName:Pt("string"),bundle:Pt("string")};class Gd extends lo{data(e={}){return super.data(e)}}class pu{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new au(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new Gd(this._firestore,this._userDataWriter,i.key,i,new au(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Te(oe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,a){if(o._snapshot.oldDocs.isEmpty()){let u=0;return o._snapshot.docChanges.map((f=>{const m=new Gd(o._firestore,o._userDataWriter,f.doc.key,f.doc,new au(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);return f.doc,{type:"added",doc:m,oldIndex:-1,newIndex:u++}}))}{let u=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((f=>a||f.type!==3)).map((f=>{const m=new Gd(o._firestore,o._userDataWriter,f.doc.key,f.doc,new au(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);let h=-1,v=-1;return f.type!==0&&(h=u.indexOf(f.doc.key),u=u.delete(f.doc.key)),f.type!==1&&(u=u.add(f.doc),v=u.indexOf(f.doc.key)),{type:f5(f.type),doc:m,oldIndex:h,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Te(oe.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=pu._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Sg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],o=[];return this.docs.forEach((a=>{a._document!==null&&(t.push(a._document),i.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),o.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function f5(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ce(61501,{type:n})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */pu._jsonSchemaVersion="firestore/querySnapshot/1.0",pu._jsonSchema={type:Pt("string",pu._jsonSchemaVersion),bundleSource:Pt("string","QuerySnapshot"),bundleName:Pt("string"),bundle:Pt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jm(n){n=go(n,Ft);const e=go(n.firestore,Lf),t=zC(e);return KO(t,n._key).then((i=>p5(e,n,i)))}function ZC(n,e,t){n=go(n,Ft);const i=go(n.firestore,Lf),o=d5(n.converter,e),a=KC(i);return ex(i,[i5(a,"setDoc",n._key,o,n.converter!==null,t).toMutation(n._key,Bi.none())])}function h5(n,e,t,...i){n=go(n,Ft);const o=go(n.firestore,Lf),a=KC(o);let u;return u=typeof(e=ln(e))=="string"||e instanceof jg?r5(a,"updateDoc",n._key,e,t,i):s5(a,"updateDoc",n._key,e),ex(o,[u.toMutation(n._key,Bi.exists(!0))])}function ex(n,e){const t=zC(n);return $O(t,e)}function p5(n,e,t){const i=t.docs.get(e._key),o=new l5(n);return new lo(n,o,e._key,i,new au(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){z4(Fa),ba(new co("firestore",((i,{instanceIdentifier:o,options:a})=>{const u=i.getProvider("app").getImmediate(),f=new Lf(new K4(i.getProvider("auth-internal")),new Q4(u,i.getProvider("app-check-internal")),pU(u,o),u);return a={useFetchStreams:t,...a},f._setSettings(a),f}),"PUBLIC").setMultipleInstances(!0)),fr(PS,LS,e),fr(PS,LS,"esm2020")})();var m5="firebase",g5="12.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */fr(m5,g5,"app");const y5={apiKey:"AIzaSyB02KVy_9vZ6SH3k1RLXNYFOqGu0g5157U",authDomain:"cryptochart-ai.firebaseapp.com",projectId:"cryptochart-ai",storageBucket:"cryptochart-ai.firebasestorage.app",messagingSenderId:"1051444190882",appId:"1:1051444190882:web:a6579c72ef4c2c6c3141fb",measurementId:"G-KV7NMNYMVE"},tx=BA(y5),to=H4(tx),Qm=XO(tx),v5="users",sm=async(n,e,t)=>{const i=$m(Qm,v5,n);(await jm(i)).exists()||await ZC(i,{email:e,name:t,plan:"free",usageCount:0,createdAt:new Date().toISOString()})},ro={login:async(n,e)=>{const t=await bV(to,n,e);return{id:t.user.uid,email:t.user.email||"",name:t.user.displayName||""}},signup:async(n,e,t)=>{const i=await IV(to,n,e);return await sm(i.user.uid,n,t),{id:i.user.uid,email:i.user.email||"",name:t}},loginWithGoogle:async()=>{const n=new ds,e=await DE(to,n);return await sm(e.user.uid,e.user.email||"",e.user.displayName||""),{id:e.user.uid,email:e.user.email||"",name:e.user.displayName||""}},loginWithGithub:async()=>{const n=new fs,e=await DE(to,n);return await sm(e.user.uid,e.user.email||"",e.user.displayName||""),{id:e.user.uid,email:e.user.email||"",name:e.user.displayName||""}},resetPassword:async n=>{await xV(to,n)},logout:async()=>{await kV(to)},onAuthChanged:n=>MV(to,e=>{n(e?{id:e.uid,email:e.email||"",name:e.displayName||""}:null)})},_5=({onLogin:n})=>{const[e,t]=be.useState(!0),[i,o]=be.useState(""),[a,u]=be.useState(""),[f,m]=be.useState(""),[h,v]=be.useState(!1),[T,S]=be.useState(!1),[I,k]=be.useState(null),[O,P]=be.useState(""),[$,ee]=be.useState(!1),X=async j=>{j.preventDefault(),P(""),ee(!1),S(!0);try{if(e){const R=await ro.login(i,a);n(R)}else{if(!f.trim())throw new Error("Name is required");if(a.length<6)throw new Error("Password must be at least 6 characters");const R=await ro.signup(i,a,f);n(R)}}catch(R){const M=(R==null?void 0:R.code)||"";P(M==="auth/user-not-found"?"No account found with this email.":M==="auth/wrong-password"||M==="auth/invalid-credential"?"Invalid email or password.":M==="auth/email-already-in-use"?"This email is already registered.":M==="auth/weak-password"?"Password must be at least 6 characters.":M==="auth/invalid-email"?"Please enter a valid email address.":M==="auth/too-many-requests"?"Too many attempts. Please try again later.":R.message||"An error occurred")}finally{S(!1)}},re=async j=>{P(""),k(j);try{const R=j==="google"?await ro.loginWithGoogle():await ro.loginWithGithub();n(R)}catch(R){const M=(R==null?void 0:R.code)||"";P(M==="auth/popup-closed-by-user"?"Sign-in popup was closed.":M==="auth/account-exists-with-different-credential"?"An account already exists with this email using a different sign-in method.":R.message||"OAuth sign-in failed")}finally{k(null)}},ae=async()=>{if(!i.trim()){P('Enter your email first, then click "Forgot password?"');return}try{await ro.resetPassword(i),ee(!0),P("")}catch{P("Could not send reset email. Check the address and try again.")}};return A.jsxs("div",{className:"min-h-screen w-full flex flex-col lg:flex-row bg-[#05050a] text-white font-sans overflow-hidden selection:bg-cyan-500/30 relative",children:[A.jsxs("div",{className:"absolute inset-0 z-0 overflow-hidden",children:[A.jsx("div",{className:"absolute top-0 -left-4 w-96 h-96 bg-indigo-600 rounded-full mix-blend-multiply filter blur-[128px] opacity-40 animate-pulse"}),A.jsx("div",{className:"absolute top-0 -right-4 w-96 h-96 bg-cyan-600 rounded-full mix-blend-multiply filter blur-[128px] opacity-40"}),A.jsx("div",{className:"absolute -bottom-32 left-20 w-96 h-96 bg-fuchsia-600 rounded-full mix-blend-multiply filter blur-[128px] opacity-40"})]}),A.jsxs("div",{className:"flex-1 flex flex-col justify-center px-8 lg:px-20 py-12 relative z-10",children:[A.jsxs("div",{className:"flex items-center gap-3 mb-16",children:[A.jsxs("div",{className:"relative group",children:[A.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-cyan-400 to-indigo-500 rounded-lg blur opacity-40"}),A.jsx("div",{className:"relative bg-slate-900 p-2.5 rounded-lg border border-white/10",children:A.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})})]}),A.jsxs("span",{className:"text-sm font-bold tracking-widest uppercase text-slate-400",children:["CryptoChart",A.jsx("span",{className:"text-cyan-400",children:".AI"})]})]}),A.jsxs("div",{className:"max-w-2xl space-y-6 mb-16",children:[A.jsxs("h1",{className:"text-5xl lg:text-6xl font-extrabold tracking-tight leading-[1.1]",children:["See The",A.jsx("br",{}),A.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 via-indigo-400 to-fuchsia-400",children:"Matrix."})]}),A.jsx("p",{className:"text-lg text-slate-400 font-light leading-relaxed max-w-lg",children:"Upload any crypto chart. Our AI decodes liquidity, structure, and sentiment in seconds. Four powerful analysis modes at your fingertips."})]}),A.jsxs("div",{className:"grid grid-cols-2 gap-4 max-w-lg",children:[A.jsxs("div",{className:"bg-white/5 border border-white/10 p-5 rounded-2xl backdrop-blur-sm hover:bg-white/10 transition-colors group",children:[A.jsx("span",{className:"text-2xl mb-3 block group-hover:scale-110 transition-transform duration-500",children:""}),A.jsx("h3",{className:"text-sm font-semibold text-white mb-1",children:"Vision Mode"}),A.jsx("p",{className:"text-[11px] text-slate-500 leading-normal",children:"Pattern recognition & price action analysis."})]}),A.jsxs("div",{className:"bg-white/5 border border-white/10 p-5 rounded-2xl backdrop-blur-sm hover:bg-white/10 transition-colors group",children:[A.jsx("span",{className:"text-2xl mb-3 block group-hover:scale-110 transition-transform duration-500",children:""}),A.jsx("h3",{className:"text-sm font-semibold text-white mb-1",children:"Signal Mode"}),A.jsx("p",{className:"text-[11px] text-slate-500 leading-normal",children:"Probability metrics & alpha decoding."})]}),A.jsxs("div",{className:"col-span-2 bg-gradient-to-r from-cyan-500/10 to-indigo-500/10 border border-cyan-500/20 p-5 rounded-2xl flex items-center justify-between group cursor-default",children:[A.jsxs("div",{children:[A.jsx("h3",{className:"text-sm font-semibold text-white mb-1",children:"AI-Powered Analysis"}),A.jsx("p",{className:"text-[11px] text-slate-400",children:"Verify wins, scan market pulse, decode charts."})]}),A.jsx("div",{className:"w-10 h-10 rounded-full bg-cyan-500/20 flex items-center justify-center group-hover:rotate-12 transition-transform duration-500",children:A.jsx("span",{className:"text-lg",children:""})})]})]})]}),A.jsx("div",{className:"flex-1 relative flex items-center justify-center p-8 lg:p-0 z-20 overflow-hidden",children:A.jsxs("div",{className:"relative w-full max-w-[380px] bg-slate-900/90 backdrop-blur-2xl border border-white/10 p-8 rounded-3xl shadow-2xl shadow-cyan-500/5",children:[A.jsxs("div",{className:"mb-6 text-center",children:[A.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:e?"Welcome Back":"Get Started"}),A.jsx("p",{className:"text-xs text-slate-500 uppercase tracking-widest font-medium",children:e?"Access your dashboard":"Start analyzing charts today"})]}),A.jsxs("div",{className:"flex gap-3 mb-5",children:[A.jsxs("button",{type:"button",onClick:()=>re("google"),disabled:!!I,className:"flex-1 py-3 bg-white/5 hover:bg-white/10 border border-white/10 rounded-xl text-sm font-medium transition-all flex items-center justify-center gap-2 active:scale-[0.97] disabled:opacity-50",children:[I==="google"?A.jsx("div",{className:"w-4 h-4 border-2 border-white/20 border-t-white rounded-full animate-spin"}):A.jsxs("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",children:[A.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92a5.06 5.06 0 01-2.2 3.32v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.1z",fill:"#4285F4"}),A.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),A.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),A.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),A.jsx("span",{children:"Google"})]}),A.jsxs("button",{type:"button",onClick:()=>re("github"),disabled:!!I,className:"flex-1 py-3 bg-white/5 hover:bg-white/10 border border-white/10 rounded-xl text-sm font-medium transition-all flex items-center justify-center gap-2 active:scale-[0.97] disabled:opacity-50",children:[I==="github"?A.jsx("div",{className:"w-4 h-4 border-2 border-white/20 border-t-white rounded-full animate-spin"}):A.jsx("svg",{className:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})}),A.jsx("span",{children:"GitHub"})]})]}),A.jsxs("div",{className:"flex items-center gap-3 mb-5",children:[A.jsx("div",{className:"flex-1 h-px bg-white/10"}),A.jsx("span",{className:"text-[10px] text-slate-500 uppercase tracking-widest",children:"or continue with email"}),A.jsx("div",{className:"flex-1 h-px bg-white/10"})]}),A.jsxs("form",{onSubmit:X,className:"space-y-3.5",children:[!e&&A.jsxs("div",{className:"relative",children:[A.jsx("svg",{className:"absolute left-3.5 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),A.jsx("input",{type:"text",value:f,onChange:j=>m(j.target.value),className:"w-full bg-white/5 border border-white/10 rounded-xl py-3.5 pl-10 pr-4 text-sm text-white placeholder:text-slate-500 focus:outline-none focus:border-cyan-500 focus:bg-white/10 transition-all",placeholder:"Your Name"})]}),A.jsxs("div",{className:"relative",children:[A.jsx("svg",{className:"absolute left-3.5 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),A.jsx("input",{type:"email",value:i,onChange:j=>o(j.target.value),className:"w-full bg-white/5 border border-white/10 rounded-xl py-3.5 pl-10 pr-4 text-sm text-white placeholder:text-slate-500 focus:outline-none focus:border-cyan-500 focus:bg-white/10 transition-all",placeholder:"email@example.com",required:!0})]}),A.jsxs("div",{className:"relative",children:[A.jsx("svg",{className:"absolute left-3.5 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),A.jsx("input",{type:h?"text":"password",value:a,onChange:j=>u(j.target.value),className:"w-full bg-white/5 border border-white/10 rounded-xl py-3.5 pl-10 pr-11 text-sm text-white placeholder:text-slate-500 focus:outline-none focus:border-cyan-500 focus:bg-white/10 transition-all",placeholder:e?"Password":"Create password (min 6 chars)",required:!0,minLength:6}),A.jsx("button",{type:"button",onClick:()=>v(!h),className:"absolute right-3.5 top-1/2 -translate-y-1/2 text-slate-500 hover:text-slate-300 transition-colors",children:h?A.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):A.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]}),e&&A.jsx("div",{className:"text-right",children:A.jsx("button",{type:"button",onClick:ae,className:"text-[11px] text-cyan-400 hover:text-cyan-300 transition-colors",children:"Forgot password?"})}),O&&A.jsxs("div",{className:"p-3 bg-red-500/10 border border-red-500/20 rounded-lg flex items-center gap-2 text-xs text-red-400",children:[A.jsx("svg",{className:"w-3.5 h-3.5 shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),A.jsx("span",{children:O})]}),$&&A.jsxs("div",{className:"p-3 bg-emerald-500/10 border border-emerald-500/20 rounded-lg flex items-center gap-2 text-xs text-emerald-400",children:[A.jsx("svg",{className:"w-3.5 h-3.5 shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),A.jsx("span",{children:"Password reset email sent! Check your inbox."})]}),A.jsx("button",{type:"submit",disabled:T,className:"w-full py-3.5 bg-gradient-to-r from-cyan-500 to-indigo-500 text-white rounded-xl font-bold text-sm hover:from-cyan-400 hover:to-indigo-400 transition-all shadow-lg shadow-cyan-500/25 active:scale-[0.98] flex items-center justify-center gap-2 mt-1",children:T?A.jsx("div",{className:"w-4 h-4 border-2 border-white/20 border-t-white rounded-full animate-spin"}):A.jsxs(A.Fragment,{children:[A.jsx("span",{children:e?"Sign In":"Create Account"}),A.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14 5l7 7m0 0l-7 7m7-7H3"})})]})})]}),A.jsx("div",{className:"mt-5 text-center",children:A.jsx("button",{onClick:()=>{t(!e),P(""),ee(!1),u("")},className:"text-xs text-slate-500 hover:text-cyan-400 transition-colors border-b border-transparent hover:border-cyan-400 pb-0.5",children:e?"New here? Create an account":"Have an account? Sign in"})})]})})]})},VS="users",nx="velox:cryptochart-ai:usageCount:",rm=n=>{if(typeof window>"u")return 0;try{const e=window.localStorage.getItem(`${nx}${n}`),t=e?Number(e):0;return Number.isFinite(t)&&t>0?t:0}catch{return 0}},bd=(n,e)=>{if(!(typeof window>"u"))try{const t=Number.isFinite(e)&&e>0?Math.floor(e):0;window.localStorage.setItem(`${nx}${n}`,String(t))}catch{}},so={getUsageCount:async n=>{try{const e=$m(Qm,VS,n),t=await jm(e);if(t.exists()){const i=t.data().usageCount||0;return bd(n,i),i}return rm(n)}catch(e){return console.warn("Firestore getUsageCount failed:",e),rm(n)}},incrementUsage:async n=>{const e=$m(Qm,VS,n);try{const t=await jm(e);if(t.exists()){const o=(t.data().usageCount||0)+1;return bd(n,o),await h5(e,{usageCount:u5(1),lastUsedAt:im()}),o}return await ZC(e,{plan:"free",usageCount:1,createdAt:im(),lastUsedAt:im()}),bd(n,1),1}catch(t){console.warn("Firestore incrementUsage failed:",t);const i=rm(n)+1;return bd(n,i),i}},canPerformAction:async(n,e)=>await so.getUsageCount(n)<e},eu=3,om={images:[],isAnalyzing:!1,result:null,marketResult:null,signalResult:null,praiseResult:null,error:null};function T5(){const[n,e]=be.useState(!0),[t,i]=be.useState(null),[o,a]=be.useState(0),[u,f]=be.useState(!1),[m,h]=be.useState("landing"),[v,T]=be.useState("chart"),[S,I]=be.useState("single"),[k,O]=be.useState(om),[P,$]=be.useState(!0);be.useEffect(()=>{const N=ro.onAuthChanged(ge=>{ge?(i(ge),h("app"),so.getUsageCount(ge.id).then(a).catch(()=>a(0))):(i(null),a(0)),e(!1)});return()=>N()},[]);const ee=async()=>{if(t){const N=await so.getUsageCount(t.id);a(N)}},X=async()=>{await ro.logout(),i(null),h("landing")};be.useEffect(()=>{document.documentElement.classList.contains("dark")?$(!0):$(!1)},[]);const re=()=>{const N=!P;$(N),N?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")};be.useEffect(()=>{O(om)},[v]);const ae=async()=>{if(k.images.length!==0){if(t&&!await so.canPerformAction(t.id,eu)){await ee(),f(!0);return}O(N=>({...N,isAnalyzing:!0,error:null}));try{const N=await UD(k.images);O(ge=>({...ge,isAnalyzing:!1,praiseResult:N})),t&&(await so.incrementUsage(t.id),await ee())}catch(N){O(ge=>({...ge,isAnalyzing:!1,error:N.message||"Analysis failed"}))}}},j=async N=>{const ge=v==="news"?"chart":v;if(v==="news"&&T("chart"),ge==="praise"){O(fe=>({...fe,images:[...fe.images,...N],error:null,praiseResult:null,result:null,signalResult:null,marketResult:null}));return}if(t&&!await so.canPerformAction(t.id,eu)){await ee(),f(!0);return}O(fe=>({...fe,images:N,error:null,isAnalyzing:!0,result:null,signalResult:null,praiseResult:null,marketResult:null}));try{if(ge==="signal"){const fe=await VD(N[0].base64,N[0].mimeType);O(Y=>({...Y,isAnalyzing:!1,signalResult:fe}))}else if(ge==="chart")if(S==="market"){const fe=await kD(N[0].base64,N[0].mimeType);O(Y=>({...Y,isAnalyzing:!1,marketResult:fe}))}else{const fe=await MD(N[0].base64,N[0].mimeType);O(Y=>({...Y,isAnalyzing:!1,result:fe}))}t&&(await so.incrementUsage(t.id),await ee())}catch(fe){O(Y=>({...Y,isAnalyzing:!1,error:fe.message||"Something went wrong during analysis."}))}},R=()=>O(om),M=N=>O(ge=>({...ge,images:ge.images.filter((fe,Y)=>Y!==N)}));be.useEffect(()=>{if(m!=="app")return;const N=ge=>{var ue;const fe=ge.target;if(fe.tagName==="TEXTAREA"||fe.tagName==="INPUT"||fe.isContentEditable||k.isAnalyzing)return;const Y=(ue=ge.clipboardData)==null?void 0:ue.items;if(Y){for(let pe=0;pe<Y.length;pe++)if(Y[pe].type.indexOf("image")!==-1){const ke=Y[pe].getAsFile();if(!ke)continue;if(ge.preventDefault(),!lm.includes(ke.type)||ke.size>am*1024*1024)return;const Ke=new FileReader;Ke.onload=G=>{var ce;const ne=(ce=G.target)==null?void 0:ce.result;ne&&j([{base64:ne,mimeType:ke.type}])},Ke.readAsDataURL(ke);break}}};return window.addEventListener("paste",N),()=>window.removeEventListener("paste",N)},[k.isAnalyzing,v,S,m]);const U=(()=>{switch(v){case"signal":return{title:"Decoding Alpha...",subtitle:"Calculating probability metrics"};case"praise":return{title:"Verifying Win...",subtitle:"Generating hype content"};case"chart":return S==="market"?{title:"Scanning Heatmap...",subtitle:"Analyzing market breadth"}:{title:"Reading Price Action...",subtitle:"Identifying liquidity & patterns"};default:return{title:"Processing...",subtitle:"Please wait"}}})(),L=k.images&&k.images.length>0;if(n)return A.jsx("div",{className:"min-h-screen bg-[#05050a] flex items-center justify-center",children:A.jsxs("div",{className:"text-center",children:[A.jsx("div",{className:"w-16 h-16 border-4 border-cyan-900 border-t-cyan-400 rounded-full animate-spin mx-auto mb-6"}),A.jsx("p",{className:"text-slate-500 font-medium",children:"Loading..."})]})});if(!t)return A.jsx(_5,{onLogin:N=>{i(N),h("app")}});const B=()=>u?A.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:A.jsxs("div",{className:"bg-slate-900 rounded-3xl p-8 max-w-md w-full shadow-2xl border border-white/10 relative animate-fade-in",children:[A.jsx("button",{onClick:()=>f(!1),className:"absolute top-4 right-4 text-slate-500 hover:text-white transition-colors",children:A.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),A.jsxs("div",{className:"text-center",children:[A.jsx("div",{className:"w-16 h-16 bg-amber-500/10 border border-amber-500/20 rounded-2xl flex items-center justify-center mx-auto mb-4",children:A.jsx("svg",{className:"w-8 h-8 text-amber-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),A.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:"Free Tier Limit Reached"}),A.jsxs("p",{className:"text-slate-400 mb-6",children:["You've used ",A.jsx("span",{className:"font-bold text-white",children:o})," of ",A.jsx("span",{className:"font-bold text-white",children:eu})," free analyses."]}),A.jsx("div",{className:"w-full bg-white/5 rounded-full h-3 mb-6",children:A.jsx("div",{className:"bg-gradient-to-r from-amber-500 to-red-500 h-3 rounded-full transition-all",style:{width:`${Math.min(100,o/eu*100)}%`}})}),A.jsxs("div",{className:"bg-cyan-500/10 border border-cyan-500/20 rounded-2xl p-4 mb-6",children:[A.jsx("p",{className:"text-sm text-cyan-400 font-medium",children:" Pro subscription coming soon!"}),A.jsx("p",{className:"text-xs text-cyan-600 mt-1",children:"Unlimited chart analyses, all modes, and priority processing."})]}),A.jsx("button",{onClick:()=>f(!1),className:"w-full py-3 bg-white text-slate-900 rounded-xl font-bold hover:bg-slate-100 transition-colors",children:"Got it"})]})]})}):null;return A.jsxs("div",{className:"relative min-h-screen text-slate-800 dark:text-slate-200 selection:bg-cyan-500/30 selection:text-cyan-900 dark:selection:text-cyan-50 bg-slate-50 dark:bg-[#05050a] transition-colors duration-300 overflow-x-hidden",children:[A.jsx(B,{}),A.jsxs("div",{className:"fixed inset-0 z-0 overflow-hidden pointer-events-none",children:[A.jsx("div",{className:"absolute top-0 -left-4 w-96 h-96 bg-indigo-400 dark:bg-indigo-600 rounded-full mix-blend-multiply filter blur-[128px] opacity-20 dark:opacity-40 animate-blob"}),A.jsx("div",{className:"absolute top-0 -right-4 w-96 h-96 bg-cyan-400 dark:bg-cyan-600 rounded-full mix-blend-multiply filter blur-[128px] opacity-20 dark:opacity-40 animate-blob animation-delay-2000"}),A.jsx("div",{className:"absolute -bottom-32 left-20 w-96 h-96 bg-fuchsia-400 dark:bg-fuchsia-600 rounded-full mix-blend-multiply filter blur-[128px] opacity-20 dark:opacity-40 animate-blob animation-delay-4000"}),A.jsx("div",{className:"absolute inset-0 bg-[url('https://grainy-gradients.vercel.app/noise.svg')] opacity-10 dark:opacity-20 brightness-100 contrast-150"})]}),m==="landing"?A.jsx(HD,{onLaunch:()=>h("app")}):A.jsxs(A.Fragment,{children:[A.jsx("nav",{className:"fixed top-6 left-1/2 -translate-x-1/2 w-[92%] max-w-6xl z-50 animate-fade-in",children:A.jsxs("div",{className:"glass-panel rounded-2xl px-6 py-4 flex items-center justify-between shadow-xl dark:shadow-2xl border-white/20 dark:border-white/10",children:[A.jsxs("div",{className:"flex items-center gap-3 cursor-pointer",onClick:()=>h("landing"),children:[A.jsxs("div",{className:"relative group",children:[A.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-cyan-400 to-indigo-500 rounded-lg blur opacity-40 group-hover:opacity-75 transition duration-200"}),A.jsx("div",{className:"relative bg-white dark:bg-slate-900 p-2 rounded-lg border border-slate-200 dark:border-white/10",children:A.jsx("svg",{className:"w-6 h-6 text-indigo-600 dark:text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})})]}),A.jsxs("span",{className:"text-xl font-bold tracking-tight text-slate-800 dark:text-white",children:["CryptoChart",A.jsx("span",{className:"text-cyan-600 dark:text-cyan-400",children:".AI"})]})]}),A.jsxs("div",{className:"flex items-center gap-4",children:[A.jsxs("span",{className:"text-[10px] bg-cyan-500/10 text-cyan-400 px-2.5 py-1 rounded-full font-bold border border-cyan-500/20",children:[o,"/",eu]}),A.jsx("button",{onClick:re,className:"p-2 rounded-full bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors border border-slate-200 dark:border-white/10",title:"Toggle Theme",children:P?A.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}):A.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})})}),t&&A.jsxs("div",{className:"hidden sm:flex items-center gap-2 px-3 py-1.5 rounded-full bg-slate-100 dark:bg-slate-800 border border-slate-200 dark:border-white/10 text-slate-600 dark:text-slate-300",title:t.email||t.name,children:[A.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:2,children:[A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 7.5v9a2.25 2.25 0 0 1-2.25 2.25H4.5A2.25 2.25 0 0 1 2.25 16.5v-9A2.25 2.25 0 0 1 4.5 5.25h15A2.25 2.25 0 0 1 21.75 7.5z"}),A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m3 7.5 9 6 9-6"})]}),A.jsx("span",{className:"text-xs font-semibold max-w-[220px] truncate",children:t.email||t.name})]}),A.jsx("button",{onClick:X,className:"p-2 rounded-full bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-300 hover:bg-red-100 dark:hover:bg-red-900/30 hover:text-red-500 transition-colors border border-slate-200 dark:border-white/10",title:"Logout",children:A.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})})]})]})}),A.jsxs("div",{className:"pt-36 pb-20 px-4 sm:px-6 relative z-10 animate-fade-in",children:[A.jsxs("div",{className:"max-w-5xl mx-auto mb-12",children:[!L&&v!=="news"&&A.jsxs("div",{className:"mb-12 text-center animate-slide-up",children:[A.jsxs("h1",{className:"text-5xl md:text-7xl font-bold text-slate-900 dark:text-white tracking-tight mb-6 drop-shadow-sm dark:drop-shadow-lg transition-colors",children:["See The ",A.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-cyan-500 via-indigo-500 to-fuchsia-500 dark:from-cyan-400 dark:via-indigo-400 dark:to-fuchsia-400",children:"Matrix"})]}),A.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-400 max-w-2xl mx-auto leading-relaxed font-light",children:"Upload any crypto chart. Our AI decodes liquidity, structure, and sentiment in seconds."})]}),A.jsx("div",{className:"flex justify-center mb-10",children:A.jsx("div",{className:"inline-flex bg-white/40 dark:bg-slate-900/40 backdrop-blur-xl p-1.5 rounded-2xl border border-white/20 dark:border-white/10 shadow-xl relative transition-colors",children:[{id:"chart",label:"Vision",icon:""},{id:"signal",label:"Signal",icon:""},{id:"praise",label:"Verify",icon:""},{id:"news",label:"Pulse",icon:""}].map(N=>A.jsxs("button",{onClick:()=>T(N.id),className:`relative px-6 py-3 rounded-xl text-sm font-bold transition-all duration-300 flex items-center gap-2 ${v===N.id?"text-slate-900 dark:text-white shadow-[0_0_20px_rgba(34,211,238,0.2)]":"text-slate-500 hover:text-slate-800 dark:text-slate-500 dark:hover:text-slate-300"}`,children:[v===N.id&&A.jsx("span",{className:"absolute inset-0 bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-white/10 z-0"}),A.jsxs("span",{className:"relative z-10",children:[N.icon," ",N.label]})]},N.id))})})]}),A.jsxs("div",{className:"max-w-7xl mx-auto min-h-[400px]",children:[(v==="chart"||v==="signal"||v==="praise")&&A.jsx("div",{className:"transition-all duration-500 ease-out",children:v==="chart"&&k.result?A.jsx(ZI,{data:k.result,onReset:R}):v==="chart"&&k.marketResult?A.jsx(BD,{data:k.marketResult,onReset:R}):v==="signal"&&k.signalResult?A.jsx(FD,{data:k.signalResult,onReset:R}):v==="praise"&&k.praiseResult?A.jsx(GD,{data:k.praiseResult,onReset:R}):A.jsxs("div",{className:"max-w-4xl mx-auto animate-fade-in",children:[v==="chart"&&!L&&A.jsx("div",{className:"flex justify-center mb-8",children:A.jsxs("div",{className:"inline-flex bg-white/50 dark:bg-black/20 p-1 rounded-lg border border-slate-200 dark:border-white/5 backdrop-blur-sm",children:[A.jsx("button",{onClick:()=>I("single"),className:`px-6 py-2 text-xs font-bold rounded-md transition-all uppercase tracking-wider ${S==="single"?"bg-indigo-600 text-white shadow-lg shadow-indigo-500/25":"text-slate-500 hover:text-slate-900 dark:hover:text-white"}`,children:"Single Asset"}),A.jsx("button",{onClick:()=>I("market"),className:`px-6 py-2 text-xs font-bold rounded-md transition-all uppercase tracking-wider ${S==="market"?"bg-cyan-600 text-white shadow-lg shadow-cyan-500/25":"text-slate-500 hover:text-slate-900 dark:hover:text-white"}`,children:"Market Heatmap"})]})}),L?A.jsxs("div",{className:"space-y-8 animate-slide-up",children:[A.jsxs("div",{className:"relative rounded-3xl overflow-hidden glass-panel p-3",children:[A.jsxs("div",{className:"relative rounded-2xl overflow-hidden bg-white dark:bg-black/40 min-h-[400px] flex items-center justify-center border border-slate-200 dark:border-white/5",children:[k.images.length>1?A.jsx("div",{className:"grid grid-cols-2 gap-3 w-full p-3",children:k.images.map((N,ge)=>A.jsxs("div",{className:"relative group",children:[A.jsx("img",{src:N.base64,className:"w-full h-64 object-cover rounded-xl",alt:`Upload ${ge}`}),v==="praise"&&!k.isAnalyzing&&A.jsx("button",{onClick:()=>M(ge),className:"absolute top-2 right-2 bg-white/80 dark:bg-black/60 backdrop-blur p-2 rounded-lg text-slate-800 dark:text-white hover:bg-rose-500 hover:text-white transition-colors",children:A.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},ge))}):A.jsx("img",{src:k.images[0].base64,alt:"Analysis Target",className:"w-full h-auto max-h-[600px] object-contain"}),k.images.length===1&&v==="praise"&&!k.isAnalyzing&&A.jsx("button",{onClick:()=>M(0),className:"absolute top-4 right-4 bg-white/80 dark:bg-black/50 backdrop-blur text-slate-800 dark:text-white p-2 rounded-xl hover:bg-red-500/80 hover:text-white transition-all border border-slate-200 dark:border-white/10 shadow-lg",children:A.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),k.isAnalyzing&&A.jsxs("div",{className:"absolute inset-0 bg-white/80 dark:bg-black/60 backdrop-blur-xl flex flex-col items-center justify-center z-20",children:[A.jsxs("div",{className:"relative mb-8",children:[A.jsx("div",{className:"w-24 h-24 rounded-full border border-slate-300 dark:border-white/10 opacity-30 animate-[spin_3s_linear_infinite]"}),A.jsx("div",{className:"absolute top-0 left-0 w-24 h-24 rounded-full border-t-2 border-r-2 border-cyan-500 dark:border-cyan-400 animate-[spin_1s_linear_infinite]"}),A.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:A.jsx("div",{className:"w-2 h-2 bg-slate-800 dark:bg-white rounded-full animate-ping"})})]}),A.jsx("h3",{className:"text-2xl font-bold text-slate-800 dark:text-white tracking-widest uppercase animate-pulse",children:U.title}),A.jsx("p",{className:"text-cyan-600 dark:text-cyan-400/80 text-sm mt-3 font-mono",children:U.subtitle})]}),!k.isAnalyzing&&k.error&&A.jsxs("div",{className:"absolute inset-0 bg-white/90 dark:bg-black/80 backdrop-blur-xl flex flex-col items-center justify-center z-20 p-8 text-center",children:[A.jsx("div",{className:"w-20 h-20 bg-rose-500/10 rounded-full flex items-center justify-center mb-6 border border-rose-500/20 shadow-[0_0_30px_rgba(244,63,94,0.2)]",children:A.jsx("svg",{className:"w-10 h-10 text-rose-500 dark:text-rose-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),A.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white mb-2",children:"Interruption Detected"}),A.jsx("p",{className:"text-slate-600 dark:text-slate-400 mb-8 max-w-md leading-relaxed",children:k.error}),A.jsxs("div",{className:"flex gap-4",children:[A.jsx(vt,{onClick:()=>O(N=>({...N,error:null})),variant:"secondary",children:"Change Image"}),A.jsx(vt,{onClick:v==="praise"?ae:()=>j(k.images),children:"Try Again"})]})]})]}),v==="praise"&&!k.isAnalyzing&&A.jsxs("div",{className:"glass-panel p-6 rounded-2xl flex flex-col items-center gap-6 animate-slide-up",children:[A.jsxs("div",{className:"flex gap-4 w-full sm:w-auto",children:[A.jsx(vt,{onClick:ae,className:"flex-1 sm:flex-none px-12 py-4 text-lg bg-gradient-to-r from-emerald-500 to-cyan-500 hover:from-emerald-400 hover:to-cyan-400 shadow-[0_0_20px_rgba(16,185,129,0.3)]",children:"Verify Win "}),A.jsx(vt,{onClick:R,variant:"outline",className:"px-8",children:"Clear"})]}),A.jsx("div",{className:"w-full border-t border-slate-200 dark:border-white/5 pt-6 mt-2",children:A.jsx(N_,{onImagesSelected:j,isAnalyzing:k.isAnalyzing,multiple:!0,variant:"compact"})})]})]}):A.jsx("div",{className:"animate-slide-up",children:A.jsx(N_,{onImagesSelected:j,isAnalyzing:k.isAnalyzing,multiple:v==="praise"})})]})}),v==="news"&&A.jsx(OD,{})]})]})]})]})}const ix=document.getElementById("root");if(!ix)throw new Error("Could not find root element to mount to");const E5=YI.createRoot(ix);E5.render(A.jsx(UI.StrictMode,{children:A.jsx(T5,{})}));
